{"meta":{"title":"LinXunFengâ€˜s Blog","subtitle":null,"description":null,"author":"LinXunFeng","url":"http://linxunfeng.top"},"pages":[{"title":"","date":"2020-12-04T23:01:37.413Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"baidu_verify_9LgZ2AlWYS.html","permalink":"http://linxunfeng.top/baidu_verify_9LgZ2AlWYS.html","excerpt":"","text":"9LgZ2AlWYS"},{"title":"","date":"2020-12-04T23:01:37.413Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"googleb87ab619c549d502.html","permalink":"http://linxunfeng.top/googleb87ab619c549d502.html","excerpt":"","text":"google-site-verification: googleb87ab619c549d502.html"},{"title":"404 Not Foundï¼šè¯¥é¡µæ— æ³•æ˜¾ç¤º","date":"2020-12-04T23:01:37.413Z","updated":"2020-12-04T23:01:37.413Z","comments":false,"path":"/404.html","permalink":"http://linxunfeng.top/404.html","excerpt":"","text":""},{"title":"å…³äºä½œè€…","date":"2017-09-12T00:31:09.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"about/index.html","permalink":"http://linxunfeng.top/about/index.html","excerpt":"","text":"è”ç³»å¦‚æœ‰æ„å‘åˆä½œè€…ï¼Œè¯·\bè”ç³»æˆ‘ é‚®ç®±ï¼šlinxunfeng@yeah.net åæ ‡ï¼š \bæ·±åœ³"},{"title":"åˆ†ç±»","date":"2020-07-30T22:59:46.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"categories/index.html","permalink":"http://linxunfeng.top/categories/index.html","excerpt":"","text":""},{"title":"å‹æƒ…éˆæ¥","date":"2020-07-30T22:54:31.000Z","updated":"2020-12-04T23:01:37.569Z","comments":true,"path":"link/index.html","permalink":"http://linxunfeng.top/link/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2017-09-12T00:35:26.000Z","updated":"2020-12-04T23:01:37.569Z","comments":true,"path":"tags/index.html","permalink":"http://linxunfeng.top/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Flutter - ä½ç‰ˆæœ¬åœ¨iOS14ä¸Šé‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ","slug":"Flutter/Flutter - ä½ç‰ˆæœ¬åœ¨iOS14ä¸Šé‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ","date":"2020-09-29T00:00:00.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2020/09/29/Flutter/Flutter - ä½ç‰ˆæœ¬åœ¨iOS14ä¸Šé‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ/","link":"","permalink":"http://linxunfeng.top/2020/09/29/Flutter/Flutter%20-%20%E4%BD%8E%E7%89%88%E6%9C%AC%E5%9C%A8iOS14%E4%B8%8A%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/","excerpt":"è¿‘æœŸå°†æµ‹è¯•æœºå‡çº§è‡³ iOS14 ï¼Œæµ‹è¯•ä½¿ç”¨ Flutteræ··åˆå¼€å‘ çš„çº¿ä¸Š APPï¼Œæ²¡å‘ç°ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ä½¿ç”¨ Xcode å®‰è£…APP çš„åœºæ™¯ä¸‹ï¼Œæ–­å¼€ Xcode åå†è¿è¡Œå´é—ªé€€äº†ã€‚ +","text":"è¿‘æœŸå°†æµ‹è¯•æœºå‡çº§è‡³ iOS14 ï¼Œæµ‹è¯•ä½¿ç”¨ Flutteræ··åˆå¼€å‘ çš„çº¿ä¸Š APPï¼Œæ²¡å‘ç°ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ä½¿ç”¨ Xcode å®‰è£…APP çš„åœºæ™¯ä¸‹ï¼Œæ–­å¼€ Xcode åå†è¿è¡Œå´é—ªé€€äº†ã€‚ + ä¸€ã€æ¦‚è¿°è¿‘æœŸå°†æµ‹è¯•æœºå‡çº§è‡³ iOS14 ï¼Œæµ‹è¯•ä½¿ç”¨ Flutteræ··åˆå¼€å‘ çš„çº¿ä¸Š APPï¼Œæ²¡å‘ç°ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ä½¿ç”¨ Xcode å®‰è£…APPçš„åœºæ™¯ä¸‹ï¼Œæ–­å¼€ Xcode åå†è¿è¡Œå´é—ªé€€äº†ã€‚ å…¬å¸çš„ APP æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š APPæ¥æº æ˜¯å¦é—ªé€€ æ¨¡å¼ çº¿ä¸Š å¦ release è’²å…¬è‹± æ˜¯ debug Xcode æ˜¯ï¼ˆæ–­å¼€ Xcode åå†æ‰“å¼€ APP ï¼‰ debug é—®é¢˜åŸå› é—ªé€€çš„åŸå› æ˜¯å› ä¸º Flutter SDK, Flutter å®˜æ–¹çš„æ›´æ–°é€Ÿåº¦ä¹Ÿæ˜¯å¿«ï¼Œå¯¹ iOS14 è¿›è¡Œäº†è¯´æ˜ï¼š Flutterå®˜ç½‘è¯´æ˜é“¾æ¥ å¤§è‡´æ„æ€å°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ iOS14 çš„çœŸæœºä¸Šå®‰è£…äº† debugæ¨¡å¼ ç¼–è¯‘å‡ºæ¥çš„ flutter åº”ç”¨ï¼Œé‚£ä¹ˆåœ¨æ–­å¼€ç¼–è¯‘å®‰è£…è¿æ¥åï¼Œå°†æ— æ³•ä»æ¡Œé¢ä¸Šæ‰“å¼€è¯¥åº”ç”¨ç¨‹åºã€‚ è§£å†³æ–¹æ¡ˆ å†æ¬¡æ˜¯ä½¿ç”¨ Xcode æˆ– flutter run æ¥è¿è¡Œã€‚ è®¾ç½® Flutter æ¨¡å—çš„ç¼–è¯‘æ¨¡å¼ä¸º profile æˆ– release è¡¥å……è¯´æ˜ è¯¥é—ªé€€çš„æƒ…å†µåªå‘ç”Ÿåœ¨çœŸæœºï¼Œå¹¶ä¸”åœ¨æ¨¡æ‹Ÿå™¨è¿è¡Œçš„æ—¶å€™ï¼Œ Flutter æ¨¡å—çš„ç¼–è¯‘æ¨¡å¼éœ€è¦ä¸º debugï¼Œ å¦‚æœè®¾ç½®äº† releaseï¼Œç¼–è¯‘å°†ä¼šæŠ¥é”™ã€‚ å®˜æ–¹æŒ‡å‡ºå¦‚æœæ˜¯ çº¯Flutteré¡¹ç›® å¯ä»¥ç›´æ¥ä½¿ç”¨ master channel çš„ Flutterç‰ˆæœ¬ ç§’æ€è¿™ä¸ªé—®é¢˜ï¼Œä½†å¯¹æ··åˆå¼€å‘å¹¶æ²¡æœ‰è¯¥è¯´æ˜ï¼ŒåŠ ä¸Šæˆ‘ä»¬æ˜¯ä½¿ç”¨é—²é±¼çš„ flutter_boost å®ç°çš„æ··åˆå¼€å‘ï¼Œé™åˆ¶äº† Flutter çš„ç‰ˆæœ¬ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿå°±æ²¡æœ‰å»å®è·µè¯¥æ–¹æ¡ˆå¯¹æˆ‘ä»¬æ˜¯å¦å¯è¡Œ äºŒã€å°è¯•è§£å†³æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µï¼Œæˆ‘é€‰æ‹©äº†ä¸Šè¿°çš„ç¬¬äºŒä¸ªè§£å†³æ–¹æ¡ˆã€‚ é…ç½®ç”¨ Xcode æ‰“å¼€å·¥ç¨‹é¡¹ç›®ï¼Œåœ¨ Build Settings çš„æœ€ä¸‹æ–¹æ‰¾åˆ° User-Definedï¼Œç‚¹å‡» + æŒ‰é’®ï¼Œæ·»åŠ ä¸€ä¸ªé”®ä¸º FLUTTER_BUILD_MODE ï¼Œå€¼ä¸º release çš„é…ç½®ã€‚ è¿è¡Œå†æ¬¡è¿è¡Œåˆ°çœŸæœºä¸Šï¼Œæ–­å¼€ Xcode è¿è¡Œä¹Ÿä¸ä¼šå´©æºƒäº† é—®é¢˜çœŸæœºçš„é—®é¢˜çœ‹ä¼¼æ˜¯è§£å†³äº†ï¼Œä½†æ˜¯ä¼šæœ‰é—®é¢˜ é—®é¢˜ä¸€ï¼šrelease æˆ– profile æ¨¡å¼ä¸‹ï¼ŒFlutter ä½¿ç”¨çš„æ˜¯ AOTï¼Œä¸€äº›åŠŸèƒ½ä¸èƒ½ä½¿ç”¨ï¼Œå¦‚ï¼šä»£ç æ–­ç‚¹è°ƒè¯•ï¼Œçƒ­é‡è½½ é—®é¢˜äºŒï¼šä¸Šé¢ä¹Ÿæåˆ°äº†ï¼Œæ¨¡æ‹Ÿå™¨åªèƒ½è¿è¡Œåœ¨ debug æ¨¡å¼ä¸‹ï¼Œè€Œæˆ‘ä»¬æ— æ³•é¿å…ä¼šåœ¨çœŸæœºå’Œæ¨¡æ‹Ÿå™¨ä¹‹é—´åå¤åˆ‡æ¢è¿è¡Œï¼Œæ¯æ¬¡åˆ‡æ¢å°±éœ€è¦æ‰‹åŠ¨è°ƒæ•´ FLUTTER_BUILD_MODE çš„å€¼ï¼Œååˆ†éº»çƒ¦ é‚£æœ‰ä»€ä¹ˆå¥½çš„åŠæ³•è§£å†³ä¸Šé¢é‡åˆ°çš„é—®é¢˜å‘¢ï¼Ÿ ä¸‰ã€ä¼˜åŒ–æ–¹æ¡ˆå…¶å®ï¼ŒçœŸæœºä¸Šçš„ APP åœ¨æ–­å¼€ Xcode åæ— æ³•è¿è¡Œï¼Œè¿™ä¸ªå¯¹æˆ‘ä»¬å¼€å‘è€…æ¥è¯´ä¸æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Œé—®é¢˜æ˜¯ç»™åˆ°æµ‹è¯•äººå‘˜å°±å¿…é¡»è¦å¯ä»¥æ‰“å¼€æ‰è¡Œï¼ŒåŒ…æ‹¬è’²å…¬è‹±ä¸Šçš„åŒ…ï¼Œæ‰€ä»¥ä¸ºäº†èŠ‚çœè¿™äº›ä¸å¿…è¦çš„æ—¶é—´ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±åŠ¨æ‰‹æ’¸ä¸€ä¸ªå¸®åŠ©æˆ‘ä»¬åˆ‡æ¢ Flutterç¼–è¯‘æ¨¡å¼ çš„è„šæœ¬ã€‚ åœ¨ä¿®æ”¹ FLUTTER_BUILD_MODE çš„å€¼æ—¶ï¼Œæˆ‘ä» git ä¸­å‘ç°ï¼Œå®é™…ä¸Šæ˜¯ä¿®æ”¹äº† é¡¹ç›®.xcodeprojï¼Œé‚£ç›®å‰æœ‰ä»€ä¹ˆå·¥å…·å¯ä»¥å¸®åŠ©æˆ‘ä»¬ä¿®æ”¹ xcodeproj æ–‡ä»¶å‘¢ï¼Ÿ è¿™é‡Œæˆ‘æ‰¾åˆ°äº†mod-pbxprojï¼Œå®‰è£…å’Œä½¿ç”¨åœ¨è¯¥åº“çš„ wiki ä¸Šå†™çš„å¾ˆæ¸…æ¥šï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ï¼Œç›´æ¥ä¸Šä»£ç  1234567891011121314151617181920212223242526272829303132333435363738import getoptimport sysfrom pbxproj import XcodeProjectif __name__ == \"__main__\": argv = sys.argv[1:] # å¤„ç†flutter_build_mode flutter_build_mode = (False, \"release\") # targetåç§° target_name = None try: opts, args = getopt.getopt(argv, \"p:m:t:\", [\"path=, mode=, target=\"]) except getopt.GetoptError: print('switch_flutter_build_mode.py -p \"plistæ–‡ä»¶è·¯å¾„\" -m \"æ¨¡å¼(release|debug)\" -t \"targetåç§°\"') sys.exit(1) for opt, arg in opts: if opt in [\"-p\", \"--path\"]: project_path = arg if len(project_path) == 0: print('è¯·è¾“å…¥é¡¹ç›®çš„åœ°å€') sys.exit(2) if opt in [\"-m\", \"--mode\"]: flutter_build_mode = (True, arg if len(arg) &gt; 0 else \"release\") if opt in [\"-t\", \"--target\"]: target_name = arg # å¤„ç†flutter if flutter_build_mode[0]: fileName = project_path.split(\"/\")[-1] if not fileName.endswith(\"xcodeproj\"): print(\"è¯·ä½¿ç”¨-pæŒ‡å®š.xcodeprojæ–‡ä»¶çš„è·¯å¾„\") sys.exit(3) project = XcodeProject.load(project_path + '/project.pbxproj') # è®¾ç½® User-Defined (å¦‚æœtarget_nameæ˜¯Noneï¼Œåˆ™æ¯ä¸ªtargetéƒ½ä¼šè®¾ç½®flag) project.set_flags('FLUTTER_BUILD_MODE', flutter_build_mode[1], target_name) project.save() ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œç»ˆç«¯ç›´æ¥è¾“å…¥å¦‚ä¸‹å‘½ä»¤ 1python switch_flutter_build_mode.py -p 'xxx/é¡¹ç›®.xcodeproj' -t targetåç§° -m release å„å‚æ•°è¯´æ˜ å‚æ•° ç”¨é€” -p xcodeproj æ–‡ä»¶çš„è·¯å¾„ -t target åç§° -m ç¼–è¯‘æ¨¡å¼ ( releaseã€debugã€profile ) PS: è„šæœ¬åŸºäº Python3 æˆ‘ä»¬æ˜¯ä½¿ç”¨ Jenkins è¿›è¡Œæ‰“åŒ…å¹¶è‡ªåŠ¨ä¸Šä¼ è‡³è’²å…¬è‹±çš„ï¼Œæ‰€ä»¥åªéœ€è¦åœ¨ Jenkins ä¸­é…ç½®æ‰“åŒ…å‰è°ƒç”¨è¯¥è„šæœ¬å³å¯ã€‚ æœ€åå†ç»“åˆ Shuttle è¿™ä¸ªè½¯ä»¶ï¼Œå°±å¯ä»¥å®ç°ä»¥ç•Œé¢çš„æ–¹å¼å»åˆ‡æ¢ç¼–è¯‘æ¨¡å¼äº† å››ã€æœ€åè¯´ä¸¤å¥æœ¬æ–‡æ˜¯åŸºäº Flutteræ··åˆå¼€å‘ è¿›è¡Œè¯´æ˜çš„ï¼Œå¦‚æœæœ‰ä»€ä¹ˆä¸å¯¹æˆ–ä¸è¶³çš„åœ°æ–¹ï¼Œæ¬¢è¿æŒ‡æ­£ï¼Œæ„Ÿè°¢å¤§å®¶çš„é˜…è¯»","categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://linxunfeng.top/categories/Flutter/"}],"tags":[{"name":"Dart","slug":"Dart","permalink":"http://linxunfeng.top/tags/Dart/"},{"name":"Flutter","slug":"Flutter","permalink":"http://linxunfeng.top/tags/Flutter/"}]},{"title":"åˆ†äº« - Flutteræ‰“é€ å¥½ç”¨çš„æ‰“å°å·¥å…·ç±»","slug":"Share/åˆ†äº« - Flutteræ‰“é€ å¥½ç”¨çš„æ‰“å°å·¥å…·ç±»","date":"2020-09-11T00:00:00.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2020/09/11/Share/åˆ†äº« - Flutteræ‰“é€ å¥½ç”¨çš„æ‰“å°å·¥å…·ç±»/","link":"","permalink":"http://linxunfeng.top/2020/09/11/Share/%E5%88%86%E4%BA%AB%20-%20Flutter%E6%89%93%E9%80%A0%E5%A5%BD%E7%94%A8%E7%9A%84%E6%89%93%E5%8D%B0%E5%B7%A5%E5%85%B7%E7%B1%BB/","excerpt":"å¦‚æœæˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨å‡½æ•°æ—¶æ‹¿åˆ°å½“å‰è°ƒç”¨å †æ ˆï¼Œå°±å¯ä»¥å–åˆ°ä¸€ç³»åˆ—æƒ³è¦çš„æ•°æ®ã€‚ +","text":"å¦‚æœæˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨å‡½æ•°æ—¶æ‹¿åˆ°å½“å‰è°ƒç”¨å †æ ˆï¼Œå°±å¯ä»¥å–åˆ°ä¸€ç³»åˆ—æƒ³è¦çš„æ•°æ®ã€‚ + ä¸€ã€æ€è€ƒåš iOS å¼€å‘çš„åŒå­¦éƒ½çŸ¥é“ï¼Œæˆ‘ä»¬åœ¨å¹³æ—¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šç”¨åˆ°éå¸¸å®ç”¨çš„è‡ªå®šä¹‰æ‰“å°åŠŸèƒ½ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¿«é€Ÿå®šä½æ˜¯åœ¨å“ªä¸ªæ§åˆ¶å™¨ï¼Œå“ªä¸€è¡Œä»£ç ã€‚ åœ¨ OC å’Œ Swift ä¸­éƒ½å¯ä»¥å¾ˆè½»æ¾å®ç°ï¼Œå› ä¸ºç³»ç»Ÿæœ¬æ¥å°±æä¾›äº†ç”¨äºæ—¥å¿—è¾“å‡ºçš„é¢„å¤„ç†å®ï¼Œåªè¦æˆ‘ä»¬æ‹¿æ¥æ‹¼æ¥å°±å¯ä»¥äº†ï¼Œè¿™é‡Œä»¥ Swift çš„æ‰“å°ä¸ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374enum LogType: String &#123; case error = \"â¤ï¸ ERROR\" case warning = \"ğŸ’› WARNING\" case info = \"ğŸ’™ INFO\" case debug = \"ğŸ’š DEBUG\"&#125;let log = Logger.sharedfinal class Logger &#123; static let shared = Logger() private init() &#123; &#125; static let logDateFormatter: DateFormatter = &#123; let f = DateFormatter() f.dateFormat = \"yyyy-MM-dd HH:mm:ss.SSS\" return f &#125;()&#125;extension Logger &#123; func error&lt;T&gt;( _ message : T, file : StaticString = #file, function : StaticString = #function, line : UInt = #line ) &#123; LXFLog(message, type: .error, file : file, function: function, line: line) &#125; func warning&lt;T&gt;( _ message : T, file : StaticString = #file, function : StaticString = #function, line : UInt = #line ) &#123; LXFLog(message, type: .warning, file : file, function: function, line: line) &#125; func info&lt;T&gt;( _ message : T, file : StaticString = #file, function : StaticString = #function, line : UInt = #line ) &#123; LXFLog(message, type: .info, file : file, function: function, line: line) &#125; func debug&lt;T&gt;( _ message : T, file : StaticString = #file, function : StaticString = #function, line : UInt = #line ) &#123; LXFLog(message, type: .debug, file : file, function: function, line: line) &#125;&#125;// MARK:- è‡ªå®šä¹‰æ‰“å°æ–¹æ³•// target -&gt; Build Settings æœç´¢ Other Swift Flags// è®¾ç½®Debug æ·»åŠ  -D DEBUGfunc LXFLog&lt;T&gt;( _ message : T, type: LogType, file : StaticString = #file, function : StaticString = #function, line : UInt = #line) &#123; #if DEBUG let time = Logger.logDateFormatter.string(from: Date()) let fileName = (file.description as NSString).lastPathComponent print(\"\\(time) \\(type.rawValue) \\(fileName):(\\(line))-\\(message)\") #endif&#125; ä½¿ç”¨åŠæ‰“å°ç»“æœï¼š 1234567891011log.debug(\"models count -- \\(models.count)\")log.warning(\"models count -- \\(models.count)\")log.info(\"models count -- \\(models.count)\")log.error(\"models count -- \\(models.count)\")/*ğŸ’š DEBUG XXXViewController.swift:(79)-models count -- 10ğŸ’› WARNING XXXViewController.swift:(80)-models count -- 10ğŸ’™ INFO XXXViewController.swift:(81)-models count -- 10â¤ï¸ ERROR XXXViewController.swift:(82)-models count -- 10*/ OC å’Œ Swift çš„é¢„å¤„ç†å®å¯¹åº”è¡¨ OC Swift __FILE__ #file æ‰“å°å½“å‰æ–‡ä»¶è·¯å¾„ __LINE__ #line æ‰“å°å½“å‰è¡Œå·ï¼Œæ•´æ•° __FUNCTION__ #function æ‰“å°å½“å‰å‡½æ•°æˆ–æ–¹æ³• ä½†æ˜¯åœ¨ Dart ä¸­å¹¶æ²¡æœ‰æä¾›è¿™äº›åŠŸèƒ½ï¼Œä½†æ˜¯è¿™ä¸ªåŠŸèƒ½å¯¹æˆ‘ä»¬æ¥è¯´ç¡®å®åˆéå¸¸éœ€è¦ï¼Œé‚£æœ‰ä»€ä¹ˆåŠæ³•å®ç°å®ƒå‘¢ï¼Ÿ ğŸ¤” æˆ‘ä»¬å›æƒ³åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ˜¯ä¸æ˜¯å‘ç°åªè¦ä¸€ä¸å°å¿ƒæŠ›å¼‚å¸¸ï¼Œå°±å¯ä»¥çœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹çš„æ‰“å°å†…å®¹ï¼Œè€Œä¸”è¿˜èƒ½æ¸…æ¥šçš„çŸ¥é“å¼‚å¸¸æ˜¯åœ¨å“ªä¸ªæ–‡ä»¶å’Œå“ªä¸€è¡Œçš„ä»£ç é€ æˆçš„ã€‚ æ‰€ä»¥å¦‚æœæˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨å‡½æ•°æ—¶æ‹¿åˆ°å½“å‰è°ƒç”¨å †æ ˆï¼Œå°±å¯ä»¥å–åˆ°ä¸€ç³»åˆ—æƒ³è¦çš„æ•°æ®ã€‚ äºŒã€å®è·µåœ¨ dart:core ä¸­æä¾›äº† å †æ ˆè·Ÿè¸ª(StackTrace)ï¼Œå¯ä»¥é€šè¿‡ StackTrace.current å–åˆ°å½“å‰çš„å †æ ˆä¿¡æ¯ï¼Œæ‰“å°å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¼šå‘ç°è¿™ä¸å¥½æ‹¿åˆ°æˆ‘ä»¬æƒ³è¦çš„ä¿¡æ¯ã€‚ è¿™é‡Œæˆ‘ç”¨åˆ°äº†å®˜æ–¹å¼€å‘çš„ä¸€ä¸ªåŒ… stack_traceï¼Œå®ƒå¯ä»¥å°†å †æ ˆä¿¡æ¯å˜å¾—æ›´å¤šäººæ€§åŒ–ï¼Œå¹¶æ–¹ä¾¿æˆ‘ä»¬æŸ¥çœ‹å †æ ˆä¿¡æ¯å’Œè·å–æƒ³è¦çš„æ•°æ®ã€‚ ps: stack_trace åœ¨ Flutter ç¯å¢ƒä¸‹ç›´æ¥å¯¼åŒ…å³å¯ä½¿ç”¨ï¼Œè€Œåœ¨çº¯ Dart ä¸‹éœ€è¦å°†å…¶æ·»åŠ ä¸ºä¾èµ–äºpubspec.yamlä¸­ã€‚ 12dependencies: stack_trace: ^1.9.3 é‚£ä¸‹é¢æˆ‘ä»¬æ¥è¯•è¯• stack_trace çš„å¨åŠ›å§12345678import 'package:stack_trace/stack_trace.dart';// å°† StackTrace å¯¹è±¡è½¬æ¢æˆ Chain å¯¹è±¡// å½“ç„¶ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨ Chain.current();// final chain = Chain.current();final chain = Chain.forTrace(StackTrace.current);print(chain); æ‰“å°å†…å®¹ï¼š 123456789101112flutter: package:flutter_test1/main.dart 79:17 _MyHomePageState.test_printpackage:flutter_test1/main.dart 38:5 _MyHomePageState._incrementCounterpackage:flutter/src/material/ink_well.dart 779:19 _InkResponseState._handleTappackage:flutter/src/material/ink_well.dart 862:36 _InkResponseState.build.&lt;fn&gt;package:flutter/src/gestures/recognizer.dart 182:24 GestureRecognizer.invokeCallbackpackage:flutter/src/gestures/tap.dart 504:11 TapGestureRecognizer.handleTapUppackage:flutter/src/gestures/tap.dart 282:5 BaseTapGestureRecognizer._checkUppackage:flutter/src/gestures/tap.dart 254:7 BaseTapGestureRecognizer.acceptGesturepackage:flutter/src/gestures/arena.dart 156:27 GestureArenaManager.sweeppackage:flutter/src/gestures/binding.dart 222:20 GestureBinding.handleEventpackage:flutter/src/gestures/binding.dart 198:22 GestureBinding.dispatchEventpackage:flutter/src/gestures/binding.dart 156:7 GestureBinding._handle&lt;â€¦&gt; å·¥å…·ä»£ç é›å½¢ï¼š 12345678910111213import 'package:stack_trace/stack_trace.dart';// å°† StackTrace å¯¹è±¡è½¬æ¢æˆ Chain å¯¹è±¡// å½“ç„¶ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨ Chain.current();final chain = Chain.forTrace(StackTrace.current);// æ‹¿å‡ºå…¶ä¸­ä¸€æ¡ä¿¡æ¯final frames = chain.toTrace().frames;final frame = frames[1];// æ‰“å°print(\"æ‰€åœ¨æ–‡ä»¶ï¼š$&#123;frame.uri&#125; æ‰€åœ¨è¡Œ $&#123;frame.line&#125; æ‰€åœ¨åˆ— $&#123;frame.column&#125;\");// æ‰“å°ç»“æœ// flutter: æ‰€åœ¨æ–‡ä»¶ï¼špackage:flutterlog/main.dart æ‰€åœ¨è¡Œ 55 æ‰€åœ¨åˆ— 23 Frame ç±»çš„å±æ€§ 12345678910111213141516171819/// A single stack frame. Each frame points to a precise location in Dart code.class Frame &#123; /// The URI of the file in which the code is located. /// /// This URI will usually have the scheme `dart`, `file`, `http`, or `https`. final Uri uri; /// The line number on which the code location is located. /// /// This can be null, indicating that the line number is unknown or /// unimportant. final int line; /// The name of the member in which the code location occurs. /// /// Anonymous closures are represented as `&lt;fn&gt;` in this member string. final String member; ...&#125; uri : è·å–ä»£ç æ‰€åœ¨æ–‡ä»¶çš„è·¯å¾„ line : è·å–ä»£ç æ‰€åœ¨è¡Œ member : è·å–æ‰€åœ¨æ–¹æ³• æ‰“å°çœ‹ä¸€ä¸‹ : 12345678// uriprint(\"$&#123;frame.uri.toString()&#125;\"); // package:flutter_test1/main.dart// memberprint(\"$&#123;frame.member&#125;\"); // _MyHomePageState.scheduleAsync.&lt;fn&gt;// lineprint(\"$&#123;frame.line&#125;\"); // 97 ä¸‰ã€å‘ˆä¸Šä»£ç ä¸‹é¢æˆ‘åšäº†ä¸€ç‚¹å°è£…ï¼Œç›´æ¥æ‹¿èµ°å³å¯ä½¿ç”¨ï¼Œå®Œæ•´çš„ä»£ç å’Œç¤ºä¾‹è¯·åˆ°GitHubä¸Šã€æŸ¥çœ‹ã€‘ã€‚ ä»£ç ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344// log.dartenum FLogMode &#123; debug, // ğŸ’š DEBUG warning, // ğŸ’› WARNING info, // ğŸ’™ INFO error, // â¤ï¸ ERROR&#125;void FLog(dynamic msg, &#123; FLogMode mode = FLogMode.debug &#125;) &#123; if (kReleaseMode) &#123; // releaseæ¨¡å¼ä¸æ‰“å° return; &#125; var chain = Chain.current(); // Chain.forTrace(StackTrace.current); // å°† core å’Œ flutter åŒ…çš„å †æ ˆåˆèµ·æ¥ï¼ˆå³ç›¸å…³æ•°æ®åªå‰©å…¶ä¸­ä¸€æ¡ï¼‰ chain = chain.foldFrames((frame) =&gt; frame.isCore || frame.package == \"flutter\"); // å–å‡ºæ‰€æœ‰ä¿¡æ¯å¸§ final frames = chain.toTrace().frames; // æ‰¾åˆ°å½“å‰å‡½æ•°çš„ä¿¡æ¯å¸§ final idx = frames.indexWhere((element) =&gt; element.member == \"FLog\"); if (idx == -1 || idx+1 &gt;= frames.length) &#123; return; &#125; // è°ƒç”¨å½“å‰å‡½æ•°çš„å‡½æ•°ä¿¡æ¯å¸§ final frame = frames[idx+1]; var modeStr = \"\"; switch(mode) &#123; case FLogMode.debug: modeStr = \"ğŸ’š DEBUG\"; break; case FLogMode.warning: modeStr = \"ğŸ’› WARNING\"; break; case FLogMode.info: modeStr = \"ğŸ’™ INFO\"; break; case FLogMode.error: modeStr = \"â¤ï¸ ERROR\"; break; &#125; print(\"$modeStr $&#123;frame.uri.toString().split(\"/\").last&#125;($&#123;frame.line&#125;) - $msg \");&#125; å››ã€ä½¿ç”¨12345678// ç›´æ¥ä½¿ç”¨FLogFLog(\"flutter_log demo\");// modeï¼šæ‰“å°æ¨¡å¼ï¼ˆé»˜è®¤å€¼ä¸ºdebugï¼‰FLog(\"flutter_log demo\", mode: FLogMode.debug);FLog(\"flutter_log demo\", mode: FLogMode.warning);FLog(\"flutter_log demo\", mode: FLogMode.info);FLog(\"flutter_log demo\", mode: FLogMode.error); æ‰“å°æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š","categories":[{"name":"Share","slug":"Share","permalink":"http://linxunfeng.top/categories/Share/"}],"tags":[{"name":"Dart","slug":"Dart","permalink":"http://linxunfeng.top/tags/Dart/"},{"name":"Flutter","slug":"Flutter","permalink":"http://linxunfeng.top/tags/Flutter/"}]},{"title":"è§£å†³ Could not find 'faraday' ...  gem(s) (Gem::LoadError)","slug":"iOS/è§£å†³ Could not find faraday ...  gem(s) (Gem LoadError)","date":"2020-08-29T17:27:00.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2020/08/29/iOS/è§£å†³ Could not find faraday ...  gem(s) (Gem LoadError)/","link":"","permalink":"http://linxunfeng.top/2020/08/29/iOS/%E8%A7%A3%E5%86%B3%20Could%20not%20find%20faraday%20...%20%20gem(s)%20(Gem%20LoadError)/","excerpt":"`to_specsâ€™: Could not find â€˜faradayâ€™ (&gt;= 0.7.4) among 77 total gem(s) (Gem::LoadError) +","text":"`to_specsâ€™: Could not find â€˜faradayâ€™ (&gt;= 0.7.4) among 77 total gem(s) (Gem::LoadError) + ä¸€ã€é‡åˆ°çš„é—®é¢˜æŠ¥é”™å†…å®¹å¦‚ä¸‹ï¼š1234567891011121314151617/Users/lxf/.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/dependency.rb:319:in `to_specs': Could not find 'faraday' (&gt;= 0.7.4) among 77 total gem(s) (Gem::LoadError)Checked in 'GEM_PATH=/Users/lxf/.fastlane/bin/bundle/bin:/Users/lxf/.fastlane/bin/bundle/lib/ruby/gems/2.2.0', execute `gem env` for more information from /Users/lxf/.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/specification.rb:1439:in `block in activate_dependencies' from /Users/lxf/.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/specification.rb:1428:in `each' from /Users/lxf/.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/specification.rb:1428:in `activate_dependencies' from /Users/lxf/.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/specification.rb:1410:in `activate' from /Users/lxf/.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/specification.rb:1442:in `block in activate_dependencies' from /Users/lxf/.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/specification.rb:1428:in `each' from /Users/xxx/.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/specification.rb:1428:in `activate_dependencies' from /Users/lxf/.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/specification.rb:1410:in `activate' from /Users/lxf/.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems.rb:196:in `rescue in try_activate' from /Users/lxf/.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems.rb:193:in `try_activate' from /Users/lxf/.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:125:in `rescue in require' from /Users/lxf/.fastlane/bin/bundle/lib/ruby/site_ruby/2.2.0/rubygems/core_ext/kernel_require.rb:40:in `require' from /Users/lxf/.fastlane/bin/bundle/lib/ruby/gems/2.2.0/gems/fastlane-2.28.3/bin/fastlane:9:in `&lt;top (required)&gt;' from /Users/lxf/.fastlane/bin/bundle/bin/fastlane:22:in `load' from /Users/lxf/.fastlane/bin/bundle/bin/fastlane:22:in `&lt;main&gt;' åœ¨æ‰§è¡Œ fastlane å‘½ä»¤æ—¶é‡åˆ°äº†ä¸Šé¢é‚£ä¸ªé”™è¯¯ äºŒã€è§£å†³æ–¹æ¡ˆï¼šæ‰§è¡Œå¦‚ä¸‹å‡ è¡Œå‘½ä»¤å³å¯ï¼Œè§£å†³æ–¹æ¡ˆå‡ºè‡ª: é“¾æ¥123rm -rf $HOME/.fastlane/bin/bundle/lib/ruby/gems/2.2.0/gems/faraday-0.*rm -rf $HOME/.fastlane/bin/bundle/lib/ruby/gems/2.2.0/specifications/faraday-0.*gem install faraday -v 0.17.0 --install-dir $HOME/.fastlane/bin/bundle/lib/ruby/gems/2.2.0 æ¥ç€å†æ‰§è¡Œ fastlane å‘½ä»¤è¯•è¯•çœ‹å§~","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"}]},{"title":"Flutter - è§£å†³æ··åˆå¼€å‘iOSè„šæœ¬æ‰“åŒ…é‡åˆ°çš„é—®é¢˜","slug":"Flutter/Flutter - è§£å†³æ··åˆå¼€å‘iOSè„šæœ¬æ‰“åŒ…é‡åˆ°çš„é—®é¢˜","date":"2020-08-12T00:00:00.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2020/08/12/Flutter/Flutter - è§£å†³æ··åˆå¼€å‘iOSè„šæœ¬æ‰“åŒ…é‡åˆ°çš„é—®é¢˜/","link":"","permalink":"http://linxunfeng.top/2020/08/12/Flutter/Flutter%20-%20%E8%A7%A3%E5%86%B3%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91iOS%E8%84%9A%E6%9C%AC%E6%89%93%E5%8C%85%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/","excerpt":"ä½¿ç”¨Xcodeæ‰‹åŠ¨æ‰“åŒ…æ˜¯æ­£å¸¸çš„ï¼Œä½†æ˜¯ä½¿ç”¨è„šæœ¬æ‰“åŒ…ä¼šæŠ¥é”™ +","text":"ä½¿ç”¨Xcodeæ‰‹åŠ¨æ‰“åŒ…æ˜¯æ­£å¸¸çš„ï¼Œä½†æ˜¯ä½¿ç”¨è„šæœ¬æ‰“åŒ…ä¼šæŠ¥é”™ + ä½¿ç”¨ Xcode æ‰‹åŠ¨æ‰“åŒ…æ˜¯æ­£å¸¸çš„ï¼Œä½†æ˜¯ä½¿ç”¨è„šæœ¬æ‰“åŒ…ä¼šæŠ¥é”™ï¼Œé”™è¯¯å¦‚ä¸‹ï¼š 123456The following build commands failed: PhaseScriptExecution [CP-User]\\ Run\\ Flutter\\ Build\\ Script .../Script-C3A097A8FE12FF5F875B057C.sh flutter build ios --releasethen re-run Archive from Xcode.Command PhaseScriptExecution failed with a nonzero exit code å®šä½é”™è¯¯ åˆ° Flutter ç¯å¢ƒç›®å½•ä¸‹ï¼ŒæŒ‰å›¾ä¸Šæ‰€ç¤ºåœ°å€æ‰¾åˆ° xcode_backend.shï¼Œä¹Ÿå¯ä»¥ç›´æ¥çœ‹ å®˜æ–¹è„šæœ¬é“¾æ¥ 123456789101112# Archive builds (ACTION=install) should always run in release mode.if [[ \"$ACTION\" == \"install\" &amp;&amp; \"$build_mode\" != \"release\" ]]; then EchoError \"========================================================================\" EchoError \"ERROR: Flutter archive builds must be run in Release mode.\" EchoError \"\" EchoError \"To correct, ensure FLUTTER_BUILD_MODE is set to release or run:\" EchoError \"flutter build ios --release\" EchoError \"\" EchoError \"then re-run Archive from Xcode.\" EchoError \"========================================================================\" exit -1fi è§£å†³æ–¹æ¡ˆå¯ä»¥çœ‹åˆ°ï¼Œå®˜æ–¹è„šæœ¬çš„è¯´æ˜é‡Œé¢ç»™å‡ºä¸¤ä¸ªè§£å†³æ–¹æ¡ˆ æ–¹æ¡ˆä¸€ï¼šç›´æ¥è®¾ç½® FLUTTER_BUILD_MODE ä¸º release æ–¹æ¡ˆäºŒï¼šå…ˆè¿è¡Œ flutter build ios --release ï¼Œå†ä½¿ç”¨ Xcode å»æ‰“åŒ… è¿™é‡Œæˆ‘ä»¬æ˜¯ç”¨ Jenkins è„šæœ¬è¿›è¡Œæ‰“åŒ…ï¼Œæ‰€ä»¥æ–¹æ¡ˆäºŒä¸é€‚ç”¨ï¼Œæ–¹æ¡ˆä¸€æ›´åŠ æ–¹ä¾¿äº› 12345# è®¾ç½®Flutterçš„ç¼–è¯‘æ¨¡å¼ä¸ºreleaseexport FLUTTER_BUILD_MODE=release# æ‰§è¡ŒåŸæœ‰é¡¹ç›®çš„æ‰“åŒ…è„šæœ¬./script/build_iOS.sh","categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://linxunfeng.top/categories/Flutter/"}],"tags":[{"name":"Dart","slug":"Dart","permalink":"http://linxunfeng.top/tags/Dart/"},{"name":"Flutter","slug":"Flutter","permalink":"http://linxunfeng.top/tags/Flutter/"}]},{"title":"Flutter - æ··åˆå¼€å‘","slug":"Flutter/Flutter - æ··åˆå¼€å‘","date":"2020-07-12T00:00:00.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2020/07/12/Flutter/Flutter - æ··åˆå¼€å‘/","link":"","permalink":"http://linxunfeng.top/2020/07/12/Flutter/Flutter%20-%20%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/","excerpt":"ç›®å‰å¤§å¤šæ•°å…¬å¸éƒ½æœ‰è‡ªå·±å¼€å‘å¤šå¹´çš„é¡¹ç›®ï¼Œä¸å¯èƒ½ç›´æ¥ç”¨ Flutter ä»å¤´å¼€å‘ä¸€å¥—ï¼Œé‚£æ ·ä¸å®ç°ï¼Œé™¤éæ˜¯å°é¡¹ç›®ï¼Œå› æ­¤åªèƒ½æ˜¯åœ¨åŸæœ‰çš„åŸºç¡€ä¸Šç”¨ Flutter æ¥å¼€å‘æ–°ä¸šåŠ¡æˆ–é‡æ„æ—§ä¸šåŠ¡ï¼Œè€Œè¿™é‡Œå°±éœ€è¦ç”¨åˆ° Flutter çš„ æ··åˆå¼€å‘ +","text":"ç›®å‰å¤§å¤šæ•°å…¬å¸éƒ½æœ‰è‡ªå·±å¼€å‘å¤šå¹´çš„é¡¹ç›®ï¼Œä¸å¯èƒ½ç›´æ¥ç”¨ Flutter ä»å¤´å¼€å‘ä¸€å¥—ï¼Œé‚£æ ·ä¸å®ç°ï¼Œé™¤éæ˜¯å°é¡¹ç›®ï¼Œå› æ­¤åªèƒ½æ˜¯åœ¨åŸæœ‰çš„åŸºç¡€ä¸Šç”¨ Flutter æ¥å¼€å‘æ–°ä¸šåŠ¡æˆ–é‡æ„æ—§ä¸šåŠ¡ï¼Œè€Œè¿™é‡Œå°±éœ€è¦ç”¨åˆ° Flutter çš„ æ··åˆå¼€å‘ + ç›®å‰å¤§å¤šæ•°å…¬å¸éƒ½æœ‰è‡ªå·±å¼€å‘å¤šå¹´çš„é¡¹ç›®ï¼Œä¸å¯èƒ½ç›´æ¥ç”¨ Flutter ä»å¤´å¼€å‘ä¸€å¥—ï¼Œé‚£æ ·ä¸å®ç°ï¼Œé™¤éæ˜¯å°é¡¹ç›®ï¼Œå› æ­¤åªèƒ½æ˜¯åœ¨åŸæœ‰çš„åŸºç¡€ä¸Šç”¨ Flutter æ¥å¼€å‘æ–°ä¸šåŠ¡æˆ–é‡æ„æ—§ä¸šåŠ¡ï¼Œè€Œè¿™é‡Œå°±éœ€è¦ç”¨åˆ° Flutter çš„ æ··åˆå¼€å‘ ä¸€ã€åˆ›å»ºFlutteræ¨¡å—ä½¿ç”¨æ··åˆå¼€å‘å°±ä¸èƒ½åƒä¹‹å‰ä¸€æ ·ç›´æ¥ä¸Šæ¥å°±åˆ›å»ºä¸€ä¸ª Flutter é¡¹ç›®ï¼Œè€Œæ˜¯è¦ä½¿ç”¨ Flutteræ¨¡æ¿ 12345# flutter_module_lxf å¯ä»¥éšä¾¿ä½ å‘½åflutter create --template module flutter_module_lxf# --template å¯ä»¥æ›¿æ¢ä¸º -t# flutter create -t module flutter_module_lxf åˆ›å»ºå‡ºæ¥çš„ Flutter æ¨¡å—ä¾ç„¶æ˜¯å¯ä»¥åƒä¹‹å‰åˆ›å»ºçš„Flutteré¡¹ç›® ä¸€æ ·æ‰“å¼€å’Œè¿è¡Œçš„ã€‚ ç›®å½•ä¸‹æœ‰ä¹Ÿæœ‰ ios å’Œ android ç›®å½•ï¼Œåªä¸è¿‡å‰é¢åŠ äº†ä¸ªç‚¹ ï¼Œæˆäº†ç‚¹ç›®å½•ã€‚ äºŒã€iOSé›†æˆ é€šè¿‡ Cocoapods ï¼Œå°† Flutter æ¨¡å—ç¼–è¯‘æˆä¸€ä¸ªåº“ï¼Œå†åˆ°åŸç”Ÿé¡¹ç›®ä¸­è¿›è¡Œå¼•å…¥å’Œä½¿ç”¨å³å¯ åœ¨ Podfile ä¸­æ·»åŠ ä¸¤è¡Œé…ç½® 12345# æŒ‡å®šæˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ Flutter æ¨¡å—çš„è·¯å¾„flutter_application_path = '../flutter_module_lxf'# æ‹¼æ¥è„šæœ¬æ–‡ä»¶çš„è·¯å¾„: .ios/Flutter/podhelper.rbload File.join(flutter_application_path, '.ios', 'Flutter', 'podhelper.rb') åœ¨æ¯ä¸ªéœ€è¦å¼•ç”¨ Flutter çš„ Target ä¸‹ï¼Œéƒ½éœ€è¦æ·»åŠ ä¸€è¡Œé…ç½® 1install_all_flutter_pods(flutter_application_path) æ·»åŠ åå¦‚ä¸‹æ‰€ç¤ºï¼š 123456789flutter_application_path = '../flutter_module_lxf'load File.join(flutter_application_path, '.ios', 'Flutter', 'podhelper.rb')use_frameworks!target 'LXFFlutterHybridDemo' do install_all_flutter_pods(flutter_application_path) end æ·»åŠ å®Œæˆåï¼Œæ‰§è¡Œä¸€æ¬¡ pod install æ··åˆå¼€å‘æ··åˆå¼€å‘ ä½¿ç”¨ ä¸¤ä¸ªæ­¥éª¤ è·å– Flutterå¼•æ“ FlutterEngine é€šè¿‡ FlutterEngine åˆ›å»º FlutterViewController åŸºæœ¬ä½¿ç”¨AppDelegate ç±»ä¸­å£°æ˜ä¸€ä¸ª FlutterEngine å˜é‡ï¼Œåœ¨ didFinishLaunchingWithOptions æ–¹æ³•ä¸­å¯åŠ¨ Flutterå¼•æ“ 1234567891011121314151617181920// AppDelegate.swiftimport Flutter@UIApplicationMainclass AppDelegate: UIResponder, UIApplicationDelegate &#123; // åˆ›å»º Flutterå¼•æ“ lazy var flutterEngine = FlutterEngine(name: \"lxf\") func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -&gt; Bool &#123; // å¯åŠ¨ Flutterå¼•æ“ flutterEngine.run() return true &#125; ...&#125; ViewController ä¸­æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»å¼¹å‡º Flutteræ¨¡å— 1234567891011121314151617181920212223// ViewController.swiftoverride func viewDidLoad() &#123; super.viewDidLoad() let btn = UIButton(type: .custom) btn.frame = CGRect(x: 100, y: 200, width: 200, height: 44) btn.backgroundColor = .black btn.addTarget(self, action: #selector(showFlutterVc), for: .touchUpInside) btn.setTitle(\"å¼¹å‡ºFlutteræ¨¡å—\", for: .normal) self.view.addSubview(btn)&#125;@objc func showFlutterVc() &#123; // åˆ›å»ºFlutterViewController // è¿™é‡Œçš„ engine å¯ä»¥ä¼  nilï¼ŒFlutterä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªå¼•æ“ï¼Œä½†æ˜¯æ€§èƒ½è¾ƒå·® let flutterVc = FlutterViewController(engine: fetchFlutterEngine(), nibName: nil, bundle: nil) self.present(flutterVc, animated: true, completion: nil)&#125;func fetchFlutterEngine() -&gt; FlutterEngine &#123; return (UIApplication.shared.delegate as! AppDelegate).flutterEngine&#125; å¦‚æœé‡åˆ°æŠ¥ Command PhaseScriptExecution failed with a nonzero exit code é”™è¯¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è¯·å…ˆç”¨ Android Studio æˆ– VSCode æ‰“å¼€ Flutteræ¨¡å— é¡¹ç›®å¹¶è¿è¡Œåˆ°iOSè®¾å¤‡ä¸Šï¼Œè®©å…¶å¸®æˆ‘ä»¬å¯¹iOSé¡¹ç›®è¿›è¡Œä¸€äº›åˆå§‹åŒ–é…ç½®ã€‚æˆåŠŸè¿è¡Œåå°±å¯ä»¥å…³é—­ Flutteræ¨¡å— é¡¹ç›®çš„è¿è¡Œäº†ï¼Œæ¥ç€å†ç”¨ Xcode æ‰“å¼€åŸç”Ÿé¡¹ç›®è¿è¡Œå³å¯ã€‚ ä¿®æ”¹åˆå§‹è·¯ç”±å®˜æ–¹æ–‡æ¡£é‡Œé¢æåˆ°ï¼Œä¿®æ”¹åˆå§‹è·¯ç”±ï¼Œéœ€è¦åœ¨ Flutterå¼•æ“ åœ¨ run ä¹‹å‰ï¼Œé€šè¿‡ invokeMethod è°ƒç”¨ setInitialRoute æ–¹æ³•è¿›è¡Œè®¾ç½®ï¼Œä»£ç å¦‚ä¸‹ 1234// ä¿®æ”¹åˆå§‹è·¯ç”±flutterEngine.navigationChannel.invokeMethod(\"setInitialRoute\", arguments: \"/other\")// å¯åŠ¨ Flutterå¼•æ“flutterEngine.run() ä½†æ˜¯ï¼Œæˆ‘å‘ç°è¿™æ ·å†™å¹¶æ²¡æœ‰èµ·ä»»ä½•ä½œç”¨ï¼Œåœ¨ Flutter çš„å®˜æ–¹ issue ä¸Šä¹Ÿæœ‰äººæåˆ°è¿™ä¸ªé—®é¢˜ï¼š ã€setInitialRoute is broken for iOS add-to-app #59895ã€‘ï¼Œç›®å‰åªèƒ½å®˜æ–¹è¿›è¡Œä¿®å¤å’Œè°ƒæ•´ API ä¸´æ—¶å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼å®ç°ï¼š 123let flutterVc = FlutterViewController(project: FlutterDartProject(), nibName: nil, bundle: nil)flutterVc.setInitialRoute(\"/other\")self.present(flutterVc, animated: true, completion: nil) è™½ç„¶è¿™ä¹ˆå†™å¯ä»¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œä½†æ˜¯ä¼šæœ‰æ˜æ˜¾çš„ç±»ä¼¼å¡é¡¿çš„ç°è±¡ï¼Œå› ä¸ºä½¿ç”¨è¿™ç§æ–¹å¼å»åˆ›å»º FlutterViewController ä¹‹å‰ï¼Œä¼šéšå¼åˆ›å»ºå’Œå¯åŠ¨ä¸€ä¸ª FlutterEngineï¼Œè€Œæˆ‘ä»¬å¼¹å‡º FlutterViewController æ—¶ FlutterEngine è¿˜æ²¡åŠ è½½å®Œæ¯•ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šçœ‹åˆ°å…ˆå¼¹å‡ºäº†ä¸€ä¸ªé€æ˜çš„ç•Œé¢ï¼Œå†æ˜¾ç¤º /other è·¯ç”±å¯¹åº”çš„ç•Œé¢è§†å›¾ã€‚ ä½¿ç”¨ FlutterAppDelegateä½¿ç”¨ FlutterAppDelegateè¿™ä¸ªä¸æ˜¯å¿…è¦çš„æ“ä½œï¼Œä½†æ˜¯å¦‚æœä½ æƒ³è®© Flutteræ¨¡å— ä¹Ÿèƒ½ä½¿ç”¨åŸç”Ÿçš„åŠŸèƒ½çš„è¯ï¼Œå»ºè®®ä½¿ç”¨ åŸç”ŸåŠŸèƒ½ å¤„ç† openURL çš„å›è°ƒ åˆ—è¡¨è§†å›¾åœ¨ç‚¹å‡»çŠ¶æ€æ åæ»šåˆ°é¡¶éƒ¨ 1class AppDelegate: FlutterAppDelegate æ›´å…·ä½“çš„ä½¿ç”¨ï¼Œè¯·é˜…è¯» å®˜æ–¹æ–‡æ¡£ ä¸‰ã€Androidä¿®æ”¹å®‰å“é¡¹ç›® æ ¹ç›®å½•ä¸‹çš„ settings.gradle æ–‡ä»¶ 123456789// settings.gradleinclude ':app' // assumed existing contentsetBinding(new Binding([gradle: this])) // newevaluate(new File( // new settingsDir.parentFile, // new // è¿™é‡Œçš„ flutter_module_lxf è¯·ä¿®æ”¹ä¸ºä½ è‡ªå·±åˆ›å»ºçš„Flutteræ¨¡æ¿ç›®å½•åç§° 'flutter_module_lxf/.android/include_flutter.groovy' // new)) ä¿®æ”¹å®‰å“é¡¹ç›® app ç›®å½•ä¸‹çš„ build.gradle æ–‡ä»¶ 1234567// app/build.gradledependencies &#123; ... // é…ç½®flutterä¾èµ– implementation project(':flutter')&#125; å¦‚æœåœ¨ç¼–è¯‘çš„æ—¶å€™é‡åˆ°å¦‚ä¸‹é”™è¯¯ 1Default interface methods are only supported starting with Android N (--min-api 24): void androidx.lifecycle.DefaultLifecycleObserver.onCreate(androidx.lifecycle.LifecycleOwner) è¯·ç¡®è®¤æ˜¯å¦æŒ‡å®šäº†ä½¿ç”¨ Java 8 è¿›è¡Œç¼–è¯‘ ã€å®˜æ–¹æ–‡æ¡£ - Java 8 requirementã€‘ ä¿®æ”¹å®‰å“é¡¹ç›® app ç›®å½•ä¸‹çš„ build.gradle æ–‡ä»¶ 12345678910&#x2F;&#x2F; app&#x2F;build.gradleandroid &#123; ... compileOptions &#123; sourceCompatibility 1.8 targetCompatibility 1.8 &#125; ...&#125; ä¿®æ”¹ app/src/main/AndroidManifest.xml æ–‡ä»¶ 123456789// app/src/main/AndroidManifest.xml&lt;activity android:name=\"io.flutter.embedding.android.FlutterActivity\" android:theme=\"@style/AppTheme\" android:configChanges=\"orientation|keyboardHidden|keyboard|screenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode\" android:hardwareAccelerated=\"true\" android:windowSoftInputMode=\"adjustResize\" /&gt; æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»å¼¹å‡º Flutteræ¨¡å— 12345678910111213&lt;!-- activity_main.xml --&gt;&lt;Button android:id=\"@+id/btn\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:textSize=\"20sp\" android:text=\"å¼¹å‡ºFlutteræ¨¡å—\" android:background=\"#000000\" android:textColor=\"#ffffff\" android:gravity=\"center\" android:onClick=\"btnClick\" /&gt; 1234567// MainActivity.javapublic void btnClick(View v) &#123; startActivity( FlutterActivity.createDefaultIntent(this) );&#125; å››ã€è°ƒè¯•ä¸çƒ­é‡è½½ ç”±äºå½“å‰æˆ‘ä»¬æ˜¯ä½¿ç”¨åŸç”Ÿå¼€å‘å·¥å…·(å¦‚ï¼šXcode)æ¥è¿è¡Œé¡¹ç›®ï¼Œæ¯æ¬¡ä¿®æ”¹æˆ‘ä»¬çš„ Flutteræ¨¡å— çš„ä»£ç ï¼Œä¹Ÿå°±éœ€è¦é‡æ–°è¿è¡Œæ‰èƒ½çœ‹åˆ°æ•ˆæœï¼Œä¸åƒä¹‹å‰æŒ‰ä¸‹ Cmd + s å°±èƒ½è¿›è¡Œçƒ­é‡è½½ã€‚è¿™æ · Flutteræ¨¡å— çš„å¼€å‘æ•ˆç‡æå…¶ä½ä¸‹ï¼Œé‚£æœ‰æ²¡æœ‰åŠæ³•å¯ä»¥è®©æˆ‘ä»¬åƒä¹‹å‰å¼€å‘ Flutter é¡¹ç›®æ—¶é‚£æ ·è¿›è¡Œ çƒ­é‡è½½ å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æœ‰çš„ Flutter å®˜æ–¹æä¾›äº† flutter attach ï¼Œä»¥è¾…åŠ©æˆ‘ä»¬å¼€å‘ï¼Œåˆ°ç»ˆç«¯ä¸‹æ‰§è¡Œ 1flutter attach å¦‚æœå½“å‰æœ‰å¤šä¸ªè®¾å¤‡ï¼Œä¼šæç¤ºæˆ‘ä»¬éœ€è¦æŒ‡å®š attach å“ªä¸ªè®¾å¤‡ æŒ‰è¦æ±‚åŠ ä¸ŠæŒ‡å®šå‚æ•°å³å¯ 1flutter attach -d FE305309-9E79-418D-BA3F-7EFECF2980BC å¦‚å›¾ï¼Œè¿™æ ·å°±å…³è”ä¸Šäº†ï¼Œä½ åœ¨ dart æ–‡ä»¶é‡Œé¢å¯¹ç•Œé¢è¿›è¡Œä»»ä½•ä¿®æ”¹åï¼ŒæŒ‰ r è¿›è¡Œçƒ­é‡è½½ï¼ŒæŒ‰ R è¿›è¡Œçƒ­å¯åŠ¨ã€‚ å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Android Studioï¼Œå¯ä»¥ç›´æ¥é€‰æ‹©å¯¹åº”çš„è®¾å¤‡åï¼Œç‚¹å‡»å³è¾¹çš„ Flutter Attach æŒ‰é’®ï¼Œæ‰§è¡ŒæˆåŠŸåå°±å¯ä»¥è·Ÿä¹‹å‰ä¸€æ ·æŒ‰ Cmd + s è¿›è¡Œçƒ­é‡è½½äº†ã€‚ äº”ã€èµ„æ–™ GitHub LXFFlutterHybridDemo å®˜æ–¹æ–‡æ¡£ add-to-app | add-to-app/ios | add-to-app/android | Debugging &amp; hot reload","categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://linxunfeng.top/categories/Flutter/"}],"tags":[{"name":"Dart","slug":"Dart","permalink":"http://linxunfeng.top/tags/Dart/"},{"name":"Flutter","slug":"Flutter","permalink":"http://linxunfeng.top/tags/Flutter/"}]},{"title":"Flutter - æ‰“å°å¥½ç”¨çš„Debugæ—¥å¿—","slug":"Flutter/Flutter - æ‰“å°å¥½ç”¨çš„Debugæ—¥å¿—","date":"2020-06-26T00:35:00.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2020/06/26/Flutter/Flutter - æ‰“å°å¥½ç”¨çš„Debugæ—¥å¿—/","link":"","permalink":"http://linxunfeng.top/2020/06/26/Flutter/Flutter%20-%20%E6%89%93%E5%8D%B0%E5%A5%BD%E7%94%A8%E7%9A%84Debug%E6%97%A5%E5%BF%97/","excerpt":"åš iOS å¼€å‘æ—¶è¿™ä¸ªåŠŸèƒ½å¾ˆå¸¸ç”¨ï¼Œ åœ¨ OC å’Œ Swift ä¸­éƒ½å¯ä»¥å¾ˆè½»æ¾å®ç°ï¼Œå› ä¸ºç³»ç»Ÿæœ¬æ¥å°±æä¾›äº†ç”¨äºæ—¥å¿—è¾“å‡ºçš„é¢„å¤„ç†å®ï¼Œåªè¦æˆ‘ä»¬æ‹¿æ¥æ‹¼æ¥å°±å¯ä»¥äº†ï¼Œä½†æ˜¯åœ¨ Dart ä¸­å¹¶ä¸æä¾›è¿™äº›ï¼Œé‚£æœ‰ä»€ä¹ˆåŠæ³•å®ç°å®ƒå‘¢ï¼Ÿ +","text":"åš iOS å¼€å‘æ—¶è¿™ä¸ªåŠŸèƒ½å¾ˆå¸¸ç”¨ï¼Œ åœ¨ OC å’Œ Swift ä¸­éƒ½å¯ä»¥å¾ˆè½»æ¾å®ç°ï¼Œå› ä¸ºç³»ç»Ÿæœ¬æ¥å°±æä¾›äº†ç”¨äºæ—¥å¿—è¾“å‡ºçš„é¢„å¤„ç†å®ï¼Œåªè¦æˆ‘ä»¬æ‹¿æ¥æ‹¼æ¥å°±å¯ä»¥äº†ï¼Œä½†æ˜¯åœ¨ Dart ä¸­å¹¶ä¸æä¾›è¿™äº›ï¼Œé‚£æœ‰ä»€ä¹ˆåŠæ³•å®ç°å®ƒå‘¢ï¼Ÿ + ä¸€ã€æ€è€ƒåš iOS å¼€å‘æ—¶è¿™ä¸ªåŠŸèƒ½å¾ˆå¸¸ç”¨ï¼Œ åœ¨ OC å’Œ Swift ä¸­éƒ½å¯ä»¥å¾ˆè½»æ¾å®ç°ï¼Œå› ä¸ºç³»ç»Ÿæœ¬æ¥å°±æä¾›äº†ç”¨äºæ—¥å¿—è¾“å‡ºçš„é¢„å¤„ç†å®ï¼Œåªè¦æˆ‘ä»¬æ‹¿æ¥æ‹¼æ¥å°±å¯ä»¥äº†ï¼Œä½†æ˜¯åœ¨ Dart ä¸­å¹¶ä¸æä¾›è¿™äº›ï¼Œé‚£æœ‰ä»€ä¹ˆåŠæ³•å®ç°å®ƒå‘¢ï¼Ÿ æˆ‘ä»¬å›æƒ³åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ˜¯ä¸æ˜¯å‘ç°åªè¦ä¸€ä¸å°å¿ƒæŠ›å¼‚å¸¸ï¼Œå°±å¯ä»¥çœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹çš„æ‰“å°å†…å®¹ï¼Œè€Œä¸”è¿˜èƒ½æ¸…æ¥šçš„çŸ¥é“å¼‚å¸¸æ˜¯åœ¨å“ªä¸ªæ–‡ä»¶å’Œå“ªä¸€è¡Œçš„ä»£ç é€ æˆçš„ã€‚ æ‰€ä»¥å¦‚æœæˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨å‡½æ•°æ—¶æ‹¿åˆ°å½“å‰è°ƒç”¨å †æ ˆï¼Œå°±å¯ä»¥å–åˆ°ä¸€ç³»åˆ—æƒ³è¦çš„æ•°æ®ã€‚ äºŒã€å®è·µåœ¨ dart:core ä¸­æä¾›äº† å †æ ˆè·Ÿè¸ª(StackTrace)ï¼Œå¯ä»¥é€šè¿‡ StackTrace.current å–åˆ°å½“å‰çš„å †æ ˆä¿¡æ¯ï¼Œæ‰“å°å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¼šå‘ç°è¿™ä¸å¥½æ‹¿åˆ°æˆ‘ä»¬æƒ³è¦çš„ä¿¡æ¯ã€‚ è¿™é‡Œæˆ‘ç”¨åˆ°äº†å®˜æ–¹å¼€å‘çš„ä¸€ä¸ªåŒ… stack_traceï¼Œå®ƒå¯ä»¥å°†å †æ ˆä¿¡æ¯å˜å¾—æ›´å¤šäººæ€§åŒ–ï¼Œå¹¶æ–¹ä¾¿æˆ‘ä»¬æŸ¥çœ‹å †æ ˆä¿¡æ¯å’Œè·å–æƒ³è¦çš„æ•°æ®ã€‚ ps: stack_trace åœ¨ Flutter ç¯å¢ƒä¸‹ç›´æ¥å¯¼åŒ…å³å¯ä½¿ç”¨ï¼Œè€Œåœ¨çº¯ Dart ä¸‹éœ€è¦å°†å…¶æ·»åŠ ä¸ºä¾èµ–äºpubspec.yamlä¸­ã€‚ 12dependencies: stack_trace: ^1.9.3 é‚£ä¸‹é¢æˆ‘ä»¬æ¥è¯•è¯• stack_trace çš„å¨åŠ›å§12345678910111213import 'package:stack_trace/stack_trace.dart';// å°† StackTrace å¯¹è±¡è½¬æ¢æˆ Chain å¯¹è±¡// å½“ç„¶ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨ Chain.current();final chain = Chain.forTrace(StackTrace.current);// æ‹¿å‡ºå…¶ä¸­ä¸€æ¡ä¿¡æ¯final frames = chain.toTrace().frames;final frame = frames[1];// æ‰“å°print(\"æ‰€åœ¨æ–‡ä»¶ï¼š$&#123;frame.uri&#125; æ‰€åœ¨è¡Œ $&#123;frame.line&#125; æ‰€åœ¨åˆ— $&#123;frame.column&#125;\");// æ‰“å°ç»“æœ// flutter: æ‰€åœ¨æ–‡ä»¶ï¼špackage:flutterlog/main.dart æ‰€åœ¨è¡Œ 55 æ‰€åœ¨åˆ— 23 ä¸‰ã€å‘ˆä¸Šä»£ç ä¸‹é¢æˆ‘åšäº†ä¸€ç‚¹å°è£…ï¼Œç›´æ¥æ‹¿èµ°å³å¯ä½¿ç”¨ï¼Œæ‰“å°æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š å®Œæ•´çš„ä»£ç å’Œç¤ºä¾‹è¯·åˆ°GitHubä¸Šã€æŸ¥çœ‹ã€‘ã€‚ ä»£ç ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344// log.dartenum FLogMode &#123; debug, // ğŸ’š DEBUG warning, // ğŸ’› WARNING info, // ğŸ’™ INFO error, // â¤ï¸ ERROR&#125;void FLog(dynamic msg, &#123; FLogMode mode = FLogMode.debug &#125;) &#123; if (kReleaseMode) &#123; // releaseæ¨¡å¼ä¸æ‰“å° return; &#125; var chain = Chain.current(); // Chain.forTrace(StackTrace.current); // å°† core å’Œ flutter åŒ…çš„å †æ ˆåˆèµ·æ¥ï¼ˆå³ç›¸å…³æ•°æ®åªå‰©å…¶ä¸­ä¸€æ¡ï¼‰ chain = chain.foldFrames((frame) =&gt; frame.isCore || frame.package == \"flutter\"); // å–å‡ºæ‰€æœ‰ä¿¡æ¯å¸§ final frames = chain.toTrace().frames; // æ‰¾åˆ°å½“å‰å‡½æ•°çš„ä¿¡æ¯å¸§ final idx = frames.indexWhere((element) =&gt; element.member == \"FLog\"); if (idx == -1 || idx+1 &gt;= frames.length) &#123; return; &#125; // è°ƒç”¨å½“å‰å‡½æ•°çš„å‡½æ•°ä¿¡æ¯å¸§ final frame = frames[idx+1]; var modeStr = \"\"; switch(mode) &#123; case FLogMode.debug: modeStr = \"ğŸ’š DEBUG\"; break; case FLogMode.warning: modeStr = \"ğŸ’› WARNING\"; break; case FLogMode.info: modeStr = \"ğŸ’™ INFO\"; break; case FLogMode.error: modeStr = \"â¤ï¸ ERROR\"; break; &#125; print(\"$modeStr $&#123;frame.uri.toString().split(\"/\").last&#125;($&#123;frame.line&#125;) - $msg \");&#125;","categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://linxunfeng.top/categories/Flutter/"}],"tags":[{"name":"Dart","slug":"Dart","permalink":"http://linxunfeng.top/tags/Dart/"},{"name":"Flutter","slug":"Flutter","permalink":"http://linxunfeng.top/tags/Flutter/"}]},{"title":"Dart - æŠ½è±¡ç±»çš„å®ä¾‹åŒ–","slug":"Flutter/Dart-æŠ½è±¡ç±»çš„å®ä¾‹åŒ–","date":"2020-06-07T11:27:00.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2020/06/07/Flutter/Dart-æŠ½è±¡ç±»çš„å®ä¾‹åŒ–/","link":"","permalink":"http://linxunfeng.top/2020/06/07/Flutter/Dart-%E6%8A%BD%E8%B1%A1%E7%B1%BB%E7%9A%84%E5%AE%9E%E4%BE%8B%E5%8C%96/","excerpt":"æŠ½è±¡ç±»ä¸èƒ½ç”¨äºåˆ›å»ºå®ä¾‹ï¼Œä½†æ˜¯æœ‰æ²¡æœ‰å‘ç°ï¼ŒDart æä¾›çš„ Map å’Œ List å°±æ˜¯æŠ½è±¡ç±»ï¼Œå´å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒä»¬åˆ›å»ºå‡ºä¸€ä¸ªå®ä¾‹å¯¹è±¡ +","text":"æŠ½è±¡ç±»ä¸èƒ½ç”¨äºåˆ›å»ºå®ä¾‹ï¼Œä½†æ˜¯æœ‰æ²¡æœ‰å‘ç°ï¼ŒDart æä¾›çš„ Map å’Œ List å°±æ˜¯æŠ½è±¡ç±»ï¼Œå´å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒä»¬åˆ›å»ºå‡ºä¸€ä¸ªå®ä¾‹å¯¹è±¡ + ä¸€ã€æŠ½è±¡ç±»çš„ä½¿ç”¨Dart æŠ½è±¡ç±»å¯ä»¥åªå£°æ˜æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æœ‰å…·ä½“çš„æ–¹æ³•å®ç°ï¼Œä½†æ˜¯ä¸èƒ½ç›´æ¥ç”¨æŠ½è±¡ç±»æ¥åˆ›å»ºå®ä¾‹ï¼Œåªèƒ½è¢«ç»§æ‰¿ä½¿ç”¨æˆ–è€…å……å½“æ¥å£ã€‚ å®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±» Animal123456789abstract class Animal &#123; // ä»…å£°æ˜eatæ–¹æ³• void eat(); // å£°æ˜æ–¹æ³•ï¼Œä¸”æœ‰å…·ä½“å®ç° void sleep() &#123; print(\"ç¡è§‰\"); &#125;&#125; ç»§æ‰¿ä½¿ç”¨ 123456789class Cat extends Animal &#123; @override void eat() &#123; print(\"å–µå–µåƒ\"); sleep(); &#125;// å¯ä»¥ä¸å®ç° sleep æ–¹æ³•&#125; å……å½“æ¥å£1234567891011class Cat implements Animal &#123; void eat() &#123; print(\"åƒ\"); &#125; // å¿…é¡»å®ç° sleep æ–¹æ³• void sleep() &#123; print('ç¡'); &#125;&#125;å®ä¾‹åŒ–123final animal = Animal();// æŠ½è±¡ç±»å®ä¾‹åŒ–ä¼šæŠ¥é”™// Error: The class 'Test' is abstract and can't be instantiated. æŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ–ã€‚ ç»§æ‰¿: å­ç±»æ¯”è¾ƒå®ç°æŠ½è±¡æ–¹æ³•ï¼Œå­ç±»å¯ä»¥ä¸é‡å†™æŠ½è±¡ç±»ä¸­å·²å®ç°çš„æ–¹æ³•ã€‚ æ¥å£: å¿…é¡»å®ç°æŠ½è±¡ç±»ä¸­å£°æ˜çš„æ‰€æœ‰æ–¹æ³• äºŒã€æŠ½è±¡ç±»çš„å®ä¾‹åŒ–ä¸Šé¢æåˆ°äº†æŠ½è±¡ç±»ä¸èƒ½ç”¨äºåˆ›å»ºå®ä¾‹ï¼Œä½†æ˜¯æœ‰æ²¡æœ‰å‘ç°ï¼ŒDart æä¾›çš„ Map å’Œ List å°±æ˜¯æŠ½è±¡ç±»ï¼Œå´å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒä»¬åˆ›å»ºå‡ºä¸€ä¸ªå®ä¾‹å¯¹è±¡12final list = List();final dict = Map&lt;String, dynamic&gt;();æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ Map çš„æºç ï¼š Map çš„ç¡®æ˜¯æŠ½è±¡ç±»ï¼Œä¸è¿‡æ­¤æ—¶æˆ‘ä»¬ä¹Ÿæ³¨æ„åˆ°äº†ï¼Œåœ¨ Map è¿™ä¸ªæŠ½è±¡ç±»ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ªå·¥å‚æ„é€ æ–¹æ³•ï¼Œè¿™å°±æ˜¯ä½¿æŠ½è±¡ç±»å¯å®ä¾‹åŒ–çš„å…³é”®æ‰€åœ¨ï¼Œå› ä¸ºå·¥å‚æ–¹æ³•å¯ä»¥è¿”å›ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œä½†è¿™ä¸ªå¯¹è±¡çš„ç±»å‹ä¸ä¸€å®šå°±æ˜¯å½“å‰ç±»! åœ¨è¿™ä¸ªåœ°æ–¹ï¼ŒMap çš„å·¥å‚æ–¹æ³•å¹¶æ²¡æœ‰å…·ä½“çš„å®ç°ï¼Œè€Œåªæ˜¯åœ¨å·¥å‚æ„é€ æ–¹æ³•å‰åŠ äº†ä¸€ä¸ªå…³é”®å­— externalã€‚external å…³é”®å­—å¯ä»¥è®©æ–¹æ³•çš„å£°æ˜ä¸å®ç°åˆ†ç¦»ï¼Œå³ å¯ä»¥ç”±å¤–éƒ¨æ¥å¸®æˆ‘ä»¬å®Œæˆå…·ä½“çš„æ–¹æ³•å®ç°ï¼Œé‚£å¤–éƒ¨å¦‚ä½•æ‰èƒ½å…³è”åˆ°è¯¥å£°æ˜çš„æ–¹æ³•å‘¢ï¼Ÿè¿™é‡Œå°±éœ€è¦ç”¨åˆ°æ³¨è§£ @patchï¼Œä½¿å¤–éƒ¨çš„æ–¹æ³•å®ç°ä¸è¯¥å£°æ˜çš„æ–¹æ³•ç»‘å®š external å¯ä»¥åˆ†ç¦»æ–¹æ³•çš„å£°æ˜ä¸å®ç°@patch å…³è”æŸä¸ªç±»ä¸­ç”¨ external ä¿®é¥°çš„æ–¹æ³•çš„å®ç° æ ¹æ®å¦‚ä¸‹è·¯å¾„å¯ä»¥æ‰¾åˆ° Map çš„å…·ä½“å®ç°æºç 1234// flutter/bin/cache/dart-sdk/lib/_internal/vm/lib/map_patch.dart@patchfactory Map() =&gt; new LinkedHashMap&lt;K, V&gt;(); å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œä½¿ç”¨äº† LinkedHashMap æ¥å®ç° Map ã€‚ æˆ‘ä»¬å†å»çœ‹ä¸€ä¸‹ LinkedHashMap çš„å®ç°æºç ï¼Œè·¯å¾„å¦‚ä¸‹ï¼š123456// flutter/bin/cache/dart-sdk/lib/collection/linked_hash_map.dartexternal factory LinkedHashMap( &#123;bool Function(K, K)? equals, int Function(K)? hashCode, bool Function(dynamic)? isValidKey&#125;);è¿™é‡Œæˆ‘ä»¬åˆå‘ç° LinkedHashMap ä¹Ÿä»…ä»…åªæ˜¯å£°æ˜ï¼Œæ‰¾åˆ°å…·ä½“å®ç° 12345678910111213141516171819202122232425262728293031// flutter/bin/cache/dart-sdk/lib/_internal/vm/lib/collection_patch.dart@patchclass LinkedHashMap&lt;K, V&gt; &#123; @patch factory LinkedHashMap( &#123;bool equals(K key1, K key2)?, int hashCode(K key)?, bool isValidKey(potentialKey)?&#125;) &#123; if (isValidKey == null) &#123; if (hashCode == null) &#123; if (equals == null) &#123; return new _InternalLinkedHashMap&lt;K, V&gt;(); &#125; hashCode = _defaultHashCode; &#125; else &#123; if (identical(identityHashCode, hashCode) &amp;&amp; identical(identical, equals)) &#123; return new _CompactLinkedIdentityHashMap&lt;K, V&gt;(); &#125; equals ??= _defaultEquals; &#125; &#125; else &#123; hashCode ??= _defaultHashCode; equals ??= _defaultEquals; &#125; return new _CompactLinkedCustomHashMap&lt;K, V&gt;(equals, hashCode, isValidKey); &#125;...&#125; å¯ä»¥çœ‹åˆ°ï¼ŒLinkedHashMapçš„å·¥å‚æ„é€ æ–¹æ³•è¿”å›çš„å®ä¾‹ç±»å‹æ˜¯ _InternalLinkedHashMap æˆ– _CompactLinkedCustomHashMap ï¼Œè¿™é‡Œæˆ‘ä»¬å†çœ‹ä¸€ä¸‹è¿™ä¸¤ä¸ªç±»çš„å®ç°æºç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950// flutter/bin/cache/dart-sdk/lib/_internal/vm/lib/compact_hash.dart@pragma(\"vm:entry-point\")class _InternalLinkedHashMap&lt;K, V&gt; extends _HashVMBase with MapMixin&lt;K, V&gt;, _LinkedHashMapMixin&lt;K, V&gt;, _HashBase, _OperatorEqualsAndHashCode implements LinkedHashMap&lt;K, V&gt; &#123; _InternalLinkedHashMap() &#123; _index = new Uint32List(_HashBase._INITIAL_INDEX_SIZE); _hashMask = _HashBase._indexSizeToHashMask(_HashBase._INITIAL_INDEX_SIZE); _data = new List.filled(_HashBase._INITIAL_INDEX_SIZE, null); _usedData = 0; _deletedKeys = 0; &#125;&#125;......class _CompactLinkedIdentityHashMap&lt;K, V&gt; extends _HashFieldBase with MapMixin&lt;K, V&gt;, _LinkedHashMapMixin&lt;K, V&gt;, _HashBase, _IdenticalAndIdentityHashCode implements LinkedHashMap&lt;K, V&gt; &#123; _CompactLinkedIdentityHashMap() : super(_HashBase._INITIAL_INDEX_SIZE);&#125;class _CompactLinkedCustomHashMap&lt;K, V&gt; extends _HashFieldBase with MapMixin&lt;K, V&gt;, _LinkedHashMapMixin&lt;K, V&gt;, _HashBase implements LinkedHashMap&lt;K, V&gt; &#123; final _equality; final _hasher; final _validKey; // TODO(koda): Ask gbracha why I cannot have fields _equals/_hashCode. int _hashCode(e) =&gt; _hasher(e); bool _equals(e1, e2) =&gt; _equality(e1, e2); bool containsKey(Object? o) =&gt; _validKey(o) ? super.containsKey(o) : false; V? operator [](Object? o) =&gt; _validKey(o) ? super[o] : null; V? remove(Object? o) =&gt; _validKey(o) ? super.remove(o) : null; _CompactLinkedCustomHashMap(this._equality, this._hasher, validKey) : _validKey = (validKey != null) ? validKey : new _TypeTest&lt;K&gt;().test, super(_HashBase._INITIAL_INDEX_SIZE);&#125; å®ƒä»¬éƒ½æ˜¯ä¸€ä¸ªæ™®é€šçš„ç±»ï¼Œæ²¡æœ‰å·¥å‚æ„é€ æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ Map ä¸­çš„ external factory Map(); æœ€ç»ˆè¿”å›çš„æœ€ç»ˆå®ä¾‹ç±»å‹ä¸º _InternalLinkedHashMap æˆ– _CompactLinkedCustomHashMap æˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªç®€å•çš„éªŒè¯12345final map = Map();print(map.runtimeType);// æ‰“å°ç»“æœ// _InternalLinkedHashMap&lt;dynamic, dynamic&gt; æˆ‘ä»¬æ¥è¯•ç€æ¥å®ä¾‹åŒ–ä¸€ä¸ªæŠ½è±¡ç±»å§123456789101112131415161718192021abstract class Animal &#123; void eat(); void sleep() &#123; print(\"ç¡è§‰\"); &#125; factory Animal() &#123; return Cat(); &#125;&#125; class Cat implements Animal &#123; void eat() &#123; print(\"åƒ\"); &#125; void sleep() &#123; print('ç¡'); &#125;&#125; 1234final animal = Animal();print(animal.runtimeType); // æ‰“å°ç»“æœ: Cat å¯èƒ½ä¼šæœ‰åŒå­¦è¦é—®äº†ï¼Œè¿™é‡Œç”¨çš„æ˜¯æ¥å£çš„æ–¹å¼ï¼Œå¯ä»¥ç”¨ç»§æ‰¿çš„æ–¹å¼å—ï¼Ÿå¾ˆé—æ†¾ä¸è¡Œï¼Œå› ä¸ºåœ¨æŠ½è±¡ç±»ä¸­å®šä¹‰äº†å·¥å‚æ„é€ æ–¹æ³•åï¼Œåœ¨å­ç±»ä¸­ä¸èƒ½å®šä¹‰é™¤å·¥å‚æ„é€ æ–¹æ³•å¤–çš„å…¶å®ƒæ„é€ æ–¹æ³•äº†ï¼Œä¼šæŠ¥é”™~ æ€»ç»“ä¸€ä¸‹ï¼š æŠ½è±¡ç±»æ— æ³•ç›´æ¥åˆ›å»ºå®ä¾‹ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å®ç°å·¥å‚æ„é€ æ–¹æ³•æ¥é—´æ¥å®ç°æŠ½è±¡ç±»çš„å®ä¾‹åŒ–ï¼ ä¸‰ã€è¡¥å……é‚£é¥¶äº†è¿™ä¹ˆä¸€å¤§åœˆï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥åœ¨å£°æ˜çš„æ—¶å€™å°±ç»™å®ƒå®ç°äº†å‘¢ï¼ŸğŸ¤”è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯ï¼š å¤ç”¨åŒä¸€å¥—APIçš„å£°æ˜ å¯ä»¥é’ˆå¯¹ä¸åŒçš„å¹³å°åšä¸åŒçš„å®ç° è€Œ é’ˆå¯¹ä¸åŒçš„å¹³å°åšä¸åŒçš„å®ç° è¿™ä¸€ç‚¹åœ¨ä¸‹æ–¹ç»™å‡ºçš„æºç ä¸­å¯ä»¥çœ‹å‡º 123456// flutter/bin/cache/dart-sdk/lib/io/file_system_entity.dartabstract class _FileSystemWatcher &#123; external static Stream&lt;FileSystemEvent&gt; _watch( String path, int events, bool recursive); external static bool get isSupported;&#125; 123456789101112131415161718// flutter/bin/cache/dart-sdk/lib/_internal/vm/bin/file_patch.dart@patchstatic Stream&lt;FileSystemEvent&gt; _watch( String path, int events, bool recursive) &#123; if (Platform.isLinux) &#123; return new _InotifyFileSystemWatcher(path, events, recursive)._stream; &#125; if (Platform.isWindows) &#123; return new _Win32FileSystemWatcher(path, events, recursive)._stream; &#125; if (Platform.isMacOS) &#123; return new _FSEventStreamFileSystemWatcher(path, events, recursive) ._stream; &#125; throw new FileSystemException( \"File system watching is not supported on this platform\");&#125;","categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://linxunfeng.top/categories/Flutter/"}],"tags":[{"name":"Dart","slug":"Dart","permalink":"http://linxunfeng.top/tags/Dart/"}]},{"title":"è§£å†³SecurityEnvSDKä¸SGMainçš„å†²çªé—®é¢˜","slug":"è§£å†³SecurityEnvSDKä¸SGMainçš„å†²çªé—®é¢˜","date":"2020-03-14T13:21:00.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2020/03/14/è§£å†³SecurityEnvSDKä¸SGMainçš„å†²çªé—®é¢˜/","link":"","permalink":"http://linxunfeng.top/2020/03/14/%E8%A7%A3%E5%86%B3SecurityEnvSDK%E4%B8%8ESGMain%E7%9A%84%E5%86%B2%E7%AA%81%E9%97%AE%E9%A2%98/","excerpt":"æŠ¥é”™æ˜¯è¯´æœ‰é‡å¤ç±»ï¼Œè§£å†³çš„åŠæ³•æ¯”è¾ƒç®€å•ç²—æš´ï¼Œå°±æ˜¯æŠŠåœ¨Xcodeé‡Œå…¨æ–‡æœç´¢-framework &quot;SecurityEnvSDK&quot;ï¼Œæ¥ç€å…¨æ–‡æ›¿æ¢ä¸ºç©ºå­—ç¬¦ä¸²å°±å¯ä»¥äº†ã€‚ +","text":"æŠ¥é”™æ˜¯è¯´æœ‰é‡å¤ç±»ï¼Œè§£å†³çš„åŠæ³•æ¯”è¾ƒç®€å•ç²—æš´ï¼Œå°±æ˜¯æŠŠåœ¨Xcodeé‡Œå…¨æ–‡æœç´¢-framework &quot;SecurityEnvSDK&quot;ï¼Œæ¥ç€å…¨æ–‡æ›¿æ¢ä¸ºç©ºå­—ç¬¦ä¸²å°±å¯ä»¥äº†ã€‚ + é—®é¢˜åœ¨é›†æˆå‹ç›Ÿç»Ÿè®¡å’Œé˜¿é‡Œç™¾å·ä¹‹åé¡¹ç›®æŠ¥å¦‚ä¸‹é”™è¯¯ 123456789101112duplicate symbol '_OBJC_CLASS_$_tdvSFHFKeychainUtils' in: /Users/.../Pods/UMCSecurityPlugins/thirdparties/SecurityEnvSDK.framework/SecurityEnvSDK(SecurityEnvSDK99999999.o) /Users/.../é˜¿é‡Œç™¾å·/WXFrameworks/SGMain.framework/SGMain(SGMain99999999.o)duplicate symbol '_OBJC_METACLASS_$_tdvSFHFKeychainUtils' in: /Users/.../Pods/UMCSecurityPlugins/thirdparties/SecurityEnvSDK.framework/SecurityEnvSDK(SecurityEnvSDK99999999.o) /Users/.../é˜¿é‡Œç™¾å·/WXFrameworks/SGMain.framework/SGMain(SGMain99999999.o)duplicate symbol '_OBJC_CLASS_$_SGDataCollectionLock' in: /Users/.../Pods/UMCSecurityPlugins/thirdparties/SecurityEnvSDK.framework/SecurityEnvSDK(SecurityEnvSDK99999999.o) /Users/.../é˜¿é‡Œç™¾å·/WXFrameworks/SGMain.framework/SGMain(SGMain99999999.o)duplicate symbol '_OBJC_METACLASS_$_SGDataCollectionLock' in: /Users/.../Pods/UMCSecurityPlugins/thirdparties/SecurityEnvSDK.framework/SecurityEnvSDK(SecurityEnvSDK99999999.o) /Users/.../é˜¿é‡Œç™¾å·/WXFrameworks/SGMain.framework/SGMain(SGMain99999999.o) æŠ¥é”™æ˜¯è¯´æœ‰é‡å¤ç±»ï¼Œè§£å†³çš„åŠæ³•æ¯”è¾ƒç®€å•ç²—æš´ï¼Œå°±æ˜¯æŠŠåœ¨Xcodeé‡Œå…¨æ–‡æœç´¢ -framework &quot;SecurityEnvSDK&quot;ï¼Œæ¥ç€å…¨æ–‡æ›¿æ¢ä¸ºç©ºå­—ç¬¦ä¸²å°±å¯ä»¥äº†ã€‚ è™½ç„¶è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹å¼å¾ˆç®€å•ï¼Œä½†æ˜¯æ¯æ¬¡ pod install åéƒ½è¦åšä¸€éè¯¥æ“ä½œï¼Œè¿™å°±å¾ˆæ— è¯­äº† ã€‚ é‚£æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥è®©æˆ‘ä»¬ä¸ç”¨è‡ªå·±å»åšè¿™ä¸ªçƒ¦ççš„äº‹æƒ…å‘¢ï¼Ÿ æ”¹è¿› é¦–å…ˆè¦ææ¸…æ¥šï¼Œä¸Šé¢çš„æ“ä½œåŸç†æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿå…¶å®ƒå¾ˆç®€å•ï¼Œå°±æ˜¯å°†ä¸‹é¢è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸­ OTHER_LDFLAGS æ‰€åœ¨è¡Œçš„å†…å®¹é‡Œï¼ŒæŠŠ -framework &quot;SecurityEnvSDK&quot; ç½®ä¸ºç©ºå­—ç¬¦ä¸²ã€‚ 12Pods/Target Support Files/Pods-é¡¹ç›®å/Pods-é¡¹ç›®å.debug.xcconfigPods/Target Support Files/Pods-é¡¹ç›®å/Pods-é¡¹ç›®å.release.xcconfig æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥è®©æˆ‘ä»¬åœ¨é€‚å½“çš„æ—¶å€™å»æ‰§è¡Œè¿™ä¸ªç½®ç©ºå­—ç¬¦ä¸²çš„æ“ä½œï¼ŸCocoapods æä¾›äº†ä¸€ä¸ªå¾ˆå¥½ç”¨çš„ Hook å°±æ˜¯ post_installï¼Œè¿™ä¸ªé’©å­çš„ä½œç”¨å°±æ˜¯æ–¹ä¾¿æˆ‘ä»¬åœ¨æ‰§è¡Œ pod install ä¹‹åå»åšä¸€äº›å…¶å®ƒé…ç½®ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ç”¨å®ƒæ¥æäº‹æƒ…ã€‚ Podfile æ–‡ä»¶ä¸­ä½¿ç”¨çš„æ˜¯ ruby è¯­è¨€ï¼Œruby æ‰§è¡Œç»ˆç«¯å‘½ä»¤çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š12345post_install do |installer| # command = \"echo 'hello world'\" command = \"ç»ˆç«¯å‘½ä»¤\" system(command)endOKï¼Œç°åœ¨å¼€å§‹æäº‹ï¼ æ­¥éª¤ åœ¨é¡¹ç›®çš„ç›®å½•ï¼Œå³ä¸Podså¹³çº§ç›®å½•ä¸­ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œåä¸º fix.py 12345678.â”œâ”€â”€ ...â”œâ”€â”€ Podfileâ”œâ”€â”€ Podfile.lockâ”œâ”€â”€ Podsâ”‚ â”œâ”€â”€ ...â”‚ â””â”€â”€ ...â””â”€â”€ fix.py åœ¨ fix.py ä¸­ç²˜è´´å¦‚ä¸‹å†…å®¹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960# -*- coding: UTF-8 -*-import sys, os, getopt, codecsdef get_current_file_name(): \"\"\"è·å–å½“å‰æ–‡ä»¶åç§°\"\"\" return os.path.split(__file__)[-1]def replace_all_str(file_path, for_str, to_str): \"\"\" å…¨æ–‡æœç´¢æ›¿æ¢æˆ–å•è¡Œæ›¿æ¢ :param file_path: æ–‡ä»¶è·¯å¾„ :param for_str: è¦è¢«æ›¿æ¢çš„å†…å®¹ :param to_str: æ›¿æ¢ä¹‹åçš„å†…å®¹ \"\"\" if not os.path.exists(file_path): # æ–‡ä»¶ä¸å­˜åœ¨ print('æ–‡ä»¶ä¸å­˜åœ¨') return bak_file_path = file_path+\".bak\" with codecs.open(file_path, 'r', encoding='utf-8') as f, codecs.open(bak_file_path, 'w', encoding='utf-8') as f_w: lines = f.readlines() for line in lines: if \"OTHER_LDFLAGS\" in line and for_str in line: line = line.replace(for_str, to_str) f_w.write(line) os.remove(file_path) os.rename(bak_file_path, file_path)def throwParamError(): print(\"è¯·æ­£ç¡®è¾“å…¥å‘½ä»¤ï¼š %s -p é¡¹ç›®åç§°\" % get_current_file_name()) sys.exit(0)def main(argv): project_name = \"\" try: opts, args = getopt.getopt(argv, \"p:\", [\"project=\"]) except getopt.GetoptError: throwParamError() for opt, arg in opts: # print(\"opt -- \", opt) # print(\"arg -- \", arg) if opt in ('-p', '--project'): project_name = arg if not len(project_name): throwParamError() path_str = \"Pods/Target Support Files/Pods-%s/Pods-%s.%s.xcconfig\" xcconfig_debug_path = path_str % (project_name, project_name, \"debug\") xcconfig_release_path = path_str % (project_name, project_name, \"release\") # print(xcconfig_debug_path) # print(xcconfig_release_path) be_fixed_str = '-framework \"SecurityEnvSDK\"' replace_all_str(xcconfig_debug_path, be_fixed_str, '') replace_all_str(xcconfig_release_path, be_fixed_str, '') print(\"%s is fixed successfully\" %project_name)if __name__ == \"__main__\": main(sys.argv[1:]) æ‰“å¼€ Podfileï¼Œåœ¨å†…å®¹æœ€åæ·»åŠ å¦‚ä¸‹å†…å®¹12345post_install do |installer| # è§£å†³SecurityEnvSDKä¸SGMainçš„å†²çªé—®é¢˜ command = \"python fix.py -p é¡¹ç›®åç§°\" system(command)end æ‰§è¡Œpod install å¥½äº†ï¼Œç°åœ¨å¼€å§‹å°±åˆå¯ä»¥ç»§ç»­æ„‰å¿«çš„æ¬ç –äº†~ GitHubç›¸å…³ä»£ç æ–‡ä»¶å¯ä»¥åˆ°è¿™é‡Œä¸‹è½½ï¼Œå¦‚æœè§‰å¾—ä¸é”™ï¼Œä¸å¦¨ç»™ä¸ª Star é¼“åŠ±ä¸€ä¸‹https://github.com/LinXunFeng/fix_confict_SecurityEnvSDK_SGMain","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"Cocoapods","slug":"Cocoapods","permalink":"http://linxunfeng.top/tags/Cocoapods/"},{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"}]},{"title":"è§£å†³Transporterä¸€ç›´å¡æ­£åœ¨éªŒè¯çš„é—®é¢˜","slug":"è§£å†³Transporterä¸€ç›´å¡æ­£åœ¨éªŒè¯çš„é—®é¢˜","date":"2020-03-12T22:16:00.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2020/03/12/è§£å†³Transporterä¸€ç›´å¡æ­£åœ¨éªŒè¯çš„é—®é¢˜/","link":"","permalink":"http://linxunfeng.top/2020/03/12/%E8%A7%A3%E5%86%B3Transporter%E4%B8%80%E7%9B%B4%E5%8D%A1%E6%AD%A3%E5%9C%A8%E9%AA%8C%E8%AF%81%E7%9A%84%E9%97%AE%E9%A2%98/","excerpt":"è‹¹æœçš„ä¸Šä¼ åº”ç”¨å·¥å…· Transporter è™½ç„¶æŒºå¥½ç”¨ï¼Œä½†æ˜¯ä¼°è®¡ä¹Ÿä¸å°‘äººè·Ÿæˆ‘ä¸€æ ·é‡åˆ°è¿‡è¿™æ ·çš„é—®é¢˜ï¼Œå°±æ˜¯ä¸€ç›´å¡åœ¨ æ­£åœ¨éªŒè¯ï¼Œä¸é‡‡å–ç‚¹æªæ–½ä¼°è®¡èƒ½ä¸€ç›´å¡ä¸‹å»~ +","text":"è‹¹æœçš„ä¸Šä¼ åº”ç”¨å·¥å…· Transporter è™½ç„¶æŒºå¥½ç”¨ï¼Œä½†æ˜¯ä¼°è®¡ä¹Ÿä¸å°‘äººè·Ÿæˆ‘ä¸€æ ·é‡åˆ°è¿‡è¿™æ ·çš„é—®é¢˜ï¼Œå°±æ˜¯ä¸€ç›´å¡åœ¨ æ­£åœ¨éªŒè¯ï¼Œä¸é‡‡å–ç‚¹æªæ–½ä¼°è®¡èƒ½ä¸€ç›´å¡ä¸‹å»~ + è‹¹æœçš„ä¸Šä¼ åº”ç”¨å·¥å…· Transporter è™½ç„¶æŒºå¥½ç”¨ï¼Œä½†æ˜¯ä¼°è®¡ä¹Ÿä¸å°‘äººè·Ÿæˆ‘ä¸€æ ·é‡åˆ°è¿‡è¿™æ ·çš„é—®é¢˜ï¼Œå°±æ˜¯ä¸€ç›´å¡åœ¨ æ­£åœ¨éªŒè¯ï¼Œä¸é‡‡å–ç‚¹æªæ–½ä¼°è®¡èƒ½ä¸€ç›´å¡ä¸‹å»~ å…¶å®åŸå› å¾ˆç®€å•ï¼Œå°±æ˜¯ /User/å½“å‰ç™»å½•ç”¨æˆ·/Library/Caches/com.apple.amp.itmstransporter è¿™ä¸ªç›®å½•é‡Œçš„æ–‡ä»¶ä¸å…¨ï¼Œä¸€ç›´å¤„äºä¸‹è½½æ›´æ–°çš„çŠ¶æ€ã€‚ è§£å†³æ–¹æ¡ˆæ–¹æ¡ˆä¸€ç§‘å­¦ä¸Šç½‘å‰æä¸‹ï¼Œåœ¨ç»ˆç«¯ä¸‹æ‰§è¡Œ Transporter åŒ…å†…çš„ iTMSTransporterï¼Œ1/Applications/Transporter.app/Contents/itms/bin/iTMSTransporterå› ä¸ºå›½å¤–æœåŠ¡å™¨ï¼ˆcontentdelivery.itunes.apple.com:443ï¼‰å¯¹æˆ‘ä»¬æ¥è¯´ä¼šå¾ˆæ…¢ï¼Œæ‰€ä»¥è¿™ä¸ªè¿‡ç¨‹æœ€å¥½å¼„ä¸‹ç§‘å­¦ç¯å¢ƒã€‚ ç›´åˆ°å‡ºç°è¿™ä¸ªå‘½ä»¤è¯´æ˜ç•Œé¢å°±å¯ä»¥äº† æ–¹æ¡ˆäºŒé€‚ç”¨äººç¾¤ æ²¡æœ‰ç§‘å­¦ç¯å¢ƒ é€Ÿåº¦è¦æ±‚é«˜çš„ æ¯”è¾ƒæ‡’çš„ å¯ä»¥ä½¿ç”¨ transporter_fixGitHubåœ°å€ï¼šhttps://github.com/LinXunFeng/transporter_fixæ‰§è¡Œæ–‡ä»¶ä¸‹è½½åœ°å€ï¼šç‚¹æˆ‘ä¸‹è½½ï¼Œä¸‹è½½ååŒå‡»è¿è¡Œå³å¯ã€‚ æ¯”è¾ƒæ‡’çš„æœ‹å‹çœ‹åˆ°è¿™å°±å¯ä»¥äº†ï¼Œè¦æ±‚é€Ÿåº¦å¿«çš„å°±ç»§ç»­å¾€ä¸‹çœ‹ é‡ç‚¹ transporter_fix é»˜è®¤æ˜¯ä» github ä¸Šä¸‹è½½ com.apple.amp.itmstransporter.zip åˆ°åŒç›®å½•çº§åˆ«çš„ files ç›®å½•ä¸‹ã€‚ å¦‚æœ files ç›®å½•ä¸‹å·²å­˜åœ¨ com.apple.amp.itmstransporter.zip ï¼Œåˆ™ä¸ä¼šé‡æ–°ä¸‹è½½ã€‚ æ‰€ä»¥ï¼Œå¦‚æœå½“å‰æ­£å¸¸ç½‘ç»œå¯¹ github ä¸ç»™åŠ›ï¼Œå¯ä»¥åˆ°è¿™é‡Œï¼Œæ‰¾ä¸ªç¦»å½“å‰æ—¥æœŸæœ€è¿‘çš„å‹ç¼©åŒ…ï¼Œä¸‹è½½ä¸‹æ¥åæ”¹åä¸º com.apple.amp.itmstransporter.zipï¼Œå­˜æ”¾ files ç›®å½•ä¸‹å³å¯","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"}]},{"title":"FQ-Terminalä¸‹çš„ä»£ç†å·¥å…·ProxyChains-NG","slug":"Others/FQ-Terminalä¸‹çš„ä»£ç†å·¥å…·ProxyChains-NG","date":"2019-01-01T17:11:51.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2019/01/01/Others/FQ-Terminalä¸‹çš„ä»£ç†å·¥å…·ProxyChains-NG/","link":"","permalink":"http://linxunfeng.top/2019/01/01/Others/FQ-Terminal%E4%B8%8B%E7%9A%84%E4%BB%A3%E7%90%86%E5%B7%A5%E5%85%B7ProxyChains-NG/","excerpt":"æ˜¯ä¸æ˜¯ä½ ä¹Ÿé‡åˆ°è¿‡ï¼Œåœ¨ Shadowsocks ä½¿ç”¨ å…¨å±€ æ¨¡å¼ä¸‹ï¼Œç»ˆç«¯ä¾æ—§æ— æ³• ping é€šè°·æ­Œï¼Ÿè¿™æ˜¯å› ä¸º Shadowsocks ä»…é’ˆå¯¹ä»£ç†åº”ç”¨è½¯ä»¶ï¼Œä½†æ˜¯ä¸€äº›ç»ˆç«¯ä¸‹æ‰§è¡Œçš„å‘½ä»¤æ˜¯æ— æ³•ä»£ç†çš„ã€‚æ‰€ä»¥æœ¬ç¯‡å°±æ¥ä»‹ç»ä¸€ä¸‹å¦‚ä½•ä½¿ä½ çš„ç»ˆç«¯ä¹Ÿèµ°ä»£ç†è¿›è¡Œè®¿é—®ã€‚","text":"æ˜¯ä¸æ˜¯ä½ ä¹Ÿé‡åˆ°è¿‡ï¼Œåœ¨ Shadowsocks ä½¿ç”¨ å…¨å±€ æ¨¡å¼ä¸‹ï¼Œç»ˆç«¯ä¾æ—§æ— æ³• ping é€šè°·æ­Œï¼Ÿè¿™æ˜¯å› ä¸º Shadowsocks ä»…é’ˆå¯¹ä»£ç†åº”ç”¨è½¯ä»¶ï¼Œä½†æ˜¯ä¸€äº›ç»ˆç«¯ä¸‹æ‰§è¡Œçš„å‘½ä»¤æ˜¯æ— æ³•ä»£ç†çš„ã€‚æ‰€ä»¥æœ¬ç¯‡å°±æ¥ä»‹ç»ä¸€ä¸‹å¦‚ä½•ä½¿ä½ çš„ç»ˆç«¯ä¹Ÿèµ°ä»£ç†è¿›è¡Œè®¿é—®ã€‚ æ˜¯ä¸æ˜¯ä½ ä¹Ÿé‡åˆ°è¿‡ï¼Œåœ¨ Shadowsocks ä½¿ç”¨ å…¨å±€ æ¨¡å¼ä¸‹ï¼Œç»ˆç«¯ä¾æ—§æ— æ³• ping é€šè°·æ­Œï¼Ÿè¿™æ˜¯å› ä¸º Shadowsocks ä»…é’ˆå¯¹ä»£ç†åº”ç”¨è½¯ä»¶ï¼Œä½†æ˜¯ä¸€äº›ç»ˆç«¯ä¸‹æ‰§è¡Œçš„å‘½ä»¤æ˜¯æ— æ³•ä»£ç†çš„ã€‚æ‰€ä»¥æœ¬ç¯‡å°±æ¥ä»‹ç»ä¸€ä¸‹å¦‚ä½•ä½¿ä½ çš„ç»ˆç«¯ä¹Ÿèµ°ä»£ç†è¿›è¡Œè®¿é—®ã€‚ æ–¹æ¡ˆä¸€ï¼šç»ˆç«¯ä¸‹çš„all_proxy è¿™é‡Œä»¥ zshrc + Shadowsocks ä¸ºä¾‹ æ‰“å¼€ Shadowsocksï¼Œæ¨¡å¼é€‰ä¸º PACè‡ªåŠ¨æ¨¡å¼ æˆ– å…¨å±€æ¨¡å¼ å¦‚æœä¸æ˜¯ä½¿ç”¨ .zshrc å°± ç¼–è¾‘ ~/.bashrcï¼Œä¸‹é¢çš„åŒç† 1ã€æ‰“å¼€ .zshrc1vim ~/.zshrc 2ã€æ·»åŠ å‘½ä»¤12alias proxy='export all_proxy=socks5://127.0.0.1:1086'alias unproxy='unset all_proxy' 3ã€ä½¿ç”¨å…ˆåº”ç”¨ä¸€ä¸‹é…ç½® 1source ~/.zshrc ç»ˆç«¯ä¸‹æ•²å…¥ 1proxy è¿™æ ·å°±åº”ç”¨ä¸Šä»£ç†äº†ï¼Œä½¿ç”¨ curl è·å–ä¸€ä¸‹ cip.cc æ¥æŸ¥çœ‹å½“å‰æ‰€ä½¿ç”¨çš„ ip 1curl cip.cc å¦‚æœä¸æƒ³ä½¿ç”¨ä»£ç†äº†ï¼Œå°±ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ 1unproxy 4ã€æ€»ç»“è¿™ç§æ–¹å¼æˆ‘ä¸ªäººæ˜¯äº²æµ‹æ— æ•ˆçš„ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘äººå“é—®é¢˜ï¼Œè¿˜æ˜¯æˆ‘çš„ MAC æœ‰é—®é¢˜ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è¯•è¯•ã€‚ æ–¹æ¡ˆäºŒï¼šProxyChains-NGproxychains-ngæ˜¯proxychainsçš„åŠ å¼ºç‰ˆï¼Œä¸»è¦æœ‰ä»¥ä¸‹åŠŸèƒ½å’Œä¸è¶³ï¼š æ”¯æŒhttp/https/socks4/socks5 æ”¯æŒè®¤è¯ è¿œç«¯dnsæŸ¥è¯¢ å¤šç§ä»£ç†æ¨¡å¼ ä¸æ”¯æŒudp/icmpè½¬å‘ å°‘éƒ¨åˆ†ç¨‹åºå’Œåœ¨åå°è¿è¡Œçš„å¯èƒ½æ— æ³•ä»£ç† è¯¦æƒ…å¯è§ GitHubåœ°å€ ç¯å¢ƒè¿™é‡Œä»¥ MAC + homebrew ä¸ºä¾‹ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…çš„è¯å¯ä»¥å‚è€ƒä¸‹æ–¹å‘½ä»¤ï¼Œè¯¦ç»†å¯è§å®˜ç½‘ Homebrew 12# å°†å‘½ä»¤ç²˜è´´è‡³ç»ˆç«¯å¹¶å›è½¦è¿›è¡Œå®‰è£…/usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\" å…³é—­SIPmacOS 10.11 åä¸‹ç”±äºå¼€å¯äº† SIPï¼ˆSystem Integrity Protectionï¼‰ ä¼šå¯¼è‡´å‘½ä»¤è¡Œä¸‹ proxychains-ng ä»£ç†çš„æ¨¡å¼å¤±æ•ˆï¼Œå¦‚æœä½ è¦ä½¿ç”¨ proxychains-ng è¿™ç§ç®€å•çš„æ–¹æ³•ï¼Œå°±éœ€è¦å…ˆå…³é—­ SIPã€‚ å…·ä½“çš„å…³é—­æ–¹æ³•å¦‚ä¸‹ï¼š éƒ¨åˆ†å…³é—­ SIP é‡å¯Macï¼ŒæŒ‰ä½Optioné”®è¿›å…¥å¯åŠ¨ç›˜é€‰æ‹©æ¨¡å¼ï¼Œå†æŒ‰âŒ˜ + Rè¿›å…¥Recoveryæ¨¡å¼ã€‚å®ç”¨å·¥å…·ï¼ˆUtilitiesï¼‰-&gt; ç»ˆç«¯ï¼ˆTerminalï¼‰ã€‚è¾“å…¥å‘½ä»¤csrutil enable --without debugè¿è¡Œã€‚é‡å¯è¿›å…¥ç³»ç»Ÿåï¼Œç»ˆç«¯é‡Œè¾“å…¥ csrutil statusï¼Œç»“æœä¸­å¦‚æœæœ‰ Debugging Restrictions: disabled åˆ™è¯´æ˜å…³é—­æˆåŠŸã€‚ å®Œå…¨å…³é—­ SIP é‡å¯Macï¼ŒæŒ‰ä½Optioné”®è¿›å…¥å¯åŠ¨ç›˜é€‰æ‹©æ¨¡å¼ï¼Œå†æŒ‰âŒ˜ + Rè¿›å…¥Recoveryæ¨¡å¼ã€‚å®ç”¨å·¥å…·ï¼ˆUtilitiesï¼‰-&gt; ç»ˆç«¯ï¼ˆTerminalï¼‰ã€‚è¾“å…¥å‘½ä»¤csrutil disableè¿è¡Œã€‚é‡å¯è¿›å…¥ç³»ç»Ÿåï¼Œç»ˆç«¯é‡Œè¾“å…¥ csrutil statusï¼Œç»“æœä¸­å¦‚æœæœ‰ System Integrity Protection status:disabled. åˆ™è¯´æ˜å…³é—­æˆåŠŸã€‚ å®‰è£…1brew install proxychains-ng é…ç½®ä½¿ç”¨ Homebrew å®‰è£…å®Œæˆåçš„é…ç½®æ–‡ä»¶è·¯å¾„ä¸º /usr/local/etc/proxychains.conf æ‰“å¼€å®ƒï¼Œæ‰¾åˆ° [ProxyList] 12[ProxyList]socks5 127.0.0.1 1086 proxychains-ngæ”¯æŒå¤šç§ä»£ç†æ¨¡å¼,é»˜è®¤æ˜¯é€‰æ‹© strict_chainã€‚ dynamic_chain ï¼šåŠ¨æ€æ¨¡å¼,æŒ‰ç…§ä»£ç†åˆ—è¡¨é¡ºåºè‡ªåŠ¨é€‰å–å¯ç”¨ä»£ç† strict_chain ï¼šä¸¥æ ¼æ¨¡å¼,ä¸¥æ ¼æŒ‰ç…§ä»£ç†åˆ—è¡¨é¡ºåºä½¿ç”¨ä»£ç†ï¼Œæ‰€æœ‰ä»£ç†å¿…é¡»å¯ç”¨ round_robin_chain ï¼šè½®è¯¢æ¨¡å¼ï¼Œè‡ªåŠ¨è·³è¿‡ä¸å¯ç”¨ä»£ç† random_chain ï¼šéšæœºæ¨¡å¼,éšæœºä½¿ç”¨ä»£ç† ç»™proxychains4å¢åŠ ä¸€ä¸ªåˆ«åï¼Œåœ¨ ~/.zshrcæˆ–~/.bashrcæœ«å°¾åŠ å…¥å¦‚ä¸‹è¡Œï¼š 1alias pc='proxychains4' è¿™æ ·å°±å¯ä»¥ä½¿ç”¨ pc æ¥ æŒ‡ä»£ proxychains4ï¼Œç®€åŒ–è¾“å…¥ã€‚ 1pc curl cip.cc å¦‚æœä½ ä½¿ç”¨ iTerm çš„è¯å¯ä»¥é…ç½®å¿«æ·é”®æ¥å®ç°å‰ç¼€è¡¥å…¨åŠŸèƒ½ 1åœ¨ iTerm -&gt; Preferences -&gt; Profiles -&gt; Keys ä¸­ï¼Œæ–°å»ºä¸€ä¸ªå¿«æ·é”®ï¼Œä¾‹å¦‚ âŒ¥ + p ï¼ŒAction é€‰æ‹© Send Hex Codeï¼Œé”®å€¼ä¸º 0x1 0x70 0x63 0x20 0xdï¼Œä¿å­˜ç”Ÿæ•ˆã€‚ æ›´å¤šçš„Hex Codeå¯ä»¥åˆ° manytricks ä¸ŠæŸ¥æ‰¾ã€‚ ä½¿ç”¨åœºæ™¯ï¼šæ•²äº†ä¸€é•¿ä¸²çš„å‘½ä»¤åæƒ³ä½¿ç”¨ä»£ç†åŠŸèƒ½æ—¶ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨å¿«æ·é”® âŒ¥ + p ï¼Œè¿™æ ·å°±ä¼šè‡ªåŠ¨åœ¨å‘½ä»¤çš„æœ€å‰é¢åŠ ä¸Š pc æµ‹è¯•1234proxychains4 curl cip.cc// å¦‚æœä½ è®¾ç½®äº†åˆ«åçš„è¯å¯ä»¥ä½¿ç”¨ pc æŒ‡ä»£ proxychains4pc curl cip.cc å¯ä»¥çœ‹åˆ°è¿™å°±ä»£ç†ä¸Šäº† 123456789IP : xxx.xxx.xxx.xxxåœ°å€ : ç¾å›½ åŠ åˆ©ç¦å°¼äºšå· æ´›æ‰çŸ¶è¿è¥å•† : it7.netæ•°æ®äºŒ : ç¾å›½æ•°æ®ä¸‰ : ç¾å›½åŠ åˆ©ç¦å°¼äºšæ´›æ‰çŸ¶URL : http:&#x2F;&#x2F;www.cip.cc&#x2F;xxx.xxx.xxx.xxx","categories":[{"name":"Others","slug":"Others","permalink":"http://linxunfeng.top/categories/Others/"}],"tags":[{"name":"FQ","slug":"FQ","permalink":"http://linxunfeng.top/tags/FQ/"},{"name":"Terminal","slug":"Terminal","permalink":"http://linxunfeng.top/tags/Terminal/"}]},{"title":"Swift æŒæ§Moyaçš„ç½‘ç»œè¯·æ±‚ã€æ•°æ®è§£æä¸ç¼“å­˜","slug":"Swift-æŒæ§Moyaçš„ç½‘ç»œè¯·æ±‚ã€æ•°æ®è§£æä¸ç¼“å­˜","date":"2018-10-27T23:41:37.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2018/10/27/Swift-æŒæ§Moyaçš„ç½‘ç»œè¯·æ±‚ã€æ•°æ®è§£æä¸ç¼“å­˜/","link":"","permalink":"http://linxunfeng.top/2018/10/27/Swift-%E6%8E%8C%E6%8E%A7Moya%E7%9A%84%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E3%80%81%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90%E4%B8%8E%E7%BC%93%E5%AD%98/","excerpt":"Moya åœ¨Swiftå¼€å‘ä¸­èµ·ç€é‡è¦çš„ç½‘ç»œäº¤äº’ä½œç”¨ï¼Œä½†æ˜¯è¿˜æœ‰ä¸å¦‚ä¹‹å¤„ï¼Œæ¯”å¦‚ç½‘ç»œä¸å¯ç”¨æ—¶ï¼Œè¿”å›çš„ Response ä¸º nilï¼Œè¿™æ—¶è¿˜å¾—å»è§£æç›¸åº”çš„ Error Codable å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿçš„è§£ææ•°æ®ï¼Œä½†æ˜¯ä¸€æ—¦å£°æ˜çš„å±æ€§ç±»å‹ä¸jsonä¸­çš„ä¸ä¸€è‡´ï¼Œå°†æ— æ³•æ­£å¸¸è§£æ; è€Œä¸”å¯¹äºæ¨¡å‹ä¸­è‡ªå®šä¹‰å±æ€§åçš„å¤„ç†ä¹Ÿååˆ†ç¹ç +","text":"Moya åœ¨Swiftå¼€å‘ä¸­èµ·ç€é‡è¦çš„ç½‘ç»œäº¤äº’ä½œç”¨ï¼Œä½†æ˜¯è¿˜æœ‰ä¸å¦‚ä¹‹å¤„ï¼Œæ¯”å¦‚ç½‘ç»œä¸å¯ç”¨æ—¶ï¼Œè¿”å›çš„ Response ä¸º nilï¼Œè¿™æ—¶è¿˜å¾—å»è§£æç›¸åº”çš„ Error Codable å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿçš„è§£ææ•°æ®ï¼Œä½†æ˜¯ä¸€æ—¦å£°æ˜çš„å±æ€§ç±»å‹ä¸jsonä¸­çš„ä¸ä¸€è‡´ï¼Œå°†æ— æ³•æ­£å¸¸è§£æ; è€Œä¸”å¯¹äºæ¨¡å‹ä¸­è‡ªå®šä¹‰å±æ€§åçš„å¤„ç†ä¹Ÿååˆ†ç¹ç + Moya åœ¨Swiftå¼€å‘ä¸­èµ·ç€é‡è¦çš„ç½‘ç»œäº¤äº’ä½œç”¨ï¼Œä½†æ˜¯è¿˜æœ‰ä¸å¦‚ä¹‹å¤„ï¼Œæ¯”å¦‚ç½‘ç»œä¸å¯ç”¨æ—¶ï¼Œè¿”å›çš„ Response ä¸º nilï¼Œè¿™æ—¶è¿˜å¾—å»è§£æç›¸åº”çš„ Error Codable å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿçš„è§£ææ•°æ®ï¼Œä½†æ˜¯ä¸€æ—¦å£°æ˜çš„å±æ€§ç±»å‹ä¸jsonä¸­çš„ä¸ä¸€è‡´ï¼Œå°†æ— æ³•æ­£å¸¸è§£æ; è€Œä¸”å¯¹äºæ¨¡å‹ä¸­è‡ªå®šä¹‰å±æ€§åçš„å¤„ç†ä¹Ÿååˆ†ç¹ç è§£å†³çš„æ–¹æ¡ˆæœ‰å¾ˆå¤šï¼Œä¸è¿‡æˆ‘æ¯”è¾ƒä¹ æƒ¯ä½¿ç”¨ MoyaMapper ï¼Œä¸ä»…å¯ä»¥è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œè¿˜æä¾›äº†å¤šç§æ¨¡å‹è½¬æ¢ã€æ•°æ®äº’è½¬ã€å¤šç§æ•°æ®ç±»å‹ä»»æ„å­˜å‚¨çš„ä¾¿æ·æ–¹æ³•ã€‚æŒæ§Moyaçš„ç½‘ç»œè¯·æ±‚ã€æ•°æ®è§£æä¸ç¼“å­˜ç®€ç›´æ˜“å¦‚åæŒã€‚ MoyaMapperæ˜¯åŸºäºMoyaå’ŒSwiftyJSONå°è£…çš„å·¥å…·ï¼Œä»¥Moyaçš„pluginçš„æ–¹å¼æ¥å®ç°é—´æ¥è§£æï¼Œæ”¯æŒRxSwift GitHub: MoyaMapper ğŸ“– è¯¦ç»†çš„ä½¿ç”¨è¯·æŸ¥çœ‹æ‰‹å†Œ https://MoyaMapper.github.io ç‰¹ç‚¹ æ”¯æŒjson è½¬ Model è‡ªåŠ¨æ˜ å°„ ä¸ è‡ªå®šä¹‰æ˜ å°„ æ— è§† json ä¸­å€¼çš„ç±»å‹ï¼ŒModel ä¸­å±æ€§å£°æ˜çš„æ˜¯ä»€ä¹ˆç±»å‹ï¼Œå®ƒå°±æ˜¯ä»€ä¹ˆç±»å‹ æ”¯æŒ Data å­—å…¸ JSON jsonå­—ç¬¦ä¸² Model äº’è½¬ æ’ä»¶æ–¹å¼ï¼Œå…¨æ–¹ä½ä¿éšœMoya.Responseï¼Œæ‹’ç»å„ç§ç½‘ç»œé—®é¢˜å¯¼è‡´ Response ä¸º nilï¼Œå°†å„å¼å„æ ·çš„åŸå› å¯¼è‡´çš„æ•°æ®åŠ è½½å¤±è´¥è¿›è¡Œç»Ÿä¸€å¤„ç†ï¼Œå¼€å‘è€…åªéœ€è¦å…³æ³¨ Response å¯é€‰ - æ”¯æŒæ•°æ®éšæ„ç¼“å­˜( JSON ã€ Number ã€Stringã€ Boolã€ Moya.Response ) å¯é€‰ - æ”¯æŒç½‘ç»œè¯·æ±‚ç¼“å­˜ æ•°æ®è§£æä¸€ã€æ’ä»¶æ³¨å…¥é™„ï¼šæ’ä»¶ MoyaMapperPlugin çš„è¯¦ç»†ä½¿ç”¨ 1ã€å®šä¹‰é€‚ç”¨äºé¡¹ç›®æ¥å£çš„ ModelableParameterType 1234567// statusCodeKeyã€tipStrKeyã€ modelKey å¯ä»¥ä»»æ„æŒ‡å®šçº§åˆ«çš„è·¯å¾„ï¼Œå¦‚ï¼š \"error&gt;used\"struct NetParameter : ModelableParameterType &#123; var successValue = \"000\" var statusCodeKey = \"retStatus\" var tipStrKey = \"retMsg\" var modelKey = \"retBody\"&#125; 2ã€åœ¨ MoyaProvider ä¸­ä½¿ç”¨ MoyaMapperPlugin æ’ä»¶ï¼Œå¹¶æŒ‡å®š ModelableParameterType 1let lxfNetTool = MoyaProvider&lt;LXFNetworkTool&gt;(plugins: [MoyaMapperPlugin(NetParameter())]) â— ä½¿ç”¨ MoyaMapperPlugin æ’ä»¶æ˜¯æ•´ä¸ª MoyaMapper çš„æ ¸å¿ƒæ‰€åœ¨ï¼ äºŒã€Modelå£°æ˜ Model éœ€éµå®ˆ Modelable åè®® MoyaMapper æ”¯æŒæ¨¡å‹è‡ªåŠ¨æ˜ å°„ å’Œ è‡ªå®šä¹‰æ˜ å°„ ä¸éœ€è¦è€ƒè™‘æºjsonæ•°æ®çš„çœŸå®ç±»å‹ï¼Œè¿™é‡Œç»Ÿä¸€æŒ‰ Model ä¸­å±æ€§å£°æ˜çš„ç±»å‹è¿›è¡Œè½¬æ¢ 1ã€ä¸€èˆ¬æƒ…å†µä¸‹å¦‚ä¸‹å†™æ³•å³å¯ 1234567struct CompanyModel: Modelable &#123; var name : String = \"\" var catchPhrase : String = \"\" init() &#123; &#125;&#125; 2ã€å¦‚æœè‡ªå®šä¹‰æ˜ å°„ï¼Œåˆ™å¯ä»¥å®ç°æ–¹æ³• mutating func mapping(_ json: JSON) 12345678910struct CompanyModel: Modelable &#123; var name : String = \"\" var catchPhrase : String = \"\" init() &#123; &#125; mutating func mapping(_ json: JSON) &#123; self.name = json[\"nickname\"].stringValue &#125;&#125; 3ã€æ”¯æŒæ¨¡å‹åµŒå¥— 12345678struct UserModel: Modelable &#123; var id : String = \"\" var name : String = \"\" var company : CompanyModel = CompanyModel() init() &#123; &#125;&#125; ä¸‰ã€Response è§£æ 1ã€ä»¥ä¸‹ç¤ºä¾‹çš†ä½¿ç”¨äº† MoyaMapperPlugin ï¼Œæ‰€ä»¥ä¸éœ€è¦æŒ‡å®š è§£æè·¯å¾„ 2ã€å¦‚æœæ²¡æœ‰ä½¿ç”¨ MoyaMapperPlugin åˆ™éœ€è¦æŒ‡å®š è§£æè·¯å¾„ï¼Œå¦åˆ™æ— æ³•æ­£å¸¸è§£æ ps: è§£æè·¯å¾„ å¯ä»¥ä½¿ç”¨ a&gt;b è¿™ç§å½¢å¼æ¥è§£å†³å¤šçº§è·¯å¾„çš„é—®é¢˜ è§£ææ–¹æ³•å¦‚ä¸‹åˆ—è¡¨æ‰€ç¤º æ–¹æ³• æè¿° (æ”¯æŒRxSwift) toJSON Response è½¬ JSON ( toJSON rx.toJSON) fetchString è·å–æŒ‡å®šè·¯å¾„çš„å­—ç¬¦ä¸²( fetchString rx.fetchString) fetchJSONString è·å–æŒ‡å®šè·¯å¾„çš„åŸå§‹jsonå­—ç¬¦ä¸² ( fetchJSONString rx.fetchJSONString ) mapResult Response -&gt; MoyaMapperResult (Bool, String) ( mapResult rx.mapResult ) mapObject Response -&gt; Model ( mapObject rx.mapObject) mapObjResult Response -&gt; (MoyaMapperResult, Model) ( mapObjResult rx.mapObjResult) mapArray Response -&gt; [Model] ( mapArray rx.mapArray) mapArrayResult Response -&gt; (MoyaMapperResult, [Model]) ( mapArrayResult rx.mapArrayResult) â—é™¤äº† fetchJSONString çš„é»˜è®¤è§£æè·¯å¾„æ˜¯æ ¹è·¯å¾„ä¹‹å¤–ï¼Œå…¶å®ƒæ–¹æ³•çš„é»˜è®¤è§£æè·¯å¾„ä¸ºæ’ä»¶å¯¹è±¡ä¸­çš„ modelKey å¦‚æœæ¥å£è¯·æ±‚å json çš„æ•°æ®ç»“æ„ä¸ä¸‹å›¾ç±»ä¼¼ï¼Œåˆ™ä½¿ç”¨ MoyaMapper æ˜¯æœ€åˆé€‚ä¸è¿‡äº† 1234567891011121314// Normallet model = response.mapObject(MMModel.self)print(\"name -- \\(model.name)\")print(\"github -- \\(model.github)\")// æ‰“å°jsonprint(response.fetchJSONString())// RxrxRequest.mapObject(MMModel.self) .subscribe(onSuccess: &#123; (model) in print(\"name -- \\(model.name)\") print(\"github -- \\(model.github)\") &#125;).disposed(by: disposeBag) é™„ï¼š fetchJSONStringçš„è¯¦ç»†ä½¿ç”¨ 12345678910111213141516// Normallet models = response.mapArray(MMModel.self)let name = models[0].nameprint(\"count -- \\(models.count)\")print(\"name -- \\(name)\")// æ‰“å° json æ¨¡å‹æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªçš„nameprint(response.fetchString(keys: [0, \"name\"]))// RxrxRequest.mapArray(MMModel.self) .subscribe(onSuccess: &#123; models in let name = models[0].name print(\"count -- \\(models.count)\") print(\"name -- \\(name)\") &#125;).disposed(by: disposeBag) é™„ï¼šmapArrayçš„è¯¦ç»†ä½¿ç”¨è¯´æ˜ 1234567891011// Normallet (isSuccess, tipStr) = response.mapResult()print(\"isSuccess -- \\(isSuccess)\")print(\"tipStr -- \\(tipStr)\")// RxrxRequest.mapResult() .subscribe(onSuccess: &#123; (isSuccess, tipStr) in print(\"isSuccess -- \\(isSuccess)\") // æ˜¯å¦ä¸º \"000\" print(\"retMsg -- \\(retMsg)\") // \"ç¼ºå°‘å¿…è¦å‚æ•°\" &#125;).disposed(by: disposeBag) é™„ï¼šmapResultçš„è¯¦ç»†ä½¿ç”¨è¯´æ˜ ç»Ÿä¸€å¤„ç†ç½‘ç»œè¯·æ±‚ç»“æœ åœ¨APPçš„å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œä¼šé‡åˆ°å„ç§å„æ ·çš„ç½‘ç»œè¯·æ±‚ç»“æœï¼Œå¦‚:æœåŠ¡å™¨æŒ‚äº†ã€æ‰‹æœºæ— ç½‘ç»œï¼Œæ­¤æ—¶ Moya è¿”å›çš„ Response ä¸º nilï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸å¾—ä¸å»åˆ¤æ–­ Errorã€‚ä½†æ˜¯ä½¿ç”¨ MoyaMapperPlugin å°±å¯ä»¥è®©æˆ‘ä»¬åªå…³æ³¨ Response 12345678// MoyaMapperPlugin çš„åˆå§‹åŒ–æ–¹æ³•public init&lt;T: ModelableParameterType&gt;( _ type: T, transformError: Bool = true)type : ModelableParameterType ç”¨äºå®šä¹‰å­—æ®µè·¯å¾„ï¼Œåšä¸ºå…¨å±€è§£ææ•°æ®çš„ä¾æ®transformError : Bool æ˜¯å¦å½“ç½‘ç»œè¯·æ±‚å¤±è´¥æ—¶ï¼Œè‡ªåŠ¨è½¬æ¢è¯·æ±‚ç»“æœï¼Œé»˜è®¤ä¸º true å½“è¯·æ±‚å¤±è´¥çš„æ—¶å€™ï¼Œæ­¤æ—¶çš„ result.response ä¸º nilï¼Œæ ¹æ®transformErroræ˜¯å¦ä¸ºtrue åˆ¤æ–­æ˜¯å¦åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ response å¹¶è¿”å›å‡ºå»ã€‚ â¡ æœ¬æ¥å¯ä»¥è¯·æ±‚åˆ°çš„æ•°æ®å†…å®¹ â¡ ç°åœ¨å…³é—­ç½‘ç»œï¼Œå†è¯·æ±‚æ•°æ® æ­£å¸¸æƒ…å†µä¸‹ï¼Œå³ä¸åšä»»ä½•ä¸å¤„ç†çš„æ—¶å€™ï¼Œ Response ä¸º nil ç»è¿‡ MoyaMapperPlugin å¤„ç†çš„åå¯å¾—åˆ°è½¬æ¢åçš„ Response ï¼Œå¦‚å›¾ è¿™é‡Œå°†è¯·æ±‚å¤±è´¥è¿›è¡Œäº†ç»Ÿä¸€å¤„ç†ï¼Œæ— è®ºæ˜¯æœåŠ¡å™¨è¿˜æ˜¯è‡ªèº«ç½‘ç»œçš„é—®é¢˜ï¼ŒretStatus éƒ½ä¸º MMStatusCode.loadFailï¼Œä½†æ˜¯ errorDescription ä¼šä¿æŒåŸæ¥çš„æ ·å­å¹¶èµ‹å€¼ç»™ retMsgã€‚ retStatus å€¼ä¼šä»æšä¸¾ MMStatusCode ä¸­å– loadFail.rawValue ï¼Œå³ 700 å– ç±»å‹ä¸º ModelableParameterType çš„ type ä¸­ statusCodeKey æ‰€æŒ‡å®šçš„å€¼ ä¸ºé”®åï¼ŒretMsgä¹ŸåŒç† ps: è¿™ä¸ªæ—¶å€™å¯ä»¥é€šè¿‡åˆ¤æ–­ retStatus æˆ– response.statusCode æ˜¯å¦ä¸ MMStatusCode.loadFail.rawValue ç›¸åŒæ¥åˆ¤æ–­æ˜¯å¦æ˜¾ç¤ºåŠ è½½å¤±è´¥çš„ç©ºç™½é¡µå ä½å›¾ 1234enum MMStatusCode: Int &#123; case cache = 230 case loadFail = 700&#125; æšä¸¾ MMStatusCode ä¸­é™¤äº† loadFail ï¼Œè¿˜æœ‰ cacheï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ loadFail åœ¨æ•°æ®åŠ è½½å¤±è´¥çš„æ—¶å€™ä¼šå‡ºç°ï¼Œé‚£ cache æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™å‡ºæ¥å‘¢ï¼Ÿä¸æ€¥ï¼Œçœ‹ä¸‹ä¸€èŠ‚å°±çŸ¥é“äº†ã€‚ æ•°æ®ç¼“å­˜ä¸€ã€åŸºæœ¬ä½¿ç”¨12345&#x2F;&#x2F; ç¼“å­˜@discardableResultMMCache.shared.cache&#96;XXX&#96;(value : XXX, key: String, cacheContainer: MMCache.CacheContainer &#x3D; .RAM) -&gt; Bool&#x2F;&#x2F; å–èˆMMCache.shared.fetch&#96;XXX&#96;Cache(key: String, cacheContainer: MMCache.CacheContainer &#x3D; .RAM) ç¼“å­˜æˆåŠŸä¼šè¿”å›ä¸€ä¸ª Bool å€¼ï¼Œè¿™é‡Œå¯ä¸æ¥æ”¶ XXX æ‰€æ”¯æŒç±»å‹ Bool - Float - Double - String - JSON - Modelable [Modelable] Moya.Response - Int UInt Int8 UInt8 Int16 UInt16 Int32 UInt32 Int64 UInt64 å…¶ä¸­ï¼Œé™¤äº† Moya.Response ä¹‹å¤–ï¼Œå…¶å®ƒç±»å‹çš†æ˜¯é€šè¿‡ JSON æ¥å®ç°ç¼“å­˜ æ‰€ä»¥ï¼Œå¦‚æœä½ æƒ³æ¸…é™¤è¿™äº›ç±»å‹çš„ç¼“å­˜ï¼Œåªéœ€è¦è°ƒç”¨å¦‚ä¸‹æ–¹æ³•å³å¯ 12345@discardableResultfunc removeJSONCache(_ key: String, cacheContainer: MMCache.CacheContainer = .RAM) -&gt; Bool@discardableResultfunc removeAllJSONCache(cacheContainer: MMCache.CacheContainer = .RAM) -&gt; Bool æ¸…é™¤ Moya.Response åˆ™ä½¿ç”¨å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³• 12345@discardableResultfunc removeResponseCache(_ key: String) -&gt; Bool@discardableResultfunc removeAllResponseCache() -&gt; Bool å†æ¥çœ‹çœ‹MMCache.CacheContainer 1234enum CacheContainer &#123; case RAM // åªç¼“å­˜äºå†…å­˜çš„å®¹å™¨ case hybrid // ç¼“å­˜äºå†…å­˜ä¸ç£ç›˜çš„å®¹å™¨&#125; è¿™ä¸¤ç§å®¹å™¨äº’ä¸ç›¸é€šï¼Œå³ å³ä½¿keyç›¸åŒï¼Œä½¿ç”¨ hybrid æ¥ç¼“å­˜åï¼Œå†é€šè¿‡ RAM å–å€¼æ˜¯å–ä¸åˆ°çš„ã€‚ RAM : ä»…ç¼“å­˜äºå†…å­˜ä¹‹ä¸­ï¼Œç¼“å­˜çš„æ•°æ®åœ¨APPä½¿ç”¨æœŸé—´ä¸€ç›´å­˜åœ¨ hybrid ï¼šç¼“å­˜äºå†…å­˜ä¸ç£ç›˜ä¸­ï¼ŒAPPé‡å¯åä¹Ÿå¯ä»¥è·å–åˆ°æ•°æ® äºŒã€ç¼“å­˜ç½‘ç»œè¯·æ±‚å†…éƒ¨ç¼“å­˜è¿‡ç¨‹ï¼š APPé¦–æ¬¡å¯åŠ¨å¹¶è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œç½‘ç»œæ•°æ®å°†ç¼“å­˜èµ·æ¥ APPå†æ¬¡å¯åŠ¨å¹¶è¿›è¡Œç½‘ç»œè¯·æ±‚æ—¶ï¼Œä¼šå…ˆè¿”å›ç¼“å­˜çš„æ•°æ®ï¼Œç­‰è¯·æ±‚æˆåŠŸåå†è¿”å›ç½‘ç»œæ•°æ® å…¶å®ƒæƒ…å†µåªä¼šåŠ è½½ç½‘ç»œæ•°æ® æ¯æ¬¡æˆåŠŸè¯·æ±‚åˆ°æ•°æ®åï¼Œéƒ½ä¼šå¯¹ç¼“å­˜çš„æ•°æ®è¿›è¡Œæ›´æ–° 123456789101112131415// Normalfunc cacheRequest( _ target: Target, cacheType: MMCache.CacheKeyType = .default, callbackQueue: DispatchQueue? = nil, progress: Moya.ProgressBlock? = nil, completion: @escaping Moya.Completion) -&gt; Cancellable// Rxfunc cacheRequest( _ target: Base.Target, callbackQueue: DispatchQueue? = nil, cacheType: MMCache.CacheKeyType = .default) -&gt; Observable&lt;Response&gt; å®é™…ä¸Šæ˜¯å¯¹ Moya è¯·æ±‚åçš„ Response è¿›è¡Œç¼“å­˜ã€‚ å…¶å®ä¸ Moya è‡ªå¸¦çš„æ–¹æ³•ç›¸æ¯”è¾ƒåªå¤šäº†ä¸€ä¸ªå‚æ•° cacheType: MMCache.CacheKeyType ï¼Œå®šä¹‰ç€ç¼“å­˜ä¸­çš„ key ï¼Œé»˜è®¤ä¸º default ä¸‹é¢æ˜¯ MMCache.CacheKeyType çš„å®šä¹‰ 123456789101112&#x2F;** let cacheKey &#x3D; [method]baseURL&#x2F;path - default : cacheKey + &quot;?&quot; + parameters - base : cacheKey - custom : cacheKey + &quot;?&quot; + customKey *&#x2F;public enum CacheKeyType &#123; case &#96;default&#96; case base case custom(String)&#125; å¦‚æœä½ æƒ³ç¼“å­˜å¤šé¡µåˆ—è¡¨æ•°æ®çš„æœ€æ–°ä¸€é¡µæ•°æ®ï¼Œæ­¤æ—¶ä½¿ç”¨ default æ˜¯ä¸åˆé€‚çš„ï¼Œå› ä¸º default ä½¿ç”¨çš„ key åŒ…å«äº† pageIndexï¼Œè¿™æ ·å°±è¾¾ä¸åˆ°åªç¼“å­˜ æœ€æ–°ä¸€é¡µæ•°æ® çš„ç›®çš„ï¼Œ æ‰€ä»¥è¿™é‡Œåº”è¯¥ä½¿ç”¨ base æˆ–è€… custom(String) æˆ‘ä»¬å¯ä»¥æ¥è¯•ä¸€ä¸‹å¸¦ç¼“å­˜çš„è¯·æ±‚ 123456789101112131415161718/* * APPç¬¬ä¸€æ¬¡å¯åŠ¨å¹¶è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œç½‘ç»œæ•°æ®å°†ç¼“å­˜èµ·æ¥ * APPå†æ¬¡å¯åŠ¨å¹¶è¿›è¡Œç½‘ç»œè¯·æ±‚æ—¶ï¼Œä¼šå…ˆåŠ è½½ç¼“å­˜ï¼Œå†åŠ è½½ç½‘ç»œæ•°æ® * å…¶å®ƒæƒ…å†µåªä¼šåŠ è½½ç½‘ç»œæ•°æ® * æ¯æ¬¡æˆåŠŸè¯·æ±‚åˆ°æ•°æ®éƒ½ä¼šè¿›è¡Œæ•°æ®æ›´æ–° */lxfNetTool.rx.cacheRequest(.data(type: .all, size: 10, index: 1)) .subscribe(onNext: &#123; response in log.debug(\"statusCode -- \\(response.statusCode)\") &#125;).disposed(by: disposeBag)// ä¼ ç»Ÿæ–¹å¼/*let _ = lxfNetTool.cacheRequest(.data(type: .all, size: 10, index: 1)) &#123; result in guard let resp = result.value else &#123; return &#125; log.debug(\"statusCode -- \\(resp.statusCode)\")&#125;*/ æ‰“å°ç»“æœ 123456789&#x2F;&#x2F; é¦–æ¬¡ä½¿ç”¨APPstatusCode -- 200&#x2F;&#x2F; å…³é—­å¹¶é‡æ–°æ‰“å¼€APPï¼Œå†è¯·æ±‚ä¸€ä¸‹statusCode -- 230statusCode -- 200&#x2F;&#x2F; ç„¶åå†è¯·æ±‚ä¸€ä¸‹statusCode -- 200 è¿™é‡Œçš„ 230 å°±æ˜¯ MMStatusCode.cache.rawValue CocoaPods é»˜è®¤å®‰è£… MoyaMapperé»˜è®¤åªå®‰è£…Coreä¸‹çš„æ–‡ä»¶1pod 'MoyaMapper' RxSwiftæ‹“å±• 1pod 'MoyaMapper/Rx' ç¼“å­˜æ‹“å±• 1pod 'MoyaMapper/MMCache' Rxç¼“å­˜ 1pod 'MoyaMapper/RxCache'","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Swift","slug":"Swift","permalink":"http://linxunfeng.top/tags/Swift/"}]},{"title":"Swift ä¼˜é›…çš„é€‚é…å¤§å°","slug":"Swift-ä¼˜é›…çš„é€‚é…å¤§å°","date":"2018-10-24T20:44:50.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2018/10/24/Swift-ä¼˜é›…çš„é€‚é…å¤§å°/","link":"","permalink":"http://linxunfeng.top/2018/10/24/Swift-%E4%BC%98%E9%9B%85%E7%9A%84%E9%80%82%E9%85%8D%E5%A4%A7%E5%B0%8F/","excerpt":"åœ¨æ—¥å¸¸å¼€å‘ä¸­å¸¸å¸¸ä¼šå¯¹è®¾å¤‡è¿›è¡Œä¸€å®šçš„é€‚é…ï¼Œä¸ºäº†æ–¹ä¾¿åœ¨å¤šä¸ªé¡¹ç›®é‡Œç»Ÿä¸€ç®¡ç†å’Œä½¿ç”¨ï¼Œæ‰€ä»¥å°è£…å¹¶å¼€æºäº†SwiftyFitsizeè¿™ä¸ªåº“ï¼Œå¯ç”¨äºé€‚é…è§†å›¾åŠå­—ä½“å¤§å°ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒ xib å’Œ storyboard GitHub: SwiftyFitsize +","text":"åœ¨æ—¥å¸¸å¼€å‘ä¸­å¸¸å¸¸ä¼šå¯¹è®¾å¤‡è¿›è¡Œä¸€å®šçš„é€‚é…ï¼Œä¸ºäº†æ–¹ä¾¿åœ¨å¤šä¸ªé¡¹ç›®é‡Œç»Ÿä¸€ç®¡ç†å’Œä½¿ç”¨ï¼Œæ‰€ä»¥å°è£…å¹¶å¼€æºäº†SwiftyFitsizeè¿™ä¸ªåº“ï¼Œå¯ç”¨äºé€‚é…è§†å›¾åŠå­—ä½“å¤§å°ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒ xib å’Œ storyboard GitHub: SwiftyFitsize + åœ¨æ—¥å¸¸å¼€å‘ä¸­å¸¸å¸¸ä¼šå¯¹è®¾å¤‡è¿›è¡Œä¸€å®šçš„é€‚é…ï¼Œä¸ºäº†æ–¹ä¾¿åœ¨å¤šä¸ªé¡¹ç›®é‡Œç»Ÿä¸€ç®¡ç†å’Œä½¿ç”¨ï¼Œæ‰€ä»¥å°è£…å¹¶å¼€æºäº†SwiftyFitsizeè¿™ä¸ªåº“ï¼Œå¯ç”¨äºé€‚é…è§†å›¾åŠå­—ä½“å¤§å°ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒ xib å’Œ storyboard GitHub: SwiftyFitsize æœ€ç»ˆçš„æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤º å®‰è£…ä½¿ç”¨Cocoapodså®‰è£…ï¼Œæˆ–æ‰‹åŠ¨æ‹–å…¥é¡¹ç›®1pod &#39;SwiftyFitsize&#39; ä½¿ç”¨SwiftyFitsizeåœ¨é»˜è®¤çŠ¶å†µä¸‹æ‰€ä½¿ç”¨çš„å‚ç…§å®½åº¦ä¸ºiphone6çš„375å¦‚æœè®¾è®¡å›¾æ‰€é€‰ç”¨è®¾å¤‡çš„å®½åº¦ä¸é»˜è®¤å€¼ä¸åŒï¼Œå¯ä»¥åœ¨AppDelegateä¸‹åˆå§‹åŒ–æ‰€å‚ç…§çš„å®½åº¦ 1SwiftyFitsize.reference(width: 414) ä¸‹é¢åˆ—å‡ºä¸€äº›è®¾å¤‡å¯¹åº”çš„åˆ†è¾¨ç‡ï¼Œæ–¹ä¾¿æŸ¥æ‰¾ è®¾å¤‡ é€»è¾‘åˆ†è¾¨ç‡(point) è®¾å¤‡åˆ†è¾¨ç‡(pixel) SE 320x568 640x1136 6(S)ï¼7ï¼8 375x667 750x1334 6(S)+ï¼7+ï¼8+ 414x736 1080x1920 X(S) 375x812 1125x2436 XR 414x896 828x1792 XS Max 414x896 1242x2688 ä½¿ç”¨ä¹Ÿæ˜¯éå¸¸æ–¹ä¾¿çš„ï¼Œåªéœ€è¦åœ¨Numberã€UIFontã€CGPointã€CGSizeã€UIEdgeInsetsMakeè¿™äº›ç±»å‹çš„å€¼åé¢åŠ ä¸Š~å³å¯123456100~UIFont.systemFont(ofSize: 14)~CGPoint(x: 10, y: 10)~CGSize(width: 100, height: 100)~CGRect(x: 10, y: 10, width: 100, height: 100)~UIEdgeInsetsMake(10, 10, 10, 10)~ xib / storyboard å­—ä½“é€‚é…æ”¯æŒæ§ä»¶ UILabel UIButton UITextView UITextField xib / storyboard çº¦æŸé€‚é… ##### æ³¨ï¼š~è¯·ä¸è¦ç›¸äº’åµŒå¥—ä½¿ç”¨ï¼Œå¦‚ 1CGPoint(x: 10~, y: 10~)~","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Swift","slug":"Swift","permalink":"http://linxunfeng.top/tags/Swift/"}]},{"title":"iOS-é¢å‘åè®®å°è£…å…¨å±æ—‹è½¬åŠŸèƒ½","slug":"iOS-é¢å‘åè®®å°è£…å…¨å±æ—‹è½¬åŠŸèƒ½","date":"2018-09-15T18:05:45.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2018/09/15/iOS-é¢å‘åè®®å°è£…å…¨å±æ—‹è½¬åŠŸèƒ½/","link":"","permalink":"http://linxunfeng.top/2018/09/15/iOS-%E9%9D%A2%E5%90%91%E5%8D%8F%E8%AE%AE%E5%B0%81%E8%A3%85%E5%85%A8%E5%B1%8F%E6%97%8B%E8%BD%AC%E5%8A%9F%E8%83%BD/","excerpt":"å…³äºä½¿ç”¨é¢å‘åè®®æ¥å°è£…åŠŸèƒ½çš„å®æˆ˜å¯ä»¥å‚è€ƒæˆ‘ä¸Šç¯‡æ–‡ç«  ã€iOS-é¢å‘åè®®æ–¹å¼å°è£…ç©ºç™½é¡µåŠŸèƒ½ã€‘ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œæˆ‘ä»¬ç›´æ¥è¿›å…¥ä½¿ç”¨é˜¶æ®µå§ã€‚æœ¬ç¯‡æ–‡ç« åªæœ‰ä¸€ä¸ªç›®çš„ï¼Œé‚£å°±æ˜¯åªè¦éµå®ˆåè®®ï¼Œä¸€è¡Œä»£ç éšæ„åˆ‡æ¢å…¨å±ï½ å¦‚æœå¯¹é¢å‘åè®®æœ‰ç–‘é—®çš„åŒå­¦å¯ä»¥çœ‹ä¸‹æˆ‘ä¹‹å‰çš„ä¸¤ç¯‡æ–‡ç«  iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰ iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰ +","text":"å…³äºä½¿ç”¨é¢å‘åè®®æ¥å°è£…åŠŸèƒ½çš„å®æˆ˜å¯ä»¥å‚è€ƒæˆ‘ä¸Šç¯‡æ–‡ç«  ã€iOS-é¢å‘åè®®æ–¹å¼å°è£…ç©ºç™½é¡µåŠŸèƒ½ã€‘ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œæˆ‘ä»¬ç›´æ¥è¿›å…¥ä½¿ç”¨é˜¶æ®µå§ã€‚æœ¬ç¯‡æ–‡ç« åªæœ‰ä¸€ä¸ªç›®çš„ï¼Œé‚£å°±æ˜¯åªè¦éµå®ˆåè®®ï¼Œä¸€è¡Œä»£ç éšæ„åˆ‡æ¢å…¨å±ï½ å¦‚æœå¯¹é¢å‘åè®®æœ‰ç–‘é—®çš„åŒå­¦å¯ä»¥çœ‹ä¸‹æˆ‘ä¹‹å‰çš„ä¸¤ç¯‡æ–‡ç«  iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰ iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰ + å…³äºä½¿ç”¨é¢å‘åè®®æ¥å°è£…åŠŸèƒ½çš„å®æˆ˜å¯ä»¥å‚è€ƒæˆ‘ä¸Šç¯‡æ–‡ç«  ã€iOS-é¢å‘åè®®æ–¹å¼å°è£…ç©ºç™½é¡µåŠŸèƒ½ã€‘ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œæˆ‘ä»¬ç›´æ¥è¿›å…¥ä½¿ç”¨é˜¶æ®µå§ã€‚æœ¬ç¯‡æ–‡ç« åªæœ‰ä¸€ä¸ªç›®çš„ï¼Œé‚£å°±æ˜¯åªè¦éµå®ˆåè®®ï¼Œä¸€è¡Œä»£ç éšæ„åˆ‡æ¢å…¨å±ï½ å¦‚æœå¯¹é¢å‘åè®®æœ‰ç–‘é—®çš„åŒå­¦å¯ä»¥çœ‹ä¸‹æˆ‘ä¹‹å‰çš„ä¸¤ç¯‡æ–‡ç«  iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰ iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰ å¼€æºåº“ Name Link GitHub LXFProtocolTool Wiki Wikié¦–é¡µ æœ¬æ–‡ Demo LXFFullScreenable ä½¿ç”¨Cocoapodsçš„æ–¹å¼æ¥å®‰è£…å³å¯ 1pod 'LXFProtocolTool/FullScreenable' ä¸€ã€é…ç½®åœ¨AppDelegateä¸­å®ç°å¦‚ä¸‹æ–¹æ³• 123func application(_ application: UIApplication, supportedInterfaceOrientationsFor window: UIWindow?) -&gt; UIInterfaceOrientationMask &#123; return UIApplication.shared.lxf.currentVcOrientationMask&#125; äºŒã€ä½¿ç”¨æ¡ˆä¾‹ æ–¹æ³•ä¸å±æ€§çš„è°ƒç”¨éƒ½éœ€è¦å‘½åç©ºé—´åŠ ä¸Š lxfï¼Œå¦‚isFullScreen -&gt; lxf.isFullScreen 1isFullScreen : è·å–å½“å‰éµå®ˆåè®®è€…æ˜¯å¦ä¸ºå…¨å±çŠ¶æ€ 1234567func switchFullScreen( isEnter: Bool? = nil, specifiedView: UIView? = nil, superView: UIView? = nil, config: FullScreenableConfig? = nil, completed: ((_ isFullScreen: Bool)-&gt;Void)? = nil) Name Type Desc isEnter Bool? æ˜¯å¦è¿›å…¥å…¨å± specifiedView UIView? æŒ‡å®šå³å°†å…¨å±çš„è§†å›¾ superView UIView? ä½œä¸ºé€€å‡ºå…¨å±åspecifiedViewçš„çˆ¶è§†å›¾ config FullScreenableConfig? é…ç½® completed ((_ isFullScreen: Bool)-&gt;Void)? è¿›å…¥/é€€å‡º å…¨å±åçš„å›è°ƒ å½“switchFullScreençš„è°ƒç”¨è€…ä¸ºUIViewæ—¶ï¼Œå¦‚æœspecifiedViewä¸ºnilä¼šè‡ªåŠ¨å¡«å†™ï¼ŒsuperViewä¹Ÿæ˜¯å¦‚æ­¤ switchFullScreenæ–¹æ³•ä¸æ¨èç›´æ¥ä½¿ç”¨ï¼Œä¸è¿‡å½“éµå®ˆåè®®è€…ä¸ºUIViewControlleræ—¶ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨é»˜è®¤å‚æ•°æ¥åˆ‡æ¢å±å¹•æ–¹å‘lxf.switchFullScreen() ä»¥ä¸‹åˆ†ä¸¤ç§æƒ…å†µè¯´æ˜ UIViewController12345func enterFullScreen( specifiedView: UIView, config: FullScreenableConfig? = nil, completed: FullScreenableCompleteType? = nil) 12345func exitFullScreen( superView: UIView, config: FullScreenableConfig? = nil, completed: FullScreenableCompleteType? = nil) ä»¥ä¸Šä¸¤ä¸ªæ–¹æ³•æ˜¯å¯¹switchFullScreençš„æŠ½ç¦»ï¼Œä½¿è°ƒç”¨æ—¶å¯¹å‚æ•°çš„ä¼ é€’æ›´åŠ æ¸…æ™° 1ã€éµå®ˆåè®® FullScreenable 1class LXFFullScreenableController: UIViewController, FullScreenable &#123; &#125; 2ã€æŒ‡å®šè§†å›¾è¿›å…¥å…¨å±1lxf.enterFullScreen(specifiedView: cyanView) 3ã€æŒ‡å®šè§†å›¾é€€å‡ºå…¨å±ï¼Œå¹¶æ·»åŠ åˆ°å½“å‰æ§åˆ¶å™¨çš„viewä¸Š1lxf.exitFullScreen(superView: self.view) ğŸ”¥è‡ªåŠ¨è¿›å…¥|é€€å‡ºå…¨å±12345func autoFullScreen( specifiedView: UIView, superView: UIView, config: FullScreenableConfig? = nil) æ§åˆ¶å™¨å¯ä»¥è°ƒç”¨è¯¥æ–¹æ³•æ¥æ³¨å†Œè‡ªåŠ¨è¿›å…¥æˆ–é€€å‡ºå…¨å±ï¼Œå„æ§åˆ¶å™¨ä¹‹é—´äº’ä¸å½±å“ã€‚ viewæ‰‹åŠ¨è¿›å…¥å…¨å±ä¼šå±è”½å½“å‰æ§åˆ¶å™¨çš„è‡ªåŠ¨å…¨å±åŠŸèƒ½ï¼Œé€€å‡ºæ–¹å¯æ¢å¤ UIView12345func enterFullScreen( specifiedView: UIView? = nil, config: FullScreenableConfig? = nil, completed: FullScreenableCompleteType? = nil) 12345func exitFullScreen( superView: UIView? = nil, config: FullScreenableConfig? = nil, completed: FullScreenableCompleteType? = nil) ä»¥ä¸Šä¸¤ä¸ªæ–¹æ³•æ˜¯å¯¹switchFullScreençš„æŠ½ç¦»ï¼Œä½¿è°ƒç”¨æ—¶å¯¹å‚æ•°çš„ä¼ é€’æ›´åŠ æ¸…æ™° 1ã€éµå®ˆåè®® FullScreenable 1class LXFFullScreenView: UIButton, FullScreenable &#123; &#125; 1let cyanView = LXFFullScreenView() 2ã€è¿›å…¥å…¨å± 1cyanView.lxf.enterFullScreen() 3ã€é€€å‡ºå…¨å±1cyanView.lxf.exitFullScreen() è¿™é‡Œæ˜¯å¯¹éµå®ˆäº†FullScreenableåè®®çš„è§†å›¾è¿›å…¥å…¨å±åˆ‡æ¢ï¼Œç”±äºä»£ç å†…éƒ¨å·²ç»ç»è¿‡è‡ªåŠ¨è§†å›¾å¡«å†™ï¼Œæ‰€ä»¥\bç›´æ¥è°ƒç”¨ç›¸åº”çš„æ–¹æ³•å³å¯ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è‡ªå·±æŒ‡å®šspecifiedViewå’ŒsuperView ä¸‰ã€FullScreenableConfigè¯´æ˜ ä¸Šè¿°çš„æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªconfigå‚æ•°ï¼Œé»˜è®¤ä¸ºnilï¼Œå³ä¸ºé»˜è®¤é…ç½® ç›¸å…³å±æ€§è¯´æ˜| Name | Type | Desc | Default || â€”â€”â€”â€”â€”â€”â€”â€”â€“ | â€”â€”â€”â€”â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” | â€”â€”â€”â€”â€“ || animateDuration | Double | è¿›å…¥/é€€å‡º å…¨å±æ—¶çš„æ—‹è½¬åŠ¨ç”»æ—¶é—´ | 0.25 || enterFullScreenOrientation | UIInterfaceOrientation | è¿›å…¥å…¨å±æ—¶çš„åˆå§‹æ–¹å‘ | landscapeRight | è¿™é‡Œæˆ‘ä»¬æŠŠåŠ¨ç”»æ—¶é—´è®¾ç½®ä¸º1sï¼Œåˆå§‹æ–¹å‘ä¸ºå·¦åæ¥çœ‹çœ‹æ•ˆæœ1234FullScreenableConfig( animateDuration: 1, enterFullScreenOrientation : .landscapeLeft)12cyanView.lxf.enterFullScreen(config: diyConfig)cyanView.lxf.exitFullScreen(config: diyConfig) ç»“è¯­åˆ°è¿™é‡Œç›¸å…³çš„è¯´æ˜å·²ç½—åˆ—å®Œæ¯•ï¼Œæœ‰ä»€ä¹ˆä¸æ¸…æ¥šçš„å¯ä»¥ä¸‹è½½Demoçœ‹çœ‹ï¼Œæˆ–è€…åœ¨æ–‡ç« ä¸‹æ–¹ç•™è¨€æé—® LXFProtocolTool ä¸»è¦æ˜¯é€šè¿‡åè®®çš„æ–¹å¼æ¥æ–¹ä¾¿å¿«æ·åœ°å®ç°ä¸€äº›çš„å®ç”¨åŠŸèƒ½ï¼Œé™¤äº†æœ¬æ–‡æåŠçš„å…¨å±æ—‹è½¬åŠŸèƒ½å¤–è¿˜æœ‰å…¶å®ƒå®ç”¨åŠŸèƒ½çš„å°è£…ï¼Œå…·ä½“å†…å®¹å¯ä»¥åˆ° Wikié¦–é¡µ æŸ¥æ‰¾ã€‚å¦‚æœä½ æœ‰ä»€ä¹ˆæƒ³å®ç°çš„åŠŸèƒ½ä¹Ÿå¯ä»¥æå‡ºæ¥ï¼Œå–œæ¬¢çš„å°±ç»™ä¸ªStaré¼“åŠ±ä¸‹æˆ‘å§ ğŸš€ ğŸš€ ğŸš€ï¼Œæ„Ÿè°¢æ”¯æŒï¼","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Swift","slug":"Swift","permalink":"http://linxunfeng.top/tags/Swift/"}]},{"title":"AppRTCå®æˆ˜","slug":"AppRTCå®æˆ˜","date":"2018-06-07T22:49:36.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2018/06/07/AppRTCå®æˆ˜/","link":"","permalink":"http://linxunfeng.top/2018/06/07/AppRTC%E5%AE%9E%E6%88%98/","excerpt":"è®°å½•AppRTCçš„æ­å»ºè¿‡ç¨‹ï¼Œå®ç°iOSã€Androidã€BrowseråŒå¼‚è®¾å¤‡çš„è§†é¢‘é€šä¿¡","text":"è®°å½•AppRTCçš„æ­å»ºè¿‡ç¨‹ï¼Œå®ç°iOSã€Androidã€BrowseråŒå¼‚è®¾å¤‡çš„è§†é¢‘é€šä¿¡ 1ã€è®°å½•AppRTCçš„æ­å»ºè¿‡ç¨‹ï¼Œå®ç°iOSã€å®‰å“ã€browseråŒå¼‚è®¾å¤‡çš„è§†é¢‘é€šä¿¡2ã€ä»¥ä¸‹ç›´æ¥ä»¥rootèº«ä»½è¿›è¡Œæ“ä½œï¼Œæ‰€æœ‰çš„éœ€è¦ä¸‹è½½çš„æ–‡ä»¶å‡æ”¾ç½®äº/rootç›®å½•ä¸‹ï¼Œéœ€è¦çš„è¯ï¼Œå¯ä»¥è‡ªè¡Œå†³å®šå­˜æ”¾ä½ç½®ï¼Œä½†æ˜¯è¦æ³¨æ„ä¿®æ”¹ç›¸å…³çš„é…ç½®è·¯å¾„ï½ ä¸€ã€è®¾å¤‡é…ç½® é˜¿é‡Œäº‘ESCæœåŠ¡å™¨ Ubuntu 16.04 64ä½ è…¾è®¯äº‘åŸŸå äºŒã€ç›¸å…³ç¯å¢ƒ1ã€JDK123add-apt-repository ppa:openjdk-r/ppa apt-get update apt-get install openjdk-8-jdk 2ã€nodejsnodejså®˜ç½‘123// è¿™é‡Œçš„ç‰ˆæœ¬8.xå¯ä»¥æŒ‰è‡ªå·±çš„éœ€æ±‚å»ä¿®æ”¹curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -apt-get install -y nodejsè‡³æ­¤å·²ç»å®‰è£…äº†æœ€æ–°ç‰ˆçš„nodejså’Œnpmäº†,å¯ä»¥ä½¿ç”¨-væ¥æŸ¥çœ‹å½“å‰ç‰ˆæœ¬ 12node -vnpm -v å®‰è£…grunt-cliï¼Œåé¢éœ€è¦gruntæ¥æ„å»ºæˆ¿é—´æœåŠ¡å™¨ 1npm -g install grunt-cli 3ã€pythonä¸python-webtest12apt-get install python apt-get install python-webtest libevent12apt-cache search libeventapt-get install libevent-dev ä¸‰ã€Room Server æˆ¿é—´æœåŠ¡å™¨123git clone https:&#x2F;&#x2F;github.com&#x2F;webrtc&#x2F;apprtc.git cd apprtcnpm install 1ã€é…ç½® constants.py12# å½“å‰ç›®å½• -- apprtcvim src/app_engine/constants.py 1234567891011121314151617181920212223# è¿™éƒ¨åˆ†ä¸º æ·»åŠ TURN_BASE_URL = 'https://linxunfeng.top' # ä¿®æ”¹ä¸ºä½ è‡ªå·±å½“å‰æœåŠ¡å™¨çš„åŸŸåï¼Œä¸‹é¢çš„äº¦æ˜¯å¦‚æ­¤TURN_URL_TEMPLATE = '%s/turn.php?username=%s&amp;key=%s' #å¦‚æœturn.phpæœªå®ç°ï¼Œå¯ä½¿ç”¨é»˜è®¤é…ç½®CEOD_KEY = 'lxf' # è¿™ä¸ªå¾ˆé‡è¦ï¼Œåé¢é…ç½®turnæ—¶éœ€è¦ç”¨åˆ°# è¿™éƒ¨åˆ†ä¸º ä¿®æ”¹ICE_SERVER_BASE_URL = 'https://linxunfeng.top'ICE_SERVER_URL_TEMPLATE = '%s/iceconfig.php?key=%s' #å¦‚æœiceconfig.phpæœªå®ç°ï¼Œå¯ç”¨é»˜è®¤é…ç½®ï¼Œä½†æ˜¯Android Apkä¼šæœ‰é—®é¢˜ICE_SERVER_API_KEY = os.environ.get('ICE_SERVER_API_KEY')# Dictionary keys in the collider instance info constant.WSS_INSTANCE_HOST_KEY = 'linxunfeng.top:8089' #ä¿¡ä»¤æœåŠ¡å™¨ç«¯å£å·8089 WSS_INSTANCE_NAME_KEY = 'vm_name'WSS_INSTANCE_ZONE_KEY = 'zone'WSS_INSTANCES = [&#123; WSS_INSTANCE_HOST_KEY: 'linxunfeng.top:8089', WSS_INSTANCE_NAME_KEY: 'wsserver-std', WSS_INSTANCE_ZONE_KEY: 'us-central1-a'&#125;, &#123; WSS_INSTANCE_HOST_KEY: 'linxunfeng.top:8089', WSS_INSTANCE_NAME_KEY: 'wsserver-std-2', WSS_INSTANCE_ZONE_KEY: 'us-central1-f'&#125;] 2ã€ç¼–è¯‘12# å½“å‰ç›®å½• -- apprtcgrunt build ç¼–è¯‘å¥½åapprtcç›®å½•ä¸‹å°±ä¼šå¤šå‡ºä¸€ä¸ªåä¸ºoutçš„ç›®å½•ï¼Œé‡Œé¢å­˜æ”¾çš„å°±æ˜¯ç¼–è¯‘å¥½çš„room server 3ã€GoogleAppEngineçš„å®‰è£…ä¸é…ç½®å®˜ç½‘ï¼šGoogleAppEngine å¯ä»¥åœ¨æ­¤è·¯å¾„æ‰¾æœ€æ–°ç‰ˆæœ¬ GoogleAppEngine -&gt; Python -&gt; Download and install the original App Engine SDK for Python. ç›®å‰æœ€æ–°ç‰ˆæœ¬ä¸ºï¼šgoogle_appengine_1.9.70.zip ä¸‹è½½ GoogleAppEngine 1wget https://storage.googleapis.com/appengine-sdks/featured/google_appengine_1.9.70.zip è§£å‹ 1unzip google_appengine_1.9.70.zip è®¾ç½®ç¯å¢ƒå˜é‡ 1vim /etc/profile 1export PATH=\"$PATH:/root/google_appengine/\" åº”ç”¨ç¯å¢ƒå˜é‡ 1source /etc/profile 4ã€å¼€å¯ Room Server åŸºæœ¬å‘½ä»¤ 12# å½“å‰è·¯å¾„ -- /root/google_appengine./dev_appserver.py --host=linxunfeng.top ../apprtc/out/app_engine/ å¦‚æœä½ ä½¿ç”¨çš„æ˜¯é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œè¿™é‡Œå°±ä¸èƒ½ç”¨åŸŸålinxunfeng.topæ¥å¯åŠ¨room serverï¼Œè€Œæ˜¯ä½¿ç”¨æœ¬åœ°ç½‘å¡åœ°å€ï¼Œå¦åˆ™å°±ä¼šæç¤º raise BindError(â€˜Unable to bind %s:%sâ€™ % self.bind_addr)google.appengine.tools.devappserver2.wsgi_server.BindError: Unable to bind linxunfeng.top:8080 æŸ¥çœ‹ç½‘å¡ 1ifconfig 1234root@xxx:~/google_appengine# ifconfigeth0 Link encap:Ethernet HWaddr 00:16:3e:08:b4:02 inet addr:172.18.141.108 Bcast:172.18.143.255 Mask:255.255.240.0 ... 1./dev_appserver.py --host=172.18.141.108 ../apprtc/out/app_engine/ è¿™æ ·å°±å¥½äº†å—ï¼Ÿä¸ï¼Œè™½ç„¶æ²¡æœ‰æŠ¥é”™ï¼Œä½†æ˜¯ä½ ç”¨æµè§ˆå™¨æ‰“å¼€ä½ çš„åŸŸåçœ‹çœ‹â€¦è¿™é‡Œç›´æ¥ç»™å‡ºæœ€ç»ˆå‘½ä»¤ï¼Œå…·ä½“åŸå› çœ‹ ç–‘éš¾æ‚ç—‡ - 1 æœ€ç»ˆå‘½ä»¤ 1234./dev_appserver.py --enable_host_checking=false --host=172.18.141.108 ../apprtc/out/app_engine/# å¦‚æœæƒ³ç›´æ¥åå°è¿è¡Œï¼Œåˆ™ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤nohup ./dev_appserver.py --enable_host_checking=false --host=172.18.141.108 ../apprtc/out/app_engine/ &amp; è®¿é—® room server 1http:&#x2F;&#x2F;åŸŸå:8080 å››ã€Collider Server ä¿¡ä»¤æœåŠ¡å™¨1ã€æ‹·è´collideræºç 12# å½“å‰è·¯å¾„ -- /rootmkdir -p goWorkspace/src æŠŠapprtc/src/collider/ç›®å½•ä¸‹çš„ä¸‰ä¸ªç›®å½•ï¼ˆcolliderã€collidermainã€collidertestï¼‰å¤åˆ¶åˆ°goWorkspace/src/ç›®å½•ä¸‹ 1cp -rf apprtc/src/collider/* /goWorkspace/src 2ã€ä¿®æ”¹ä»£ç  ä¿®æ”¹æˆ¿é—´æœåŠ¡å™¨çš„åœ°å€ 12# goWorkspace/src/collidermain/main.govar roomSrv = flag.String(\"room-server\", \"https://åŸŸå\", \"The origin of the room server\") ä¿®æ”¹ç½‘ç«™è¯ä¹¦è·¯å¾„ 123456# goWorkspace/src/collider/collider.goe = server.ListenAndServeTLS(\"/etc/letsencrypt/live/åŸŸå/fullchain.pem\", \"/etc/letsencrypt/live/åŸŸå/privkey.pem\")# å¦‚ï¼še = server.ListenAndServeTLS(\"/etc/letsencrypt/live/linxunfeng.top/fullchain.pem\", \"/etc/letsencrypt/live/linxunfeng.top/privkey.pem\") ç›¸å…³çš„SSLè¯ä¹¦fullchain.pemå’Œprivkey.pemåœ¨åé¢çš„nginxé…ç½®ä¸­ä¼šæåˆ°ï¼Œè¿™é‡Œå…ˆå†™ä¸Š 3ã€å®‰è£…ä¸é…ç½®ç¯å¢ƒ ä¸‹è½½GOè¯­è¨€ç¯å¢ƒ FQ åˆ° GOå®˜ç½‘ä¸Šä¸‹è½½æœ€æ–°ç‰ˆæœ¬ å½“å‰æœ€æ–°ç‰ˆæœ¬ï¼šgo1.10.2.linux-amd64.tar.gz 12# å½“å‰è·¯å¾„ -- /rootwget https://dl.google.com/go/go1.10.2.linux-amd64.tar.gz ä¿®æ”¹profile 1vim /etc/profile æ‰“å¼€profileåæ·»åŠ å¦‚ä¸‹å†…å®¹ 123export GOROOT=/root/goexport GOPATH=/root/goWorkspaceexport PATH=$PATH:$GOROOT/bin:$GOPATH/bin åº”ç”¨ç¯å¢ƒå˜é‡ 1source /etc/profile 4ã€ç¼–è¯‘è¿›å…¥ç›®å½• goWorkspace/src/ 12go get collidermaingo install collidermain è¿™é‡Œçš„ç¼–è¯‘è¿‡ç¨‹éœ€è¦ç¿»å¢™ï¼Œå¦‚æœæ— æ³•ç¿»å¢™ï¼Œè¯·çœ‹ä»¥ä¸‹å†…å®¹ï¼Œå¦‚æœå¯ä»¥åˆ™ç›´æ¥è·³è‡³ç¬¬5å°ç‚¹ 1234# å½“å‰è·¯å¾„ -- /root/goWorkspace/srcmkdir -p golang.org/x cd golang.org/x/git clone https://github.com/golang/net git cloneæˆåŠŸåå†æ‰§è¡Œä¸Šé¢çš„ä¸¤è¡Œç¼–è¯‘å‘½ä»¤ 5ã€å¼€å¯ Collider Serverè¿›å…¥goWorkspaceä¸‹çš„binç›®å½•ï¼Œæ‰§è¡Œå‘½ä»¤ 123456# å½“å‰è·¯å¾„ -- /root/goWorkspace/bin# -tls=true : æŒ‡éœ€è¦æ•°å­—è¯ä¹¦./collidermain -port=8089 -tls=true# å¦‚æœæƒ³ç›´æ¥åå°è¿è¡Œï¼Œåˆ™ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤nohup ./collidermain -port=8089 -tls=true &amp; äº”ã€STUN\\TURNæœåŠ¡å™¨1ã€å®‰è£…coturn1apt-get install coturn 2ã€ä¿®æ”¹é…ç½® coturn 1vim /etc/default/coturn æŠŠTURNSERVER_ENABLED=1çš„æ³¨é‡Šå»æ‰ turnserver.conf 1vim /etc/turnserver.conf 12345678910111213141516171819listening-device=eth0 #æ­¤å¤„eth0æ˜¯ç”µè„‘ç½‘å¡åç§°listening-port=3478 #turnæœåŠ¡å™¨çš„ç«¯å£å·relay-device=eth0 #æ­¤å¤„eth0æ˜¯ç”µè„‘ç½‘å¡åç§°min-port=49152max-port=65535Verbosefingerprintlt-cred-mechuse-auth-secretstatic-auth-secret=lxf #æ­¤å¤„è¦å’Œæˆ¿é—´æœåŠ¡å™¨é…ç½®æ—¶constants.pyæ–‡ä»¶ä¸­çš„CODE_KEYä¿æŒä¸€è‡´ã€‚user=lxf:0x8638170519dd1309044bca55319ff929user=lxf:lxfstale-noncecert=/usr/local/etc/turn_server_cert.pempkey=/usr/local/etc/turn_server_pkey.pemno-loopback-peersno-multicast-peersmobilityno-cli ä¸Šè¿°æ–‡ä»¶ä¸­ 0x8638170519dd1309044bca55319ff929ï¼š turnadmin -k -u lxf -r north.gov -p lxf -k è¡¨ç¤ºç”Ÿæˆä¸€ä¸ªlong-term credential key-u è¡¨ç¤ºç”¨æˆ·å-p è¡¨ç¤ºå¯†ç -r è¡¨ç¤ºRealmåŸŸ coturnçš„è¯ä¹¦ç”Ÿæˆï¼ˆå³é…ç½®æ–‡ä»¶ä¸­certå’Œpkey) 1openssl req -x509 -newkey rsa:2048 -keyout /usr/local/etc/turn_server_pkey.pem -out /usr/local/etc/turn_server_cert.pem -days 99999 -nodes 3ã€å¯åŠ¨coturnæœåŠ¡å™¨1service coturn start ç”¨æµè§ˆå™¨æ‰“å¼€1http:&#x2F;&#x2F;åŸŸå:3478 æ˜¾ç¤ºå¦‚ä¸‹å†…å®¹åˆ™è¯´æ˜æˆåŠŸå¼€å¯æœåŠ¡ TURN Serveruse https connection for the admin session å…­ã€é…ç½®nginxæœåŠ¡å™¨1ã€ç”ŸæˆSSLè¯ä¹¦è¿™é‡Œä½¿ç”¨letâ€™s encrypté¢å‘çš„å…è´¹SSLè¯ä¹¦ certbot.eff.org å®‰è£…è½¯ä»¶ 12345sudo apt-get update apt-get install software-properties-common add-apt-repository ppa:certbot/certbot apt-get update apt-get install python-certbot-nginx ç”Ÿæˆè¯ä¹¦ 1certbot --nginx certonly SSLè¯ä¹¦ç”Ÿæˆçš„ç›®å½•ä¸ºï¼š/etc/letsencrypt/live/åŸŸå/ï¼Œé‡Œé¢å­˜æ”¾ç€å››ä¸ªæ–‡ä»¶cert.pem,chain.pem,fullchain.pem,privkey.pem 2ã€å®‰è£…phpå’Œphp-fpm å®‰è£…phpå’Œphp-fpm 12apt-get install php apt-get install php7.0-fpm 3ã€å®‰è£…ä¸é…ç½®nginx å®‰è£…nginx 1apt-get install nginx ä¿®æ”¹nginxé…ç½® 1vim /etc/nginx/sites-available/default å°†ä¸‹é¢çš„linxunfeng.topä¿®æ”¹ä¸ºä½ è‡ªå·±çš„åŸŸå 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768upstream roomserver &#123; server linxunfeng.top:8080;&#125;server &#123; listen 80 ; server_name linxunfeng.top; return 301 https://$server_name$request_uri;&#125;server &#123; #listen 80 default_server; #listen [::]:80 default_server; # SSL configuration # # listen 443 ssl default_server; # listen [::]:443 ssl default_server; listen 443; # # Note: You should disable gzip for SSL traffic. # See: https://bugs.debian.org/773332 # # Read up on ssl_ciphers to ensure a secure configuration. # See: https://bugs.debian.org/765782 # # Self signed certs generated by the ssl-cert package # Don't use them in a production server! # # include snippets/snakeoil.conf; root /var/www/html; # Add index.php to the list if you are using PHP index index.html index.htm index.nginx-debian.html; server_name linxunfeng.top; # æ·»åŠ åŸŸåï¼Œå¦‚ä¸æ·»åŠ ï¼Œç”ŸæˆSSLè¯ä¹¦æ—¶å¯èƒ½ä¼šæœ‰é—®é¢˜ #location / &#123; # First attempt to serve request as file, then # as directory, then fall back to displaying a 404. # try_files $uri $uri/ =404; #&#125; # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # location ~ \\.php$ &#123; include snippets/fastcgi-php.conf; # # # With php7.0-cgi alone: # fastcgi_pass 127.0.0.1:9000; # # With php7.0-fpm: fastcgi_pass unix:/run/php/php7.0-fpm.sock; &#125; location / &#123; proxy_pass http://roomserver$request_uri; proxy_set_header Host $host; &#125; ssl on; ssl_certificate /etc/letsencrypt/live/linxunfeng.top/fullchain.pem; ssl_certificate_key /etc/letsencrypt/live/linxunfeng.top/privkey.pem; # deny access to .htaccess files, if Apache's document root # concurs with nginx's one # #location ~ /\\.ht &#123; # deny all; #&#125;&#125; turn.php ä¸ iceconfig.phpåœ¨/var/www/html/ç›®å½•ä¸‹åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶ 1touch turn.php iceconfig.php turn.php12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667&lt;?php $request_username = $_GET[\"username\"]; if (empty($request_username)) &#123; echo \"username == null\"; exit; &#125; $request_key = $_GET[\"key\"]; $time_to_live = 600; $timestamp = time() + $time_to_live;//å¤±æ•ˆæ—¶é—´ $response_username = $timestamp.\":\".$_GET[\"username\"]; $response_key = $request_key; if (empty($response_key)) &#123; $response_key = \"code_key\"; &#125; //constants.pyä¸­CEOD_KEY $response_password = getSignature($response_username, $response_key); $jsonObj = new Response(); $jsonObj-&gt;username = $response_username; $jsonObj-&gt;password = $response_password; $jsonObj-&gt;ttl = 86400; //æ­¤å¤„éœ€é…ç½®è‡ªå·±çš„æœåŠ¡å™¨ $jsonObj-&gt;uris= array(\"stun:linxunfeng.top:3478\",\"turn:linxunfeng.top:3478?transport=udp\",\"turn:linxunfeng.top?transport=tcp\"); echo json_encode($jsonObj);/** * ä½¿ç”¨HMAC-SHA1ç®—æ³•ç”Ÿæˆç­¾åå€¼ * * @param $str æºä¸² * @param $key å¯†é’¥ * * @return ç­¾åå€¼ */function getSignature($str, $key)&#123; $signature = \"\"; if (function_exists('hash_hmac')) &#123; $signature = base64_encode(hash_hmac(\"sha1\", $str, $key, true)); &#125; else &#123; $blocksize = 64; $hashfunc = 'sha1'; if (strlen($key) &gt; $blocksize) &#123; $key = pack('H*', $hashfunc($key)); &#125; $key = str_pad($key, $blocksize, chr(0x00)); $ipad = str_repeat(chr(0x36), $blocksize); $opad = str_repeat(chr(0x5c), $blocksize); $hmac = pack('H*', $hashfunc(($key ^ $opad) . pack('H*', $hashfunc(($key ^ $ipad) . $str)))); $signature = base64_encode($hmac); &#125; return $signature;&#125; class Response &#123; public $username = \"\"; public $password = \"\"; public $ttl = \"\"; public $uris = array(\"\"); &#125;?&gt; iceconfig.php 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172&lt;?php $request_username = \"lxf\"; //é…ç½®æˆè‡ªå·±çš„turnæœåŠ¡å™¨ç”¨æˆ·å if (empty($request_username)) &#123; echo \"username == null\"; exit; &#125; $request_key = \"lxf\"; //é…ç½®æˆè‡ªå·±çš„turnæœåŠ¡å™¨å¯†ç  $time_to_live = 600; $timestamp = time() + $time_to_live;//å¤±æ•ˆæ—¶é—´ $response_username = $timestamp.\":\".$_GET[\"username\"]; $response_key = $request_key; if (empty($response_key)) &#123; $response_key = \"CEOD_KEY\"; &#125;//constants.pyä¸­CEOD_KEY $response_password = getSignature($response_username, $response_key); $arrayObj = array(); $arrayObj[0]['username'] = $response_username; $arrayObj[0]['credential'] = $response_password; //é…ç½®æˆè‡ªå·±çš„stun/turnæœåŠ¡å™¨ $arrayObj[0]['urls'][0] = \"stun:linxunfeng.top:3478\"; $arrayObj[0]['urls'][1] = \"turn:linxunfeng.top:3478?transport=tcp\"; $arrayObj[0]['uris'][0] = \"stun:linxunfeng.top:3478\"; $arrayObj[0]['uris'][1] = \"turn:linxunfeng.top:3478?transport=tcp\"; $jsonObj = new Response(); $jsonObj-&gt;lifetimeDuration = \"300.000s\"; $jsonObj-&gt;iceServers = $arrayObj; echo json_encode($jsonObj);/** * ä½¿ç”¨HMAC-SHA1ç®—æ³•ç”Ÿæˆç­¾åå€¼ * * @param $str æºä¸² * @param $key å¯†é’¥ * * @return ç­¾åå€¼ */function getSignature($str, $key)&#123; $signature = \"\"; if (function_exists('hash_hmac')) &#123; $signature = base64_encode(hash_hmac(\"sha1\", $str, $key, true)); &#125; else &#123; $blocksize = 64; $hashfunc = 'sha1'; if (strlen($key) &gt; $blocksize) &#123; $key = pack('H*', $hashfunc($key)); &#125; $key = str_pad($key, $blocksize, chr(0x00)); $ipad = str_repeat(chr(0x36), $blocksize); $opad = str_repeat(chr(0x5c), $blocksize); $hmac = pack('H*', $hashfunc(($key ^ $opad) . pack('H*', $hashfunc(($key ^ $ipad) . $str)))); $signature = base64_encode($hmac); &#125; return $signature;&#125; class Response &#123; public $username = \"\"; public $password = \"\"; public $ttl = \"\"; public $uris = array(\"\"); &#125;?&gt; é‡å¯NginxæœåŠ¡å™¨å’Œphp7.0-fpm 12service nginx restart service php7.0-fpm restart ä¸ƒã€å„ç«¯è¿è¡Œæµ‹è¯•1ã€Browseræµè§ˆå™¨ç›´æ¥æ‰“å¼€å³å¯ï¼Œå¦‚æœä¸èƒ½è®¿é—®æ‘„åƒå¤´ä¹‹ç±»çš„ï¼Œè¯·æŸ¥çœ‹ç–‘éš¾æ‚ç—‡ - 2 1https:&#x2F;&#x2F;åŸŸå 2ã€Androidwebrtc-android-demo-apprtc ç›´æ¥å®‰è£…æ‰‹æœºï¼Œæ‰“å¼€è½¯ä»¶ï¼Œç‚¹å‡»å³ä¸Šè§’çš„æ‰³æ‰‹è·³è½¬è‡³è®¾ç½®ç•Œé¢ï¼Œæ»šåˆ°ç•Œé¢æœ€ä¸‹æ–¹ï¼Œæ‰¾åˆ°Room server URL.ï¼Œå°†å…¶ä¿®æ”¹ä¸ºåˆšåˆšæ­å»ºå¥½çš„æœåŠ¡å™¨åŸŸåå³å¯ï¼Œå¦‚ 1https:&#x2F;&#x2F;linxunfeng.top 3ã€iOSGitHub - ISBX/apprtc-ios æ‰“å¼€AppRTCé¡¹ç›®ï¼Œåˆ†åˆ«ä¿®æ”¹ä»¥ä¸‹ä¸¤ä¸ªæ–‡ä»¶ ARTCVideoChatViewController.m 1#define SERVER_HOST_URL @\"https://linxunfeng.top\" Pods -&gt; Development Pods -&gt; AppRTC -&gt; Lib -&gt; ARDAppClient.m 1234567static NSString *kARDRoomServerHostUrl = @\"https://linxunfeng.top\";static NSString *kARDDefaultSTUNServerUrl = @\"stun:linxunfeng.top:3478\";static NSString *kARDTurnRequestUrl = @\"https://linxunfeng.top\" @\"/turn?username=lxf&amp;key=lxf\"; 1234567// æœç´¢ kARDDefaultSTUNServerUrl - (RTCICEServer *)defaultSTUNServer &#123; NSURL *defaultSTUNServerURL = [NSURL URLWithString:kARDDefaultSTUNServerUrl]; return [[RTCICEServer alloc] initWithURI:defaultSTUNServerURL username:@\"lxf\" password:@\"lxf\"];&#125; ç–‘éš¾æ‚ç—‡1ã€Request host is not whitelist enabled å…·ä½“æç¤ºRequest host is not whitelist enabled for this server. Please use the â€“host command-line flag to whitelist a specific host (recommended) or use â€“enable_host_checking to disable host checking. See the command-line flags help text for more information. å‚è€ƒé“¾æ¥ æ‰§è¡Œdev_appserver.pyæ—¶ï¼ŒåŠ ä¸Šå¦‚ä¸‹å‚æ•°1--enable_host_checking=false å®Œæ•´æŒ‡ä»¤1./dev_appserver.py --enable_host_checking=false --host=172.18.141.108 ../apprtc/out/app_engine/ 2ã€æµè§ˆå™¨æ— æ³•è®¿é—®æ‘„åƒå¤´æµè§ˆå™¨è®¿é—®è®¾å¤‡çš„æ‘„åƒå¤´æ˜¯éœ€è¦ä½¿ç”¨httpsé“¾æ¥æˆ–è€…localhostæ¥è®¿é—® 3ã€ç«¯å£é˜¿é‡Œäº‘ç­‰å›½å†…å¤§å‚æä¾›çš„æœåŠ¡å™¨åŸºæœ¬ä¸Šéƒ½æœ‰ä¸€ä¸ªå«å®‰å…¨ç»„çš„ç©æ„å„¿ï¼Œæˆ‘ä»¬æ­å»ºAppRTCæœåŠ¡å™¨çš„æ‰€æœ‰æœåŠ¡æ‰€éœ€çš„ç«¯å£å‡è¦æ·»åŠ è‡³å®‰å…¨ç»„ 4ã€Failed to execute â€˜pushStateâ€™ on â€˜Historyâ€™ Failed to start signaling: Failed to execute â€˜pushStateâ€™ on â€˜Historyâ€™: A history state object with URL â€˜http://linxunfeng.top/r/598600855â€™ cannot be created in a document with origin â€˜https://linxunfeng.topâ€™ and URL â€˜https://linxunfeng.top/ è§£å†³æ–¹æ³•æœ‰ä¸¤ç§ è§£å†³æ–¹æ³•1ï¼š æˆ¿é—´æœåŠ¡å™¨ç¼–è¯‘å®Œæˆåï¼Œåœ¨/root/apprtc/out/app_engine/js/apprtc.debug.jsæ–‡ä»¶ä¸­æ‰¾åˆ°window.history.pushState({â€˜roomIdâ€™: roomId, â€˜roomLinkâ€™: roomLink}, roomId, roomLink)ï¼ŒæŠŠè¿™å¥è¯æ³¨é‡Šæ‰ï¼Œé‡æ–°è¿è¡Œå³å¯ã€‚ï¼ˆå¦‚æœé‡æ–°ç¼–è¯‘ï¼Œéœ€è¦é‡æ–°ä¿®æ”¹ï¼‰ è§£å†³æ–¹æ³•2ï¼š åœ¨/root/apprtc/src/web_app/js/appcontroller.jsæ–‡ä»¶ä¸­æ‰¾åˆ°window.history.pushState({â€˜roomIdâ€™: roomId, â€˜roomLinkâ€™: roomLink}, roomId, roomLink)ï¼ŒæŠŠè¿™å¥è¯æ³¨é‡Šæ‰ï¼Œç„¶åé‡æ–°ç¼–è¯‘ï¼Œé‡æ–°è¿è¡Œæˆ¿é—´æœåŠ¡å™¨å³å¯ã€‚","categories":[{"name":"Linux","slug":"Linux","permalink":"http://linxunfeng.top/categories/Linux/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Ubuntu","slug":"Ubuntu","permalink":"http://linxunfeng.top/tags/Ubuntu/"},{"name":"Linux","slug":"Linux","permalink":"http://linxunfeng.top/tags/Linux/"},{"name":"Android","slug":"Android","permalink":"http://linxunfeng.top/tags/Android/"}]},{"title":"æ‰“é€ Moyaä¾¿æ·è§£æåº“ï¼Œæä¾›RxSwiftæ‹“å±•","slug":"iOS/æ‰“é€ Moyaä¾¿æ·è§£æåº“ï¼Œæä¾›RxSwiftæ‹“å±•","date":"2018-05-24T20:25:04.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2018/05/24/iOS/æ‰“é€ Moyaä¾¿æ·è§£æåº“ï¼Œæä¾›RxSwiftæ‹“å±•/","link":"","permalink":"http://linxunfeng.top/2018/05/24/iOS/%E6%89%93%E9%80%A0Moya%E4%BE%BF%E6%8D%B7%E8%A7%A3%E6%9E%90%E5%BA%93%EF%BC%8C%E6%8F%90%E4%BE%9BRxSwift%E6%8B%93%E5%B1%95/","excerpt":"MoyaMapperæ˜¯åŸºäºMoyaå’ŒSwiftyJSONå°è£…çš„å·¥å…·ï¼Œä»¥Moyaçš„pluginçš„æ–¹å¼æ¥å®ç°é—´æ¥è§£æï¼Œæ”¯æŒRxSwift +","text":"MoyaMapperæ˜¯åŸºäºMoyaå’ŒSwiftyJSONå°è£…çš„å·¥å…·ï¼Œä»¥Moyaçš„pluginçš„æ–¹å¼æ¥å®ç°é—´æ¥è§£æï¼Œæ”¯æŒRxSwift + ä¸€ã€æ¦‚è¿°1ã€ç›¸ä¿¡å¤§å®¶åœ¨ä½¿ç”¨Swiftå¼€å‘æ—¶ï¼ŒMoyaæ˜¯é¦–é€‰çš„ç½‘ç»œå·¥å…·ï¼Œåœ¨æ¨¡å‹è§£æè¿™ä¸€å—ï¼ŒSwiftç‰ˆæ¨¡å‹è§£æçš„ç›¸å…³ç¬¬ä¸‰æ–¹åº“æœ‰å¾ˆå¤šï¼Œæœ¬äººæœ€ä¹ æƒ¯ç”¨çš„å°±æ˜¯SwiftyJSONã€‚ 2ã€ä¸‹é¢ä¼šå¼€å§‹è®²è§£æ•´ä¸ªä¸»è¦çš„å¼€å‘åŠŸèƒ½ä¸æ€æƒ³ã€‚ 3ã€ä»¥ä¸‹å†…å®¹æ˜¯åŸºäºå¤§å®¶ä¼šä½¿ç”¨Moyaå’ŒSwiftJSONçš„å‰æä¸‹æ‰€è‘—ï¼Œè¿˜ä¸ä¼šçš„åŒå­¦å¯ä»¥å…ˆç®€å•äº†è§£åå†æ¥é˜…è¯»æœ¬ç¯‡æ–‡ç« å“¦ï½ äºŒã€åŠŸèƒ½å¼€å‘ä¸æ€æƒ³è®²è§£1ã€å°è¯•æ¨¡å‹è§£æMoyaè¯·æ±‚æœåŠ¡å™¨è¿”å›çš„æ•°æ®ä»¥Responseç±»è¿”å›ç»™æˆ‘ä»¬ï¼Œé‚£æˆ‘ä»¬å°±ç»™Responseç±»åšä¸€ä¸ªæ‰©å±•ï¼Œè¿™é‡Œä»¥è§£ææ¨¡å‹ä¸ºä¾‹1234567// éœ€è¦ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œå‘ŠçŸ¥æˆ‘ä»¬è¦è½¬æ¢å‡ºä»€ä¹ˆæ¨¡å‹public func mapObject&lt;T: Modelable&gt;(_ type: T.Type) -&gt; T &#123; // æ¨¡å‹è§£æè¿‡ç¨‹ ã€‚ã€‚ã€‚ return T&#125; Q: é‚£ä¸­é—´çš„è§£æè¿‡ç¨‹è¯¥æ€ä¹ˆå†™å‘¢ï¼Ÿ A: å¯ä»¥è®©å¼€å‘è€…éµå®ˆæŸä¸ªåè®®ï¼Œå®ç°æŒ‡å®šçš„è½¬æ¢æ–¹æ³•å¹¶æè¿°è½¬æ¢å…³ç³»ã€‚å…¶è½¬æ¢è¿‡ç¨‹æˆ‘ä»¬ä¸éœ€è¦çŸ¥é“ï¼Œäº¤ç»™å¼€å‘è€…å³å¯ã€‚ é‚£æ¥ç€æˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ªåè®®Modelableï¼Œå¹¶å£°æ˜è½¬æ¢æ–¹æ³•123public protocol Modelable &#123; mutating func mapping(_ json: JSON)&#125; å¼€å‘è€…åˆ›å»ºä¸€ä¸ªMyMoelçš„ç»“æ„ä½“ï¼Œéµå®ˆåè®®Modelable,å¹¶å®ç°mappingï¼Œä¹¦å†™è½¬æ¢å…³ç³»1234567struct MyModel: Modelable &#123; var _id = \"\" mutating func mapping(_ json: JSON) &#123; self._id = json[\"_id\"].stringValue &#125;&#125; ä»¥ç›®å‰çš„ç°çŠ¶æ¥åˆ†æä¸€ä¸‹ï¼šmapObjectå¯ä»¥è®©å¼€å‘è€…ä¼ å…¥æ¨¡å‹ç±»å‹ï¼Œè€Œæˆ‘ä»¬çš„åè®®æ–¹æ³•å´å¹¶éæ˜¯ä¸ªç±»æ–¹æ³•ã€‚é‚£æˆ‘ä»¬éœ€è¦å…ˆå¾—åˆ°è¿™ä¸ªæ¨¡å‹ç±»å‹çš„å¯¹è±¡ï¼Œå†æ¥è°ƒç”¨mappingæ–¹æ³• 2ã€æ¨¡å‹è§£æçš„é©±åŠ¨å¼€å‘Q: æ€ä¹ˆå¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Ÿ A: å¯ä»¥åœ¨åè®®ä¸­å£°æ˜ä¸€ä¸ªåˆå§‹åŒ–æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ã€‚æ˜¯çš„ï¼Œæˆ‘ä»¬åœ¨mapObjectä¸­åˆ›å»ºå¯¹åº”æ¨¡å‹ç±»å‹çš„å¯¹è±¡ï¼Œè°ƒç”¨mappingæ–¹æ³•æ¥è½¬æ¢æ•°æ®ï¼Œå†æŠŠæ¨¡å‹å¯¹è±¡ä¼ å‡ºå»å³å¯ã€‚ é‚£æˆ‘ä»¬åœ¨Modelableä¸­å£°æ˜ä¸€ä¸ªinitæ–¹æ³•ï¼Œå¹¶ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼ŒåŒºåˆ«äºå…¶å®ƒåˆå§‹åŒ–æ–¹æ³•1234public protocol Modelable &#123; mutating func mapping(_ json: JSON) init(_ json: JSON)&#125; OKï¼Œç°åœ¨æŠŠmapObjectæ–¹æ³•è¡¥é½æ¨¡å‹è§£æè¿‡ç¨‹ 1234567public func mapObject&lt;T: Modelable&gt;(_ type: T.Type) -&gt; T &#123; let modelJson = JSON(data)[\"modelKey\"] // æ¨¡å‹è§£æè¿‡ç¨‹ var obj = T.init(modelJson) obj.mapping(modelJson) return obj&#125; 3ã€è‡ªå®šä¹‰è§£æé”®åQ: è¿™æ ·æ˜¯æå®šè§£æäº†ï¼Œä½†æ˜¯ç½‘ç»œè¯·æ±‚å›æ¥çš„jsonæ ¼å¼é”™ç»¼å¤æ‚ï¼Œæœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥è®©å¼€å‘è€…æ¥è‡ªè¡ŒæŒ‡å®šmodelå¯¹åº”çš„é”®åå‘¢ï¼Ÿ A: å—¯å—¯ï¼Œæ—¢ç„¶è§£æè¿‡ç¨‹æ˜¯åœ¨ Response æ‰©å±•é‡Œæ“ä½œçš„ï¼Œé‚£æˆ‘ä»¬å¯ä»¥é€šè¿‡åè®®å®šä¹‰é”®åå±æ€§ï¼Œå¹¶ä¸”ä½¿ç”¨ Runtime ç»™ResponseåŠ¨æ€æ·»åŠ ä¸€ä¸ªå±æ€§ï¼Œæ¥è®°å½•éµå®ˆåè®®åçš„ç›¸åº”ç±»å 12345678910public protocol ModelableParameterType &#123; /// è¯·æ±‚æˆåŠŸæ—¶çŠ¶æ€ç å¯¹åº”çš„å€¼ static var successValue: String &#123; get &#125; /// çŠ¶æ€ç å¯¹åº”çš„é”® static var statusCodeKey: String &#123; get &#125; /// è¯·æ±‚åçš„æç¤ºè¯­å¯¹åº”çš„é”® static var tipStrKey: String &#123; get &#125; /// è¯·æ±‚åçš„ä¸»è¦æ¨¡å‹æ•°æ®çš„é”® static var modelKey: String &#123; get &#125;&#125; 123456789101112131415// MARK:- runtimeextension Response &#123; private struct AssociatedKeys &#123; static var lxf_modelableParameterKey = \"lxf_modelableParameterKey\" &#125; var lxf_modelableParameter: ModelableParameterType.Type &#123; get &#123; let value = objc_getAssociatedObject(self, &amp;AssociatedKeys.lxf_modelableParameterKey) as AnyObject guard let type = value as? ModelableParameterType.Type else &#123; return NullParameter.self &#125; return type &#125; set &#123; objc_setAssociatedObject(self, &amp;AssociatedKeys.lxf_modelableParameterKey, newValue, .OBJC_ASSOCIATION_RETAIN_NONATOMIC) &#125; &#125;&#125; è¿™é‡Œæœ‰ä¸ªå‘ï¼š_SwiftValueé—®é¢˜ (çŒ®ä¸Š å‚è€ƒé“¾æ¥)å¦‚æœæˆ‘ä»¬å­˜å‚¨çš„ä¸æ˜¯OCå¯¹è±¡ï¼Œé‚£ä¹ˆobjc_getAssociatedObjectå–å‡ºæ¥çš„å€¼çš„ç±»å‹ç»Ÿç»Ÿä¸º_SwiftValueï¼Œç›´æ¥as? ModelableParameterType.Typeç»å¯¹æ˜¯nilï¼Œéœ€è¦åœ¨å–å‡ºæ¥åas AnyObjectå†è½¬æ¢ä¸ºå…¶å®ƒç±»å‹æ‰ä¼šæˆåŠŸï½ï½ ç°åœ¨å¼€å‘è€…å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªç±»æ¥éµå®ˆModelableParameterTypeåè®®ï¼Œå¹¶è‡ªå®šä¹‰è§£æé”®å123456struct NetParameter : ModelableParameterType &#123; static var successValue: String &#123; return \"false\" &#125; static var statusCodeKey: String &#123; return \"error\" &#125; static var tipStrKey: String &#123; return \"errMsg\" &#125; static var modelKey: String &#123; return \"results\" &#125;&#125; 4ã€æ’ä»¶æ³¨å…¥Q: å‰å®³äº†ï¼Œä¸è¿‡è¦åœ¨ä»€ä¹ˆæ—¶æœºä¸‹å­˜å‚¨è¿™ä¸ªè‡ªå®šä¹‰é”®åçš„NetParameterï¼Ÿ A: é¢ï¼Œè¿™ä¸ªï½ï½ï½ å“¦ï¼Œå¯¹äº†ï¼Œå¯ä»¥é€šè¿‡Moyaæä¾›çš„æ’ä»¶æœºåˆ¶ï¼ ç¿»å‡ºMoyaä¸­çš„Plugin.Swiftï¼Œæ‰¾åˆ°è¿™ä¸ªprocessæ–¹æ³•ï¼Œçœ‹çœ‹æ–¹æ³•è¯´æ˜ã€‚123/// åœ¨ç»“æŸä¹‹å‰ï¼Œå¯ä»¥è¢«ç”¨æ¥ä¿®æ”¹è¯·æ±‚ç»“æœ/// Called to modify a result before completion.func process(_ result: Result&lt;Moya.Response, MoyaError&gt;, target: TargetType) -&gt; Result&lt;Moya.Response, MoyaError&gt; é‚£å¥½ï¼Œæˆ‘ä»¬ä¹Ÿåšä¸€ä¸ªæ’ä»¶MoyaMapperPluginç»™å¼€å‘è€…ä½¿ç”¨ï¼Œåœ¨åˆ›å»ºMoyaMapperPluginæ—¶æŠŠè‡ªå®šä¹‰è§£æé”®åçš„ç±»å‹ä¼ è¿›æ¥1234567891011121314151617public struct MoyaMapperPlugin: PluginType &#123; var parameter: ModelableParameterType.Type public init&lt;T: ModelableParameterType&gt;(_ type: T.Type) &#123; parameter = type &#125; // modify response public func process(_ result: Result&lt;Response, MoyaError&gt;, target: TargetType) -&gt; Result&lt;Response, MoyaError&gt; &#123; _ = result.map &#123; (response) -&gt; Response in // è¶æœºæ·»åŠ ç›¸å…³æ•°æ® response.lxf_modelableParameter = parameter return response &#125; return result &#125;&#125; ä½¿ç”¨ï¼šå¼€å‘è€…åœ¨åˆ›å»ºMoyaProviderå¯¹è±¡æ—¶ï¼Œé¡ºä¾¿æ³¨å…¥æ’ä»¶ã€‚(OS: è¿™ä¸€æ­¥å ªç§°â€œæ³¨å…¥çµé­‚â€)1MoyaProvider&lt;LXFNetworkTool&gt;(plugins: [MoyaMapperPlugin(NetParameter.self)]) 5ã€æ€»ç»“ ä»¥ä¸Šå°±æ˜¯ä¸»è¦çš„è¸©å‘è¿‡ç¨‹äº†ã€‚æ¨¡å‹æ•°ç»„è§£æå’ŒæŒ‡å®šè§£æä¹Ÿè·Ÿè¿™äº›å·®ä¸å¤šçš„ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚æœ¬äººå·²ç»å°†å…¶å°è£…æˆä¸€ä¸ªå¼€æºåº“ MoyaMapperï¼ŒåŒ…å«äº†ä¸Šè¿°å·²ç»å’Œæœªæ›¾è¯´æ˜çš„åŠŸèƒ½ï¼Œä¸‹é¢ä¼šè®²è§£å¦‚ä½•å»ä½¿ç”¨ã€‚ä»¥ä¸Šéƒ¨åˆ†å¯ä»¥ç§°ä¸ºå¼€èƒƒèœï¼Œç›®çš„å°±æ˜¯å¹³æ»‘è¿‡æ¸¡åˆ°ä¸‹é¢MoyaMapperçš„å…·ä½“ä½¿ç”¨ã€‚ å¯èƒ½å•å•ä½¿ç”¨MoyaMapperçš„é»˜è®¤å­åº“Coreï¼Œä½œç”¨ä½“ä¼šä¸Šå¹¶ä¸ä¼šå¾ˆæ·±ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ ä¹Ÿæ˜¯ä½¿ç”¨RxSwiftæ¥å¼€å‘é¡¹ç›®çš„è¯ï¼Œè¯·å®‰è£…&#39;MoyaMapper/Rx&#39;å§ï¼Œç»å¯¹ä¸€ä¸ªå­—ï¼šã€Œçˆ½ã€ äºŒã€MoyaMapperçš„ä½¿ç”¨ MoyaMapperæ˜¯åŸºäºMoyaå’ŒSwiftyJSONå°è£…çš„å·¥å…·ï¼Œä»¥Moyaçš„pluginçš„æ–¹å¼æ¥å®ç°é—´æ¥è§£æï¼Œæ”¯æŒRxSwift 1ã€å®šä¹‰å¹¶æ³¨å…¥è‡ªå®šä¹‰é”®åç±» å®šä¹‰ä¸€ä¸ªéµå®ˆModelableParameterTypeåè®®çš„ç»“æ„ä½“ 1234567// å„å‚æ•°è¿”å›çš„å†…å®¹è¯·å‚è€ƒä¸Šé¢JSONæ•°æ®å¯¹ç…§å›¾struct NetParameter : ModelableParameterType &#123; static var successValue: String &#123; return \"false\" &#125; static var statusCodeKey: String &#123; return \"error\" &#125; static var tipStrKey: String &#123; return \"\" &#125; static var modelKey: String &#123; return \"results\" &#125;&#125; æ­¤å¤–ï¼Œè¿™é‡Œè¿˜å¯ä»¥åšç®€å•çš„è·¯å¾„å¤„ç†ï¼Œä»¥åº”ä»˜å„ç§æƒ…å†µï¼Œä»¥â€™&gt;â€™éš”å¼€ 12345// å‡è®¾è¿”å›çš„jsonæ•°æ®å…³äºè¯·æ±‚çŠ¶æ€çš„ç›¸å…³æ•°æ®å¦‚ä¸‹æ‰€ç¤ºï¼Œerror: &#123; 'errorStatus':false 'errMsg':'error Argument type'&#125; 12// æˆ‘ä»¬æŒ‡æ˜è§£æè·¯å¾„ï¼šerrorå¯¹è±¡ä¸‹çš„errMsgå­—æ®µï¼Œä¸€å±‚å±‚è¡¨ç¤ºä¸‹å»å³å¯static var tipStrKey: String &#123; return \"error&gt;errMsg\" &#125; ä»¥pluginçš„æ–¹å¼ä¼ é€’ç»™MoyaProvider 12// MoyaMapperPluginè¿™é‡Œåªéœ€è¦ä¼ å…¥ç±»å‹MoyaProvider&lt;LXFNetworkTool&gt;(plugins: [MoyaMapperPlugin(NetParameter.self)]) 2ã€å®šä¹‰è§£ææ¨¡å‹åˆ›å»ºä¸€ä¸ªéµå®ˆModelableåè®®çš„ç»“æ„ä½“ 1234567891011121314struct MyModel: Modelable &#123; var _id = \"\" ... init(_ json: JSON) &#123; &#125; mutating func mapping(_ json: JSON) &#123; self._id = json[\"_id\"].stringValue ... &#125;&#125;éµå®ˆModelableåè®®ï¼Œå®ç°åè®®çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œåœ¨`mapping`æ–¹æ³•ä¸­æè¿°æ¨¡å‹å­—æ®µçš„å…·ä½“è§£æ 3ã€è§£ææ•°æ®0x00 è¯·æ±‚ç»“æœä¸æ¨¡å‹è§£æ123456789101112// Resultpublic func mapResult(params: ModelableParamsBlock? = nil) -&gt; MoyaMapperResult// Modelpublic func mapObject&lt;T: Modelable&gt;(_ type: T.Type, modelKey: String? = nil) -&gt; T// Result+Modelpublic func mapObjResult&lt;T: Modelable&gt;(_ type: T.Type, params: ModelableParamsBlock? = nil) -&gt; (MoyaMapperResult, T)// Modelspublic func mapArray&lt;T: Modelable&gt;(_ type: T.Type, modelKey: String? = nil) -&gt; [T]// Result+Modelspublic func mapArrayResult&lt;T: Modelable&gt;(_ type: T.Type, params: ModelableParamsBlock? = nil) -&gt; (MoyaMapperResult, [T]) ä¸Šé¢çš„äº”ä¸ªæ–¹æ³•ï¼Œè§‚å…¶åï¼ŒçŸ¥å…¶æ„ï¼Œè¿™é‡Œå°±ä¸è¿‡å¤šè§£é‡Šäº†ï¼Œä¸»è¦æ³¨æ„ä¸¤ç‚¹ï¼š result 1234// å…ƒç¥–ç±»å‹// å‚æ•°1ï¼šæ ¹æ®statusCodeKeyå–å‡ºçš„å€¼ä¸successValueæ˜¯å¦ç›¸ç­‰// å‚æ•°2ï¼šæ ¹æ®tipStrKeyå–å‡ºçš„å€¼resultï¼š(Bool, String) params 12// params: ModelableParamsBlock? = nil// è¿™é‡Œåªæœ‰åœ¨ç‰¹æ®Šåœºæ™¯ä¸‹æ‰éœ€è¦ä½¿ç”¨åˆ°ã€‚å¦‚ï¼šé¡¹ç›®ä¸­éœ€è¦åœ¨æŸå¤„ä½¿ç”¨ç‰¹å®šæ¥å£ï¼Œä½†æ˜¯è¿”å›çš„jsonæ ¼å¼è·Ÿè‡ªå·±é¡¹ç›®çš„ä¸ä¸€æ ·ï¼Œå¹¶ä¸”åªæœ‰è¿™ä¹ˆä¸€ä¸¤å¤„ç”¨å¾—ç€è¯¥é¢å¤–æ¥å£ï¼Œé‚£å°±éœ€è¦æˆ‘ä»¬è¿™ä¸ªå‚æ•°äº†ï¼Œä»¥Blockçš„æ–¹å¼è¿”å›è§£æå‚æ•°ç±»å‹ã€‚ 0x01ã€ç‰¹å®šè§£æ1234// Modelpublic func toJSON(modelKey: String? = nil) -&gt; JSON// è·å–æŒ‡å®šè·¯å¾„çš„å€¼public func fetchJSONString(path: String? = nil, keys: [JSONSubscriptType]) -&gt; String è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šè·¯å¾„ï¼Œé»˜è®¤éƒ½æ˜¯é’ˆå¯¹modelKeyçš„12345// fetchJSONString(keys: &lt;[JSONSubscriptType]&gt;)1ã€é€šè¿‡ keys ä¼ é€’æ•°ç»„, è¯¥æ•°ç»„å¯ä¼ å…¥çš„ç±»å‹ä¸º Int å’Œ String2ã€é»˜è®¤æ˜¯ä»¥ modelKey æ‰€ç¤ºè·¯å¾„ï¼Œæ¥è·å–ç›¸åº”çš„æ•°å€¼ã€‚å¦‚æœmodelKeyå¹¶éæ˜¯ä½ æ‰€æƒ³è¦ä½¿ç”¨çš„è§£æè·¯å¾„ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹æ–¹çš„é‡è½½æ–¹æ³•é‡æ–°æŒ‡å®šè·¯å¾„å³å¯// response.fetchJSONString(path: &lt;String?&gt;, keys: &lt;[JSONSubscriptType]&gt;) MoyaMapperä¹Ÿæä¾›äº†Rxå­åº“ï¼Œä¸ºæ–¹ä¾¿RxSwiftçš„æµå¼ç¼–ç¨‹ä¸‹ä¾¿æ·è§£ææ•°æ® 12345MoyaMapperé»˜è®¤åªå®‰è£…Coreä¸‹çš„æ–‡ä»¶pod 'MoyaMapper'RxSwiftæ‹“å±•pod 'MoyaMapper/Rx' å…·ä½“ä½¿ç”¨è¿˜ä¸æ˜¯å¾ˆæ˜ç™½çš„åŒå­¦å¯ä»¥ä¸‹è½½å¹¶è¿è¡ŒExampleçœ‹çœ‹ å¦‚æœMoyaMapperæœ‰ä»€ä¹ˆä¸è¶³çš„åœ°æ–¹ï¼Œæ¬¢è¿æå‡ºissuesï¼Œæ„Ÿè°¢å¤§å®¶çš„æ”¯æŒ","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Swift","slug":"Swift","permalink":"http://linxunfeng.top/tags/Swift/"},{"name":"RxSwift","slug":"RxSwift","permalink":"http://linxunfeng.top/tags/RxSwift/"}]},{"title":"iOS-é¢å‘åè®®æ–¹å¼å°è£…ç©ºç™½é¡µåŠŸèƒ½","slug":"iOS-é¢å‘åè®®æ–¹å¼å°è£…ç©ºç™½é¡µåŠŸèƒ½","date":"2018-04-07T22:21:46.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2018/04/07/iOS-é¢å‘åè®®æ–¹å¼å°è£…ç©ºç™½é¡µåŠŸèƒ½/","link":"","permalink":"http://linxunfeng.top/2018/04/07/iOS-%E9%9D%A2%E5%90%91%E5%8D%8F%E8%AE%AE%E6%96%B9%E5%BC%8F%E5%B0%81%E8%A3%85%E7%A9%BA%E7%99%BD%E9%A1%B5%E5%8A%9F%E8%83%BD/","excerpt":"ä¸ºäº†è‰¯å¥½çš„äº¤äº’ä½“éªŒï¼Œç›¸ä¿¡å¤§å®¶åœ¨å¯¹å¾…scrollViewæ— æ•°æ®æ—¶çš„æç¤ºé¡µéƒ½ä¼šä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹æ¥å®šåˆ¶ï¼Œæœ€å…¸å‹çš„å°±æ˜¯ä½¿ç”¨DZNEmptyDataSetã€‚ä½†æ˜¯æ¯ä¸ªç•Œé¢éƒ½å†™ä¸€å †ä¸DZNEmptyDataSetDelegateï¼ŒDZNEmptyDataSetSourceç›¸å…³çš„ä»£ç å°±ä¸å¤ªå¥½ï¼Œé‚£ä¸€èˆ¬æƒ…å†µä¸‹è‡ªç„¶çš„å°±ä¼šé‡‡ç”¨ç»§æ‰¿çš„æ–¹å¼æ¥é¿å…ã€‚è€ŒSwifté™¤äº†å¯ä»¥é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå®ƒè¿˜å¯ä»¥é¢å‘åè®®ç¼–ç¨‹ã€‚é‚£å¯ä¸å¯ä»¥ä¹Ÿç”¨åè®®æ¥è§£å†³æƒ…å†µå‘¢ï¼Ÿå˜¿å˜¿ï¼Œè¿™ä¸ªå¯ä»¥æœ‰ï¼Œé‚£æˆ‘ä»¬æ¥ä¸‹æ¥å°±æ¥è¯•è¯•æ€ä¹ˆé€šè¿‡åè®®çš„æ–¹å¼æ¥é¿å…ä¸Šè¿°æƒ…å†µï¼Œå¹¶ä¸”å®ç°ä¸€è¡Œä»£ç æ·»åŠ ç©ºç™½é¡µåŠŸèƒ½ +","text":"ä¸ºäº†è‰¯å¥½çš„äº¤äº’ä½“éªŒï¼Œç›¸ä¿¡å¤§å®¶åœ¨å¯¹å¾…scrollViewæ— æ•°æ®æ—¶çš„æç¤ºé¡µéƒ½ä¼šä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹æ¥å®šåˆ¶ï¼Œæœ€å…¸å‹çš„å°±æ˜¯ä½¿ç”¨DZNEmptyDataSetã€‚ä½†æ˜¯æ¯ä¸ªç•Œé¢éƒ½å†™ä¸€å †ä¸DZNEmptyDataSetDelegateï¼ŒDZNEmptyDataSetSourceç›¸å…³çš„ä»£ç å°±ä¸å¤ªå¥½ï¼Œé‚£ä¸€èˆ¬æƒ…å†µä¸‹è‡ªç„¶çš„å°±ä¼šé‡‡ç”¨ç»§æ‰¿çš„æ–¹å¼æ¥é¿å…ã€‚è€ŒSwifté™¤äº†å¯ä»¥é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå®ƒè¿˜å¯ä»¥é¢å‘åè®®ç¼–ç¨‹ã€‚é‚£å¯ä¸å¯ä»¥ä¹Ÿç”¨åè®®æ¥è§£å†³æƒ…å†µå‘¢ï¼Ÿå˜¿å˜¿ï¼Œè¿™ä¸ªå¯ä»¥æœ‰ï¼Œé‚£æˆ‘ä»¬æ¥ä¸‹æ¥å°±æ¥è¯•è¯•æ€ä¹ˆé€šè¿‡åè®®çš„æ–¹å¼æ¥é¿å…ä¸Šè¿°æƒ…å†µï¼Œå¹¶ä¸”å®ç°ä¸€è¡Œä»£ç æ·»åŠ ç©ºç™½é¡µåŠŸèƒ½ + ä¸ºäº†è‰¯å¥½çš„äº¤äº’ä½“éªŒï¼Œç›¸ä¿¡å¤§å®¶åœ¨å¯¹å¾…scrollViewæ— æ•°æ®æ—¶çš„æç¤ºé¡µéƒ½ä¼šä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹æ¥å®šåˆ¶ï¼Œæœ€å…¸å‹çš„å°±æ˜¯ä½¿ç”¨DZNEmptyDataSetã€‚ä½†æ˜¯æ¯ä¸ªç•Œé¢éƒ½å†™ä¸€å †ä¸DZNEmptyDataSetDelegateï¼ŒDZNEmptyDataSetSourceç›¸å…³çš„ä»£ç å°±ä¸å¤ªå¥½ï¼Œé‚£ä¸€èˆ¬æƒ…å†µä¸‹è‡ªç„¶çš„å°±ä¼šé‡‡ç”¨ç»§æ‰¿çš„æ–¹å¼æ¥é¿å…ã€‚è€ŒSwifté™¤äº†å¯ä»¥é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå®ƒè¿˜å¯ä»¥é¢å‘åè®®ç¼–ç¨‹ã€‚é‚£å¯ä¸å¯ä»¥ä¹Ÿç”¨åè®®æ¥è§£å†³æƒ…å†µå‘¢ï¼Ÿå˜¿å˜¿ï¼Œè¿™ä¸ªå¯ä»¥æœ‰ï¼Œé‚£æˆ‘ä»¬æ¥ä¸‹æ¥å°±æ¥è¯•è¯•æ€ä¹ˆé€šè¿‡åè®®çš„æ–¹å¼æ¥é¿å…ä¸Šè¿°æƒ…å†µï¼Œå¹¶ä¸”å®ç°ä¸€è¡Œä»£ç æ·»åŠ ç©ºç™½é¡µåŠŸèƒ½ å‰è¨€å¦‚æœå¯¹é¢å‘åè®®æœ‰ç–‘é—®çš„åŒå­¦å¯ä»¥çœ‹ä¸‹æˆ‘ä¹‹å‰çš„ä¸¤ç¯‡æ–‡ç«  iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰ iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰ ä¹‹å‰çš„æ–‡ç« ä¸­æåˆ°äº†ï¼Œåè®®é™¤äº†èµ·è§„èŒƒä½œç”¨ï¼Œè¿˜æœ‰åˆ«ä¸€ä¸ªç”¨å¤„ï¼Œå°±æ˜¯èµ‹äºˆèƒ½åŠ›ã€‚æˆ‘ä»¬ç°åœ¨çš„ç›®çš„å°±æ˜¯è®©ç›®æ ‡æ§åˆ¶å™¨æˆ–è€…ç›®æ ‡è§†å›¾åœ¨éµå®ˆæˆ‘ä»¬çš„åè®®åï¼Œå°±å¯ä»¥æœ‰å®ç°ç©ºç™½é¡µçš„åŠŸèƒ½ã€‚ ä¸€ã€åŸºæœ¬å®ç°1ã€åˆ›å»ºåè®®1234// MARK:- ç©ºè§†å›¾å ä½åè®®public protocol LXFEmptyDataSetable &#123; &#125; 2ã€ç¡®å®šé¢å‘ç±»ç¡®å®šæˆ‘ä»¬é¢å‘çš„ç±»ï¼Œä¸€èˆ¬tableViewæˆ–è€…collectionViewéƒ½æ˜¯å†™åœ¨æ§åˆ¶å™¨é‡Œï¼Œé‚£æˆ‘ä»¬é¢å‘çš„ç±»å°±è§„å®šä¸ºUIViewControllerï¼Œæˆ–è®¸ä¹Ÿæœ‰äººå†™åœ¨UIViewé‡Œï¼Œä¸è¿‡è¿™é‡Œå…ˆæŒ‰UIViewControlleræ¥å†™å§1234// MARK:- UIViewController - ç©ºè§†å›¾å ä½åè®®public extension LXFEmptyDataSetable where Self : UIViewController &#123; // 3ã€çš„å®ç°çš„æ–¹æ³•å†™åœ¨è¿™é‡Œ&#125; 3ã€å®šä¹‰åŠŸèƒ½æ–¹æ³•å°†scrollViewä¼ é€’è¿›æ¥ï¼Œè®©æˆ‘ä»¬å®šä¹‰çš„æ–¹æ³•æ¥æš—åœ°é‡Œåšäº›æ“ä½œ1234func lxf_EmptyDataSet(_ scrollView: UIScrollView) &#123; scrollView.emptyDataSetDelegate = self scrollView.emptyDataSetSource = self&#125; 4ã€è®¾ç½®æ•°æ®æºå’Œä»£ç†åœ¨3ã€å®šä¹‰åŠŸèƒ½æ–¹æ³•ä¸­å°†delegateå’Œsourceè®¾ç½®ä¸ºäº†self ï¼Œè€Œåè®®æ˜¯æ— æ³•éµå®ˆå†æ¬¡éµå®ˆå…¶å®ƒåè®®çš„ï¼Œé‚£è®©ä»€ä¹ˆæ¥éµå®ˆå¯¹åº”çš„åè®®å‘¢ï¼Ÿè¦æ˜ç™½è¿™é‡Œçš„selfæŒ‡çš„æ˜¯UIViewController,è€ƒè™‘åˆ°UIViewçš„å¯èƒ½ï¼Œè¿™é‡Œæˆ‘å°±è®©ä¸‡ç‰©å¯¹è±¡ä¹‹çˆ¶NSObjectæ¥éµå®ˆï¼Œå¹¶å®ç°å¯¹åº”çš„æ•°æ®æºæ–¹æ³•å’Œä»£ç†æ–¹æ³•1234567891011extension NSObject : DZNEmptyDataSetDelegate, DZNEmptyDataSetSource &#123; public func image(forEmptyDataSet scrollView: UIScrollView!) -&gt; UIImage! &#123; // è¿”å›æç¤ºå›¾ç‰‡ &#125; public func title(forEmptyDataSet scrollView: UIScrollView!) -&gt; NSAttributedString! &#123; // è®¾ç½®å¯Œæ–‡æœ¬æ ‡é¢˜ &#125; public func verticalOffset(forEmptyDataSet scrollView: UIScrollView!) -&gt; CGFloat &#123; // è®¾ç½®çºµå‘åç§» &#125;&#125; äºŒã€å®šåˆ¶ç©ºç™½é¡µé€šè¿‡ä¸Šè¿°æ­¥éª¤åï¼Œåªè¦è®©UIViewControlleréµå®ˆæˆ‘ä»¬çš„åè®®ï¼Œå†è°ƒç”¨ä¸€ä¸‹lxf_EmptyDataSetæ–¹æ³•å°±å¯ä»¥å®ç°æ•°æ®ç©ºç™½é¡µäº†ã€‚ä½†æ˜¯ï¼Œè¿™æ ·ç›´æ¥å†™æ­»çš„æ–¹å¼å¾ˆä¸å¥½ï¼Œæœ‰æ—¶å€™ä¸€äº›åœºæ™¯æ˜¯éœ€è¦æˆ‘ä»¬åšå‡ºå®šåˆ¶çš„ï¼Œé‚£æ€ä¹ˆå®ç°å®šåˆ¶å‘¢ï¼Ÿåè®®åˆä¸èƒ½æœ‰è‡ªå·±çš„å˜é‡æ¥å­˜æ”¾æˆ‘ä»¬çš„å®šåˆ¶ã€‚ è¿™é‡Œå…ˆåšå‡ºä¸€ä¸ªé™å®šï¼Œæˆ‘ä»¬è¦ä½¿ç”¨é‡è½½æ–¹æ³•æ¥å®Œæˆè¯¥åŠŸèƒ½ï¼Œå®ç°å³å¯é«˜å®šåˆ¶ï¼Œåˆå¯ä½¿ç”¨é»˜è®¤å®šåˆ¶ã€‚ å›åˆ°åˆšåˆšçš„è¯é¢˜ï¼Œä½¿ç”¨UserDefaultsæ¥å®ç°å¯ä»¥å—ï¼Ÿå¯ä»¥ï¼Œä½†æ˜¯æ¯”è¾ƒéº»çƒ¦ï¼Œå› ä¸ºUserDefaultsæ˜¯å•ä¾‹ï¼Œæ•´ä¸ªè¿›ç¨‹å…±ç”¨è¿™ä¸€ä»½èµ„æºï¼Œå¦‚æœä½ å½“å‰controlleréµå®ˆäº†æˆ‘ä»¬çš„åè®®LXFEmptyDataSetableå¹¶åšå‡ºäº†å®šåˆ¶ï¼Œé‚£ä¹ˆå½“ä¸‹ä¸€ä¸ªcontrolleråœ¨éµå®ˆåè®®åä½¿ç”¨äº†é»˜è®¤å®šåˆ¶æ—¶ï¼Œé‚£ä½ è¦æ€ä¹ˆåŠï¼Ÿè¿˜è¦åŒºåˆ†scrollViewï¼Œé‚£å°±å¾—ä¿å­˜å½“å‰scrollViewï¼Œåœ¨é€€å‡ºå½“å‰controlleråè¿˜è¦æŠŠå¯¹åº”çš„ä¸œè¥¿ç½®ç©ºã€‚å¥½å’¯å¥½å’¯ï¼Œé‚£ä½ è¯´åˆ°åº•è¦æ€ä¹ˆææ‰æœ€åˆé€‚ï¼Ÿ è§£å†³æ–¹æ¡ˆï¼šæ‹“å±•UIScrollViewï¼ï¼ï¼æœ‰æ²¡æœ‰å‘ç°ï¼Ÿï¼Œéå¸¸åœ°æ°å·§ï¼Œæˆ‘ä»¬å®šä¹‰çš„æ–¹æ³•lxf_EmptyDataSetéœ€è¦å¤–ç•Œå°†UIScrollViewä¼ é€’è¿›æ¥ï¼Œåœ¨DZNEmptyDataSetçš„æ•°æ®æºæ–¹æ³•å’Œä»£ç†æ–¹æ³•ä¹Ÿæœ‰scrollViewã€‚é‚£è®©UIScrollViewæ¥æºå¸¦æˆ‘ä»¬çš„å®šåˆ¶å°±å¥½å•¦ã€‚ 1ã€å®šä¹‰å®šåˆ¶ç›¸å…³çš„æšä¸¾è¿™é‡Œæˆ‘å®šä¹‰äº†å¸¸ç”¨çš„å®šåˆ¶ç›¸å…³çš„æšä¸¾1234567891011121314public enum LXFEmptyDataSetAttributeKeyType &#123; /// çºµå‘åç§»(-50) CGFloat case verticalOffset /// æç¤ºè¯­(æš‚æ— æ•°æ®) String case tipStr /// æç¤ºè¯­çš„font(system15) UIFont case tipFont /// æç¤ºè¯­é¢œè‰²(D2D2D2) UIColor case tipColor /// æç¤ºå›¾(LXFEmptyDataPic) UIImage case tipImage /// å…è®¸æ»šåŠ¨(true) Bool case allowScroll&#125; 2ã€æ‹“å±•UIScrollViewä¸ºUIScrollViewå®šä¹‰ä¸€ä¸ªå®šåˆ¶ç›¸å…³çš„å±æ€§å­—å…¸1234567891011121314extension UIScrollView &#123; private struct AssociatedKeys &#123; static var lxf_emptyAttributeDict:[LXFEmptyDataSetAttributeKeyType : Any]? &#125; /// å±æ€§å­—å…¸ var lxf_emptyAttributeDict: [LXFEmptyDataSetAttributeKeyType : Any]? &#123; get &#123; return objc_getAssociatedObject(self, &amp;AssociatedKeys.lxf_emptyAttributeDict) as? [LXFEmptyDataSetAttributeKeyType : Any] &#125; set &#123; objc_setAssociatedObject(self, &amp;AssociatedKeys.lxf_emptyAttributeDict, newValue as [LXFEmptyDataSetAttributeKeyType : Any]?, objc_AssociationPolicy.OBJC_ASSOCIATION_RETAIN_NONATOMIC) &#125; &#125;&#125; 3ã€å®Œå–„lxf_EmptyDataSetæ–¹æ³•è¿™é‡Œæˆ‘ä»¬è®©å¤–ç•Œé€šè¿‡é—­åŒ…çš„æ–¹å¼æ¥å®šåˆ¶è‡ªå·±çš„ç©ºç™½é¡µ12345678// MARK:- UIViewController - ç©ºè§†å›¾å ä½åè®®public extension LXFEmptyDataSetable where Self : UIViewController &#123; func lxf_EmptyDataSet(_ scrollView: UIScrollView, attributeBlock: (()-&gt;([LXFEmptyDataSetAttributeKeyType : Any]))? = nil) &#123; scrollView.lxf_emptyAttributeDict = attributeBlock != nil ? attributeBlock!() : nil scrollView.emptyDataSetDelegate = self scrollView.emptyDataSetSource = self &#125;&#125; 4ã€ä½¿ç”¨å®šåˆ¶å±æ€§å­—å…¸è¿™é‡Œä»¥è¿”å›æç¤ºå›¾ç‰‡çš„æ–¹æ³•ä¸ºä¾‹å§123456public func image(forEmptyDataSet scrollView: UIScrollView!) -&gt; UIImage! &#123; guard let tipImg &#x3D; scrollView.lxf_emptyAttributeDict?[.tipImage] as? UIImage else &#123; return UIImage(named: &quot;LXFEmptyDataPic&quot;) &#125; return tipImg&#125; 5ã€å¤–ç•Œçš„ä½¿ç”¨å§¿åŠ¿1234567891011121314151617181920212223242526class LXFEmptyDemoController: UIViewController &#123; override func viewDidLoad() &#123; super.viewDidLoad() initUI() &#125;&#125;extension LXFEmptyDemoController: LXFEmptyDataSetable &#123; fileprivate func initUI() &#123; let tableView = UITableView() // ... // é«˜å®šåˆ¶ self.lxf_EmptyDataSet(tableView) &#123; () -&gt; ([LXFEmptyDataSetAttributeKeyType : Any]) in return [ .tipStr:\"å“Ÿå“Ÿå“Ÿ\", .verticalOffset:-150, .allowScroll: false ] &#125; // é»˜è®¤å®šåˆ¶ // self.lxf_EmptyDataSet(tableView) &#125;&#125; ä¸‰ã€å¼€æºåº“æˆ‘å¯¹è¿™ä¸ªè¿‡ç¨‹è¿›è¡Œä¸€æ¬¡æ•´ç†ï¼Œå¹¶åšæˆä¸€ä¸ªåä¸º LXFProtocolTool çš„åº“å¹¶ä¸Šä¼ è‡³gitHubã€‚å¯ä»¥ä½¿ç”¨Cocoapodsçš„æ–¹å¼æ¥å®‰è£…ä½¿ç”¨ 1pod &#39;LXFProtocolTool&#39; æˆ‘ä¹Ÿå°† iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰ ä¸­æåŠçš„é€šè¿‡åè®®ä¾¿æ·åŠ è½½xibçš„åŠŸèƒ½ä¹Ÿé›†æˆäº†è¿›æ¥ã€‚å¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦åœ¨Podfileå†™æ˜è¦å®‰è£…çš„åŠŸèƒ½ XibåŠ è½½ 1pod &#39;LXFProtocolTool&#x2F;LXFNibloadable&#39; ç©ºç™½è§†å›¾ 1pod &#39;LXFProtocolTool&#x2F;LXFEmptyDataSetable&#39; åˆ›å»ºè¿™ä¸ªåº“çš„ç›®çš„æ˜¯ä¸ºäº†é€šè¿‡åè®®çš„æ–¹å¼æ¥æ–¹ä¾¿å¿«æ·åœ°å®ç°ä¸€äº›çš„å®ç”¨åŠŸèƒ½ï¼Œç›®å‰åŠŸèƒ½ä¸å¤šï¼Œä¸è¿‡å¾€åä¼šé€æ¸å¢åŠ ï¼Œæˆ–è®¸ä½ æœ‰ä»€ä¹ˆæƒ³å®ç°çš„åŠŸèƒ½ä¹Ÿå¯ä»¥æå‡ºæ¥ï¼Œå–œæ¬¢çš„å°±ç»™ä¸ªStaré¼“åŠ±ä¸‹æˆ‘å§ ğŸš€ ğŸš€ ğŸš€","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Swift","slug":"Swift","permalink":"http://linxunfeng.top/tags/Swift/"}]},{"title":"iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆå››ï¼‰ï¼šfastlaneå®ç°podè‡ªåŠ¨åŒ–","slug":"iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆå››ï¼‰ï¼šfastlaneå®ç°podè‡ªåŠ¨åŒ–","date":"2018-04-06T19:53:20.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2018/04/06/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆå››ï¼‰ï¼šfastlaneå®ç°podè‡ªåŠ¨åŒ–/","link":"","permalink":"http://linxunfeng.top/2018/04/06/iOS-%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9Afastlane%E5%AE%9E%E7%8E%B0pod%E8%87%AA%E5%8A%A8%E5%8C%96/","excerpt":"åœ¨ç¬¬ä¸€æ¬¡ç»„ä»¶åŒ–çš„æ—¶å€™ï¼Œéœ€è¦æ‰§è¡Œå¾ˆå¤šæ“ä½œï¼Œè¿™äº›æ“ä½œå¯ä»¥åœ¨ã€iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨ã€‘ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œåœ¨ç»„ä»¶åŒ–åçš„é‡å¤æ€§æ“ä½œå°±æ˜¯å‡çº§ï¼Œè€Œå‡çº§è¿™ä¸ªè¿‡ç¨‹æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥å¾ˆæ–¹ä¾¿çš„æå®šè¿™ä¸€è¿‡ç¨‹æ¥èŠ‚çº¦æˆ‘ä»¬å¤§é‡çš„æ—¶é—´å‘¢ï¼Ÿ +","text":"åœ¨ç¬¬ä¸€æ¬¡ç»„ä»¶åŒ–çš„æ—¶å€™ï¼Œéœ€è¦æ‰§è¡Œå¾ˆå¤šæ“ä½œï¼Œè¿™äº›æ“ä½œå¯ä»¥åœ¨ã€iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨ã€‘ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œåœ¨ç»„ä»¶åŒ–åçš„é‡å¤æ€§æ“ä½œå°±æ˜¯å‡çº§ï¼Œè€Œå‡çº§è¿™ä¸ªè¿‡ç¨‹æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥å¾ˆæ–¹ä¾¿çš„æå®šè¿™ä¸€è¿‡ç¨‹æ¥èŠ‚çº¦æˆ‘ä»¬å¤§é‡çš„æ—¶é—´å‘¢ï¼Ÿ + åœ¨ç¬¬ä¸€æ¬¡ç»„ä»¶åŒ–çš„æ—¶å€™ï¼Œéœ€è¦æ‰§è¡Œå¾ˆå¤šæ“ä½œï¼Œè¿™äº›æ“ä½œå¯ä»¥åœ¨ã€iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨ã€‘ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œåœ¨ç»„ä»¶åŒ–åçš„é‡å¤æ€§æ“ä½œå°±æ˜¯å‡çº§ï¼Œè€Œå‡çº§è¿™ä¸ªè¿‡ç¨‹æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥å¾ˆæ–¹ä¾¿çš„æå®šè¿™ä¸€è¿‡ç¨‹æ¥èŠ‚çº¦æˆ‘ä»¬å¤§é‡çš„æ—¶é—´å‘¢ï¼Ÿ ä¸€ã€å‡çº§å¿…å¤‡æ“ä½œä¿®æ”¹å®Œæ ¸å¿ƒä»£ç åï¼Œä¸€å…±è¿˜éœ€è¦åšä»¥ä¸‹å‡ æ­¥ï¼š1ã€ä¿®æ”¹specæ–‡ä»¶ï¼ˆä¿®æ”¹s.versionï¼Œs.descriptionç­‰ï¼‰2ã€pod install ï¼ˆä½¿Exampleä¸podä¸‹æ¥çš„åº“äº§ç”Ÿå…³è”ï¼‰3ã€æäº¤æœ¬åœ°ä»“åº“ä»£ç è‡³è¿œç¨‹ä»“åº“4ã€æ‰“æ ‡ç­¾ï¼Œå¹¶æäº¤è‡³è¿œç¨‹5ã€éªŒè¯specï¼Œå¹¶æè‡³ç§æœ‰ç´¢å¼•åº“ äºŒã€Fastlane1ã€ç®€ä»‹Fastlaneæ–‡æ¡£è¯´æ˜ Fastlaneæ˜¯ä¸€ä¸ªrubyè„šæœ¬é›†åˆï¼Œå®ƒå¯ä»¥æŒ‰ç…§æˆ‘ä»¬æŒ‡å®šçš„è·¯çº¿ï¼Œåœ¨æŒ‡å®šä½ç½®æ‰§è¡Œæˆ‘ä»¬æ‰€è¦æ‰§è¡Œçš„æ“ä½œã€‚è¿™é‡Œæˆ‘ä»¬ç§°è¿™æ ·çš„è·¯çº¿ä¸ºã€Œèˆªé“(lane)ã€ï¼Œè¿™æ ·çš„æ“ä½œç§°ä¸ºã€ŒActionã€ Actionæ˜¯Fastlaneè‡ªåŠ¨åŒ–æµç¨‹ä¸­çš„æœ€å°æ‰§è¡Œå•å…ƒï¼Œç”¨æ¥æ‰§è¡ŒFastlaneè„šæœ¬ä¸­çš„å‘½ä»¤ï¼Œå…³äºæ›´å¤šçš„æè¿°å¯ä»¥åˆ°Actions - fastlane docsæŸ¥çœ‹ï¼Œé‡Œé¢ä¹Ÿä»‹ç»äº†å¸¸ç”¨çš„actionæœ‰å“ªäº›ï¼Œé¡ºå¸¦é™„ä¸Šactionçš„æºç åœ°å€ï¼Œè¿™ä¸ªæºç åœ¨åé¢è‡ªå®šä¹‰èµ·å‚è€ƒä½œç”¨ 2ã€ å®‰è£… ç¡®ä¿rubyä¸ºæœ€æ–°ç‰ˆæœ¬ 12brew updatebrew install ruby å®‰è£…fastlane 1sudo gem install -n &#x2F;usr&#x2F;local&#x2F;bin fastlane æŸ¥çœ‹å½“å‰fastlaneç‰ˆæœ¬ 1fastlane --version æŸ¥çœ‹æ‰€æœ‰action 1fastlane actions ä¸‰ã€fastlaneåˆå§‹åŒ–cdåˆ°ä½ çš„æœ¬åœ°ç»„ä»¶ä»“åº“çš„æ ¹ç›®å½• åˆå§‹åŒ–fastlanefastlane initä¸è¿‡è¿™ä¸ªæ­¥éª¤å¯¹æˆ‘ä»¬æ¥è¯´å¯ä»¥è·³è¿‡ï¼Œåœ¨initåæç¤ºä½ è¾“å…¥ä¸€äº›ä¸œè¥¿ï¼ŒåŒ…æ‹¬ä¸Šä¼ éœ€è¦ç”¨åˆ°çš„APPLE IDä»€ä¹ˆçš„ä¸€å †ä¸œè¥¿ï¼Œç”±äºæˆ‘ä»¬å¹¶ä¸æ¶‰åŠè¿™äº›ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨æ›´æ–¹ä¾¿çš„æ–¹å¼ 123456# åˆ›å»ºä¸€ä¸ªfastlaneæ–‡ä»¶å¤¹# è¿›å…¥fastlaneç›®å½•# åˆ›å»ºä¸€ä¸ªFastfileæ–‡ä»¶mkdir fastlanecd fastlanetouch Fastfile 1ã€ä¿®æ”¹Fastfile123456789desc &#39;æè¿°èˆªé“ä½œç”¨&#39;lane :èˆªé“åç§° do |options|&#x2F;&#x2F; options å¯ä»¥ç”¨æ¥ä¼ é€’å‚æ•°&#x2F;&#x2F; ç¤ºä¾‹ï¼švarName &#x3D; options[:name]&#x2F;&#x2F; èˆªé“ä¸Šéœ€è¦æ‰§è¡Œçš„æ“ä½œend èˆªé“ä¸Šè¦æ‰«æçš„æ“ä½œå¯ä»¥åˆ°Actionsä¸ŠæŸ¥æ‰¾ï¼Œå¯ä»¥é€šè¿‡å…³é”®å­—æœç´¢ï¼Œå¦‚ä¸‹å›¾ç‚¹è¿›å»å¯ä»¥çœ‹åˆ°å…·ä½“çš„ä½¿ç”¨åŠå‚æ•°è¯´æ˜ è¿™é‡Œé™„ä¸Šæœ¬äººçš„Fastfileå†…å®¹ï¼š123456789101112131415161718192021222324252627282930313233343536373839desc &#39;LXFUpdatePodTool èˆªé“ç”¨æ¥è‡ªåŠ¨åŒ–å‡çº§ç»´æŠ¤ç§æœ‰åº“&#39;lane : LXFUpdatePodTool do |options|tagNum &#x3D; options[:tag]podspecName &#x3D; options[:specName]# èˆªé“ä¸Šéœ€è¦æ‰§è¡Œçš„æ“ä½œ# å…·ä½“actionåˆ° https:&#x2F;&#x2F;docs.fastlane.tools&#x2F;actions ä¸Šé¢æŸ¥æ‰¾# è¿™é‡Œçš„è·¯å¾„ä»¥ä»“åº“æ ¹ç›®å½•ä¸ºå‡†# 1ã€ä¿®æ”¹specæ–‡ä»¶ï¼ˆä¿®æ”¹s.versionï¼Œs.descriptionç­‰ï¼‰# 2ã€pod install ï¼ˆä½¿Exampleä¸podä¸‹æ¥çš„åº“äº§ç”Ÿå…³è”ï¼‰cocoapods( clean: true, podfile: &quot;.&#x2F;Example&#x2F;Podfile&quot;)# 3ã€æäº¤æœ¬åœ°ä»“åº“ä»£ç è‡³è¿œç¨‹ä»“åº“git_add(path: &quot;.&quot;)git_commit(path: &quot;.&quot;, message: &quot;upgrade repo&quot;)push_to_git_remote# 4ã€æ‰“æ ‡ç­¾ï¼Œå¹¶æäº¤è‡³è¿œç¨‹add_git_tag( tag: tagNum)push_git_tags# 5ã€éªŒè¯specï¼Œå¹¶æè‡³ç§æœ‰ç´¢å¼•åº“pod_lib_lint(allow_warnings: true)# å› ä¸ºæœ¬åœ°ç´¢å¼•åº“repoçš„åå­—æ˜¯åŸºæœ¬ä¸Šä¸ä¼šå»æ”¹å˜çš„ï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥å†™æ­» LXFSpecs# podspecçš„åå­—éœ€è¦ç”±å¤–ç•Œä¼ å…¥pod_push(path: &quot;#&#123;podspecName&#125;.podspec&quot;, repo: &quot;LXFSpecs&quot;)end 2ã€éªŒè¯Fastfile1fastlane lanes 3ã€æ‰§è¡Œfastlaneéœ€è¦åœ¨ç»„ä»¶ä»“åº“çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œ 1fastlane LXFUpdatePodTool tag:0.1.1 specName:LXFMain æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ä¸è¶…è¿‡30ç§’ï½ å››ã€è‡ªå®šä¹‰Actionä»¥ä¸Šçš„è¿‡ç¨‹å·²ç»å¯ä»¥å®Œæˆä¸€æ•´ä¸ªè‡ªåŠ¨åŒ–æ›´æ–°äº†ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªè¾“å…¥çš„tagå¯èƒ½ä¼šé¢ä¸´ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯æœ¬åœ°å’Œè¿œç¨‹éƒ½å¯èƒ½å·²ç»å­˜åœ¨ï¼Œå³å‘ç”Ÿå†²çªï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥é€‰æ‹©è‡ªåŠ¨åˆ é™¤æœ¬åœ°å’Œè¿œç¨‹å†²çªçš„é‚£ä¸ªtagï¼Œå†é‡æ–°ä¸Šä¼ å½“å‰tag 1ã€åˆ›å»ºä¸€ä¸ªæ–°çš„action1fastlane new_action æŒ‰è¦æ±‚è¾“å…¥Actionåç§° å®Œæˆåfastlaneç›®å½•ä¸‹å°±ä¼šå¤šå‡ºä¸€ä¸ªåä¸ºactionsçš„æ–‡ä»¶å¤¹ï¼Œé‡Œé¢å­˜æ”¾çš„å°±æ˜¯ä½ è‡ªå®šä¹‰action 2ã€ç¼–è¾‘è‡ªå®šä¹‰actionæ‰“å¼€remove_git_tag.rbï¼Œå¼€å§‹è‡ªå®šä¹‰æˆ‘ä»¬çš„actionå§ï¼Œä»€ä¹ˆï¼Ÿä¸ä¼šè¯­æ³•æ€ä¹ˆåŠï¼Ÿå¯ä»¥å‚è€ƒåˆ«äººçš„å˜›ï¼Œä¸Šé¢ç»™å‡ºçš„actionçš„æºç åœ°å€å°±æœ‰ç”¨æ­¦ä¹‹åœ°äº†ï¼Œæ¯”å¦‚pod_pushã€‚è¿™é‡Œæˆ‘ç›´æ¥è´´å‡ºæˆ‘å·²ç»å®Œæˆçš„ä¸»è¦ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960# å¯ä»¥ä½¿ç”¨ fastlane action remove_git_tag æ¥å‚çœ‹è¯¦ç»†æè¿°def self.run(params) # è¿™é‡Œå†™è¦æ‰§è¡Œçš„æ“ä½œ # params[:å‚æ•°åç§°] å‚æ•°åç§°ä¸ä¸‹é¢self.available_optionsä¸­çš„ä¿æŒä¸€è‡´ tagNum &#x3D; params[:tagNum] rmLocalTag &#x3D; params[:rmLocalTag] rmRemoteTag &#x3D; params[:rmRemoteTag] command &#x3D; [] if rmLocalTag # åˆ é™¤æœ¬åœ°æ ‡ç­¾ # git tag -d æ ‡ç­¾åç§° command &lt;&lt; &quot;git tag -d #&#123;tagNum&#125;&quot; end if rmRemoteTag # åˆ é™¤è¿œç¨‹æ ‡ç­¾ # git push origin :æ ‡ç­¾åç§° command &lt;&lt; &quot;git push origin :#&#123;tagNum&#125;&quot; end result &#x3D; Actions.sh(command.join(&#39;&amp;&#39;)) UI.success(&quot;Successfully remove tag ğŸš€ &quot;) return resultenddef self.description # å¯¹å½“å‰è„šæœ¬çš„ç®€å•æè¿° &quot;åˆ é™¤tag&quot;enddef self.details # å¯¹å½“å‰è„šæœ¬çš„å…·ä½“æè¿° &quot;ä½¿ç”¨å½“å‰actionæ¥åˆ é™¤æœ¬åœ°å’Œè¿œç¨‹å†²çªçš„tag&quot;enddef self.available_options # ç”¨æ¥ä¼ é€’å‚æ•° [ FastlaneCore::ConfigItem.new(key: :tagNum, description: &quot;è¾“å…¥å³å°†åˆ é™¤çš„tag&quot;, is_string: true), FastlaneCore::ConfigItem.new(key: :rmLocalTag, description: &quot;æ˜¯å¦åˆ é™¤æœ¬åœ°tag&quot;, optional:true, is_string: false, default_value: true), FastlaneCore::ConfigItem.new(key: :rmRemoteTag, description: &quot;æ˜¯å¦åˆ é™¤è¿œç¨‹tag&quot;, optional:true, is_string: false, default_value: true) ]enddef self.authors # ä½œè€…å§“å [&quot;LinXunFeng&quot;]end 3ã€æŸ¥çœ‹actionæè¿°åŒæ ·ï¼Œè¿™é‡Œå…ˆcdåˆ°ç»„ä»¶åº“çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼ŒåŸå› æ˜¯è¿™ä¸ªè‡ªå®šä¹‰actionåªå­˜åœ¨å½“å‰æ ¹ç›®å½•ä¸‹çš„fastlaneä¸­ï¼Œå…¶å®ƒfastlaneçš„éè‡ªå®šä¹‰çš„actionå°±ä¸ç”¨åœ¨å½“å‰æ ¹ç›®å½•ä¸‹æ“ä½œï½1fastlane action remove_git_tag 4ã€æµ‹è¯•æ‰§è¡Œå…ˆæ¥çœ‹çœ‹å½“å‰ç»„ä»¶åº“å·²å­˜åœ¨çš„tag1git tag å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘æ˜¯å·²ç»æœ‰ä¸€ä¸ª0.1.1ç‰ˆæœ¬çš„äº†ã€‚è¿™æ—¶æˆ‘ä»¬å†æ¥æ‰§è¡Œä¸€æ¬¡LXFUpdatePodToolèˆªé“1fastlane LXFUpdatePodTool tag:0.1.1 specName:LXFMain äº”ã€å·¥å…·æ‹¿èµ°LXFUpdatePodTool å·²ç»ä¼ åˆ°æˆ‘çš„GitHubä¸Šï¼Œéœ€è¦çš„åŒå­¦å°±æ‹¿èµ°å§ï¼Œé¡ºæ‰‹ç»™ä¸ªStarå’¯ Orz","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://linxunfeng.top/tags/Git/"},{"name":"GitHub","slug":"GitHub","permalink":"http://linxunfeng.top/tags/GitHub/"},{"name":"Cocoapods","slug":"Cocoapods","permalink":"http://linxunfeng.top/tags/Cocoapods/"},{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"ç»„ä»¶åŒ–","slug":"ç»„ä»¶åŒ–","permalink":"http://linxunfeng.top/tags/%E7%BB%84%E4%BB%B6%E5%8C%96/"}]},{"title":"iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸‰ï¼‰ï¼šåŠ è½½èµ„æºæ–‡ä»¶","slug":"iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸‰ï¼‰ï¼šåŠ è½½èµ„æºæ–‡ä»¶","date":"2018-04-06T19:52:11.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2018/04/06/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸‰ï¼‰ï¼šåŠ è½½èµ„æºæ–‡ä»¶/","link":"","permalink":"http://linxunfeng.top/2018/04/06/iOS-%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%8A%A0%E8%BD%BD%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6/","excerpt":"ç»è¿‡å‰ä¸¤ç¯‡æ–‡ç« çš„å­¦ä¹ ï¼Œç›¸ä¿¡å¯¹ç»„ä»¶åŒ–å¼€å‘æœ‰äº†å¤§è‡´çš„äº†è§£ï¼Œé‚£æˆ‘ä»¬è¿™ç¯‡æ–‡ç« å°±æ¥è®²è®²èµ„æºæ–‡ä»¶çš„åŠ è½½å§ +","text":"ç»è¿‡å‰ä¸¤ç¯‡æ–‡ç« çš„å­¦ä¹ ï¼Œç›¸ä¿¡å¯¹ç»„ä»¶åŒ–å¼€å‘æœ‰äº†å¤§è‡´çš„äº†è§£ï¼Œé‚£æˆ‘ä»¬è¿™ç¯‡æ–‡ç« å°±æ¥è®²è®²èµ„æºæ–‡ä»¶çš„åŠ è½½å§ + ç»è¿‡å‰ä¸¤ç¯‡æ–‡ç« çš„å­¦ä¹ ï¼Œç›¸ä¿¡å¯¹ç»„ä»¶åŒ–å¼€å‘æœ‰äº†å¤§è‡´çš„äº†è§£ï¼Œé‚£æˆ‘ä»¬è¿™ç¯‡æ–‡ç« å°±æ¥è®²è®²èµ„æºæ–‡ä»¶çš„åŠ è½½å§ è¿™é‡Œæˆ‘æ–°å»ºäº†ä¸€ä¸ªLXFMainç»„ä»¶åº“ï¼Œä¸»è¦æ˜¯ç”¨æ¥æ˜¾ç¤ºTabBarçš„ç©æ„ï¼Œç„¶åå†è¿›è¡Œç»„ä»¶åŒ–æŠ½ç¦»å‡ºæ¥ï¼Œå…¶ä¸­çš„è¿‡ç¨‹è¿™é‡Œä¸å†èµ˜è¿°ï¼Œè¿˜æ²¡äº†è§£è¿‡çš„åŒå­¦å»ºè®®å…ˆé˜…è¯»ä¸‹è¿™ä¸¤ç¯‡æ–‡ç« å§ iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨ iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆäºŒï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„æ›´æ–°ä¸å­åº“ è¿™é‡Œè·Ÿä¹‹å‰ä¸ä¸€æ ·çš„åœ°æ–¹åœ¨äºå¤šäº†å›¾ç‰‡èµ„æºï¼Œç»„ä»¶çš„æ ¸å¿ƒä»£ç æ”¾åœ¨Classesæ–‡ä»¶å¤¹ä¸­ï¼Œè€Œå›¾ç‰‡æˆ‘ä»¬åˆ™å­˜æ”¾äºAssetsç›®å½•ä¸‹ï¼Œå¦‚å›¾æ‰€ç¤º ä¸€ã€ä¿®æ”¹Specå°†å…³äºèµ„æºåŠ è½½çš„æ³¨é‡Šå»æ‰1234s.resource_bundles &#x3D; &#123; # &#39;LXFMain&#39; &#x3D;&gt; [&#39;LXFMain&#x2F;Assets&#x2F;*.png&#39;] &#39;LXFMain&#39; &#x3D;&gt; [&#39;LXFMain&#x2F;Assets&#x2F;*&#39;]&#125; å›åˆ°LXFMainçš„æ¨¡æ¿åº“ï¼Œæˆ‘ä»¬è¿›è¡Œä¸€æ¬¡æœ¬åœ°çš„å®‰è£…å’Œæµ‹è¯•(pod install) å¯ä»¥çœ‹åˆ°ï¼Œå›¾ç‰‡èµ„æºä¹Ÿå®‰è£…è¿›æ¥äº†ï¼Œä½†æ˜¯è¿è¡Œçš„æ•ˆæœå¦‚ä¸‹å›¾ï¼Œå›¾ç‰‡å¹¶ä¸èƒ½æˆåŠŸåŠ è½½å‡ºæ¥ äºŒã€ä¿®æ”¹åŠ è½½èµ„æºä»£ç è¿™æ˜¯å½“å‰åŠ è½½å›¾ç‰‡çš„ç›¸å…³ä»£ç 1[UIImage imageNamed:@&quot;å›¾ç‰‡åç§°&quot;]; å³å‡»æ˜¾ç¤ºåŒ…å†…å®¹ å›¾ç‰‡å°±åœ¨è¿™ä¸ªLXFMain.bundleé‡Œé¢(è¿™é‡Œå°±ä¸æˆªå›¾çœ‹äº†)ï¼Œè¿™é‡Œä¸»è¦æ˜¯è®©å¤§å®¶å¯¹è¿™ä¸ªç›®å½•ç»“æ„æœ‰ä¸ªäº†è§£ æˆ‘ä»¬å¯¹imageNamedè¿›è¡Œè·³è½¬åˆ°å®šä¹‰æ“ä½œ 1&#x2F;&#x2F; load from main bundle å¯ä»¥çœ‹åˆ°ï¼Œå®˜æ–¹æ³¨é‡Šç€imageNamedåŠ è½½çš„æ˜¯main bundleä¸­çš„èµ„æº,mainBundleçš„ä½ç½®å¦‚ä¸‹å›¾ è¿™æ ·å½“ç„¶å°±æ— æ³•åŠ è½½åˆ°å›¾ç‰‡å•¦ï¼Œæˆ‘ä»¬éœ€è¦è®©å®ƒåŠ è½½è‡ªå·±å½“å‰æ‰€åœ¨bundleé‡Œçš„å›¾ç‰‡ ï¼Œæ‰€ä»¥åŠ è½½å›¾ç‰‡çš„ä»£ç éœ€è¦è¿›è¡Œä¿®æ”¹1234NSString *normalImgName = @\"ä¸ªäºº@2x.png\";NSBundle *curBundle = [NSBundle bundleForClass:self.class]; // è·å–å½“å‰bundleNSString *normalImgPath = [curBundle pathForResource:normalImgName ofType:nil inDirectory:@\"LXFMain.bundle\"];UIImage *normalImage = [UIImage imageWithContentsOfFile:normalImgPath]; ä½†æ˜¯ç›´æ¥å†™LXFMain.bundleå¹¶ä¸å¥½ï¼Œä¸å¯æ§ï¼Œæ‰€ä»¥è¿˜éœ€è¦æ”¹è¿›ä¸€ä¸‹ï¼š12345678NSString *normalImgName &#x3D; [NSString stringWithFormat:@&quot;%@@2x.png&quot;, normalImg];NSBundle *curBundle &#x3D; [NSBundle bundleForClass:self.class];&#x2F;&#x2F; *********** é‡ç‚¹ *********** &#x2F;&#x2F;NSString *curBundleName &#x3D; curBundle.infoDictionary[@&quot;CFBundleName&quot;];NSString *curBundleDirectory &#x3D; [NSString stringWithFormat:@&quot;%@.bundle&quot;, curBundleName];NSString *normalImgPath &#x3D; [curBundle pathForResource:normalImgName ofType:nil inDirectory:curBundleDirectory];&#x2F;&#x2F; *************************** &#x2F;&#x2F;UIImage *normalImage &#x3D; [UIImage imageWithContentsOfFile:normalImgPath]; ä¸‰ã€èŠèŠxibXibçš„åŠ è½½ä¹Ÿæ˜¯å¦‚æ­¤1234NSBundle *curBundle &#x3D; [NSBundle bundleForClass:self.class];LXFCenterView *centerView &#x3D; (LXFCenterView *)[curBundle loadNibNamed:@&quot;LXFCenterView&quot; owner:nil options:nil].firstObject;centerView.frame &#x3D; CGRectMake(30, 140, 200, 100);[self.view addSubview:centerView];ä¸è¿‡xibä¸­å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¦‚æœæ˜¯ç›´æ¥åœ¨xibä¸­æ‹–å…¥ä¸€ä¸ªimageViewæ§ä»¶æ¥è®¾ç½®å›¾ç‰‡çš„åŠ è½½ï¼Œæˆ‘ä»¬åˆ™éœ€è¦åœ¨å›¾ç‰‡åå­—å‰åŠ ä¸Šå½“å‰bundleåç§°1LXFMain.bundle&#x2F;ä¸ªäºº è¿™é‡Œé™¤äº†å½“å‰xibè¦åŠ è½½çš„å›¾ç‰‡ä¸å±äºmainBundleè¿™ä¸ªåŸå› ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç‚¹å°±æ˜¯xibæ–‡ä»¶ä¸bundleå­˜æ”¾ä½ç½®å±äºåŒä¸€çº§åˆ«ï¼Œæ•…ç›´æ¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„çš„æ–¹å¼ï¼Œåœ¨å›¾ç‰‡åå­—å‰åŠ ä¸Šbundleåç§°å³å¯ã€‚ è™½ç„¶æ— æ³•åœ¨xibä¸Šç›´æ¥çœ‹åˆ°æ•ˆæœï¼Œä¸è¿‡ç¡®å®æ˜¯æœ‰æ•ˆçš„ å››ã€é‡åˆ°çš„å°é—®é¢˜1[!] Unable to find a pod with name, author, summary, or description matching &#96;lxfmain&#96; æˆ‘åšå®Œä¸€åˆ‡æ“ä½œåå‘ç°æœç´¢æŠ¥ä¸Šé¢é‚£ä¸ªé”™ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åˆ é™¤æœ¬åœ°ç´¢å¼•æ–‡ä»¶ï¼Œç„¶åå†æœç´¢ä¸€éï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¸®ä½ å†ç”Ÿæˆä¸€åˆ‡æœ¬åœ°ç´¢å¼•æ–‡ä»¶ï¼Œç„¶åå°±æå®šäº†ï½12rm -rf ~&#x2F;Library&#x2F;Caches&#x2F;CocoaPods&#x2F;search_index.json pod search lxfmain","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://linxunfeng.top/tags/Git/"},{"name":"GitHub","slug":"GitHub","permalink":"http://linxunfeng.top/tags/GitHub/"},{"name":"Cocoapods","slug":"Cocoapods","permalink":"http://linxunfeng.top/tags/Cocoapods/"},{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"ç»„ä»¶åŒ–","slug":"ç»„ä»¶åŒ–","permalink":"http://linxunfeng.top/tags/%E7%BB%84%E4%BB%B6%E5%8C%96/"}]},{"title":"iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆäºŒï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„æ›´æ–°ä¸å­åº“","slug":"iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆäºŒï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„æ›´æ–°ä¸å­åº“","date":"2018-04-06T19:50:41.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2018/04/06/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆäºŒï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„æ›´æ–°ä¸å­åº“/","link":"","permalink":"http://linxunfeng.top/2018/04/06/iOS-%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E8%BF%9C%E7%A8%8B%E7%A7%81%E6%9C%89%E5%BA%93%E7%9A%84%E6%9B%B4%E6%96%B0%E4%B8%8E%E5%AD%90%E5%BA%93/","excerpt":"åœ¨ä¸Šä¸€ç¯‡ã€iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨ã€‘ä¸­æˆ‘ä»¬å·²ç»å®æˆ˜äº†è¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬æ“ä½œï¼Œä½†æ˜¯ç»„ä»¶ä¸å¯èƒ½ä¸Šä¼ ä¸€æ¬¡å°±å®Œäº‹äº†ï¼Œéšç€ä¸šåŠ¡çš„å¢åŠ ï¼Œæˆ‘ä»¬çš„ç»„ä»¶å¯èƒ½è¿˜éœ€è¦æ·»åŠ æ›´å¤šçš„ä¸œè¥¿ï¼Œæˆ–è€…ä¿®å¤ä¸€äº›é—®é¢˜ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬å¯¹ç§æœ‰åº“ä»£ç è¿›è¡Œå‡çº§ä¸ç»´æŠ¤ +","text":"åœ¨ä¸Šä¸€ç¯‡ã€iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨ã€‘ä¸­æˆ‘ä»¬å·²ç»å®æˆ˜äº†è¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬æ“ä½œï¼Œä½†æ˜¯ç»„ä»¶ä¸å¯èƒ½ä¸Šä¼ ä¸€æ¬¡å°±å®Œäº‹äº†ï¼Œéšç€ä¸šåŠ¡çš„å¢åŠ ï¼Œæˆ‘ä»¬çš„ç»„ä»¶å¯èƒ½è¿˜éœ€è¦æ·»åŠ æ›´å¤šçš„ä¸œè¥¿ï¼Œæˆ–è€…ä¿®å¤ä¸€äº›é—®é¢˜ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬å¯¹ç§æœ‰åº“ä»£ç è¿›è¡Œå‡çº§ä¸ç»´æŠ¤ + åœ¨ä¸Šä¸€ç¯‡ã€iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨ã€‘ä¸­æˆ‘ä»¬å·²ç»å®æˆ˜äº†è¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬æ“ä½œï¼Œä½†æ˜¯ç»„ä»¶ä¸å¯èƒ½ä¸Šä¼ ä¸€æ¬¡å°±å®Œäº‹äº†ï¼Œéšç€ä¸šåŠ¡çš„å¢åŠ ï¼Œæˆ‘ä»¬çš„ç»„ä»¶å¯èƒ½è¿˜éœ€è¦æ·»åŠ æ›´å¤šçš„ä¸œè¥¿ï¼Œæˆ–è€…ä¿®å¤ä¸€äº›é—®é¢˜ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬å¯¹ç§æœ‰åº“ä»£ç è¿›è¡Œå‡çº§ä¸ç»´æŠ¤ è¿™é‡Œä»¥å¯¹åŸºç¡€ç»„ä»¶é‡Œæ·»åŠ äº†ä¸€ä¸ªCacheå·¥å…·ä¸ºä¾‹ æ·»åŠ å®Œæˆåæˆ‘ä»¬éœ€è¦æ›´æ–°åˆ°è¿œç¨‹ä»“åº“ ä¸€ã€æ›´æ–°è¿œç¨‹ä»“åº“cd åˆ°æœ¬åœ°ä»“åº“çš„ä½ç½®ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œ 1ã€ä»£ç æ›´æ–°123git add .git commit -m &#39;æ›´æ–°æè¿°&#39;git push origin master 2ã€ç‰ˆæœ¬æ›´æ–°ç‰ˆæœ¬æ›´æ–° è¿™ä¸€æ­¥éå¸¸é‡è¦ï¼Œä¸ºæ›´æ–°ç´¢å¼•åº“åšå‡†å¤‡ 12git tag -a &#39;æ–°ç‰ˆæœ¬å·&#39; -m &#39;æ³¨é‡Š&#39;git push --tags æŸ¥çœ‹è¿œç¨‹ä»“åº“ï¼Œæ ‡ç­¾æ•°å·²ç»æœ‰2ä¸ªäº†ï¼Œç‚¹è¿›å»å°±å¯ä»¥çœ‹åˆ°0.2.0ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä¸å»çœ‹äº† äºŒã€ä¿®æ”¹æè¿°æ–‡ä»¶å¹¶æ›´æ–°ç´¢å¼•åº“1ã€ä¿®æ”¹Sepcæ‰“å¼€ä½ çš„xx.podspecæ–‡ä»¶ï¼Œå°†åŸæœ¬çš„ç‰ˆæœ¬å·æ”¹ä¸º0.2.0ï¼Œä¸åˆšåˆšçš„tagä¿æŒä¸€è‡´1s.version &#x3D; &#39;0.2.0&#39; 2ã€éªŒè¯è¿œç¨‹Spec1pod spec lint --private 3ã€æ›´æ–°ç´¢å¼•åº“1pod repo push ç´¢å¼•åº“åç§° xxx.podspec ä¸‰ã€æ›´æ–°ä½¿ç”¨123&#x2F;&#x2F; --no-repo-update ä¸æ›´æ–°æœ¬åœ°ç´¢å¼•åº“&#x2F;&#x2F; å› ä¸ºåˆšåˆšå·²ç»è‡ªå·±æ‰‹åŠ¨æ›´æ–°è¿‡äº†ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬é€‰æ‹©è·³è¿‡æ›´æ–°pod update --no-repo-update å››ã€ç¬¬ä¸‰æ–¹ä¾èµ–å½“æˆ‘ä»¬çš„ç§æœ‰åº“éœ€è¦ä¾èµ–å…¶å®ƒç¬¬ä¸‰æ–¹æ‰å¯ä»¥æ­£å¸¸ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨specæ–‡ä»¶ä¸­å¼€å¯ä¾èµ–ï¼Œä¾‹å¦‚ä¸‹é¢æ‰€ç¤ºä»£ç ï¼Œè¡¨æ˜å½“å‰ä»“åº“éœ€è¦ä¾èµ–AFNå’ŒSDWebImage12s.dependency &#39;AFNetworking&#39;, &#39;~&gt; 3.2.0&#39;s.dependency &#39;SDWebImage&#39;, &#39;~&gt; 4.3.3&#39;ä¿®æ”¹åæ›´æ–°æ“ä½œåŒä¸Šæ‰€è¿°ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚ ä½†æ˜¯è¿™é‡Œå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæ¥äº†ä¸€ä½æ–°çš„å°ä¼™ä¼´ï¼Œä»–æ‰€è´Ÿè´£çš„éƒ¨åˆ†åªéœ€è¦LXFBaseä¸‹çš„Categoryï¼Œè€ŒLXFBaseä¸‹çš„Cacheæ‰éœ€è¦ä¾èµ–SDWebImageï¼Œæ­¤æ—¶ä»–è‹¥æ˜¯podä¸€æ•´ä¸ªLXFBaseå²‚ä¸æ˜¯å¹³ç™½æ— æ•…å®‰è£…äº†ç¬¬ä¸‰æ–¹ä¾èµ–åº“ï¼Œé‚£åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ æ–¹æ¡ˆå°±æ˜¯å¯ä»¥é€šè¿‡å­åº“Subspecsæ¥è§£å†³å› éœ€è¦ä¸€ä¸ªå°å°çš„å·¥å…·è€Œä¾èµ–æ•´ä¸ªåŸºç¡€ç»„ä»¶çš„é—®é¢˜ äº”ã€å­åº“Subspecsä»€ä¹ˆæ˜¯Subspecsï¼Ÿè¿™é‡Œæˆ‘ä»¬å¯ä»¥æœç´¢ä¸€ä¸‹SDWebImage 1pod search &#39;SDWebImage&#39; å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœæˆ‘ä»¬åªéœ€è¦ç”¨åˆ°SDWebImageä¸­çš„GIFåŠŸèƒ½ï¼Œé‚£ä¹ˆå¹¶ä¸éœ€è¦å°†æ•´ä¸ªSDWebImageéƒ½ä¸‹è½½ä¸‹æ¥ï¼Œåœ¨Podfileä¸­å°†pod &#39;SDWebImage&#39; æ”¹ä¸º pod SDWebImage/GIFå³å¯å•ç‹¬ä½¿ç”¨è¿™ä¸€åŠŸèƒ½ é‚£æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥çœ‹çœ‹æ€ä¹ˆæè¿°ä¸€ä¸ªå­åº“å§ å­åº“æ ¼å¼123s.subspec &#39;å­åº“åç§°&#39; do |åˆ«å|end å› ä¸ºè¿™é‡Œå·²ç»åˆ†ç¦»å‡ºå­åº“äº†ï¼Œæ‰€ä»¥s.source_fileså’Œs.dependencyå°±ä¸èƒ½è¿™ä¹ˆä½¿ç”¨äº†ï¼Œéœ€è¦æˆ‘ä»¬åœ¨å­åº“é‡Œåˆ†åˆ«æŒ‡å®šï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥æŠŠåŸæ¥çš„s.source_fileså’Œs.dependencyéƒ½æ³¨é‡Šæ‰ã€‚å†™æ³•å‚è€ƒå¦‚ä¸‹ 123456789101112131415# s.source_files &#x3D; &#39;LXFBase&#x2F;Classes&#x2F;**&#x2F;*&#39;# s.dependency &#39;SDWebImage&#39;, &#39;~&gt; 4.3.3&#39;s.subspec &#39;Cache&#39; do |c| c.source_files &#x3D; &#39;LXFBase&#x2F;Classes&#x2F;Cache&#x2F;**&#x2F;*&#39; c.dependency &#39;SDWebImage&#39;, &#39;~&gt; 4.3.3&#39;ends.subspec &#39;Category&#39; do |c| c.source_files &#x3D; &#39;LXFBase&#x2F;Classes&#x2F;Category&#x2F;**&#x2F;*&#39;ends.subspec &#39;Tool&#39; do |t| t.source_files &#x3D; &#39;LXFBase&#x2F;Classes&#x2F;Tool&#x2F;**&#x2F;*&#39;end ä¿®æ”¹åå†æŒ‰ä¹‹å‰çš„æ­¥éª¤æ›´æ–°ç´¢å¼•åº“å’Œç»„ä»¶åº“å°±å¯ä»¥äº† ps: åœ¨æ·»åŠ ç¬¬ä¸‰æ–¹ä¾èµ–æè¿°ååšéªŒè¯æˆ–è€…ä¸Šä¼ æ“ä½œå¯èƒ½ä¼šå¾ˆæ…¢ï¼Œå› ä¸ºå®ƒåœ¨å…‹éš†ç¬¬ä¸‰æ–¹åº“å¦‚SDWebImageï¼Œæœ‰å…´è¶£çš„å¯ä»¥åœ¨å‘½ä»¤åé¢åŠ å…¥--verboseæ¥æŸ¥çœ‹è¯¦æƒ…æƒ…å†µ1pod spec lint --private --verbose åœ¨æˆåŠŸæ›´æ–°ç»„ä»¶åº“å’Œç´¢å¼•åº“åæˆ‘ä»¬å†æ¥æœç´¢ä¸€ä¸‹è¯•è¯•1pod search &#39;LXFBase&#39; ç°åœ¨å°±å¯ä»¥çˆ±è£…å“ªä¸ªå°±è£…å“ªä¸ªäº†ï¼Œåœ¨Podfileä¸­æŒ‡å®šè¦å®‰è£…çš„å­åº“å°±è¡Œäº†1pod &#39;LXFBase&#x2F;Cache&#39; 1pod install","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://linxunfeng.top/tags/Git/"},{"name":"GitHub","slug":"GitHub","permalink":"http://linxunfeng.top/tags/GitHub/"},{"name":"Cocoapods","slug":"Cocoapods","permalink":"http://linxunfeng.top/tags/Cocoapods/"},{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"ç»„ä»¶åŒ–","slug":"ç»„ä»¶åŒ–","permalink":"http://linxunfeng.top/tags/%E7%BB%84%E4%BB%B6%E5%8C%96/"}]},{"title":"iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨","slug":"iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨","date":"2018-04-06T19:23:15.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2018/04/06/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/","link":"","permalink":"http://linxunfeng.top/2018/04/06/iOS-%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E8%BF%9C%E7%A8%8B%E7%A7%81%E6%9C%89%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/","excerpt":"éšç€é¡¹ç›®åŠŸèƒ½çš„ä¸æ–­å¢åŠ ï¼Œè¶Šæ¥è¶Šå¤šçš„å¼€å‘äººå‘˜åŠ å…¥ï¼Œä¸šåŠ¡ä¸»çº¿ä¹Ÿéšä¹‹è¶Šæ¥è¶Šå¤šï¼Œé€ æˆè€¦åˆè¶Šæ¥è¶Šä¸¥é‡ï¼Œç¼–è¯‘è¶Šæ¥è¶Šæ…¢ï¼Œæµ‹è¯•ä¸ç‹¬ç«‹ç­‰ä¸€ç³»åˆ—é—®é¢˜ã€‚ä¸ºäº†è§£å†³æ­¤ç±»æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘åˆ°ä½¿ç”¨ç»„ä»¶åŒ–å¼€å‘ +","text":"éšç€é¡¹ç›®åŠŸèƒ½çš„ä¸æ–­å¢åŠ ï¼Œè¶Šæ¥è¶Šå¤šçš„å¼€å‘äººå‘˜åŠ å…¥ï¼Œä¸šåŠ¡ä¸»çº¿ä¹Ÿéšä¹‹è¶Šæ¥è¶Šå¤šï¼Œé€ æˆè€¦åˆè¶Šæ¥è¶Šä¸¥é‡ï¼Œç¼–è¯‘è¶Šæ¥è¶Šæ…¢ï¼Œæµ‹è¯•ä¸ç‹¬ç«‹ç­‰ä¸€ç³»åˆ—é—®é¢˜ã€‚ä¸ºäº†è§£å†³æ­¤ç±»æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘åˆ°ä½¿ç”¨ç»„ä»¶åŒ–å¼€å‘ + éšç€é¡¹ç›®åŠŸèƒ½çš„ä¸æ–­å¢åŠ ï¼Œè¶Šæ¥è¶Šå¤šçš„å¼€å‘äººå‘˜åŠ å…¥ï¼Œä¸šåŠ¡ä¸»çº¿ä¹Ÿéšä¹‹è¶Šæ¥è¶Šå¤šï¼Œé€ æˆè€¦åˆè¶Šæ¥è¶Šä¸¥é‡ï¼Œç¼–è¯‘è¶Šæ¥è¶Šæ…¢ï¼Œæµ‹è¯•ä¸ç‹¬ç«‹ç­‰ä¸€ç³»åˆ—é—®é¢˜ã€‚ä¸ºäº†è§£å†³æ­¤ç±»æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘åˆ°ä½¿ç”¨ç»„ä»¶åŒ–å¼€å‘ 1.æ¦‚å¿µç»„ä»¶åŒ–å°±æ˜¯å°†ä¸€ä¸ªå•ä¸€å·¥ç¨‹çš„é¡¹ç›®, åˆ†è§£æˆä¸ºå„ä¸ªç‹¬ç«‹çš„ç»„ä»¶ï¼Œ ç„¶åæŒ‰ç…§æŸç§æ–¹å¼, ä»»æ„ç»„ç»‡æˆä¸€ä¸ªæ‹¥æœ‰å®Œæ•´ä¸šåŠ¡é€»è¾‘çš„å·¥ç¨‹ã€‚ 2.ä¼˜åŠ¿ ç‹¬ç«‹ï¼šç‹¬ç«‹ç¼–å†™ã€ç¼–è¯‘ã€è¿è¡Œã€æµ‹è¯• é‡ç”¨ï¼šåŠŸèƒ½ä»£ç çš„é‡å¤ä½¿ç”¨ã€‚æ¯”å¦‚ä¸åŒé¡¹ç›®ä½¿ç”¨åŒä¸€åŠŸèƒ½æ¨¡å— é«˜æ•ˆï¼šä»»æ„å¢åˆ æ¨¡å—ï¼Œå®ç°é«˜æ•ˆè¿­ä»£ ç»„ä»¶åŒ–è¿˜å¯ä»¥é…åˆäºŒè¿›åˆ¶åŒ–, æé«˜é¡¹ç›®ç¼–è¯‘é€Ÿåº¦ 3.ç»„ä»¶åˆ†ç±»å¤§ä½“ä¸Šåˆ†ä¸‰ç±»ï¼šåŸºç¡€ç»„ä»¶ã€åŠŸèƒ½ç»„ä»¶å’Œä¸šåŠ¡ç»„ä»¶ åŸºç¡€ç»„ä»¶ï¼šä¹Ÿç§°ä¸ºå…¬å…±ç»„ä»¶ï¼Œå­˜æ”¾å¹³æ—¶å®šä¹‰çš„å®ã€å¸¸é‡ã€åè®®ã€åˆ†ç±»ã€å¯¹å¿…è¦çš„ç¬¬ä¸‰æ–¹çš„å°è£…ç±»ï¼Œä»¥åŠå„ç§å¤„ç†å·¥å…·ç±»ï¼Œå¦‚ï¼šæ—¶é—´ã€æ—¥æœŸã€è®¾å¤‡ä¿¡æ¯ã€æ–‡ä»¶å¤„ç†ã€æ²™ç›’ç®¡ç†ç­‰ åŠŸèƒ½ç»„ä»¶ï¼š è‡ªå®šä¹‰è§†å›¾æ§ä»¶ã€ä¸€äº›ç‰¹å®šåŠŸèƒ½çš„å°è£…ï¼ˆå¦‚å½•éŸ³ã€æ’­æ”¾éŸ³é¢‘å°è£…ï¼‰ ä¸šåŠ¡ç»„ä»¶ï¼šå„ç§ä¸šåŠ¡çº¿ æœ¬ç¯‡å…ˆæ¥ä»‹ç»ä¸‹è¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨ï¼Œå»ºè®®æŒ‰é¡ºåºçœ‹å®Œä¹‹åï¼Œå›æ¥å†çœ‹ä¸€éæ­¥éª¤å½’çº³ï¼ŒåŠ æ·±äº†è§£ï¼Œå¦‚æœ‰ä¸è¶³ä¹‹å¤„ï¼Œæ¬¢è¿æŒ‡å‡ºï¼Œæ„Ÿè°¢ : ) æ­¥éª¤å½’çº³ åˆ›å»ºè¿œç¨‹ç´¢å¼•åº“å’Œç§æœ‰åº“ å°†è¿œç¨‹ç´¢å¼•åº“æ·»åŠ åˆ°æœ¬åœ° pod repo add ç´¢å¼•åº“åç§° ç´¢å¼•åº“åœ°å€ åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªpodæ¨¡æ¿åº“ pod lib create ç»„ä»¶åç§°å°†æ¡†æ¶çš„æ ¸å¿ƒä»£ç æ·»åŠ åˆ°Classesç›®å½•ä¸‹æœ¬åœ°å®‰è£…æµ‹è¯•æ ¸å¿ƒä»£ç æ˜¯å¦å¯ç”¨ pod installä¿®æ”¹Specæè¿°æ–‡ä»¶å°†ä¿®æ”¹å¥½çš„æ¨¡æ¿åº“ä¸Šä¼ è‡³è¿œç¨‹ç§æœ‰åº“ ä¸Šä¼ ä»£ç å’Œæ‰“æ ‡ç­¾git initgit add .git commit -m &quot;æäº¤æè¿°&quot;git remote add origin è¿œç¨‹ç§æœ‰åº“åœ°å€git push origin mastergit tag &#39;0.1.0&#39;git push --tags æäº¤specè‡³ç§æœ‰ç´¢å¼•åº“pod lib lint --privatepod spec lint --privatepod repo push ç´¢å¼•åº“çš„æœ¬åœ°åç§° xx.podspec ä½¿ç”¨source å®˜æ–¹ç´¢å¼•åº“urlsource ç§æœ‰ç´¢å¼•åº“urlpod &#39;ç»„ä»¶åç§°&#39;pod install æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥å®æˆ˜å¦‚ä½•åˆ›å»ºå’Œä½¿ç”¨ç§æœ‰åº“ ä¸€ã€åˆ›å»ºç§æœ‰ç´¢å¼•åº“è¿™é‡Œä»¥ç äº‘ä¸ºä¾‹ï¼Œåˆ›å»ºä¸€ä¸ªLXFSpecsçš„ç§æœ‰ç´¢å¼•åº“ï¼Œè¿™ç©æ„çš„ä½œç”¨å¦‚å…¶åï¼Œå°±æ˜¯ç”¨æ¥ç´¢å¼•çš„ äºŒã€æœ¬åœ°æ·»åŠ ç§æœ‰ç´¢å¼•åº“1ã€æŸ¥çœ‹æœ¬åœ°ç´¢å¼•åº“1pod repo å¦‚å›¾ï¼Œç›®å‰æœ¬åœ°ä»…æœ‰githubä¸Šçš„é‚£ä¸ªå…¬æœ‰ç´¢å¼•åº“ 2ã€æ·»åŠ ç§æœ‰ç´¢å¼•åº“å°†æˆ‘ä»¬åˆšåˆšæ–°å»ºçš„ç§æœ‰ç´¢å¼•åº“LXFSpecsæ·»åŠ åˆ°æœ¬åœ° 12&#x2F;&#x2F; pod repo add ç´¢å¼•åº“åç§° ç´¢å¼•åº“åœ°å€pod repo add LXFSpecs https:&#x2F;&#x2F;gitee.com&#x2F;LinXunFeng&#x2F;LXFSpecs.git ç°åœ¨æœ¬åœ°å°±æœ‰ä¸¤ä¸ªç´¢å¼•åº“ï¼Œå¥½ï¼Œç´¢å¼•åº“çš„äº‹æƒ…å°±å…ˆæ”¾ä¸€è¾¹å»äº†ï½ ä¸‰ã€åˆ›å»ºç»„ä»¶åº“ç äº‘ä¸Šçš„åˆ›å»ºæ“ä½œåŒä¸Šï¼Œè¿™é‡Œä»¥LXFBaseä¸ºä¾‹ï¼Œåˆ›å»ºåŸºç¡€ç»„ä»¶åº“ 1ã€å¿«é€Ÿåˆ›å»ºæ¨¡ç‰ˆåº“åˆ°åˆé€‚çš„ä½ç½®åˆ›å»ºä¸€ä¸ªä¸ç»„ä»¶åç›¸åŒçš„æ–‡ä»¶å¤¹ï¼Œcdè¿›å»åï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤12&#x2F;&#x2F; pod lib create ç»„ä»¶åpod lib create LXFBase è¿™é‡Œä¼šè®©ä½ é…ç½®ä¸€äº›ä¿¡æ¯ï¼Œæ ¹æ®è‡ªå·±çš„æƒ…å†µè‡ªè¡Œé…ç½®å³å¯ã€‚ 2ã€æ·»åŠ ç»„ä»¶å†…å®¹åˆ›å»ºå®Œæˆåä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æ‰“å¼€ç›¸åº”çš„Exampleé¡¹ç›®ï¼ŒLXFBaseç›®å½•ä¸­ä¼šå‡ºç°å¦‚å›¾è¿™äº›æ–‡ä»¶ï¼Œæˆ‘ä»¬æŠŠåŸºç¡€ç»„ä»¶ç›¸å…³çš„ä¸œè¥¿ä¸¢åˆ°Classesæ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶ä¸”æŠŠReplaceMe.mæ–‡ä»¶åˆ é™¤ é»˜è®¤Classesæ–‡ä»¶å¤¹ä¸­å­˜æ”¾çš„æ–‡ä»¶å°±æ˜¯pod installæ—¶è¦ä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶ï¼Œå½“ç„¶å¯ä»¥é€šè¿‡ä¿®æ”¹specæ–‡ä»¶çš„é…ç½®æ¥æ›´æ”¹ä½ç½® 3ã€å®‰è£…ä¸æµ‹è¯•æœ¬åœ°åº“åœ¨Exampleé¡¹ç›®çš„Podfileæ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ°1pod &#39;LXFBase&#39;, :path &#x3D;&gt; &#39;..&#x2F;&#39;æ¨¡æ¿åº“å·²ç»é»˜è®¤å¸®æˆ‘ä»¬åœ¨Podfileä¸­æŒ‡å®šäº†LXFBase.podspecçš„ä½ç½®ï¼Œä½¿ç»„ä»¶LXFBaseå¯ä»¥æ­£å¸¸å®‰è£…ä½¿ç”¨å’Œæ–¹ä¾¿æµ‹è¯• 1pod install å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å·²ç»å°†æœ¬åœ°çš„ç»„ä»¶æ·»åŠ è¿›Exampleä¸­äº†ï¼Œç°åœ¨å¯ä»¥å°½æƒ…åœ°åšä½ æƒ³åšçš„æµ‹è¯•ï¼Œç¡®ä¿ç»„ä»¶çš„å¯ç”¨ã€‚ æµ‹è¯•ç»„ä»¶æ²¡æœ‰é—®é¢˜åï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å°±è¦å°†podspecæ–‡ä»¶ä¸Šä¼ è‡³ç§æœ‰ç´¢å¼•åº“ï¼Œä¸è¿‡åœ¨æ­¤ä¹‹å‰ï¼Œéœ€è¦å¯¹specè¿›è¡Œä¿®æ”¹ã€‚ 4ã€ ä¿®æ”¹Specå…·ä½“çš„é…ç½®è¯´æ˜å¯ä»¥å‚è€ƒCocoapods-åˆ›å»ºç¬¬ä¸‰æ–¹æ¡†æ¶ ä¸»è¦çš„ä¿®æ”¹å†…å®¹ 123456789 s.name &#x3D; &#39;LXFBase&#39; s.version &#x3D; &#39;0.1.0&#39; s.summary &#x3D; &#39;LXFBase.&#39; s.description &#x3D; &lt;&lt;-DESCLXFBaseæ˜¯åŸºç¡€ç»„ä»¶åº“ï¼ŒåŒ…æ‹¬åˆ†ç±»å’Œå¸¸ç”¨å·¥å…· DESC s.homepage &#x3D; &#39;https:&#x2F;&#x2F;gitee.com&#x2F;LinXunFeng&#x2F;LXFBase&#39; s.source &#x3D; &#123; :git &#x3D;&gt; &#39;https:&#x2F;&#x2F;gitee.com&#x2F;LinXunFeng&#x2F;LXFBase.git&#39;, :tag &#x3D;&gt; s.version.to_s &#125; s.source_files &#x3D; &#39;LXFBase&#x2F;Classes&#x2F;**&#x2F;*&#39; å››ã€ä¸Šä¼ ç»„ä»¶ä»£ç 1ã€å°†ä»£ç æäº¤åˆ°ç»„ä»¶ä»“åº“123456git add .git commit -m &#39;firstCommit&#39;git remote add origin https:&#x2F;&#x2F;gitee.com&#x2F;LinXunFeng&#x2F;LXFBase.git&#x2F;&#x2F; ç¬¬ä¸€æ¬¡pushå¦‚æœæŠ¥é”™çš„è¯å¯ä»¥åŠ ä¸Š-f&#x2F;&#x2F; git push -f origin mastergit push origin master 2ã€æ‰“æ ‡ç­¾æ ‡ç­¾0.1.0ä¸specä¸­çš„s.versionä¿æŒä¸€è‡´12git tag &#39;0.1.0&#39;git push --tags äº”ã€æäº¤podspecåˆ°ç§æœ‰ç´¢å¼•åº“åœ¨ä¸Šä¼ specæ–‡ä»¶å‰æˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªéªŒè¯æ¥èŠ‚çœæ—¶é—´ï¼Œä¸ç„¶æ¯æ¬¡éƒ½æ¨é€å¾ˆä¹…ç»“æœè¿˜æ˜¯éªŒè¯å¤±è´¥ï¼Œä¼šæ°”æ­»äººçš„ï½ 1ã€æœ¬åœ°éªŒè¯Specçš„å¿…å¡«å­—æ®µ12&#x2F;&#x2F; æœ¬åœ°éªŒè¯ä¸ä¼šéªŒè¯ s.source ä¸­çš„tagpod lib lint 2ã€è¿œç¨‹éªŒè¯12&#x2F;&#x2F; è¿œç¨‹éªŒè¯ä¼šéªŒè¯ s.source ä¸­çš„tagï¼Œå¦‚æœæ­¤æ—¶æ²¡æœ‰æ‰“ä¸Šç›¸åº”çš„æ ‡ç­¾åˆ™ä¼šæŠ¥é”™pod spec lint å¦‚æœä½ åˆšæ‰æ²¡æœ‰æ‰“æ ‡ç­¾å¹¶ä¸Šä¼ è‡³è¿œç¨‹ç§æœ‰åº“å°±æ¥è¿›è¡Œè¿œç¨‹éªŒè¯ï¼Œè‚¯å®šæ˜¯ä¼šæŠ¥é”™çš„ åœ¨æ‰“å®Œå¹¶ä¸Šä¼ tagåå†è¿›è¡Œè¿œç¨‹éªŒè¯ï¼Œå°±ä¼šéªŒè¯æˆåŠŸäº†ï¼ŒéªŒè¯æˆåŠŸåæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œï¼šæäº¤podspecæ–‡ä»¶åˆ°ç´¢å¼•åº“ éªŒè¯ç§æœ‰åº“æç¤ºå¦‚æœéªŒè¯çš„æ˜¯ç§æœ‰åº“ï¼Œåˆ™åœ¨åé¢åŠ ä¸Š--private,å¦åˆ™ä¼šæœ‰è­¦å‘Šï¼Œä½ å¯ä»¥é€‰æ‹©--allow-warningsæ¥å¿½ç•¥è¯¥è­¦å‘Š12pod lib lint --privatepod spec lint --private 3ã€æäº¤podspec12&#x2F;&#x2F; pod repo push ç§æœ‰ç´¢å¼•åº“åç§° specåç§°.podspec pod repo push LXFSpecs LXFBase.podspec è¿™é‡Œçš„æ“ä½œè¿‡ç¨‹ï¼šå…ˆå°†æˆ‘ä»¬çš„ä»£ç ç›´æ¥pushåˆ°æœ¬åœ°ç´¢å¼•åº“LXFSpecsï¼Œæ¨é€åä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åŒæ­¥åˆ°è¿œç¨‹ç´¢å¼•åº“ å†æ¥çœ‹çœ‹ç äº‘ä¸Šçš„ç§æœ‰ç´¢å¼•åº“LXFSpecs æ¥æµ‹è¯•ä¸‹æœç´¢æˆ‘ä»¬çš„ç»„ä»¶1pod search &#39;LXFBase&#39; å…­ã€ä½¿ç”¨ç§æœ‰åº“è¿™æ—¶æˆ‘ä»¬å¯ä»¥æ¥è¯•è¯•é€šè¿‡podå½¢å¼æ¥æ·»åŠ ç»„ä»¶LXFBaseï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›® 1ã€æ·»åŠ Podfileæ–‡ä»¶1pod init 2ã€åœ¨Podfileçš„æœ€é¡¶éƒ¨æ·»åŠ å¦‚ä¸‹æè¿°123&#x2F;&#x2F; ç¬¬äºŒè¡Œæ˜¯ä¸ºäº†ä¿è¯å…¬æœ‰åº“çš„æ­£å¸¸ä½¿ç”¨source &#39;https:&#x2F;&#x2F;gitee.com&#x2F;LinXunFeng&#x2F;LXFSpecs.git&#39;source &#39;https:&#x2F;&#x2F;github.com&#x2F;CocoaPods&#x2F;Specs.git&#39; 3ã€æ·»åŠ ä½¿ç”¨ç»„ä»¶LXFBase1pod &#39;LXFBase&#39; 4ã€å®‰è£…ç»„ä»¶1pod install","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://linxunfeng.top/tags/Git/"},{"name":"GitHub","slug":"GitHub","permalink":"http://linxunfeng.top/tags/GitHub/"},{"name":"Cocoapods","slug":"Cocoapods","permalink":"http://linxunfeng.top/tags/Cocoapods/"},{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"ç»„ä»¶åŒ–","slug":"ç»„ä»¶åŒ–","permalink":"http://linxunfeng.top/tags/%E7%BB%84%E4%BB%B6%E5%8C%96/"}]},{"title":"Cocoapods-åˆ›å»ºç¬¬ä¸‰æ–¹æ¡†æ¶","slug":"Cocoapods-åˆ›å»ºç¬¬ä¸‰æ–¹æ¡†æ¶","date":"2018-04-06T19:10:01.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2018/04/06/Cocoapods-åˆ›å»ºç¬¬ä¸‰æ–¹æ¡†æ¶/","link":"","permalink":"http://linxunfeng.top/2018/04/06/Cocoapods-%E5%88%9B%E5%BB%BA%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A1%86%E6%9E%B6/","excerpt":"å°†æ¡†æ¶ä¸­çš„ä¸»è¦æ–‡ä»¶æ”¾å…¥åˆ°ä¸€ä¸ªæŒ‡å®šæ–‡ä»¶å¤¹ä¸­ï¼Œæ¯”å¦‚å«Classesæˆ–è€…Libéƒ½å¯ä»¥ +","text":"å°†æ¡†æ¶ä¸­çš„ä¸»è¦æ–‡ä»¶æ”¾å…¥åˆ°ä¸€ä¸ªæŒ‡å®šæ–‡ä»¶å¤¹ä¸­ï¼Œæ¯”å¦‚å«Classesæˆ–è€…Libéƒ½å¯ä»¥ + ä¸€ã€ä¸Šä¼ é¡¹ç›®åˆ°githubå°†æ¡†æ¶ä¸­çš„ä¸»è¦æ–‡ä»¶æ”¾å…¥åˆ°ä¸€ä¸ªæŒ‡å®šæ–‡ä»¶å¤¹ä¸­ï¼Œæ¯”å¦‚å«Classesæˆ–è€…Libéƒ½å¯ä»¥ æ‰“å¼€ç»ˆç«¯ï¼Œcdåˆ°æ¡†æ¶ç›®å½• 1cd &#x2F;Users&#x2F;lxf&#x2F;xxxx&#x2F;LXFPhotoHelper åˆå§‹åŒ–ä»“åº“ 1git init å°†å½“å‰ç›®å½•æ·»åŠ åˆ°ç¼“å­˜åŒº 1git add . æäº¤åˆ°æœ¬åœ°ä»“åº“ 1git commit -m &#39;æè¿°&#39; æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€ 1git remote add origin https:&#x2F;&#x2F;github.com&#x2F;LinXunFeng&#x2F;xxx.git æäº¤åˆ°è¿œç¨‹ä»“åº“ 1git push origin master å¦‚æœå‡ºç°å¦‚ä¸‹æç¤º1fatal: unable to access &#39;https:&#x2F;&#x2F;github.com&#x2F;xxx&#x2F;xxx.git&#x2F;&#39;: The requested URL returned error: 403åŸå› æ˜¯æœ¬åœ°ç¼“å­˜äº†ç”¨æˆ·åå’Œå¯†ç ç¼–è¾‘.gitç›®å½•ä¸‹çš„configæ–‡ä»¶1vi .git&#x2F;configæ‰¾åˆ°urlé‚£ä¸€è¡Œï¼Œåœ¨github.comå‰åŠ ä¸Šç”¨æˆ·ååä¿å­˜ï¼Œå†é‡æ–°æ‰§è¡Œæ¨é€æ“ä½œ1url &#x3D; https:&#x2F;&#x2F;LinXunFeng@github.com&#x2F;LinXunFeng&#x2F;xxx.git æ‰“æ ‡ç­¾ 1234&#x2F;&#x2F; å…·ä½“è¯´æ˜å¯ä»¥æ‰§è¡Œ&#96;git tag --help&#96;åæŸ¥çœ‹&#x2F;&#x2F; git tag -a &#39;ç‰ˆæœ¬å·&#39; -m &#39;tagæè¿°&#39;&#x2F;&#x2F; æ³¨æ„ä¸€ä¸‹ï¼Œè¿™é‡Œæ‰“çš„æ ‡ç­¾åªæ˜¯åœ¨æœ¬åœ°git tag &#39;0.0.1&#39; æ¨ç€æ‰€æœ‰æ ‡ç­¾è‡³è¿œç¨‹ä»“åº“ 123&#x2F;&#x2F; åªæ¨ç€æŒ‡å®šç‰ˆæœ¬&#x2F;&#x2F; git push origin ç‰ˆæœ¬å· git push --tags äºŒã€åˆ›å»ºå¹¶ä¿®æ”¹podspecæ–‡ä»¶ åˆ›å»ºSpecæ–‡ä»¶12&#x2F;&#x2F; åç§°ä¸€èˆ¬ä¸å·¥ç¨‹åç§°ä¿æŒä¸€è‡´pod spec create æ¡†æ¶åç§° ä¿®æ”¹Specæ–‡ä»¶123456789101112131415s.name &#x3D; &quot;LXFPhotoHelperï¼ˆä»“åº“åç§°ï¼‰&quot;s.version &#x3D; &quot;0.0.1ï¼ˆç‰ˆæœ¬å·ï¼Œè¿™é‡Œè·Ÿä¸‹é¢s.sourceä¸­çš„tagæœ‰å…³ï¼‰&quot;s.summary &#x3D; &quot;å¯¹ä½ è‡ªå·±ä»“åº“çš„ç®€å•æè¿°ï¼Œä¸è¦å†™å¤ªå¤šå­—&quot;s.description &#x3D; &quot;è¿™ä¸ªæ˜¯è¯¦ç»†æè¿°ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œæ–‡å­—çš„é•¿åº¦éœ€è¦æ¯” s.summaryçš„è¦é•¿ï¼Œä¸ç„¶ä¼šå‡ºç°è­¦å‘Š&quot;s.homepage &#x3D; &quot;ä»“åº“é¦–é¡µåœ°å€ï¼Œå¦‚https:&#x2F;&#x2F;github.com&#x2F;LinXunFeng&#x2F;LXFPhotoHelper&quot;s.license &#x3D; &quot;MIT&quot;s.author &#x3D; &#123; &quot;LinXunFeng&quot; &#x3D;&gt; &quot;598600855@qq.com&quot; &#125;# sourceå­˜æ”¾çš„åœ°å€æ˜¯ä»£ç çš„çœŸæ­£åœ°å€s.source &#x3D; &#123; :git &#x3D;&gt; &quot;ä»“åº“å¯¹åº”çš„gitåœ°å€ï¼Œå¦‚https:&#x2F;&#x2F;github.com&#x2F;LinXunFeng&#x2F;LXFPhotoHelper.git&quot;, :tag &#x3D;&gt; &quot;#&#123;s.version&#125;&quot; &#125;# pod installæ—¶çœŸæ­£ä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶è·¯å¾„ï¼Œè¿™é‡ŒæŒ‡å®šçš„æ˜¯ä½ ä»“åº“ä¸‹çš„Classesç›®å½•ä¸­çš„æ‰€æœ‰.hå’Œ.mæ–‡ä»¶ï¼ˆå¡«å†™çš„æ˜¯ç›¸å¯¹åœ°å€ï¼‰# ** é€šé…ç›®å½•s.source_files &#x3D; &quot;Classes&quot;, &quot;Classes&#x2F;**&#x2F;*.&#123;h,m&#125;&quot;# s.library &#x3D; &quot;sqlite3&quot; # æ¡†æ¶ä¾èµ–ç³»ç»Ÿçš„sqlite3 ä¹Ÿå¯ä»¥ä¸Šå®˜ç½‘çš„æ‰‹å†Œã€Podspec Syntax Referenceã€‘ä¸ŠæŸ¥çœ‹ è¿™é‡Œéœ€è¦æˆ‘ä»¬æ³¨æ„çš„æ˜¯s.version= &quot;0.0.1&quot;ï¼Œè¿™é‡Œçš„ç‰ˆæœ¬å·è¦ä¸åˆšåˆšæ‰“çš„tagä¸€è‡´ ä¸‰ã€æ³¨å†Œtrunk123&#x2F;&#x2F; --verbose æ‰“å°è¯¦æƒ…ä¿¡æ¯&#x2F;&#x2F; pod trunk register é‚®ç®± &#39;ä½ çš„åç§°&#39; --verbosepod trunk register 598600855@qq.com &#39;LinXunFeng&#39; --verbose ç„¶åå»éªŒè¯é‚®ç®±éªŒè¯æˆåŠŸåä¼šæç¤ºæˆ‘ä»¬å›åˆ°ç»ˆç«¯ï¼Œå¹¶æ•²å…¥pod trunk push åç§°.podspec å››ã€ä¸Šä¼ Specæ‰§è¡Œpod trunk pushåä¼šæœ‰ä¸€ä¸ªå®¡æ ¸çš„è¿‡ç¨‹ï¼Œå¦‚æœæç¤ºæ²¡æœ‰é€šè¿‡ï¼Œæœ‰ERRORå°±ä¿®æ”¹å¥½åé‡æ–°pushï¼Œå¦‚æœåªæ˜¯WARNå¯ä»¥é€‰æ‹©åœ¨pod trunk pushåé¢åŠ ä¸Š--allow-warningsæ¥å¿½ç•¥å®ƒä»¬1pod trunk push LXFPhotoHelper.podspec --allow-warnings å¦‚æœå‡ºç°å¦‚ä¸‹ä¿¡æ¯ï¼Œåˆ™è¯´æ˜ä½ çš„æ¡†æ¶åå­—å·²è¢«å ç”¨ï¼Œå¾—é‡æ–°æ”¹ä¸ªåå­—ï½æ‰€ä»¥ï¼Œåœ¨åˆ›å»ºä½ è‡ªå·±çš„cocoapodsä»“åº“æ—¶æœ€å¥½æ˜¯åˆ°cocoapods.orgä¸Šå…ˆæŸ¥ä¸€ä¸‹æœ‰æ²¡æœ‰ç›¸åŒåå­—çš„1[!] You (xxx@qq.com) are not allowed to push new versions for this pod. The owners of this pod are yyy@qq.com. ä¸Šä¼ æˆåŠŸåä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æ›´æ–°æœ¬åœ°ä»“åº“ï¼Œå¦‚æœæ— æ³•æœç´¢åˆ°è‡ªå·±çš„æ¡†æ¶ï¼Œå¯ä»¥å…ˆåˆ æ‰æœ¬åœ°çš„ç´¢å¼•æ–‡ä»¶åå†æœç´¢ä¸€æ¬¡1rm ~&#x2F;Library&#x2F;Caches&#x2F;CocoaPods&#x2F;search_index.json å½“ä½¿ç”¨pod search å‘½ä»¤å¯ä»¥æœç´¢è‡ªå·±çš„æ¡†æ¶æ—¶, é‚£ä¹ˆå°±æ„å‘³ç€å®¡æ ¸é€šè¿‡äº†","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"Git","slug":"Git","permalink":"http://linxunfeng.top/tags/Git/"},{"name":"GitHub","slug":"GitHub","permalink":"http://linxunfeng.top/tags/GitHub/"},{"name":"Cocoapods","slug":"Cocoapods","permalink":"http://linxunfeng.top/tags/Cocoapods/"}]},{"title":"Python-è™šæ‹Ÿç¯å¢ƒ","slug":"Python-è™šæ‹Ÿç¯å¢ƒ","date":"2018-04-02T16:26:22.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2018/04/02/Python-è™šæ‹Ÿç¯å¢ƒ/","link":"","permalink":"http://linxunfeng.top/2018/04/02/Python-%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/","excerpt":"å¹³æ—¶åœ¨å¼€å‘æ—¶æˆ‘ä»¬éƒ½ä¼šå…ˆå®‰è£…ä¸€äº›pythonéœ€è¦çš„åŒ…ï¼Œæ¯æ¬¡å®‰è£…éƒ½ä¼šæœ‰ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¦‚æœä¸åŒé¡¹ç›®éœ€è¦ä¸åŒç‰ˆæœ¬çš„åŒ…æ—¶å°±ä¼šå‡ºç°ä¸å…¼å®¹çš„æƒ…å†µã€‚åº”å¯¹è¿™ç§æƒ…å†µæˆ‘ä»¬å°±å¯ä»¥æ­å»ºå¤šä¸ªè™šæ‹Ÿç¯å¢ƒæ¥åº”å¯¹ä¸åŒçš„ç¯å¢ƒéœ€æ±‚ï¼Œåœ¨è™šæ‹Ÿç¯å¢ƒä¸­æ­å»ºä¸€ä¸ªPythoné¡¹ç›®è¿è¡Œæ‰€éœ€è¦çš„é‚£äº›åŒ…ï¼Œå°†æ¥æ ¹æ®è¿è¡Œçš„é¡¹ç›®æ¥åˆ‡æ¢ä¸åŒç¯å¢ƒå³å¯ +","text":"å¹³æ—¶åœ¨å¼€å‘æ—¶æˆ‘ä»¬éƒ½ä¼šå…ˆå®‰è£…ä¸€äº›pythonéœ€è¦çš„åŒ…ï¼Œæ¯æ¬¡å®‰è£…éƒ½ä¼šæœ‰ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¦‚æœä¸åŒé¡¹ç›®éœ€è¦ä¸åŒç‰ˆæœ¬çš„åŒ…æ—¶å°±ä¼šå‡ºç°ä¸å…¼å®¹çš„æƒ…å†µã€‚åº”å¯¹è¿™ç§æƒ…å†µæˆ‘ä»¬å°±å¯ä»¥æ­å»ºå¤šä¸ªè™šæ‹Ÿç¯å¢ƒæ¥åº”å¯¹ä¸åŒçš„ç¯å¢ƒéœ€æ±‚ï¼Œåœ¨è™šæ‹Ÿç¯å¢ƒä¸­æ­å»ºä¸€ä¸ªPythoné¡¹ç›®è¿è¡Œæ‰€éœ€è¦çš„é‚£äº›åŒ…ï¼Œå°†æ¥æ ¹æ®è¿è¡Œçš„é¡¹ç›®æ¥åˆ‡æ¢ä¸åŒç¯å¢ƒå³å¯ + å¹³æ—¶åœ¨å¼€å‘æ—¶æˆ‘ä»¬éƒ½ä¼šå…ˆå®‰è£…ä¸€äº›pythonéœ€è¦çš„åŒ…ï¼Œæ¯æ¬¡å®‰è£…éƒ½ä¼šæœ‰ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¦‚æœä¸åŒé¡¹ç›®éœ€è¦ä¸åŒç‰ˆæœ¬çš„åŒ…æ—¶å°±ä¼šå‡ºç°ä¸å…¼å®¹çš„æƒ…å†µã€‚åº”å¯¹è¿™ç§æƒ…å†µæˆ‘ä»¬å°±å¯ä»¥æ­å»ºå¤šä¸ªè™šæ‹Ÿç¯å¢ƒæ¥åº”å¯¹ä¸åŒçš„ç¯å¢ƒéœ€æ±‚ï¼Œåœ¨è™šæ‹Ÿç¯å¢ƒä¸­æ­å»ºä¸€ä¸ªPythoné¡¹ç›®è¿è¡Œæ‰€éœ€è¦çš„é‚£äº›åŒ…ï¼Œå°†æ¥æ ¹æ®è¿è¡Œçš„é¡¹ç›®æ¥åˆ‡æ¢ä¸åŒç¯å¢ƒå³å¯ æˆ‘ä»¬å¯ä»¥åœ¨å½“å‰ç”¨æˆ·çš„å®¶ç›®å½•ä¸­æ‰¾åˆ°ã€.virtualenvsã€‘æ–‡ä»¶å¤¹ï¼ŒæŸ¥çœ‹å½“å‰æ‰€æœ‰çš„è™šæ‹Ÿç¯å¢ƒ åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ åˆ›å»ºï¼šmkvirtualenv [è™šæ‹Ÿç¯å¢ƒåç§°] 1mkvirtualenv lxfenv1 æ³¨ï¼šåˆ›å»ºçš„è¿‡ç¨‹éœ€è¦è”ç½‘ 1Installing setuptools, pkg_resources, pip, wheel...done. åˆšåˆšå®‰è£…æ—¶æç¤ºå®‰è£…çš„è¿™äº›ä¸œè¥¿å°±å­˜æ”¾åœ¨ä½ åˆ›å»ºå¥½çš„è™šæ‹Ÿç¯å¢ƒä¸‹çš„ã€lib/python2.7/site-packages/ã€‘ç›®å½•ä¸­ é€€å‡ºï¼šdeactivateå½“æˆ‘ä»¬å®‰è£…å¥½è™šæ‹Ÿç¯å¢ƒåé»˜è®¤å°±ä½¿ç”¨äº†è¯¥è™šæ‹Ÿç¯å¢ƒï¼Œå¦‚å›¾æ ‡è¯†å¤„å¯ä»¥çœ‹å‡º å¦‚æœä½ æƒ³é€€å‡ºå½“å‰çš„è™šæ‹Ÿç¯å¢ƒï¼Œæˆ–ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š 1deactivate è¿›å…¥ï¼šworkon [è™šæ‹Ÿç¯å¢ƒåç§°] ä½¿ç”¨æŒ‡å®šçš„è™šæ‹Ÿç¯å¢ƒåˆ™ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š 1workon lxfenv1 åˆ é™¤ï¼šrmvirtualenv [è™šæ‹Ÿç¯å¢ƒåç§°] 1rmvirtualenv lxfenv1 å®‰è£…æ‹“å±•åŒ… æŸ¥çœ‹å½“å‰å®‰è£…å¥½çš„åŒ… 123pip listæˆ–è€…pip freeze ps: ä¸Šå›¾pip listä¸­åˆ—å‡ºçš„å››ä¸ªåŒ…æ˜¯å®‰è£…è™šæ‹Ÿç¯å¢ƒå¿…å®šä¼šå®‰è£…çš„åŒ…å¦‚å›¾ï¼Œpip listä¼šåˆ—å‡ºæ‰€æœ‰çš„åŒ…ï¼Œè€Œpip freezeåªä¼šåˆ—å‡ºæ‰©å±•çš„åŒ… å®‰è£…æŒ‡å®šåŒ…12pip install django&#x3D;&#x3D;1.8.2# &#x3D;&#x3D;1.8.2 ä¸ºæŒ‡å®šç‰ˆæœ¬å·ï¼Œä¸å†™åˆ™ç›´æ¥å®‰è£…æœ€æ–°çš„åŒ… æ³¨ï¼š pip install xxx ä¼šè‡ªåŠ¨åˆ é™¤æ—§ç‰ˆæœ¬ï¼Œå†å®‰è£…æ–°ç‰ˆæœ¬ å¦‚æœä¸çŸ¥é“åŒ…åå¯ä»¥åˆ°pypiä¸Šæœç´¢","categories":[{"name":"Python","slug":"Python","permalink":"http://linxunfeng.top/categories/Python/"}],"tags":[{"name":"python","slug":"python","permalink":"http://linxunfeng.top/tags/python/"}]},{"title":"RxSwift + MJRefresh æ‰“é€ è‡ªåŠ¨å¤„ç†åˆ·æ–°æ§ä»¶çŠ¶æ€","slug":"RxSwift-MJRefresh-æ‰“é€ è‡ªåŠ¨å¤„ç†åˆ·æ–°æ§ä»¶çŠ¶æ€","date":"2017-10-24T08:51:20.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2017/10/24/RxSwift-MJRefresh-æ‰“é€ è‡ªåŠ¨å¤„ç†åˆ·æ–°æ§ä»¶çŠ¶æ€/","link":"","permalink":"http://linxunfeng.top/2017/10/24/RxSwift-MJRefresh-%E6%89%93%E9%80%A0%E8%87%AA%E5%8A%A8%E5%A4%84%E7%90%86%E5%88%B7%E6%96%B0%E6%8E%A7%E4%BB%B6%E7%8A%B6%E6%80%81/","excerpt":"MVVMçš„æ¨¡å¼ä¸­ï¼Œå¤šå‡ºäº†ViewModelè¿™ä¸ªè§’è‰²ï¼Œå°†é€»è¾‘å¤„ç†ã€ç½‘ç»œè¯·æ±‚ç­‰ç¹æ‚æ“ä½œä¸­ViewControllerä¸­æŠ½ç¦»å‡ºæ¥ï¼ŒViewControllerå¾—ä»¥ç˜¦èº«ã€‚ç»“åˆRxSwiftæ¶æ„ï¼Œæˆ‘ä»¬ä¸€èˆ¬å°±ä¼šåœ¨ViewModelä¸­å®šä¹‰ä¸€ä¸ªinputæ”¶é›†ç¹æ‚æ“ä½œæ‰€éœ€çš„ä¿¡æ¯ï¼Œé€šè¿‡ä¸€ä¸ªtransformæ–¹æ³•å°†inputä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œè¿›è€Œå¾—åˆ°ä¸€ä¸ªoutputä¾›controllerä½¿ç”¨ã€‚ åœ¨ä½¿ç”¨RxSwiftå¼€å‘æ—¶ä¼šå¤§é‡çš„ä½¿ç”¨åˆ°è¿™ç§å½¢å¼ï¼Œå…¶ä¸­å°±åŒ…æ‹¬æˆ‘ä»¬çš„ç½‘ç»œè¯·æ±‚ã€‚ +","text":"MVVMçš„æ¨¡å¼ä¸­ï¼Œå¤šå‡ºäº†ViewModelè¿™ä¸ªè§’è‰²ï¼Œå°†é€»è¾‘å¤„ç†ã€ç½‘ç»œè¯·æ±‚ç­‰ç¹æ‚æ“ä½œä¸­ViewControllerä¸­æŠ½ç¦»å‡ºæ¥ï¼ŒViewControllerå¾—ä»¥ç˜¦èº«ã€‚ç»“åˆRxSwiftæ¶æ„ï¼Œæˆ‘ä»¬ä¸€èˆ¬å°±ä¼šåœ¨ViewModelä¸­å®šä¹‰ä¸€ä¸ªinputæ”¶é›†ç¹æ‚æ“ä½œæ‰€éœ€çš„ä¿¡æ¯ï¼Œé€šè¿‡ä¸€ä¸ªtransformæ–¹æ³•å°†inputä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œè¿›è€Œå¾—åˆ°ä¸€ä¸ªoutputä¾›controllerä½¿ç”¨ã€‚ åœ¨ä½¿ç”¨RxSwiftå¼€å‘æ—¶ä¼šå¤§é‡çš„ä½¿ç”¨åˆ°è¿™ç§å½¢å¼ï¼Œå…¶ä¸­å°±åŒ…æ‹¬æˆ‘ä»¬çš„ç½‘ç»œè¯·æ±‚ã€‚ + æœ¬æ–‡æ˜¯åŸºäº iOS-RxSwifté¡¹ç›®å®æˆ˜è®°å½• æ‰€è¿°ï¼Œå¦‚æœä½ è¿˜æœªé˜…è¯»è¿‡ï¼Œå»ºè®®ä½ æœ€å¥½è¿˜å…ˆé˜…è¯»ä¸€éï¼Œå¹¶ä¸‹è½½Demoç†Ÿæ‚‰ä¸€ä¸‹ : ) å‰è¨€MVVMçš„æ¨¡å¼ä¸­ï¼Œå¤šå‡ºäº†ViewModelè¿™ä¸ªè§’è‰²ï¼Œå°†é€»è¾‘å¤„ç†ã€ç½‘ç»œè¯·æ±‚ç­‰ç¹æ‚æ“ä½œä¸­ViewControllerä¸­æŠ½ç¦»å‡ºæ¥ï¼ŒViewControllerå¾—ä»¥ç˜¦èº«ã€‚ç»“åˆRxSwiftæ¶æ„ï¼Œæˆ‘ä»¬ä¸€èˆ¬å°±ä¼šåœ¨ViewModelä¸­å®šä¹‰ä¸€ä¸ªinputæ”¶é›†ç¹æ‚æ“ä½œæ‰€éœ€çš„ä¿¡æ¯ï¼Œé€šè¿‡ä¸€ä¸ªtransformæ–¹æ³•å°†inputä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œè¿›è€Œå¾—åˆ°ä¸€ä¸ªoutputä¾›controllerä½¿ç”¨ã€‚ åœ¨ä½¿ç”¨RxSwiftå¼€å‘æ—¶ä¼šå¤§é‡çš„ä½¿ç”¨åˆ°è¿™ç§å½¢å¼ï¼Œå…¶ä¸­å°±åŒ…æ‹¬æˆ‘ä»¬çš„ç½‘ç»œè¯·æ±‚ã€‚ç»“åˆ iOS-RxSwifté¡¹ç›®å®æˆ˜è®°å½• ä¸­æ‰€è¿°çš„â€œMJRefreshåœ¨RxSwiftä¸­çš„ä½¿ç”¨â€ï¼Œåœ¨outputä¸­å®šä¹‰äº†ä¸€ä¸ªå˜é‡1let refreshStatus = Variable&lt;LXFRefreshStatus&gt;(.none)controlleré€šè¿‡outputå°†å…¶è¿›è¡Œç›‘å¬ï¼Œä»è€Œå½“å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œcontrollerå°±èƒ½å®æ—¶è·å–å½“å‰åº”æ‰€å¤„çš„åˆ·æ–°çŠ¶æ€12345678910111213141516vmOutput.refreshStatus.asObservable().subscribe(onNext: &#123;[weak self] status in switch status &#123; case .beingHeaderRefresh: self?.tableView.mj_header.beginRefreshing() case .endHeaderRefresh: self?.tableView.mj_header.endRefreshing() case .beingFooterRefresh: self?.tableView.mj_footer.beginRefreshing() case .endFooterRefresh: self?.tableView.mj_footer.endRefreshing() case .noMoreData: self?.tableView.mj_footer.endRefreshingWithNoMoreData() default: break &#125;&#125;).addDisposableTo(rx_disposeBag) å¦‚æœåœ¨ä¸€ä¸ªé¡¹ç›®å¤šå¤„ä½¿ç”¨åˆ°äº†è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å¼Šç«¯â€”â€”é‡å¤ä»£ç ï¼Œè¿‡äºå†—ä½™ã€‚ éš¾é“æˆ‘ä»¬æ¯æ¬¡éƒ½è¦åœ¨controllerä¸­è¿›è¡Œå¦‚æ­¤æ“ä½œå—ï¼Ÿ é¢å‘åè®®å…³äºåè®®çš„å†…å®¹å¯ä»¥çœ‹ä¸‹æˆ‘ä¹‹å‰çš„è¿™ä¸¤ç¯‡æ–‡ç« iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰ iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰ æ€»ç»“åè®®çš„ä¸¤å¤§ä½œç”¨ï¼š1ã€è§„èŒƒ 2ã€å®šåˆ¶èƒ½åŠ› å®šä¹‰åè®® Refreshable 1234567891011121314151617/* ============================ Refreshable ================================ */// éœ€è¦ä½¿ç”¨ MJExtension çš„æ§åˆ¶å™¨ä½¿ç”¨protocol Refreshable &#123; &#125;extension Refreshable where Self : UIViewController &#123; func initRefreshHeader(_ scrollView: UIScrollView, _ action: @escaping () -&gt; Void) -&gt; MJRefreshHeader &#123; scrollView.mj_header = MJRefreshNormalHeader(refreshingBlock: &#123; action() &#125;) return scrollView.mj_header &#125; func initRefreshFooter(_ scrollView: UIScrollView, _ action: @escaping () -&gt; Void) -&gt; MJRefreshFooter &#123; scrollView.mj_footer = MJRefreshAutoNormalFooter(refreshingBlock: &#123; action() &#125;) return scrollView.mj_footer &#125;&#125; åœ¨controllerä¸­éµå¾ª Refreshable åè®®ï¼Œé€šè¿‡initRefreshHeaderæ–¹æ³•æˆ–è€…initRefreshFooteræ–¹æ³•ç»™tableViewæˆ–è€…collectionViewèµ‹äºˆå¤´éƒ¨æˆ–å°¾éƒ¨åˆ·æ–°çš„èƒ½åŠ›ï¼Œå¹¶ä¸”ä¹¦å†™ä¸‹æ‹‰åˆ·æ–°æ—¶éœ€è¦æ‰§è¡Œçš„ä»£ç 12345// ä»¥ä¸‹æ‹‰åˆ·æ–°ä¸ºä¾‹let refreshHeader = initRefreshHeader(liveCollectionView) &#123; [weak self] in // ä¸‹æ‹‰åéœ€è¦æ‰§è¡Œçš„æ“ä½œ self?.vmOutput?.requestCommand.onNext(())&#125; æ¥ä¸‹æ¥å†è®²è®²outputï¼Œåªè¦æœ‰ç½‘ç»œè¯·æ±‚çš„åœ°æ–¹ï¼Œå°±ä¼šéœ€è¦éœ€è¦ç›‘å¬è¯·æ±‚çŠ¶æ€ï¼Œæ—¢ç„¶è¿™æ ·ï¼Œé‚£ä¹ˆå¯ä»¥ä¸ºoutputå®šä¹‰ä¸€ä¸ªåè®®OutputRefreshProtocolï¼Œä¸“é—¨ç”¨æ¥è§„èŒƒå¿…éœ€å£°æ˜çš„å±æ€§1234567/* ============================ OutputRefreshProtocol ================================ */// viewModel ä¸­ outputä½¿ç”¨protocol OutputRefreshProtocol &#123; // å‘Šè¯‰å¤–ç•Œçš„tableViewå½“å‰çš„åˆ·æ–°çŠ¶æ€ var refreshStatus : Variable&lt;LXFRefreshStatus&gt; &#123;get&#125;&#125;æ¥ç€è®©outputå»éµå¾ªè¯¥åè®®ï¼Œå¹¶è¿›è¡Œåˆå§‹åŒ–åˆ·æ–°çŠ¶æ€çš„å€¼ä¸º.none123456789struct LXFLiveOutput: OutputRefreshProtocol &#123; var refreshStatus: Variable&lt;LXFRefreshStatus&gt; let sections: Driver&lt;[LXFLiveSection]&gt; init(sections: Driver&lt;[LXFLiveSection]&gt;) &#123; self.sections &#x3D; sections refreshStatus &#x3D; Variable&lt;LXFRefreshStatus&gt;(.none) &#125;&#125;åˆ°æ­¤ä¸ºæ­¢ï¼Œå…¶å®è·Ÿä¹‹å‰æ²¡å•¥ä¸¤æ ·ï¼Œåªæ˜¯ä½¿controlleræ›´æ–¹ä¾¿åˆå§‹åŒ–åˆ·æ–°æ§ä»¶è€Œå·²ã€‚æ¥ä¸‹æ¥æ‰æ˜¯æœ¬æ–‡çš„é‡ç‚¹ã€‚ é‡ç‚¹åˆ·æ–°çš„çŠ¶æ€æ— éä¹Ÿå°±é‚£ä¹ˆå‡ ç§ï¼Œä¸‹æ‹‰é‡è½½æ•°æ®ï¼Œä¸Šæ‹‰åŠ è½½æ›´å¤šï¼Œè¯·æ±‚å®Œæˆæ—¶ç»“æŸä¸‹æ‹‰æˆ–ä¸Šæ‹‰ç­‰ç­‰ã€‚ã€‚ã€‚é‚£æˆ‘ä»¬ä½•å¿…è¦åœ¨æ¯ä¸ªcontrollerä¸­å†å»ç®¡ç†è¿™ç­‰çäº‹ï¼Ÿï¼Ÿè€Œè‡³æ­¤ï¼Œåˆ·æ–°æ§ä»¶çš„çŠ¶æ€æ˜¯ç”±å˜é‡ refreshStatus æ¥å†³å®šï¼Œæ­¤æ—¶ refreshStatus åˆå£°æ˜åœ¨ OutputRefreshProtocol åè®®ä¸­ï¼Œæˆ‘ä»¬ä½•ä¸å†å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œå°†åˆ·æ–°æ§ä»¶çš„çŠ¶æ€äº¤ç»™refreshStatusè‡ªå·±æ¥å¸®æˆ‘ä»¬å¤„ç†å‘¢ï½ 1234567891011121314151617181920extension OutputRefreshProtocol &#123; func autoSetRefreshHeaderStatus(header: MJRefreshHeader?, footer: MJRefreshFooter?) -&gt; Disposable &#123; return refreshStatus.asObservable().subscribe(onNext: &#123; (status) in switch status &#123; case .beingHeaderRefresh: header?.beginRefreshing() case .endHeaderRefresh: header?.endRefreshing() case .beingFooterRefresh: footer?.beginRefreshing() case .endFooterRefresh: footer?.endRefreshing() case .noMoreData: footer?.endRefreshingWithNoMoreData() default: break &#125; &#125;) &#125;&#125; è¿™æ—¶éœ€è¦æˆ‘ä»¬å°†åˆ·æ–°æ§ä»¶çš„å¯¹è±¡ header / footer ä¼ å…¥åˆ°æ–¹æ³•ä¸­ï¼Œå®ç°è‡ªåŠ¨æ§åˆ¶åˆ·æ–°æ§ä»¶çŠ¶æ€ã€‚ æ€»ç»“ä½¿ç”¨ä¸€ã€outputä¸­éµå®ˆåè®® OutputRefreshProtocolï¼Œ å¹¶åˆå§‹åŒ– refreshStatus çš„å€¼ä¸º none 123456789struct LXFLiveOutput: OutputRefreshProtocol &#123; var refreshStatus: Variable&lt;LXFRefreshStatus&gt; let sections: Driver&lt;[LXFLiveSection]&gt; init(sections: Driver&lt;[LXFLiveSection]&gt;) &#123; self.sections = sections refreshStatus = Variable&lt;LXFRefreshStatus&gt;(.none) &#125;&#125; äºŒã€controller éµå®ˆåè®® Refreshableï¼Œé€šè¿‡åè®®ä¸­çš„æ–¹æ³•åˆå§‹åŒ–åˆ·æ–°æ§ä»¶åŠå¯¹åº”çš„æ“ä½œï¼Œå¹¶å°†åˆ·æ–°æ§ä»¶å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ å…¥åˆ°è‡ªåŠ¨å¤„ç†çŠ¶æ€æ–¹æ³•ä¸­1extension LXFLiveViewController: Refreshable1234let refreshHeader = initRefreshHeader(liveCollectionView) &#123; [weak self] in self?.vmOutput?.requestCommand.onNext(())&#125;vmOutput?.autoSetRefreshHeaderStatus(header: refreshHeader, footer: nil).disposed(by: rx.disposeBag) ä¸‰ã€viewModelä¸­æ ¹æ®å®é™…æƒ…å†µå®æ—¶æ›´æ–° refreshStatus çš„åˆ·æ–°çŠ¶æ€ æ¡ˆä¾‹åè®®ï¼šRefreshable.swiftViewModelï¼šLXFLiveViewModelControllerï¼šLXFLiveViewController LXFBiliBili","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Swift","slug":"Swift","permalink":"http://linxunfeng.top/tags/Swift/"},{"name":"RxSwift","slug":"RxSwift","permalink":"http://linxunfeng.top/tags/RxSwift/"}]},{"title":"iOS - è§†é¢‘é‡‡é›†è¯¦è§£","slug":"iOS-è§†é¢‘é‡‡é›†è¯¦è§£","date":"2017-10-16T23:26:38.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2017/10/16/iOS-è§†é¢‘é‡‡é›†è¯¦è§£/","link":"","permalink":"http://linxunfeng.top/2017/10/16/iOS-%E8%A7%86%E9%A2%91%E9%87%87%E9%9B%86%E8%AF%A6%E8%A7%A3/","excerpt":"è‹¹æœå®˜æ–¹æ–‡æ¡£-AVFoundation ä¸ºäº†ç®¡ç†ä»ç›¸æœºæˆ–è€…éº¦å…‹é£ç­‰è¿™æ ·çš„è®¾å¤‡æ•è·åˆ°çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦è¾“å…¥å¯¹è±¡(input)å’Œè¾“å‡ºå¯¹è±¡(output)ï¼Œå¹¶ä¸”ä½¿ç”¨ä¸€ä¸ªä¼šè¯(AVCaptureSession)æ¥ç®¡ç† input å’Œ output ä¹‹å‰çš„æ•°æ®æµ +","text":"è‹¹æœå®˜æ–¹æ–‡æ¡£-AVFoundation ä¸ºäº†ç®¡ç†ä»ç›¸æœºæˆ–è€…éº¦å…‹é£ç­‰è¿™æ ·çš„è®¾å¤‡æ•è·åˆ°çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦è¾“å…¥å¯¹è±¡(input)å’Œè¾“å‡ºå¯¹è±¡(output)ï¼Œå¹¶ä¸”ä½¿ç”¨ä¸€ä¸ªä¼šè¯(AVCaptureSession)æ¥ç®¡ç† input å’Œ output ä¹‹å‰çš„æ•°æ®æµ + è‹¹æœå®˜æ–¹æ–‡æ¡£-AVFoundation ä¸ºäº†ç®¡ç†ä»ç›¸æœºæˆ–è€…éº¦å…‹é£ç­‰è¿™æ ·çš„è®¾å¤‡æ•è·åˆ°çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦è¾“å…¥å¯¹è±¡(input)å’Œè¾“å‡ºå¯¹è±¡(output)ï¼Œå¹¶ä¸”ä½¿ç”¨ä¸€ä¸ªä¼šè¯(AVCaptureSession)æ¥ç®¡ç† input å’Œ output ä¹‹å‰çš„æ•°æ®æµï¼š ç±»å ç®€ä»‹ AVCaptureDevice è¾“å…¥è®¾å¤‡ï¼Œä¾‹å¦‚ æ‘„åƒå¤´ éº¦å…‹é£ AVCaptureInput è¾“å…¥ç«¯å£ [ä½¿ç”¨å…¶å­ç±»] AVCaptureOutput è®¾å¤‡è¾“å‡º [ä½¿ç”¨å…¶å­ç±»]ï¼Œè¾“å‡ºè§†é¢‘æ–‡ä»¶æˆ–è€…é™æ€å›¾åƒ AVCaptureSession ç®¡ç†è¾“å…¥åˆ°è¾“å‡ºçš„æ•°æ®æµ AVCaptureVideoPreviewLayer å±•ç¤ºé‡‡é›† é¢„è§ˆView å¦‚å›¾ï¼Œé€šè¿‡å•ä¸ª sessionï¼Œä¹Ÿå¯ä»¥ç®¡ç†å¤šä¸ª input å’Œ output å¯¹è±¡ä¹‹é—´çš„æ•°æ®æµï¼Œä»è€Œå¾—åˆ°è§†é¢‘ã€é™æ€å›¾åƒå’Œé¢„è§ˆè§†å›¾ å¦‚å›¾ï¼Œinput å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè¾“å…¥ç«¯å£ï¼Œoutput ä¹Ÿå¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®æ¥æºï¼ˆå¦‚ï¼šä¸€ä¸ª AVCaptureMovieFileOutput å¯¹è±¡å¯ä»¥æ¥æ”¶è§†é¢‘æ•°æ®å’ŒéŸ³é¢‘æ•°æ®ï¼‰ å½“æ·»åŠ  input å’Œ output åˆ° session ä¸­æ—¶ï¼Œsession ä¼šè‡ªåŠ¨å»ºç«‹èµ·ä¸€ä¸ªè¿æ¥(AVCaptureConnection)ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ª connection æ¥è®¾ç½®ä» input æˆ–è€… ä» output å¾—åˆ°çš„æ•°æ®çš„æœ‰æ•ˆæ€§ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥ç›‘æ§åœ¨éŸ³é¢‘ä¿¡é“ä¸­åŠŸç‡çš„å¹³å‡å€¼å’Œå³°å€¼ã€‚ ä½¿ç”¨ Session æ¥ç®¡ç†æ•°æ®æµåˆ›å»ºä¸€ä¸ª session ç”¨æ¥ç®¡ç†æ•è·åˆ°çš„æ•°æ®ï¼Œéœ€è¦å…ˆå°† inputs å’Œ outputs æ·»åŠ åˆ° session ä¸­ï¼Œå½“ session æ‰§è¡Œ [startRunning] æ–¹æ³•åå°±ä¼šå¼€å§‹å°†æ•°æ®æµå‘é€è‡³ sessionï¼Œé€šè¿‡æ‰§è¡Œ[stopRunning] æ–¹æ³•æ¥ç»“æŸæ•°æ®æµçš„å‘é€ã€‚12345AVCaptureSession *captureSession = [[AVCaptureSession alloc] init];// æ·»åŠ  inputs å’Œ outputs[session startRunning];åœ¨ [session startRunning] ä¹‹å‰æˆ‘ä»¬éœ€è¦è¿›è¡Œä¸€äº›åŸºæœ¬çš„é…ç½® (å¦‚ï¼šè®¾å¤‡åˆ†è¾¨ç‡ï¼Œæ·»åŠ è¾“å…¥è¾“å‡ºå¯¹è±¡ç­‰) è®¾ç½®åˆ†è¾¨ç‡1234// è®¾ç½®åˆ†è¾¨ç‡ 720P æ ‡æ¸…if ([captureSession canSetSessionPreset:AVCaptureSessionPreset1280x720]) &#123; captureSession.sessionPreset = AVCaptureSessionPreset1280x720;&#125; é™„è‹¹æœå®˜æ–¹æ–‡æ¡£ä¸­å¯ä¾›é…ç½®çš„åˆ†è¾¨ç‡åˆ—è¡¨ å…¶ä¸­é«˜åˆ†è¾¨ç‡(AVCaptureSessionPresetHigh) ä¸ºé»˜è®¤å€¼ï¼Œä¼šæ ¹æ®å½“å‰è®¾å¤‡è¿›è¡Œè‡ªé€‚åº”ï¼Œä½†æ˜¯è¿™æ ·ä¹‹åå¯¼å‡ºæ¥çš„æ–‡ä»¶å°±ä¼šå¾ˆå¤§ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è®¾ç½®ä¸ºæ ‡æ¸…(AVCaptureSessionPreset1280x720) å°±å¯ä»¥äº† è¾“å…¥å¯¹è±¡12&#x2F;&#x2F; ç›´æ¥ä½¿ç”¨åç½®æ‘„åƒå¤´AVCaptureDevice *videoDevice &#x3D; [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo]; 12345&#x2F;&#x2F; åœ¨è¿™ä¸ªæ–¹æ³•ä¸­çš„ mediaType æœ‰ä¸‰ä¸ªé€‰é¡¹ä¾›æˆ‘ä»¬ä½¿ç”¨&#x2F;&#x2F; AVMediaTypeVideo è§†é¢‘&#x2F;&#x2F; AVMediaTypeAudio éŸ³é¢‘&#x2F;&#x2F; AVMediaTypeMuxed æ··åˆ(è§†é¢‘ + éŸ³é¢‘)+ (nullable AVCaptureDevice *)defaultDeviceWithMediaType:(AVMediaType)mediaType; ä½†æ˜¯è¿™ç§æ–¹å¼åªèƒ½è·å–åˆ°åç½®æ‘„åƒå¤´ï¼Œå¦‚æœæƒ³è¦è·å–å‰ç½®æ‘„åƒå¤´ï¼Œå¯ä½¿ç”¨12345678AVCaptureDevice *videoDevice;NSArray *devices &#x3D; [AVCaptureDevice devices];for (AVCaptureDevice *device in devices) &#123; if(device.position &#x3D;&#x3D; AVCaptureDevicePositionFront) &#123; &#x2F;&#x2F; å‰ç½®æ‘„åƒå¤´ videoDevice &#x3D; device; &#125;&#125;123456&#x2F;&#x2F; é€šè¿‡è®¾å¤‡è·å–è¾“å…¥å¯¹è±¡AVCaptureDeviceInput *videoInput &#x3D; [AVCaptureDeviceInput deviceInputWithDevice:videoDevice error:nil];&#x2F;&#x2F; ç»™ä¼šè¯æ·»åŠ è¾“å…¥if([captureSession canAddInput:videoInput]) &#123; [captureSession addInput:videoInput];&#125; è¾“å‡ºå¯¹è±¡1234567891011121314151617&#x2F;&#x2F; è§†é¢‘è¾“å‡ºï¼šè®¾ç½®è§†é¢‘åŸæ•°æ®æ ¼å¼ï¼šYUV, RGB &#x2F;&#x2F; è‹¹æœä¸æ”¯æŒYUVçš„æ¸²æŸ“ï¼Œåªæ”¯æŒRGBæ¸²æŸ“ï¼Œè¿™æ„å‘³ç€ï¼š YUV &#x3D;&gt; RGBAVCaptureVideoDataOutput *videoOutput &#x3D; [[AVCaptureVideoDataOutput alloc] init];&#x2F;&#x2F; videoSettings: è®¾ç½®è§†é¢‘åŸæ•°æ®æ ¼å¼ YUV FULLvideoOutput.videoSettings &#x3D; @&#123;(NSString *)kCVPixelBufferPixelFormatTypeKey:@(kCVPixelFormatType_420YpCbCr8BiPlanarFullRange)&#125;;&#x2F;&#x2F; è®¾ç½®ä»£ç†ï¼šè·å–å¸§æ•°æ®&#x2F;&#x2F; é˜Ÿåˆ—ï¼šä¸²è¡Œ&#x2F;å¹¶è¡Œï¼Œè¿™é‡Œä½¿ç”¨ä¸²è¡Œï¼Œä¿è¯æ•°æ®é¡ºåº dispatch_queue_t queue &#x3D; dispatch_queue_create(&quot;LinXunFengSerialQueue&quot;, DISPATCH_QUEUE_SERIAL);[videoOutput setSampleBufferDelegate:self queue:queue];&#x2F;&#x2F; ç»™ä¼šè¯æ·»åŠ è¾“å‡ºå¯¹è±¡if([captureSession canAddOutput:videoOutput]) &#123; &#x2F;&#x2F; ç»™ä¼šè¯æ·»åŠ è¾“å…¥è¾“å‡ºå°±ä¼šè‡ªåŠ¨å»ºç«‹èµ·è¿æ¥ [captureSession addOutput:videoOutput];&#125; åœ¨è¿™é‡Œï¼Œè¾“å‡ºå¯¹è±¡å¯ä»¥è®¾ç½®å¸§ç‡ 12&#x2F;&#x2F; å¸§ç‡ï¼š1ç§’10å¸§å°±å·®ä¸å¤šæ¯”è¾ƒæµç•…äº†videoOutput.minFrameDuration &#x3D; CMTimeMake(1, 10); è¾“å‡ºå¯¹è±¡åœ¨è®¾ç½®è§†é¢‘åŸæ•°æ®æ ¼å¼æ—¶ä½¿ç”¨ videoSettings å±æ€§ï¼Œéœ€è¦èµ‹å€¼çš„ç±»å‹æ˜¯å­—å…¸æ ¼å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯YUVï¼Œå¦ä¸€ç§æ˜¯RGBï¼ˆä¸€èˆ¬æˆ‘ä»¬éƒ½ä½¿ç”¨YUVï¼Œå› ä¸ºä½“ç§¯æ¯”RGBå°ï¼‰ 123456789101112&#x2F;&#x2F; keykCVPixelBufferPixelFormatTypeKey æŒ‡å®šè§£ç åçš„å›¾åƒæ ¼å¼&#x2F;&#x2F; valuekCVPixelFormatType_420YpCbCr8BiPlanarVideoRange : YUV420 ç”¨äºæ ‡æ¸…è§†é¢‘[420v]kCVPixelFormatType_420YpCbCr8BiPlanarFullRange : YUV422 ç”¨äºé«˜æ¸…è§†é¢‘[420f] kCVPixelFormatType_32BGRA : è¾“å‡ºçš„æ˜¯BGRAçš„æ ¼å¼ï¼Œé€‚ç”¨äºOpenGLå’ŒCoreImageåŒºåˆ«ï¼š1ã€å‰ä¸¤ç§æ˜¯ç›¸æœºè¾“å‡ºYUVæ ¼å¼ï¼Œç„¶åè½¬æˆRGBAï¼Œæœ€åä¸€ç§æ˜¯ç›´æ¥è¾“å‡ºBGRAï¼Œç„¶åè½¬æˆRGBA;2ã€420v è¾“å‡ºçš„è§†é¢‘æ ¼å¼ä¸ºNV12ï¼›èŒƒå›´ï¼š (luma&#x3D;[16,235] chroma&#x3D;[16,240])3ã€420f è¾“å‡ºçš„è§†é¢‘æ ¼å¼ä¸ºNV12ï¼›èŒƒå›´ï¼š (luma&#x3D;[0,255] chroma&#x3D;[1,255]) é¢„è§ˆå›¾å±‚123AVCaptureVideoPreviewLayer *previewLayer &#x3D; [AVCaptureVideoPreviewLayer layerWithSession:captureSession];previewLayer.frame &#x3D; self.view.bounds;[self.view.layer addSublayer:previewLayer]; å®æ—¶æ˜¾ç¤ºæ‘„åƒå¤´æ•è·åˆ°çš„å›¾åƒï¼Œä½†ä¸é€‚ç”¨äºæ»¤é•œæ¸²æŸ“ ä»£ç†æ–¹æ³•12345678910111213#pragma mark - AVCaptureVideoDataOutputSampleBufferDelegate&#x2F;* CMSampleBufferRef: å¸§ç¼“å­˜æ•°æ®ï¼Œæè¿°å½“å‰å¸§ä¿¡æ¯ CMSampleBufferGetXXX : è·å–å¸§ç¼“å­˜ä¿¡æ¯ CMSampleBufferGetDuration : è·å–å½“å‰å¸§æ’­æ”¾æ—¶é—´ CMSampleBufferGetImageBuffer : è·å–å½“å‰å¸§å›¾ç‰‡ä¿¡æ¯ *&#x2F;&#x2F;&#x2F; è·å–å¸§æ•°æ®- (void)captureOutput:(AVCaptureOutput *)output didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection &#123; &#x2F;&#x2F; captureSession ä¼šè¯å¦‚æœæ²¡æœ‰å¼ºå¼•ç”¨ï¼Œè¿™é‡Œä¸ä¼šå¾—åˆ°æ‰§è¡Œ NSLog(@&quot;----- sampleBuffer ----- %@&quot;, sampleBuffer);&#125; 12// è·å–å¸§æ’­æ”¾æ—¶é—´CMTime duration = CMSampleBufferGetDuration(sampleBuffer); åœ¨ä»£ç†æ–¹æ³•ä¸­ï¼Œå¯ä»¥æŠŠ sampleBuffer æ•°æ®æ¸²æŸ“å‡ºæ¥å»æ˜¾ç¤ºç”»é¢ã€‚é€‚ç”¨äºæ»¤é•œæ¸²æŸ“12345678&#x2F;&#x2F; è·å–å›¾ç‰‡å¸§æ•°æ®CVImageBufferRef imageBuffer &#x3D; CMSampleBufferGetImageBuffer(sampleBuffer);CIImage *ciImage &#x3D; [CIImage imageWithCVImageBuffer:imageBuffer];UIImage *image &#x3D; [UIImage imageWithCIImage:ciImage];dispatch_async(dispatch_get_main_queue(), ^&#123; self.imageView.image &#x3D; image;&#125;);éœ€è¦æ³¨æ„çš„æ˜¯ï¼šä»£ç†æ–¹æ³•ä¸­çš„æ‰€æœ‰åŠ¨ä½œæ‰€åœ¨é˜Ÿåˆ—éƒ½æ˜¯åœ¨å¼‚æ­¥ä¸²è¡Œé˜Ÿåˆ—ä¸­ï¼Œæ‰€ä»¥æ›´æ–°UIçš„æ“ä½œéœ€è¦å›åˆ°ä¸»é˜Ÿåˆ—ä¸­è¿›è¡Œï¼ï¼ ä½†æ˜¯æ­¤æ—¶ä¼šå‘ç°ï¼Œç”»é¢æ˜¯å‘å·¦æ—‹è½¬äº†90åº¦ï¼Œå› ä¸ºé»˜è®¤é‡‡é›†çš„è§†é¢‘æ˜¯æ¨ªå±çš„ï¼Œéœ€è¦æˆ‘ä»¬è¿›ä¸€æ­¥åšè°ƒæ•´ã€‚ä»¥ä¸‹æ­¥éª¤æ·»åŠ åœ¨[session startRunning];ä¹‹å‰å³å¯ï¼Œä½†æ˜¯ä¸€å®šè¦åœ¨æ·»åŠ äº† input å’Œ outputä¹‹åï½123456&#x2F;&#x2F; è·å–è¾“å…¥ä¸è¾“å‡ºä¹‹é—´çš„è¿æ¥AVCaptureConnection *connection &#x3D; [videoOutput connectionWithMediaType:AVMediaTypeVideo];&#x2F;&#x2F; è®¾ç½®é‡‡é›†æ•°æ®çš„æ–¹å‘connection.videoOrientation &#x3D; AVCaptureVideoOrientationPortrait;&#x2F;&#x2F; è®¾ç½®é•œåƒæ•ˆæœé•œåƒconnection.videoMirrored &#x3D; YES; DemoLXFAudioVideo","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Objective-C","slug":"Objective-C","permalink":"http://linxunfeng.top/tags/Objective-C/"}]},{"title":"iOS - é‡‡é›†éŸ³è§†é¢‘åŠå†™å…¥æ–‡ä»¶","slug":"iOS-é‡‡é›†éŸ³è§†é¢‘åŠå†™å…¥æ–‡ä»¶","date":"2017-09-26T11:50:32.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2017/09/26/iOS-é‡‡é›†éŸ³è§†é¢‘åŠå†™å…¥æ–‡ä»¶/","link":"","permalink":"http://linxunfeng.top/2017/09/26/iOS-%E9%87%87%E9%9B%86%E9%9F%B3%E8%A7%86%E9%A2%91%E5%8F%8A%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6/","excerpt":"éŸ³è§†é¢‘é‡‡é›†åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼šè§†é¢‘é‡‡é›†å’ŒéŸ³é¢‘é‡‡é›†ã€‚åœ¨iOSä¸­å¯ä»¥åŒæ­¥é‡‡é›†è§†é¢‘ä¸éŸ³é¢‘ï¼Œé€šè¿‡ç³»ç»Ÿæ¡†æ¶AVFoundationï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬é‡‡é›†éŸ³é¢‘ä¸è§†é¢‘ï¼Œå¯¹äºè§†é¢‘è¿˜å¯ä»¥è¿›è¡Œåˆ‡æ¢å‰åæ‘„åƒå¤´ï¼Œæœ€ç»ˆæˆ‘ä»¬å°†å½•åˆ¶å¥½çš„è§†é¢‘å†™å…¥æ²™ç›’ä¸­ +","text":"éŸ³è§†é¢‘é‡‡é›†åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼šè§†é¢‘é‡‡é›†å’ŒéŸ³é¢‘é‡‡é›†ã€‚åœ¨iOSä¸­å¯ä»¥åŒæ­¥é‡‡é›†è§†é¢‘ä¸éŸ³é¢‘ï¼Œé€šè¿‡ç³»ç»Ÿæ¡†æ¶AVFoundationï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬é‡‡é›†éŸ³é¢‘ä¸è§†é¢‘ï¼Œå¯¹äºè§†é¢‘è¿˜å¯ä»¥è¿›è¡Œåˆ‡æ¢å‰åæ‘„åƒå¤´ï¼Œæœ€ç»ˆæˆ‘ä»¬å°†å½•åˆ¶å¥½çš„è§†é¢‘å†™å…¥æ²™ç›’ä¸­ + \béŸ³è§†é¢‘é‡‡é›†åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼šè§†é¢‘é‡‡é›†å’ŒéŸ³é¢‘é‡‡é›†ã€‚åœ¨iOSä¸­å¯ä»¥åŒæ­¥é‡‡é›†è§†é¢‘ä¸éŸ³é¢‘ï¼Œé€šè¿‡ç³»ç»Ÿæ¡†æ¶AVFoundationï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬é‡‡é›†éŸ³é¢‘ä¸è§†é¢‘ï¼Œå¯¹äºè§†é¢‘è¿˜å¯ä»¥è¿›è¡Œåˆ‡æ¢å‰åæ‘„åƒå¤´ï¼Œæœ€ç»ˆæˆ‘ä»¬å°†å½•åˆ¶å¥½çš„è§†é¢‘å†™å…¥æ²™ç›’ä¸­ éŸ³è§†é¢‘æ•°æ®çš„é‡‡é›†ä¸å±•ç¤ºä¸€ã€åˆå§‹åŒ–è§†é¢‘çš„è¾“å…¥ä¸è¾“å‡º12345678// æ‡’åŠ è½½ä¸€ä¸ªsessionï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½éœ€è¦sessionæ¥æ‰§è¡Œfileprivate lazy var session: AVCaptureSession = AVCaptureSession()// ä¿å­˜\bè§†é¢‘è¾“å‡ºfileprivate var videoOutput: AVCaptureVideoDataOutput?// ä¿å­˜è§†é¢‘è¾“å…¥fileprivate var videoInput: AVCaptureDeviceInput?// ä¿å­˜é¢„è§ˆå›¾å±‚fileprivate var previewLayer: AVCaptureVideoPreviewLayer? è®¾ç½®è§†é¢‘è¾“å…¥æºä¸è¾“å‡ºæº12345678910111213// è®¾ç½®è§†é¢‘è¾“å…¥æºguard let devices = AVCaptureDevice.devices() as? [AVCaptureDevice] else &#123; return &#125;// è·å–æˆ‘ä»¬çš„å‰ç½®æ‘„åƒå¤´(åç½®ä¸º.back)guard let device = devices.filter(&#123; $0.position == .front &#125;).first else &#123; return &#125;guard let input = try? AVCaptureDeviceInput(device: device) else &#123; return &#125;self.videoInput = input// è®¾ç½®è§†é¢‘è¾“å‡ºæºlet output = AVCaptureVideoDataOutput()let queue = DispatchQueue.global()// è®¾ç½®ä»£ç†ï¼Œå¹¶åœ¨ä»£ç†ä¸­è·å–é‡‡é›†åˆ°çš„æ•°æ®ï¼Œéœ€è¦éµå®ˆ AVCaptureVideoDataOutputSampleBufferDelegateoutput.setSampleBufferDelegate(self, queue: queue)self.videoOutput = outputè®¾ç½®éŸ³é¢‘çš„è¾“å…¥æºä¸è¾“å‡ºæº123456789// è®¾ç½®éŸ³é¢‘çš„è¾“å…¥æºguard let device = AVCaptureDevice.defaultDevice(withMediaType: AVMediaTypeAudio) else &#123; return &#125;guard let input = try? AVCaptureDeviceInput(device: device) else &#123;return&#125;// è®¾ç½®éŸ³é¢‘è¾“å‡ºæºlet output = AVCaptureAudioDataOutput()let queue = DispatchQueue.global()// éœ€è¦éµå®ˆ AVCaptureAudioDataOutputSampleBufferDelegateoutput.setSampleBufferDelegate(self, queue: queue)æ·»åŠ éŸ³é¢‘ä¸è§†é¢‘çš„è¾“å…¥ä¸è¾“å‡ºåˆ°sessionä¸­ï¼Œä½†æ˜¯æ¯æ¬¡æ·»åŠ ä¹‹å‰éœ€è¦å…ˆåˆ¤æ–­æ˜¯å¦å¯ä»¥æ·»åŠ  123456789101112// æ·»åŠ è¾“å…¥ä¸è¾“å‡º// æ³¨æ„ï¼šæ¯æ¬¡å¯¹sessionè¿›è¡Œè®¾ç½®ä¹‹å‰éƒ½éœ€è¦è°ƒç”¨sessionçš„ã€beginConfigurationã€‘æ–¹æ³•// æ¥å‘Šè¯‰ç³»ç»Ÿä½ ç°åœ¨è¦å¼€å§‹è¿›è¡Œé…ç½®ï¼Œç»“æŸé…ç½®åå†è°ƒç”¨ã€commitConfigurationã€‘æ–¹æ³•æ¥æäº¤é…ç½®session.beginConfiguration()if session.canAddInput(input) &#123; session.addInput(input)&#125;if session.canAddOutput(output) &#123; session.addOutput(output)&#125;session.commitConfiguration() äºŒã€å®ç°éŸ³è§†é¢‘çš„é‡‡é›†ä»£ç†éŸ³è§†é¢‘è™½ç„¶éœ€è¦éµå®ˆçš„ä»£ç†åç§°ä¸ä¸€æ ·ï¼Œä½†æ˜¯éœ€è¦å®ç°çš„æ–¹æ³•æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥è¦æ‹¿åˆ°éŸ³é¢‘æˆ–è€…è§†é¢‘å°±å¾—å…ˆè¿›è¡Œåˆ¤æ–­ï¼Œéœ€è¦ç”¨åˆ°AVCaptureOutputçš„è¿™ä¸ªæ–¹æ³•12345&#x2F;&#x2F; This convenience method returns the first AVCaptureConnection in the receiver&#39;s&#x2F;&#x2F; connections array that has an AVCaptureInputPort of the specified mediaType. If &#x2F;&#x2F; no connection with the specified mediaType is found, nil is returned.open func connection(withMediaType mediaType: String!) -&gt; AVCaptureConnection!123456789extension ViewController: AVCaptureVideoDataOutputSampleBufferDelegate, AVCaptureAudioDataOutputSampleBufferDelegate &#123; func captureOutput(_ captureOutput: AVCaptureOutput!, didOutputSampleBuffer sampleBuffer: CMSampleBuffer!, from connection: AVCaptureConnection!) &#123; if videoOutput?.connection(withMediaType: AVMediaTypeVideo) == connection &#123; print(\"è§†é¢‘æ•°æ®\") &#125; else &#123; print(\"éŸ³é¢‘æ•°æ®\") &#125; &#125;&#125; ä¸‰ã€åˆå§‹åŒ–ä¸€ä¸ªé¢„è§ˆå›¾å±‚ç”¨æ¥æ˜¾ç¤ºé‡‡é›†åˆ°çš„è§†é¢‘ï¼ˆéé‡‡é›†æ‰€å¿…é¡»çš„æ­¥éª¤ï¼‰1234567// åˆ›å»ºé¢„è§ˆå›¾å±‚guard let previewLayer = AVCaptureVideoPreviewLayer(session: session) else &#123;return&#125;previewLayer.frame = view.bounds// å°†å›¾å±‚æ·»åŠ åˆ°æ§åˆ¶å™¨çš„viewçš„layerä¸­view.layer.insertSublayer(previewLayer, at: 0)self.previewLayer = previewLayer ç°åœ¨åŸºæœ¬åŠŸèƒ½éƒ½æœ‰äº†ï¼Œå¦‚æœæƒ³è¦å¼€å§‹é‡‡é›†éŸ³è§†é¢‘åªéœ€è¦è°ƒç”¨1234// å¼€å§‹å½•åˆ¶session.startRunning()// ç»“æŸå½•åˆ¶session.stopRunning() åˆ‡æ¢é•œå¤´å…¶å®å°±æ˜¯æ¢æ‰å½“å‰çš„è§†é¢‘è¾“å…¥æ³•åˆ¶ï¼Œè¿™é‡Œçš„è¿‡ç¨‹è·Ÿä¸Šé¢çš„è®¾ç½®è¾“å…¥æºä¸€æ ·ã€‚123456789101112131415161718// 1.å–å‡ºä¹‹å‰é•œå¤´çš„æ–¹å‘guard let videoInput = videoInput else &#123; return &#125;let position: AVCaptureDevicePosition = videoInput.device.position == .front ? .back : .frontguard let devices = AVCaptureDevice.devices() as? [AVCaptureDevice] else &#123; return &#125;guard let device = devices.filter(&#123; $0.position == position &#125;).first else &#123; return &#125;guard let newInput = try? AVCaptureDeviceInput(device: device) else &#123; return &#125;// 2.ç§»é™¤ä¹‹å‰çš„inputï¼Œæ·»åŠ æ–°çš„inputsession.beginConfiguration()session.removeInput(videoInput)if session.canAddInput(newInput) &#123; session.addInput(newInput)&#125;session.commitConfiguration()// 3.ä¿å­˜æœ€æ–°çš„inputself.videoInput = newInput å½•åˆ¶è§†é¢‘å†™å…¥æ–‡ä»¶1fileprivate var movieOutput: AVCaptureMovieFileOutput? åœ¨å¼€å§‹é‡‡é›†éŸ³è§†é¢‘çš„æ—¶å€™å°±è¦å¼€å§‹å†™å…¥æ–‡ä»¶ 123456789101112131415161718// å¼€å§‹å†™å…¥æ–‡ä»¶ // 1ã€åˆ›å»ºå†™å…¥æ–‡ä»¶çš„è¾“å‡ºlet fileOutput = AVCaptureMovieFileOutput()self.movieOutput = fileOutput // ä¿å­˜èµ·æ¥ï¼Œç”¨äºåœæ­¢å†™å…¥æ–‡ä»¶// è®¾ç½®ç±»å‹ï¼Œä¸ç„¶æŠ¥é”™(è¿™ä¸¤å¥å¾ˆé‡è¦)let connection = fileOutput.connection(withMediaType: AVMediaTypeVideo)connection?.automaticallyAdjustsVideoMirroring = trueif session.canAddOutput(fileOutput) &#123; session.addOutput(fileOutput)&#125;// 2ã€ç›´æ¥å¼€å§‹å†™å…¥æ–‡ä»¶let filePath = NSSearchPathForDirectoriesInDomains(.documentDirectory, .userDomainMask, true).first! + \"/abc.mp4\"let fileUrl = URL(fileURLWithPath: filePath)fileOutput.startRecording(toOutputFileURL: fileUrl, recordingDelegate: self) åœ¨åœæ­¢é‡‡é›†éŸ³è§†é¢‘çš„æ—¶å€™åœæ­¢å†™å…¥æ–‡ä»¶ 12&#x2F;&#x2F; åœæ­¢å†™å…¥æ–‡ä»¶movieOutput?.stopRecording() è¯¦æƒ…è¯·çœ‹ DEMO","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Swift","slug":"Swift","permalink":"http://linxunfeng.top/tags/Swift/"}]},{"title":"iOS - LXFDrawBoard å¤šåŠŸèƒ½å°ç”»æ¿","slug":"iOS-LXFDrawBoard-å¤šåŠŸèƒ½å°ç”»æ¿","date":"2017-09-25T18:38:12.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2017/09/25/iOS-LXFDrawBoard-å¤šåŠŸèƒ½å°ç”»æ¿/","link":"","permalink":"http://linxunfeng.top/2017/09/25/iOS-LXFDrawBoard-%E5%A4%9A%E5%8A%9F%E8%83%BD%E5%B0%8F%E7%94%BB%E6%9D%BF/","excerpt":"å°†LXFDrawBoardæ‹–å…¥é¡¹ç›®ä¸­ï¼Œå¯¼å…¥å¤´æ–‡ä»¶LXFDrawBoard.hï¼Œéœ€è¦ä»€ä¹ˆç¬”åˆ·å¯ä»¥åœ¨Brushæ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°å³å¯ä½¿ç”¨ï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•å¯ä»¥å‚è€ƒDemo+","text":"å°†LXFDrawBoardæ‹–å…¥é¡¹ç›®ä¸­ï¼Œå¯¼å…¥å¤´æ–‡ä»¶LXFDrawBoard.hï¼Œéœ€è¦ä»€ä¹ˆç¬”åˆ·å¯ä»¥åœ¨Brushæ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°å³å¯ä½¿ç”¨ï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•å¯ä»¥å‚è€ƒDemo+ LXFDrawBoardå¤šåŠŸèƒ½å°ç”»æ¿ GitHub: Demo Usage å°†LXFDrawBoardæ‹–å…¥é¡¹ç›®ä¸­ï¼Œå¯¼å…¥å¤´æ–‡ä»¶LXFDrawBoard.hï¼Œéœ€è¦ä»€ä¹ˆç¬”åˆ·å¯ä»¥åœ¨Brushæ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°å³å¯ä½¿ç”¨ï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•å¯ä»¥å‚è€ƒDemo LXFDrawBoardDelegate è¿”å›éœ€è¦æ·»åŠ çš„æè¿° 1- (NSString *)LXFDrawBoard:(LXFDrawBoard *)drawBoard textForDescLabel:(UILabel *)descLabel; å½“æ·»åŠ æˆ–ä¿®æ”¹æè¿°æ—¶è°ƒç”¨ 1- (void)LXFDrawBoard:(LXFDrawBoard *)drawBoard clickDescLabel:(UILabel *)descLabel; ç¬”åˆ·2017â€“09-25 æ›´æ–°æ©¡çš®æ“¦ LXFEraserBrush é“…ç¬” LXFPencilBrush ç®­å¤´ LXFArrowBrush ç›´çº¿ LXFLineBrush æ–‡æœ¬ LXFTextBrush çŸ©å½¢ LXFRectangleBrush é©¬èµ›å…‹ LXFMosaicBrush æ’¤é”€ä¸åæ’¤é”€","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"Objective-C","slug":"Objective-C","permalink":"http://linxunfeng.top/tags/Objective-C/"},{"name":"iOSé¡¹ç›®","slug":"iOSé¡¹ç›®","permalink":"http://linxunfeng.top/tags/iOS%E9%A1%B9%E7%9B%AE/"}]},{"title":"iOS-RxSwifté¡¹ç›®å®æˆ˜è®°å½•","slug":"iOS-RxSwift-é¡¹ç›®å®æˆ˜è®°å½•","date":"2017-09-12T10:02:27.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2017/09/12/iOS-RxSwift-é¡¹ç›®å®æˆ˜è®°å½•/","link":"","permalink":"http://linxunfeng.top/2017/09/12/iOS-RxSwift-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E8%AE%B0%E5%BD%95/","excerpt":"æœ€è¿‘åˆšåˆšæŠŠæ¥æ‰‹çš„OCé¡¹ç›®æå®šï¼Œç»è¿‡æ·±æ€ç†Ÿè™‘åï¼Œæœ¬äººå†³å®šä¸‹ä¸ªé¡¹ç›®èµ·å°±ä½¿ç”¨Swift(å­¦äº†è¿™ä¹ˆä¹…çš„Swiftè¿˜æ²¡çœŸæ­£ç”¨åˆ°å®é™…é¡¹ç›®é‡Œã€‚ã€‚ã€‚)ï¼Œè€Œæ°å·§RxSwiftå·²ç»å‡ºæ¥æœ‰ä¸€äº›æ—¶é—´äº†ï¼Œè¯­æ³•ä¹ŸåŸºæœ¬ä¸Šç¨³å®šï¼Œé‚åªèº«å‰æ¥è¯•æ¢è¯•æ¢è¿™RxSwiftï¼Œæ¥ç€å°±åšäº†ä¸ªå°Demoï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥ç§ä¸€ç§~ +","text":"æœ€è¿‘åˆšåˆšæŠŠæ¥æ‰‹çš„OCé¡¹ç›®æå®šï¼Œç»è¿‡æ·±æ€ç†Ÿè™‘åï¼Œæœ¬äººå†³å®šä¸‹ä¸ªé¡¹ç›®èµ·å°±ä½¿ç”¨Swift(å­¦äº†è¿™ä¹ˆä¹…çš„Swiftè¿˜æ²¡çœŸæ­£ç”¨åˆ°å®é™…é¡¹ç›®é‡Œã€‚ã€‚ã€‚)ï¼Œè€Œæ°å·§RxSwiftå·²ç»å‡ºæ¥æœ‰ä¸€äº›æ—¶é—´äº†ï¼Œè¯­æ³•ä¹ŸåŸºæœ¬ä¸Šç¨³å®šï¼Œé‚åªèº«å‰æ¥è¯•æ¢è¯•æ¢è¿™RxSwiftï¼Œæ¥ç€å°±åšäº†ä¸ªå°Demoï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥ç§ä¸€ç§~ + æœ€è¿‘åˆšåˆšæŠŠæ¥æ‰‹çš„OCé¡¹ç›®æå®šï¼Œç»è¿‡æ·±æ€ç†Ÿè™‘åï¼Œæœ¬äººå†³å®šä¸‹ä¸ªé¡¹ç›®èµ·å°±ä½¿ç”¨Swift(å­¦äº†è¿™ä¹ˆä¹…çš„Swiftè¿˜æ²¡çœŸæ­£ç”¨åˆ°å®é™…é¡¹ç›®é‡Œã€‚ã€‚ã€‚)ï¼Œè€Œæ°å·§RxSwiftå·²ç»å‡ºæ¥æœ‰ä¸€äº›æ—¶é—´äº†ï¼Œè¯­æ³•ä¹ŸåŸºæœ¬ä¸Šç¨³å®šï¼Œé‚åªèº«å‰æ¥è¯•æ¢è¯•æ¢è¿™RxSwiftï¼Œæ¥ç€å°±åšäº†ä¸ªå°Demoï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥ç§ä¸€ç§~ ç»“æ„1234567891011121314151617.â”œâ”€â”€ Controllerâ”‚ â””â”€â”€ LXFViewController.swift &#x2F;&#x2F; ä¸»è§†å›¾æ§åˆ¶å™¨â”œâ”€â”€ Extensionâ”‚ â””â”€â”€ Response+ObjectMapper.swift &#x2F;&#x2F; Responseåˆ†ç±»ï¼ŒMoyaè¯·æ±‚å®Œè¿›è¡ŒJsonè½¬æ¨¡å‹æˆ–æ¨¡å‹æ•°ç»„â”œâ”€â”€ Modelâ”‚ â””â”€â”€ LXFModel.swift &#x2F;&#x2F; æ¨¡å‹â”œâ”€â”€ Protocolâ”‚ â””â”€â”€ LXFViewModelType.swift &#x2F;&#x2F; å®šä¹‰äº†æ¨¡å‹åè®®â”œâ”€â”€ Toolâ”‚ â”œâ”€â”€ LXFNetworkTool.swift &#x2F;&#x2F; å°è£…Moyaè¯·æ±‚â”‚ â””â”€â”€ LXFProgressHUD.swift &#x2F;&#x2F; å°è£…çš„HUDâ”œâ”€â”€ Viewâ”‚ â”œâ”€â”€ LXFViewCell.swift &#x2F;&#x2F; è‡ªå®šä¹‰cellâ”‚ â””â”€â”€ LXFViewCell.xib &#x2F;&#x2F; cellçš„xibæ–‡ä»¶â””â”€â”€ ViewModel â””â”€â”€ LXFViewModel.swift &#x2F;&#x2F; è§†å›¾æ¨¡å‹ ç¬¬ä¸‰æ–¹åº“123456789101112RxSwift &#x2F;&#x2F; æƒ³ç©RxSwiftçš„å¿…å¤‡åº“RxCocoa &#x2F;&#x2F; å¯¹ UIKit Foundation è¿›è¡Œ Rx åŒ–NSObject+Rx &#x2F;&#x2F; ä¸ºæˆ‘ä»¬æä¾› rx_disposeBag Moya&#x2F;RxSwift &#x2F;&#x2F; ä¸ºRxSwiftä¸“ç”¨æä¾›ï¼Œå¯¹Alamofireè¿›è¡Œå°è£…çš„ä¸€ä¸ªç½‘ç»œè¯·æ±‚åº“ObjectMapper &#x2F;&#x2F; Jsonè½¬æ¨¡å‹ä¹‹å¿…å¤‡è‰¯å“RxDataSources &#x2F;&#x2F; å¸®åŠ©æˆ‘ä»¬ä¼˜é›…çš„ä½¿ç”¨tableViewçš„æ•°æ®æºæ–¹æ³•Then &#x2F;&#x2F; æä¾›å¿«é€Ÿåˆå§‹åŒ–çš„è¯­æ³•ç³–Kingfisher &#x2F;&#x2F; å›¾ç‰‡åŠ è½½åº“SnapKit &#x2F;&#x2F; è§†å›¾çº¦æŸåº“Reusable &#x2F;&#x2F; å¸®åŠ©æˆ‘ä»¬ä¼˜é›…çš„ä½¿ç”¨è‡ªå®šä¹‰cellå’Œview,ä¸å†å‡ºç°OptionalMJRefresh &#x2F;&#x2F; ä¸Šæ‹‰åŠ è½½ã€ä¸‹æ‹‰åˆ·æ–°çš„åº“SVProgressHUD &#x2F;&#x2F; ç®€å•æ˜“ç”¨çš„HUD æ•²é»‘æ¿Moyaçš„ä½¿ç”¨Moyaæ˜¯åŸºäºAlamofireçš„ç½‘ç»œè¯·æ±‚åº“ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨äº†Moya/Swiftï¼Œå®ƒåœ¨Moyaçš„åŸºç¡€ä¸Šæ·»åŠ äº†å¯¹RxSwiftçš„æ¥å£æ”¯æŒã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥è¯´ä¸‹Moyaçš„ä½¿ç”¨ ä¸€ã€åˆ›å»ºä¸€ä¸ªæšä¸¾ï¼Œç”¨æ¥å­˜æ”¾è¯·æ±‚ç±»å‹ï¼Œè¿™é‡Œæˆ‘é¡ºä¾¿è®¾ç½®ç›¸åº”çš„è·¯å¾„ï¼Œç­‰ä¸‹ç»Ÿä¸€å–å‡ºæ¥ç›´æ¥èµ‹å€¼å³å¯123456789enum LXFNetworkTool &#123; enum LXFNetworkCategory: String &#123; case all = \"all\" case android = \"Android\" case ios = \"iOS\" case welfare = \"ç¦åˆ©\" &#125; case data(type: LXFNetworkCategory, size:Int, index:Int)&#125;äºŒã€ä¸ºè¿™ä¸ªæšä¸¾å†™ä¸€ä¸ªæ‰©å±•ï¼Œå¹¶éµå¾ªå¡„ TargetTypeï¼Œè¿™ä¸ªåè®®çš„Moyaè¿™ä¸ªåº“è§„å®šçš„åè®®ï¼Œå¯ä»¥æŒ‰ä½Commondé”®+å•å‡»å·¦é”®è¿›å…¥ç›¸åº”çš„æ–‡ä»¶è¿›è¡ŒæŸ¥çœ‹1234567891011121314151617181920212223242526272829303132333435363738394041424344extension LXFNetworkTool: TargetType &#123; /// baseURL ç»Ÿä¸€åŸºæœ¬çš„URL var baseURL: URL &#123; return URL(string: \"http://gank.io/api/data/\")! &#125; /// pathå­—æ®µä¼šè¿½åŠ è‡³baseURLåé¢ var path: String &#123; switch self &#123; case .data(let type, let size, let index): return \"\\(type.rawValue)/\\(size)/\\(index)\" &#125; &#125; /// HTTPçš„è¯·æ±‚æ–¹å¼ var method: Moya.Method &#123; return .get &#125; /// è¯·æ±‚å‚æ•°(ä¼šåœ¨è¯·æ±‚æ—¶è¿›è¡Œç¼–ç ) var parameters: [String: Any]? &#123; return nil &#125; /// å‚æ•°ç¼–ç æ–¹å¼(è¿™é‡Œä½¿ç”¨URLçš„é»˜è®¤æ–¹å¼) var parameterEncoding: ParameterEncoding &#123; return URLEncoding.default &#125; /// è¿™é‡Œç”¨äºå•å…ƒæµ‹è¯•ï¼Œä¸éœ€è¦çš„å°±åƒæˆ‘ä¸€æ ·éšä¾¿å†™å†™ var sampleData: Data &#123; return \"LinXunFeng\".data(using: .utf8)! &#125; /// å°†è¦è¢«æ‰§è¡Œçš„ä»»åŠ¡(è¯·æ±‚ï¼šrequest ä¸‹è½½ï¼šupload ä¸Šä¼ ï¼šdownload) var task: Task &#123; return .request &#125; /// æ˜¯å¦æ‰§è¡ŒAlamofireéªŒè¯ï¼Œé»˜è®¤å€¼ä¸ºfalse var validate: Bool &#123; return false &#125;&#125;ä¸‰ã€å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡ç”¨äºæ•´ä¸ªé¡¹ç›®çš„ç½‘ç»œè¯·æ±‚1let lxfNetTool = RxMoyaProvider&lt;LXFNetworkTool&gt;()è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªå…¨å±€å˜é‡æ¥è¯·æ±‚æ•°æ®äº† RxDataSourceså¦‚æœä½ æƒ³ç”¨ä¼ ç»Ÿçš„æ–¹å¼ä¹Ÿè¡Œï¼Œä¸è¿‡è¿™å°±å¤±å»äº†ä½¿ç”¨RxSwiftçš„æ„ä¹‰ã€‚å¥½å§ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥è¯´è¯´å¦‚ä½•ä¼˜é›…çš„æ¥å®ç°tableViewçš„æ•°æ®æºã€‚å…¶å®RxDataSourceså®˜ç½‘ä¸Šå·²ç»æœ‰å¾ˆæ˜ç¡®çš„ä½¿ç”¨è¯´æ˜ï¼Œä¸è¿‡æˆ‘è¿˜æ˜¯æ€»ç»“ä¸€ä¸‹æ•´ä¸ªè¿‡ç¨‹å§ã€‚ æ¦‚å¿µç‚¹RxDataSourcesæ˜¯ä»¥sectionæ¥åšä¸ºæ•°æ®ç»“æ„æ¥ä¼ è¾“ï¼Œè¿™ç‚¹å¾ˆé‡è¦ï¼Œå¯èƒ½å¾ˆå¤šåŒå­¦ä¼šæ¯”è¾ƒç–‘æƒ‘è¿™å¥è¯å§ï¼Œæˆ‘åœ¨æ­¤ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ä¼ ç»Ÿçš„æ•°æ®æºå®ç°çš„æ–¹æ³•ä¸­æœ‰ä¸€ä¸ªnumberOfSectionï¼Œæˆ‘ä»¬åœ¨å¾ˆå¤šæƒ…å†µä¸‹åªéœ€è¦ä¸€ä¸ªsectionï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•å¯å®ç°ï¼Œä¹Ÿå¯ä»¥ä¸å®ç°ï¼Œé»˜è®¤è¿”å›çš„å°±æ˜¯1ï¼Œè¿™ç»™æˆ‘ä»¬å¸¦æ¥çš„ä¸€ä¸ªè¿·æƒ‘ç‚¹ï¼šã€tableViewæ˜¯ç”±rowæ¥ç»„æˆçš„ã€‘ï¼Œä¸çŸ¥é“åœ¨åçš„å„ä½ä¸­æœ‰æ²¡æœ‰æ˜¯è¿™ä¹ˆæƒ³çš„å‘¢ï¼Ÿï¼Ÿæœ‰çš„è¯é‚£ä»ä»Šå¤©å¼€å§‹å°±è¦è®¤æ¸…æ¥šè¿™ä¸€ç‚¹ï¼Œã€tableViewå…¶å®æ˜¯ç”±sectionç»„æˆçš„ã€‘ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨RxDataSourcesçš„è¿‡ç¨‹ä¸­ï¼Œå³ä½¿ä½ çš„setionåªæœ‰ä¸€ä¸ªï¼Œé‚£ä½ ä¹Ÿå¾—è¿”å›ä¸€ä¸ªsectionçš„æ•°ç»„å‡ºå»ï¼ï¼ï¼ ä¸€ã€è‡ªå®šä¹‰Sectionåœ¨æˆ‘ä»¬è‡ªå®šä¹‰çš„Modelä¸­åˆ›å»ºä¸€ä¸ªSectionçš„ç»“æ„ä½“ï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ªæ‰©å±•ï¼Œéµå¾ªSectionModelTypeåè®®ï¼Œå®ç°ç›¸åº”çš„åè®®æ–¹æ³•ã€‚çº¦å®šä¿—æˆçš„å†™æ³•å‘¢è¯·å‚è€ƒå¦‚ä¸‹æ–¹å¼12345678910111213141516171819LXFModel.swiftstruct LXFSection &#123; // itemså°±æ˜¯rows var items: [Item] // ä½ ä¹Ÿå¯ä»¥è¿™é‡ŒåŠ ä½ éœ€è¦çš„ä¸œè¥¿ï¼Œæ¯”å¦‚ headerView çš„ title&#125;extension LXFSection: SectionModelType &#123; // é‡å®šä¹‰ Item çš„ç±»å‹ä¸º LXFModel typealias Item = LXFModel // å®ç°åè®®ä¸­çš„æ–¹å¼ init(original: LXFSection, items: [LXFSection.Item]) &#123; self = original self.items = items &#125;&#125;äºŒã€åœ¨æ§åˆ¶å™¨ä¸‹åˆ›å»ºä¸€ä¸ªæ•°æ®æºå±æ€§ ä»¥ä¸‹ä»£ç å‡åœ¨ LXFViewController.swift æ–‡ä»¶ä¸­12// åˆ›å»ºä¸€ä¸ªæ•°æ®æºå±æ€§ï¼Œç±»å‹ä¸ºè‡ªå®šä¹‰çš„Sectionç±»å‹let dataSource = RxTableViewSectionedReloadDataSource&lt;LXFSection&gt;()ä½¿ç”¨æ•°æ®æºå±æ€§ç»‘å®šæˆ‘ä»¬çš„cell12345678910// ç»‘å®šcelldataSource.configureCell = &#123; ds, tv, ip, item in // è¿™ä¸ªåœ°æ–¹ä½¿ç”¨äº†Reusableè¿™ä¸ªåº“ï¼Œåœ¨LXFViewCellä¸­éµå®ˆäº†ç›¸åº”çš„åè®® // ä½¿å…¶æ–¹ä¾¿è½¬æ¢cellä¸ºéå¯é€‰å‹çš„ç›¸åº”çš„cellç±»å‹ let cell = tv.dequeueReusableCell(for: ip) as LXFViewCell cell.picView.kf.setImage(with: URL(string: item.url)) cell.descLabel.text = \"æè¿°: \\(item.desc)\" cell.sourceLabel.text = \"æ¥æº: \\(item.source)\" return cell&#125;ä¸‰ã€å°†sectionsåºåˆ—ç»‘å®šç»™æˆ‘ä»¬çš„rows1output.sections.asDriver().drive(tableView.rx.items(dataSource:dataSource)).addDisposableTo(rx_disposeBag)å¤§åŠŸå‘Šæˆï¼Œæ¥ä¸‹æ¥è¯´è¯´sectionåºåˆ—çš„äº§ç”Ÿ ViewModelçš„è§„èŒƒæˆ‘ä»¬çŸ¥é“MVVMæ€æƒ³å°±æ˜¯å°†åŸæœ¬åœ¨ViewControllerçš„è§†å›¾æ˜¾ç¤ºé€»è¾‘ã€éªŒè¯é€»è¾‘ã€ç½‘ç»œè¯·æ±‚ç­‰ä»£ç å­˜æ”¾äºViewModelä¸­ï¼Œè®©æˆ‘ä»¬æ‰‹ä¸­çš„ViewControllerç˜¦èº«ã€‚è¿™äº›é€»è¾‘ç”±ViewModelè´Ÿè´£ï¼Œå¤–ç•Œä¸éœ€è¦å…³å¿ƒï¼Œå¤–ç•Œåªéœ€è¦ç»“æœï¼ŒViewModelä¹Ÿåªéœ€è¦å°†ç»“æœç»™åˆ°å¤–ç•Œï¼ŒåŸºäºæ­¤ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåè®®LXFViewModelType ä¸€ã€åˆ›å»ºä¸€ä¸ªLXFViewModelType.swift123456789LXFViewModelType.swift// associatedtype å…³é”®å­— ç”¨æ¥å£°æ˜ä¸€ä¸ªç±»å‹çš„å ä½ç¬¦ä½œä¸ºåè®®å®šä¹‰çš„ä¸€éƒ¨åˆ†protocol LXFViewModelType &#123; associatedtype Input associatedtype Output func transform(input: Input) -&gt; Output&#125;äºŒã€viewModeléµå®ˆLXFViewModelTypeåè®® æˆ‘ä»¬å¯ä»¥ä¸ºXFViewModelTypeçš„Inputå’ŒOutputå®šä¹‰åˆ«åï¼Œä»¥ç¤ºåŒºåˆ†ï¼Œå¦‚ï¼šä½ è¿™ä¸ªviewModelçš„ç”¨äºè¯·æ±‚é¦–é¡µæ¨¡å—ç›¸å…³è”çš„ï¼Œåˆ™å¯ä»¥å‘½åä¸ºï¼šHomeInput å’Œ HomeOutput æˆ‘ä»¬å¯ä»¥ä¸°å¯Œæˆ‘ä»¬çš„ Input å’Œ Output ã€‚å¯ä»¥çœ‹åˆ°æˆ‘ä¸ºOutputæ·»åŠ äº†ä¸€ä¸ªåºåˆ—ï¼Œç±»å‹ä¸ºæˆ‘ä»¬è‡ªå®šä¹‰çš„LXFSectionæ•°ç»„ï¼Œåœ¨Inputé‡Œé¢æ·»åŠ äº†ä¸€ä¸ªè¯·æ±‚ç±»å‹(å³è¦è¯·æ±‚ä»€ä¹ˆæ•°æ®ï¼Œæ¯”å¦‚é¦–é¡µçš„æ•°æ®) æˆ‘ä»¬é€šè¿‡ transform æ–¹æ³•å°†inputæºå¸¦çš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œç”Ÿæˆäº†ä¸€ä¸ªOutput æ³¨æ„ï¼š ä»¥ä¸‹ä»£ç ä¸ºäº†æ–¹ä¾¿é˜…è¯»ï¼Œè¿›è¡Œäº†éƒ¨åˆ†åˆ å‡ 12345678910111213141516171819202122232425262728293031323334353637383940LXFViewModel.swiftextension LXFViewModel: LXFViewModelType &#123; // å­˜æ”¾ç€è§£æå®Œæˆçš„æ¨¡å‹æ•°ç»„ let models = Variable&lt;[LXFModel]&gt;([]) // ä¸ºLXFViewModelTypeçš„Inputå’ŒOutputå®šä¹‰åˆ«å typealias Input = LXFInput typealias Output = LXFOutput // ä¸°å¯Œæˆ‘ä»¬çš„Inputå’ŒOutput struct LXFInput &#123; // ç½‘ç»œè¯·æ±‚ç±»å‹ let category: LXFNetworkTool.LXFNetworkCategory init(category: LXFNetworkTool.LXFNetworkCategory) &#123; self.category = category &#125; &#125; struct LXFOutput &#123; // tableViewçš„sectionsæ•°æ® let sections: Driver&lt;[LXFSection]&gt; init(sections: Driver&lt;[LXFSection]&gt;) &#123; self.sections = sections &#125; &#125; func transform(input: LXFViewModel.LXFInput) -&gt; LXFViewModel.LXFOutput &#123; let sections = models.asObservable().map &#123; (models) -&gt; [LXFSection] in // å½“modelsçš„å€¼è¢«æ”¹å˜æ—¶ä¼šè°ƒç”¨ï¼Œè¿™æ˜¯Variableçš„ç‰¹æ€§ return [LXFSection(items: models)] // è¿”å›sectionæ•°ç»„ &#125;.asDriver(onErrorJustReturn: []) let output = LXFOutput(sections: sections) // æ¥ä¸‹æ¥çš„ä»£ç æ˜¯ç½‘ç»œè¯·æ±‚ï¼Œè¯·ç»“åˆé¡¹ç›®æŸ¥çœ‹ï¼Œä¸ç„¶ä¼šä¸æ–¹ä¾¿é˜…è¯»å’Œç†è§£ &#125;&#125; æ¥ç€æˆ‘ä»¬åœ¨ViewControllerä¸­åˆå§‹åŒ–æˆ‘ä»¬çš„inputï¼Œé€šè¿‡transformå¾—åˆ°outputï¼Œç„¶åå°†æˆ‘ä»¬outputä¸­çš„sectionsåºåˆ—ç»‘å®štableViewçš„items12345678LXFViewController.swift// åˆå§‹åŒ–inputlet vmInput = LXFViewModel.LXFInput(category: .welfare)// é€šè¿‡transformå¾—åˆ°outputlet vmOutput = viewModel.transform(input: vmInput)vmOutput.sections.asDriver().drive(tableView.rx.items(dataSource: dataSource)).addDisposableTo(rx_disposeBag) RxSwiftä¸­ä½¿ç”¨MJRefreshä¸€ã€å®šä¹‰ä¸€ä¸ªæšä¸¾LXFRefreshStatusï¼Œç”¨äºæ ‡å¿—å½“å‰åˆ·æ–°çŠ¶æ€12345678enum LXFRefreshStatus &#123; case none case beingHeaderRefresh case endHeaderRefresh case beingFooterRefresh case endFooterRefresh case noMoreData&#125;äºŒã€åœ¨LXFOutputæ·»åŠ ä¸€ä¸ªrefreshStatusåºåˆ—ï¼Œç±»å‹ä¸ºLXFRefreshStatus12// ç»™å¤–ç•Œè®¢é˜…ï¼Œå‘Šè¯‰å¤–ç•Œçš„tableViewå½“å‰çš„åˆ·æ–°çŠ¶æ€let refreshStatus = Variable&lt;LXFRefreshStatus&gt;(.none)æˆ‘ä»¬åœ¨è¿›è¡Œç½‘ç»œè¯·æ±‚å¹¶å¾—åˆ°ç»“æœä¹‹åï¼Œä¿®æ”¹refreshStatusçš„valueä¸ºç›¸åº”çš„LXFRefreshStatusé¡¹ ä¸‰ã€å¤–ç•Œè®¢é˜…outputçš„refreshStatus å¤–ç•Œè®¢é˜…outputçš„refreshStatusï¼Œå¹¶ä¸”æ ¹æ®æ¥æ”¶åˆ°çš„å€¼è¿›è¡Œç›¸åº”çš„æ“ä½œ12345678910111213141516vmOutput.refreshStatus.asObservable().subscribe(onNext: &#123;[weak self] status in switch status &#123; case .beingHeaderRefresh: self?.tableView.mj_header.beginRefreshing() case .endHeaderRefresh: self?.tableView.mj_header.endRefreshing() case .beingFooterRefresh: self?.tableView.mj_footer.beginRefreshing() case .endFooterRefresh: self?.tableView.mj_footer.endRefreshing() case .noMoreData: self?.tableView.mj_footer.endRefreshingWithNoMoreData() default: break &#125;&#125;).addDisposableTo(rx_disposeBag)å››ã€outputæä¾›ä¸€ä¸ªrequestCommondç”¨äºè¯·æ±‚æ•°æ® PublishSubject çš„ç‰¹ç‚¹ï¼šå³å¯ä»¥ä½œä¸ºObservableï¼Œä¹Ÿå¯ä»¥ä½œä¸ºObserverï¼Œè¯´ç™½äº†å°±æ˜¯å¯ä»¥å‘é€ä¿¡å·ï¼Œä¹Ÿå¯ä»¥è®¢é˜…ä¿¡å·12// å¤–ç•Œé€šè¿‡è¯¥å±æ€§å‘Šè¯‰viewModelåŠ è½½æ•°æ®ï¼ˆä¼ å…¥çš„å€¼æ˜¯ä¸ºäº†æ ‡å¿—æ˜¯å¦é‡æ–°åŠ è½½ï¼‰let requestCommond = PublishSubject&lt;Bool&gt;()åœ¨transformä¸­ï¼Œæˆ‘ä»¬å¯¹ç”Ÿæˆçš„outputçš„requestCommondè¿›è¡Œè®¢é˜…1234567891011121314output.requestCommond.subscribe(onNext: &#123;[unowned self] isReloadData in self.index = isReloadData ? 1 : self.index+1 lxfNetTool.request(.data(type: input.category, size: 10, index: self.index)).mapArray(LXFModel.self).subscribe(&#123; [weak self] (event) in switch event &#123; case let .next(modelArr): self?.models.value = isReloadData ? modelArr : (self?.models.value ?? []) + modelArr LXFProgressHUD.showSuccess(\"åŠ è½½æˆåŠŸ\") case let .error(error): LXFProgressHUD.showError(error.localizedDescription) case .completed: output.refreshStatus.value = isReloadData ? .endHeaderRefresh : .endFooterRefresh &#125; &#125;).addDisposableTo(self.rx_disposeBag)&#125;).addDisposableTo(rx_disposeBag)äº”ã€åœ¨ViewControllerä¸­åˆå§‹åŒ–åˆ·æ–°æ§ä»¶ ä¸ºtableViewè®¾ç½®åˆ·æ–°æ§ä»¶ï¼Œå¹¶ä¸”åœ¨åˆ›å»ºåˆ·æ–°æ§ä»¶çš„å›è°ƒä¸­ä½¿ç”¨outputçš„requestCommondå‘å°„ä¿¡å·123456tableView.mj_header = MJRefreshNormalHeader(refreshingBlock: &#123; vmOutput.requestCommond.onNext(true)&#125;)tableView.mj_footer = MJRefreshAutoNormalFooter(refreshingBlock: &#123; vmOutput.requestCommond.onNext(false)&#125;)æ€»ç»“æµç¨‹ï¼š ViewControllerå·²ç»æ‹¿åˆ°outputï¼Œå½“ä¸‹æ‹‰åŠ è½½æ•°æ®çš„æ—¶å€™ï¼Œä½¿ç”¨outputçš„requestCommondå‘å°„ä¿¡æ¯ï¼Œå‘Šè¯‰viewModelæˆ‘ä»¬è¦åŠ è½½æ•°æ® viewModelè¯·æ±‚æ•°æ®ï¼Œåœ¨å¤„ç†å®Œjsonè½¬æ¨¡å‹æˆ–æ¨¡å‹æ•°ç»„åä¿®æ”¹modelsï¼Œå½“modelsçš„å€¼è¢«ä¿®æ”¹çš„æ—¶å€™ä¼šå‘ä¿¡å·ç»™sectionsï¼Œsectionsåœ¨ViewControllerå·²ç»ç»‘å®šåˆ°tableViewçš„itemsäº†ï¼Œæ‰€ä»¥æ­¤æ—¶tableViewçš„æ•°æ®ä¼šè¢«æ›´æ–°ã€‚æ¥ç€æˆ‘ä»¬æ ¹æ®è¯·æ±‚ç»“æœï¼Œä¿®æ”¹outputçš„refreshStatuså±æ€§çš„å€¼ å½“outputçš„refreshStatuså±æ€§çš„å€¼æ”¹å˜åï¼Œä¼šå‘å°„ä¿¡å·ï¼Œç”±äºå¤–ç•Œä¹‹å‰å·²ç»è®¢é˜…äº†outputçš„refreshStatusï¼Œæ­¤æ—¶å°±ä¼šæ ¹æ®refreshStatusçš„æ–°å€¼æ¥å¤„ç†åˆ·æ–°æ§ä»¶çš„çŠ¶æ€ å¥½äº†ï¼Œé™„ä¸ŠRxSwiftDemoã€‚å®Œç»“æ’’èŠ±","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Swift","slug":"Swift","permalink":"http://linxunfeng.top/tags/Swift/"},{"name":"RxSwift","slug":"RxSwift","permalink":"http://linxunfeng.top/tags/RxSwift/"}]},{"title":"Ubuntuå®‰è£…nginxæ¥æ­å»ºæ¨æµæœåŠ¡å™¨","slug":"Ubuntu-å®‰è£…nginx-æ¥æ­å»ºæ¨æµæœåŠ¡å™¨","date":"2017-09-12T09:54:14.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2017/09/12/Ubuntu-å®‰è£…nginx-æ¥æ­å»ºæ¨æµæœåŠ¡å™¨/","link":"","permalink":"http://linxunfeng.top/2017/09/12/Ubuntu-%E5%AE%89%E8%A3%85nginx-%E6%9D%A5%E6%90%AD%E5%BB%BA%E6%8E%A8%E6%B5%81%E6%9C%8D%E5%8A%A1%E5%99%A8/","excerpt":"å¦‚æœå®‰è£…å‘½ä»¤å›è½¦ä¹‹åå‡ºç°å¦‚ä¸‹ä¿¡æ¯ï¼Œè¯·å‚è€ƒã€Ubuntu â€œæ— æ³•è·å¾—é”â€è§£å†³æ–¹æ¡ˆã€‘è§£å†³ï¼Œä½†æ˜¯æˆ‘äº²æµ‹å¯¹æˆ‘æ²¡ç”¨ï¼Œç›´æ¥é‡å¯æå®š +","text":"å¦‚æœå®‰è£…å‘½ä»¤å›è½¦ä¹‹åå‡ºç°å¦‚ä¸‹ä¿¡æ¯ï¼Œè¯·å‚è€ƒã€Ubuntu â€œæ— æ³•è·å¾—é”â€è§£å†³æ–¹æ¡ˆã€‘è§£å†³ï¼Œä½†æ˜¯æˆ‘äº²æµ‹å¯¹æˆ‘æ²¡ç”¨ï¼Œç›´æ¥é‡å¯æå®š + å®‰è£…nginxå®‰è£…ä¸¤ä¸ªä¾èµ–åº“12sudo apt-get install autoconf automakesudo apt-get install libpcre3 libpcre3-devå®‰è£…zlibåº“12sudo apt-get install opensslsudo apt-get install libssl-devå¦‚æœå®‰è£…å‘½ä»¤å›è½¦ä¹‹åå‡ºç°å¦‚ä¸‹ä¿¡æ¯ï¼Œè¯·å‚è€ƒã€Ubuntu â€œæ— æ³•è·å¾—é”â€è§£å†³æ–¹æ¡ˆã€‘è§£å†³ï¼Œä½†æ˜¯æˆ‘äº²æµ‹å¯¹æˆ‘æ²¡ç”¨ï¼Œç›´æ¥é‡å¯æå®š12E: æ— æ³•è·å¾—é” &#x2F;var&#x2F;lib&#x2F;dpkg&#x2F;lock - open (11: èµ„æºæš‚æ—¶ä¸å¯ç”¨)E: æ— æ³•é”å®šç®¡ç†ç›®å½•(&#x2F;var&#x2F;lib&#x2F;dpkg&#x2F;)ï¼Œæ˜¯å¦æœ‰å…¶ä»–è¿›ç¨‹æ­£å ç”¨å®ƒï¼Ÿ è¿›å…¥å®¶ç›®å½•ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè¿™é‡Œä»¥lxfä¸ºä¾‹12cd ~mkdir lxf ä¸‹è½½æ‰€éœ€æºç 1234// ä¸‹è½½nginx-rtmpæºç wget https://github.com/arut/nginx-rtmp-module/archive/master.zip// ä¿®æ”¹å‹ç¼©åŒ…çš„åå­—mv master.zip module.zip 12// ä¸‹è½½nginxwget https://github.com/nginx/nginx/archive/master.zip 12// ä¸‹è½½nginxçš„ä¾èµ–pcreæºç wget ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.39.tar.gz ä¸‹è½½å®Œæˆä¹‹åä½¿ç”¨unzipå‘½ä»¤è¿›è¡Œè§£å‹123unzip master.zip unzip module.ziptar -zxvf pcre-8.39.tar.gzé…ç½®ç¼–è¯‘æ–‡ä»¶ï¼Œå‡†å¤‡ç¼–è¯‘å®‰è£…12// å…ˆè¿›å…¥nginx-masterç›®å½•cd nginx-master/åœ¨nginx-masterç›®å½•ä¸‹æœ‰ä¸€ä¸ªautoæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªåä¸ºconfigureçš„é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å…ˆæ¥\bé€šè¿‡å®ƒè¿›è¡Œä¸€äº›é…ç½®123// prefix:æŒ‡å®šå®‰è£…ç›®å½•// add-module:æŒ‡å®šæ¨¡å—æ–‡ä»¶å¤¹auto/configure --prefix=/usr/local/nginx --with-pcre=../pcre-8.39 --with-http_ssl_module --with-http_v2_module --with-http_flv_module --with-http_mp4_module --add-module=../nginx-rtmp-module-master/é…ç½®å¥½ä¹‹åä¼šå¤šå‡ºä¸€ä¸ªMakefileæ–‡ä»¶(ä¸€ç§é…ç½®æ–‡ä»¶ï¼Œå®šä¹‰äº†ä¸€ç³»åˆ—çš„è§„åˆ™æ¥æŒ‡å®šç¼–è¯‘æ“ä½œ)ä¸objsæ–‡ä»¶å¤¹ 1234// ç¼–è¯‘make// å®‰è£…sudo make install å½“ä½ makeåï¼Œçœ‹åˆ°åˆ™\bä»£è¡¨ç¼–è¯‘æˆåŠŸå†æ‰§è¡Œã€sudo make installã€‘ï¼Œçœ‹åˆ°è¿™ä¸ªåˆ™ä»£è¡¨å®‰è£…å®Œæˆ ç°åœ¨æˆ‘ä»¬å»æµ‹è¯•ä¸€ä¸‹12 cd /usr/local/nginx/sbin/sudo ./nginx -tçœ‹åˆ°successfulè¯´æ˜é…ç½®æ–‡ä»¶æ­£ç¡®ï¼ï¼Œå¦‚æœæ˜¯failedçš„è¯çœ‹çœ‹ä½ æ˜¯ä¸æ˜¯æ²¡åŠ sudo å¯åŠ¨nginxæœåŠ¡å™¨1sudo ./nginxé»˜è®¤ç«¯å£æ˜¯80ï¼Œæ‰€ä»¥ç›´æ¥åˆ°æµè§ˆå™¨ä¸­ç›´æ¥æ•²å…¥æœ¬åœ°åœ°å€ 127.0.0.1ï¼Œæ˜¾ç¤ºã€Welcome to nginx!ã€‘å°±ä»£è¡¨nginxå·²ç»æˆåŠŸå®‰è£… é…ç½®nginxåˆ›å»ºæ¨æµå­˜æ”¾æ–‡ä»¶å¤¹123&#x2F;&#x2F; ä¸ºé‡Œä»¥ &#x2F;usr&#x2F;local&#x2F;var&#x2F;www&#x2F;hls ä¸ºä¾‹cd &#x2F;usr&#x2F;localsudo mkdir -p var&#x2F;www&#x2F;hlsè¿›å…¥nginxçš„confç›®å½•ï¼Œä½¿ç”¨vimç¼–è¾‘nginx.confæ–‡ä»¶12cd /usr/local/nginx/confsudo vim nginx.confé…ç½®Nginxï¼Œæ”¯æŒhttpåè®®æ‹‰æµ12345678location /hls &#123; types &#123; application/vnd.apple.mpegurl m3u8; video/mp2t ts; &#125; root /usr/local/var/www; add_header Cache-Control no-cache;&#125; é…ç½®Nginxï¼Œæ”¯æŒrtmpåè®®æ¨æµ123456789101112131415rtmp &#123; server &#123; listen 1935; application rtmplive &#123; live on; max_connections 1024; &#125; application hls&#123; live on; hls on; hls_path /usr/local/var/www/hls; hls_fragment 1s; &#125; &#125;&#125; é‡å¯nginxæœåŠ¡å™¨12cd /usr/local/nginx/sbin/sudo ./nginx -s reload å¦‚æœæ‰§è¡Œã€sudo ./nginx -s reloadã€‘å‡ºç°ä¸‹é¢è¿™ä¸ªé—®é¢˜1nginx: [error] open() \"/usr/local/nginx/logs/nginx.pid\" failed (2: No such file or directory)å°±ä½¿ç”¨nginx -cçš„å‚æ•°æŒ‡å®šnginx.confæ–‡ä»¶çš„ä½ç½®ï¼Œæ¥ç€å†reloadä¸€ä¸‹å°±å¥½äº†1sudo /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf æˆ‘Ubuntuåœ°å€ä¸º192.168.123.191 æ¨æµè‡³RTMPåˆ°æœåŠ¡å™¨ rtmp://192.168.123.191:1935/rtmplive/lxf1ffmpeg -re -i å¼‚å½¢.å¥‘çº¦.mp4 -vcodec libx264 -vprofile baseline -acodec aac -ar 44100 -strict -2 -ac 1 -f flv -s 1280x720 -q 10 rtmp:&#x2F;&#x2F;192.168.123.191:1935&#x2F;rtmplive&#x2F;lxfæ¨æµè‡³HLSåˆ°æœåŠ¡å™¨ http://192.168.123.191/hls/lxf.m3u81ffmpeg -re -i å¼‚å½¢.å¥‘çº¦.mp4 -vcodec libx264 -vprofile baseline -acodec aac -ar 44100 -strict -2 -ac 1 -f flv -s 1280x720 -q 10 rtmp:&#x2F;&#x2F;192.168.123.191:1935&#x2F;hls&#x2F;lxf å¦‚æœå‡ºç°å¦‚ä¸‹é”™è¯¯è¯´æ˜ä½ çš„ç”µè„‘æ²¡å®‰è£…ffmpeg1-bash: ffmpeg: command not foundä½¿ç”¨Homebrewæ¥å®‰è£…FFmpeg1234// å®‰è£…Homebrewruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"// å®‰è£…FFmpegbrew install ffmpeg å¼€å§‹æ¨æµï¼Œç»ˆç«¯ä¸Šå°±å¼€å§‹ä¸æ–­çš„åˆ·æ–°æ¨æµä¿¡æ¯ æˆ‘ä»¬å¯ä»¥ç”¨ç”µè„‘ä¸Šçš„VLCè¿™ä¸ªè½¯ä»¶æ¥æµ‹è¯•æ˜¯å¦æ¨æµæˆåŠŸ OKï¼Œrmtpæ‰“å¼€æ­£å¸¸ï¼Œhlså°±ä¸æ¼”ç¤ºäº†ï¼Œä¸€æ ·çš„","categories":[{"name":"Linux","slug":"Linux","permalink":"http://linxunfeng.top/categories/Linux/"}],"tags":[{"name":"Ubuntu","slug":"Ubuntu","permalink":"http://linxunfeng.top/tags/Ubuntu/"},{"name":"Linux","slug":"Linux","permalink":"http://linxunfeng.top/tags/Linux/"}]},{"title":"iOS-ç»™é«˜ä»¿å¾®ä¿¡æ·»åŠ ç›´æ’­èŠå¤©åŠŸèƒ½","slug":"iOS-ç»™é«˜ä»¿å¾®ä¿¡æ·»åŠ ç›´æ’­èŠå¤©åŠŸèƒ½","date":"2017-09-12T09:47:36.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2017/09/12/iOS-ç»™é«˜ä»¿å¾®ä¿¡æ·»åŠ ç›´æ’­èŠå¤©åŠŸèƒ½/","link":"","permalink":"http://linxunfeng.top/2017/09/12/iOS-%E7%BB%99%E9%AB%98%E4%BB%BF%E5%BE%AE%E4%BF%A1%E6%B7%BB%E5%8A%A0%E7%9B%B4%E6%92%AD%E8%81%8A%E5%A4%A9%E5%8A%9F%E8%83%BD/","excerpt":"æŠ½ç©ºç»™ä¹‹å‰åšçš„å¼€æºé¡¹ç›®ã€\bé«˜ä»¿å¾®ä¿¡ã€‘æ·»åŠ ç›´æ’­åŠŸèƒ½ï¼Œç”±äºæ—¶é—´æœ‰é™ï¼Œåšå¾—ä¸æ˜¯å¾ˆå®Œç¾ï¼Œæœ‰ç©ºå†å»å®Œå–„å§ï¼Œèƒ½ç”¨å°±å¥½~~ +","text":"æŠ½ç©ºç»™ä¹‹å‰åšçš„å¼€æºé¡¹ç›®ã€\bé«˜ä»¿å¾®ä¿¡ã€‘æ·»åŠ ç›´æ’­åŠŸèƒ½ï¼Œç”±äºæ—¶é—´æœ‰é™ï¼Œåšå¾—ä¸æ˜¯å¾ˆå®Œç¾ï¼Œæœ‰ç©ºå†å»å®Œå–„å§ï¼Œèƒ½ç”¨å°±å¥½~~ + æŠ½ç©ºç»™ä¹‹å‰åšçš„å¼€æºé¡¹ç›®ã€\bé«˜ä»¿å¾®ä¿¡ã€‘æ·»åŠ ç›´æ’­åŠŸèƒ½ï¼Œç”±äºæ—¶é—´æœ‰é™ï¼Œåšå¾—ä¸æ˜¯å¾ˆå®Œç¾ï¼Œæœ‰ç©ºå†å»å®Œå–„å§ï¼Œèƒ½ç”¨å°±å¥½~~ åœ¨æ­¤æä¾›å­˜æ”¾äºç™¾åº¦äº‘çš„å®Œæ•´é¡¹ç›®ã€\bé«˜ä»¿å¾®ä¿¡ã€‘- ç™¾åº¦äº‘å¸Œæœ›å„ä½èƒ½åœ¨æˆ‘çš„GitHubä¸ŠçŒ®å‡ºä¸€ä¸ªå®è´µçš„Star ã€\bé«˜ä»¿å¾®ä¿¡ã€‘- GitHubè°¢è°¢ æ³¨æ„ï¼šç›´æ’­åŠŸèƒ½çš„ä½¿ç”¨ï¼ˆå¯¹æ–¹éœ€è¦å…ˆè¿›å…¥åˆ°å¯¹åº”çš„èŠå¤©ç•Œé¢ï¼‰ ä¸¤ä¸ªæµ‹è¯•è´¦å·ï¼š lxf lqr å¯†ç éƒ½æ˜¯123456 æ¨æµé¦–å…ˆç¬¬ä¸€ä»¶äº‹\bå½“ç„¶å°±æ˜¯æ­å»ºä¸€ä¸ªæ¨æµæœåŠ¡å™¨ï¼Œ\bè¿™é‡Œè¯·è·³è½¬å‚è€ƒæˆ‘ä¹‹å‰å†™å¥½çš„æ–‡ç« å§ã€Ubuntuå®‰è£…nginxæ¥æ­å»ºæ¨æµæœåŠ¡å™¨ã€‘ï¼Œè¿™é‡Œæˆ‘çš„æœåŠ¡å™¨çš„ipåœ°å€æ˜¯ï¼š192.168.123.191 APPä¸Šæ¨æµæˆ‘ä½¿ç”¨çš„æ˜¯ç¬¬ä¸‰æ–¹çš„åº“ LFLiveKitï¼Œè¿™ä¸ªç¬¬ä¸‰æ–¹åº“å·²ç»å¸®æˆ‘ä»¬å¤„ç†äº†å¾ˆå¤šäº‹æƒ…ï¼Œè€Œä¸”è¿˜åŒ…æ‹¬ç¾é¢œ~~ã€‚å½“ç„¶ï¼Œæœ‰æ—¶é—´æˆ‘ä»¬è¿˜æ˜¯è¦å»äº†è§£ä¸€ä¸‹åº•å±‚çš„ä¸œè¥¿ï¼Œè¿™é‡Œå°±å…ˆä¸èµ˜è¿°ï¼Œè¿‡å‡ å¤©æŠ½ç©ºå†åšæ€»ç»“ã€‚ å…³é”®ä»£ç å¦‚ä¸‹ 123456789// åˆå§‹åŒ–é…ç½®let audioConfiguration = LFLiveAudioConfiguration.default()let videoConfiguration = LFLiveVideoConfiguration.defaultConfiguration(for: .low2, outputImageOrientation: .portrait)// åˆå§‹åŒ–sessionlet session = LFLiveSession(audioConfiguration: audioConfiguration, videoConfiguration: videoConfiguration)// è®¾ç½®ä»£ç†// session?.delegate = self// è®¾ç½®å±•ç¤ºçš„Viewsession?.preView = self.view 12345let stream = LFLiveStreamInfo()stream.url = \"rtmp://192.168.123.191:1935/rtmplive/lxf\"; // æœåŠ¡å™¨åœ°å€session.startLive(stream)// å¼€å§‹æ¨æµsession.running = true æ‹‰æµè¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯Bç«™çš„å¼€æºåº“ ijkplayer ä¸ºäº†æ–¹ä¾¿å¯ä»¥ç”¨è¿™ä¸ª ç¼–è¯‘å¥½çš„Bç«™å¼€æºåº“ éœ€è¦æ³¨æ„çš„æ˜¯ï¼šIJKPlayeré»˜è®¤ä½¿ç”¨çš„æ˜¯è½¯è§£ç (FFMpeng)ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ç¡¬è§£ç éœ€è¦æˆ‘ä»¬è¿›è¡Œç›¸åº”çš„è®¾ç½®123456789101112// è®¾ç½®\"videotoolbox\"çš„å€¼ä¸º0ä¸ºè½¯è§£ç (é»˜è®¤)ï¼Œè®¾ç½®ä¸º1åˆ™æ˜¯ç¡¬è§£ç let options = IJKFFOptions.byDefault()options?.setOptionIntValue(1, forKey: \"videotoolbox\", of: kIJKFFOptionCategoryPlayer)let ijkPlayer = IJKFFMoviePlayerController(contentURLString: \"rtmp://192.168.123.191:1935/rtmplive/lxf\", with: options)// éœ€ä¿å­˜èµ·æ¥self.ijkPlayer = ijkPlayerijkPlayer?.view.frame = view.boundsview.addSubview(ijkPlayer!.view)// å‡†å¤‡æ’­æ”¾ï¼Œå½“è§†é¢‘å‡†å¤‡å¥½çš„æ—¶å€™ä¼šè‡ªåŠ¨è¿›è¡Œæ’­æ”¾ijkPlayer?.prepareToPlay() å°†IJKPlayeræ‰“åŒ…ä»Bç«™çš„gitHubä¸Šä¸‹è½½çš„ ijkplayer éœ€è¦æ‰‹åŠ¨ç¼–è¯‘å‡ºæ¥ï¼Œè·Ÿç€è¯´æ˜èµ°å°±å¯ä»¥äº†ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°å’¯ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å®ƒæ‰“åŒ…ï¼Œæ–¹ä¾¿ä½¿ç”¨ å¦‚æœä½ ä¸è·Ÿç€è¯´æ˜èµ°çš„è¯ä¼šæç¤ºæ‰¾ä¸åˆ° avformat.h è¿™ä¸ªå¤´æ–‡ä»¶ è¿™æ—¶ä½ éœ€è¦åœ¨ç»ˆç«¯cdåˆ°ijkplayerè¿™ä¸ªç›®å½•ï¼Œç„¶åæ‰§è¡Œ init-ios.shæ–‡ä»¶ï¼Œå¦‚å›¾ ç„¶åç»è¿‡ä¸€æ®µæ¼«é•¿çš„æ—¶é—´ä¹‹åï¼Œåœ¨iosç›®å½•ä¸‹å°±å¤šå‡ºäº†è¿™äº›ffmpegç›¸å…³çš„ç›®å½• è¿™ä¸ªæ“ä½œæ˜¯åœ¨ä¸‹è½½ffmpegæºç ï¼Œç„¶ç¼ºå¤±çš„avformat.hå°±åœ¨é‡Œé¢ æ‰“å¼€é¡¹ç›® IJKMediaPlayer è®¾ç½®ä¸º releaseï¼Œè¿™æ ·æ‰“å‡ºæ¥çš„åŒ…ä¼šå°äº› é€‰æ‹©çœŸæœºå’Œæ¨¡æ‹Ÿå™¨ï¼Œå„Command+Bç¼–è¯‘ä¸€æ¬¡ å³å‡»ï¼ŒShow in Finder å¦‚å›¾ï¼Œå°±æœ‰ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œé‡Œé¢å­˜æ”¾ç€çš„å°±æ˜¯æˆ‘ä»¬ç¼–è¯‘å‡ºæ¥çš„åº“ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ä¿¡æ¯1lipo -info IJKMediaFrameworké»˜è®¤æ¨¡æ‹Ÿå™¨ç¼–è¯‘å‡ºæ¥çš„åŒ…æ˜¯ä¸æ”¯æŒi386ï¼Œå¦‚æœå¸Œæœ›æ”¯æŒçš„è¯è¿›å…¥é¡¹ç›®çš„ Build Settingsï¼Œå°† Build Active Architecture Only è®¾ç½®ä¸ºNO å¥½ï¼Œç°åœ¨å¯¹ç¼–è¯‘å‡ºæ¥çš„åŒ…è¿›è¡Œåˆå¹¶ï¼Œè¿™æ ·å°±å³æ”¯æŒçœŸæœºï¼Œä¹Ÿæ”¯æŒæ¨¡æ‹Ÿå™¨1234// æ ¼å¼// lipo -create path1 path2 -output frameNamelipo -create Release-iphoneos/IJKMediaFramework.framework/IJKMediaFramework Release-iphonesimulator/IJKMediaFramework.framework/IJKMediaFramework -output IJKMediaFramework å°†åˆå¹¶å‡ºæ¥çš„IJKMediaFrameworkæ›¿æ¢ IJKMediaFramework.frameworkä¸­çš„IJKMediaFrameworkï¼Œæœ€åå°†æ›¿æ¢å¥½çš„ IJKMediaFramework.framework æ‹–å…¥åˆ°é¡¹ç›®ä¸­ä½¿ç”¨å³å¯ã€‚ æœ€åï¼Œé™„ä¸Šç¼–è¯‘å¥½çš„IJKMediaFrameworké“¾æ¥:https://pan.baidu.com/s/1eRYlJ7W å¯†ç :9iaw","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Swift","slug":"Swift","permalink":"http://linxunfeng.top/tags/Swift/"}]},{"title":"iOS-æ­éœ²Blockçš„å†…éƒ¨å®ç°åŸç†","slug":"iOS-æ­éœ²Blockçš„å†…éƒ¨å®ç°åŸç†","date":"2017-09-12T09:42:47.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2017/09/12/iOS-æ­éœ²Blockçš„å†…éƒ¨å®ç°åŸç†/","link":"","permalink":"http://linxunfeng.top/2017/09/12/iOS-%E6%8F%AD%E9%9C%B2Block%E7%9A%84%E5%86%85%E9%83%A8%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/","excerpt":"æƒ³å¿…å¤§å®¶å¯¹blockéƒ½å¾ˆç†Ÿæ‚‰äº†ï¼Œ\bè™½ç„¶éƒ½ä¼šç”¨ï¼Œä½†æ˜¯ä½ çœŸçš„çŸ¥é“å®ƒçš„åŸç†å—ï¼Ÿæ¯”å¦‚ä¸ºä»€ä¹ˆè¦åŠ ä¸Š__blockï¼Œè¿™ä¸ªä¿®é¥°ç¬¦åˆ°åº•æœ‰ä»€ä¹ˆç”¨ï¼Ÿä¸åŠ ä¼šæœ‰ä»€ä¹ˆåæœï¼Ÿblockåˆæ˜¯å¦‚ä½•å®ç°çš„ç­‰ç­‰ã€‚ã€‚ã€‚è¯¥ç¯‡æ–‡ç« å°±ä¸ºå¤§å®¶æ­æ™“å…³äºBlockçš„å®ç°åŸç†~ +","text":"æƒ³å¿…å¤§å®¶å¯¹blockéƒ½å¾ˆç†Ÿæ‚‰äº†ï¼Œ\bè™½ç„¶éƒ½ä¼šç”¨ï¼Œä½†æ˜¯ä½ çœŸçš„çŸ¥é“å®ƒçš„åŸç†å—ï¼Ÿæ¯”å¦‚ä¸ºä»€ä¹ˆè¦åŠ ä¸Š__blockï¼Œè¿™ä¸ªä¿®é¥°ç¬¦åˆ°åº•æœ‰ä»€ä¹ˆç”¨ï¼Ÿä¸åŠ ä¼šæœ‰ä»€ä¹ˆåæœï¼Ÿblockåˆæ˜¯å¦‚ä½•å®ç°çš„ç­‰ç­‰ã€‚ã€‚ã€‚è¯¥ç¯‡æ–‡ç« å°±ä¸ºå¤§å®¶æ­æ™“å…³äºBlockçš„å®ç°åŸç†~ + æƒ³å¿…å¤§å®¶å¯¹blockéƒ½å¾ˆç†Ÿæ‚‰äº†ï¼Œ\bè™½ç„¶éƒ½ä¼šç”¨ï¼Œä½†æ˜¯ä½ çœŸçš„çŸ¥é“å®ƒçš„åŸç†å—ï¼Ÿæ¯”å¦‚ä¸ºä»€ä¹ˆè¦åŠ ä¸Š__blockï¼Œè¿™ä¸ªä¿®é¥°ç¬¦åˆ°åº•æœ‰ä»€ä¹ˆç”¨ï¼Ÿä¸åŠ ä¼šæœ‰ä»€ä¹ˆåæœï¼Ÿblockåˆæ˜¯å¦‚ä½•å®ç°çš„ç­‰ç­‰ã€‚ã€‚ã€‚è¯¥ç¯‡æ–‡ç« å°±ä¸ºå¤§å®¶æ­æ™“å…³äºBlockçš„å®ç°åŸç†~ æŠ›ç –å¼•ç‰å…ˆç»™å‡ºé—®é¢˜ï¼Œå¤§å®¶æ€è€ƒä¸‹ç»“æœå§ï¼Œå¦‚æœåˆ†åˆ«è°ƒç”¨ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼Œç»“æœå¦‚ä½•ï¼Ÿ123456789void blockFunc1()&#123; int num = 100; void (^block)() = ^&#123; NSLog(@\"num equal %d\", num); &#125;; num = 200; block();&#125;123456789void blockFunc2()&#123; __block int num = 100; void (^block)() = ^&#123; NSLog(@\"num equal %d\", num); &#125;; num = 200; block();&#125;ç­”æ¡ˆæ˜¯12blockFunc1 : num equal 100blockFunc2 : num equal 200æ˜¯ä¸æ˜¯æœ‰äººç­”é”™äº†ï¼Ÿå†æ¥ä¸¤ä¸ªå‡½æ•°ã€‚è¿™ä¸¤ä¸ªçš„ç»“æœä¸blockFunc2ä¸€æ ·ï¼Œæ‰“å°å‡ºæ¥çš„ num ä¸º 20012345678910// å…¨å±€å˜é‡int num = 100;void blockFunc3()&#123; void (^block)() = ^&#123; NSLog(@\"num equal %d\", num); &#125;; num = 200; block();&#125;123456789void blockFunc4()&#123; static int num = 100; void (^block)() = ^&#123; NSLog(@\"num equal %d\", num); &#125;; num = 200; block();&#125; ç–‘é—®ï¼šæˆ‘ä»¬å‘ç°numåšä¸ºå±€éƒ¨å˜é‡æ—¶åŠ ä¸Š _ _block ä¿®é¥°ç¬¦ã€numåšä¸ºå…¨å±€å˜é‡ä»¥åŠnumä¸ºé™æ€å±€éƒ¨å˜é‡æ—¶åœ¨blockä¸­è¾“å‡ºç»“æœæ˜¯ä¸€æ ·çš„ï¼Œçš†ä¸ºè¢«ä¿®æ”¹ä¹‹åçš„å€¼ï¼Œè€Œåšä¸ºå±€éƒ¨å˜é‡å¹¶ä¸”æœªåŠ ä¸Š__blockçš„numåœ¨blockä¸­è¾“å‡ºçš„å€¼å´è¿˜æ˜¯æœªèµ‹å€¼ä¹‹å‰çš„å€¼ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæ¢ç´¢è¿™ä¸ªé—®é¢˜æˆ‘ä»¬å°±éœ€è¦çœ‹çœ‹åº•å±‚ç»“æ„æ˜¯å¦‚ä½•å®ç°çš„äº† æ¢ç´¢å†…éƒ¨åŸç†Objective-Cæ˜¯ä¸€ä¸ªå…¨åŠ¨æ€è¯­è¨€ï¼Œå®ƒçš„ä¸€åˆ‡éƒ½æ˜¯åŸºäºruntimeå®ç°çš„ï¼åœ¨è¿è¡Œæ—¶ä¼šå°†OCè½¬æ¢æˆCï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ¥æŸ¥çœ‹å…³äºblockåœ¨å†…éƒ¨æ˜¯å¦‚ä½•å®ç°çš„æ–°å»ºä¸€ä¸ªCommand Line Toolé¡¹ç›®ï¼Œå°†ä»¥ä¸Šä»£ç æ”¾å…¥main.mä¸­ï¼Œå¦‚å›¾ è¿™é‡Œæˆ‘ä»¬æ‰“å¼€ç»ˆç«¯ï¼Œcdåˆ°é¡¹ç›®ç›®å½•ä¸‹ï¼Œç„¶åå°†ç”¨ä¸‹é¢çš„å‘½ä»¤å°†OCé‡å†™ä¸ºC1clang -rewrite-objc main.m è¿™æ—¶æˆ‘ä»¬å¯ä»¥å‘ç°å½“å‰ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªmain.cppæ–‡ä»¶ï¼Œæ‰“å¼€å®ƒå¹¶æ»šåˆ°æœ€ä¸‹é¢ è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°blockFunc1çš„Cè¯­è¨€å®ç°æ–¹æ³• 1234567void blockFunc1()&#123; int num = 100; void (*block)() = ((void (*)())&amp;__blockFunc1_block_impl_0((void *)__blockFunc1_block_func_0, &amp;__blockFunc1_block_desc_0_DATA, num)); num = 200; ((void (*)(__block_impl *))((__block_impl *)block)-&gt;FuncPtr)((__block_impl *)block);&#125; å»æ‰ç±»å‹è½¬æ¢123456789void blockFunc1()&#123; int num = 100; // *************************é‡ç‚¹å¥*********************** void (*block)() = &amp;__blockFunc1_block_impl_0(__blockFunc1_block_func_0, &amp;__blockFunc1_block_desc_0_DATA, num)); // ***************************************************** num = 200; ((void (*)(__block_impl *))((__block_impl *)block)-&gt;FuncPtr)((__block_impl *)block);&#125;è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° blockå®é™…ä¸Šæ˜¯æŒ‡å‘ç»“æ„ä½“çš„æŒ‡é’ˆ è¯¥ç»“æ„ä½“ä¸º æˆ‘ä»¬æ¥çœ‹ä¸‹å¸¦__blockçš„blockFunc2 åœ¨ blockFunc1 ä¸­ï¼ŒblockæŒ‡å‘äº†ä¸€ä¸ªåä¸ºblockFunc1_block_impl_0çš„ç»“æ„ä½“ï¼Œå¹¶ä¸”åœ¨åˆå§‹åŒ–æ—¶è¾“å…¥äº†ä¸‰ä¸ªå‚æ•°(blockFunc1_block_impl_0æœ€åçš„flagsæœ‰é»˜è®¤å‚æ•°ï¼Œæ‰€ä»¥å¯ä»¥ä¸ç”¨ä¼ å‚)ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°å°±æ˜¯æˆ‘ä»¬å†™çš„numï¼Œä¸blockFunc2ç›¸æ¯”è¾ƒï¼Œè¿™é‡Œçš„numå¹¶æ²¡æœ‰å¸¦*å·ï¼Œæ‰€ä»¥è¯´åœ¨è¿™é‡Œå®ƒåªæ˜¯ä¼ å€¼è€Œéä¼ å€ï¼Œè€Œä¸‹é¢çš„ã€num = 200;ã€‘ä¹Ÿå°±æ²¡ä»€ä¹ˆåµç”¨äº†ã€‚è¿™å°±æ˜¯blockFunc2ã€blockFunc3ä¸blockFunc4ä¸ºä»€ä¹ˆèƒ½æ‰“å°å‡ºnumæ”¹å˜åçš„å€¼ï¼Œè€ŒblockFunc1ä¸è¡Œçš„åŸå› ã€‚ åœ¨è¿™é‡Œæˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹å‡ºï¼š ç¼–è¯‘å™¨ä¼šå°†blockçš„å†…éƒ¨ä»£ç ç”Ÿæˆå¯¹åº”çš„å‡½æ•° SO æˆ‘ä»¬æ€»ç»“ä¸‹ï¼Œblockåœ¨å†…éƒ¨ä¼šä½œä¸ºä¸€ä¸ªæŒ‡å‘ç»“æ„ä½“çš„æŒ‡é’ˆï¼Œå½“è°ƒç”¨blockçš„æ—¶å€™å…¶å®å°±æ˜¯æ ¹æ®blockå¯¹\båº”çš„æŒ‡é’ˆæ‰¾åˆ°ç›¸åº”çš„å‡½æ•°ï¼Œè¿›è€Œè¿›è¡Œè°ƒç”¨ï¼Œå¹¶ä¼ å…¥è‡ªèº« __blockçš„å®ç°æˆ‘ä»¬å†æ¥çœ‹çœ‹ _ blockï¼Œ _blockä¹Ÿè¢«è½¬æ¢æˆäº†ç»“æ„ä½“ï¼Œå¹¶å«æœ‰5ä¸ªå˜é‡1234567struct __Block_byref_num_0 &#123; void *__isa; &#x2F;&#x2F; isaæŒ‡é’ˆ__Block_byref_num_0 *__forwarding; &#x2F;&#x2F; å®ä¾‹æœ¬èº« int __flags; int __size; int num; &#x2F;&#x2F; æˆ‘ä»¬çš„numå€¼&#125;; å›¾ç‰‡å¯¹åº”ç€blockFunc2ä¸­çš„ 1__block int num &#x3D; 100; å½“åˆ›å»ºnumå¹¶ç”¨blockä¿®é¥°çš„æ—¶å€™ï¼Œä¼šåˆå§‹åŒ–è¿™äº”ä¸ªå˜é‡å½“æˆ‘ä»¬æ‰§è¡Œ1num &#x3D; 200;å¯¹åº”ç€1(num.__forwarding-&gt;num) &#x3D; 200;ä¸Šé¢åˆšåˆšæåˆ°è¿‡ _ _forwardingæ˜¯å®ä¾‹æœ¬èº«ï¼Œ\bå³ç±»å‹ç»“æ„ä½“Block_byref_num_0çš„&amp;numï¼Œå†æ‰¾åˆ°å¯¹åº”çš„numå˜é‡ï¼Œå°†å…¶åŸæ¥çš„100ä¿®æ”¹ä¸º200~~ åˆ°æ­¤ï¼Œå…³äºBlockå†…éƒ¨å®ç°çš„æ­æ™“ä¹Ÿå°±åˆ°æ­¤ç»“æŸäº†ï¼Œå¸Œæœ›æœ¬æ–‡èƒ½è®©ä½ å¯¹blockæœ‰æ›´æ·±çš„ç†è§£ï¼Œæ„Ÿè°¢ä½ è€å¿ƒçš„é˜…è¯»ï¼","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Objective-C","slug":"Objective-C","permalink":"http://linxunfeng.top/tags/Objective-C/"}]},{"title":"iOS-Swifté¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰","slug":"iOS-Swift-é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰","date":"2017-09-12T09:32:49.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2017/09/12/iOS-Swift-é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰/","link":"","permalink":"http://linxunfeng.top/2017/09/12/iOS-Swift-%E9%9D%A2%E5%90%91%E5%8D%8F%E8%AE%AE%E7%BC%96%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89/","excerpt":"ä¸Šä¸€ç¯‡æ–‡ç« iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰ å·²ç»å¯¹Swiftçš„é¢å‘åè®®ç¼–ç¨‹åšäº†ä»‹ç»ï¼Œæ¥ä¸‹æ¥è¯¥ç¯‡æ–‡ç« å°†ä½¿ç”¨é¢å‘åè®®å¼€å‘(POP)æ¥åšä¸‹å®é™…çš„åº”ç”¨ +","text":"ä¸Šä¸€ç¯‡æ–‡ç« iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰ å·²ç»å¯¹Swiftçš„é¢å‘åè®®ç¼–ç¨‹åšäº†ä»‹ç»ï¼Œæ¥ä¸‹æ¥è¯¥ç¯‡æ–‡ç« å°†ä½¿ç”¨é¢å‘åè®®å¼€å‘(POP)æ¥åšä¸‹å®é™…çš„åº”ç”¨ + ä¸Šä¸€ç¯‡æ–‡ç« iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰ å·²ç»å¯¹Swiftçš„é¢å‘åè®®ç¼–ç¨‹åšäº†ä»‹ç»ï¼Œæ¥ä¸‹æ¥è¯¥ç¯‡æ–‡ç« å°†ä½¿ç”¨é¢å‘åè®®å¼€å‘(POP)æ¥åšä¸‹å®é™…çš„åº”ç”¨ åœ¨å®é™…å¼€å‘ä¸­ï¼Œè‡ªå®šä¹‰ViewåŸºæœ¬ä¸Šæ˜¯å¿…é¡»çš„ï¼Œç›¸ä¿¡è¿™å¯¹æˆ‘ä»¬æ¥è¯´éƒ½æ˜¯æ¯”è¾ƒç®€å•ï¼Œä¸è¿‡æˆ‘ä»¬è¿˜æ˜¯æ¥å›é¡¾ä¸€ä¸‹ä¸‹~ é¢å‘å¯¹è±¡å¼€å‘1 æ–°å»ºä¸€ä¸ªUIViewçš„FirstTypeView 2 åˆ›å»ºä¸€ä¸ªViewçš„xibæ–‡ä»¶3 è®¾ç½®xibå¯¹åº”çš„classè¿›è¡Œç»‘å®š 4 åœ¨FirstTypeView.swift ä¸­å®ç°ä¸€ä¸ªç±»æ–¹æ³•ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¤–éƒ¨ç”¨xibæ¥åˆå§‹åŒ–FirstTypeView1234567891011import UIKitclass FirstTypeView: UIView &#123; &#125;extension FirstTypeView &#123; class func loadFromNib() -&gt; FirstTypeView &#123; return Bundle.main.loadNibNamed(\"\\(self)\", owner: nil, options: nil)?.first as! FirstTypeView &#125;&#125;åœ¨å¤–éƒ¨åªè¦è°ƒç”¨FirstTypeViewçš„loadFromNibæ–¹æ³•å°±å¯ä»¥åˆå§‹åŒ–ä¸€ä¸ªViewæ¥ä½¿ç”¨äº†ã€‚å¥½ï¼Œç°åœ¨åˆæœ‰ä¸€ä¸ªç±»SecondTypeViewï¼Œä¹Ÿæ˜¯è¦æ±‚ä½¿ç”¨xibæ¥åˆå§‹åŒ–viewã€‚è¿™æ—¶æˆ‘ä»¬å°±ä¼šæƒ³ï¼Œä¸€æ ·çš„åŠ è½½xibçš„æ–¹æ³•ï¼Œé‚£æˆ‘ä»¬å°±æŠŠå®ƒæŠ½å–å‡ºæ¥æ”¾åˆ°çˆ¶ç±»å°±å¯ä»¥äº†ã€‚è¿™é‡Œçš„çˆ¶ç±»ä»¥BaseView.swiftä¸ºä¾‹çˆ¶ç±»çš„ä¸»è¦å®ç°ä»£ç 12345extension BaseView &#123; class func loadFromNib() -&gt; BaseView &#123; return Bundle.main.loadNibNamed(\"\\(self)\", owner: nil, options: nil)?.first as! BaseView &#125;&#125;é‚£æˆ‘ä»¬çš„FirstTypeViewå’ŒSecondTypeViewåªéœ€è¦ç›´æ¥ç»§æ‰¿äºBaseViewå°±å¯ä»¥äº†ï¼Œåœ¨å…¶å®ƒåœ°æ–¹åˆå§‹åŒ–viewä¹Ÿå¾ˆæ–¹ä¾¿12345let firstView &#x3D; FirstTypeView.loadFromNib()view.addSubview(firstView)let secondView &#x3D; SecondTypeView.loadFromNib()view.addSubview(secondView)å¥½ï¼Œç°åœ¨FirstTypeViewé‡Œå£°æ˜äº†ä¸€ä¸ªå±æ€§nameï¼ŒSecondTypeViewå£°æ˜çš„å±æ€§ä¸ºageï¼Œå‡å¦‚æˆ‘ä»¬ç°åœ¨è¦ä½¿ç”¨å„è‡ªå¯¹åº”çš„å±æ€§ï¼Œè¿™æ—¶æ˜¯ç›´æ¥ç‚¹ä¸å‡ºæ¥çš„ï¼Œéœ€è¦å…ˆè¿›è¡Œå¼ºè½¬1234567let firstView = FirstTypeView.loadFromNib() as! FirstTypeViewfirstView.name = \"LXF\"view.addSubview(firstView)let secondView = SecondTypeView.loadFromNib() as! SecondTypeViewsecondView.age = 100view.addSubview(secondView) ä½†æ˜¯è¿™æ ·è§‰å¾—ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œè¿˜éœ€è¦è¿›è¡Œå¼ºè½¬ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½åœ¨BaseViewé‡Œé¢æå®šå®ƒå‘¢ï¼Ÿå¦‚æœæ˜¯Swift 2.x çš„è¯æ˜¯å¯ä»¥çš„12345extension BaseView &#123; class func loadFromNib() -&gt; Self &#123; &#x2F;&#x2F; æ³¨æ„è¿™é‡Œæ˜¯å¤§å†™çš„S return Bundle.main.loadNibNamed(&quot;\\(self)&quot;, owner: nil, options: nil)?.first as! Self &#125;&#125;ä½†æ˜¯ç°åœ¨Swift 3.0å·²ç»ä¸æ”¯æŒè¿™ç§å†™æ³•äº†ï¼Œä¼šæŠ¥é”™ã€‚è¿™ä¸ªæ—¶å€™å¦‚æœä½¿ç”¨é¢å‘åè®®çš„å¼€å‘å°±å¾ˆæ–¹ä¾¿äº†ã€‚ é¢å‘åè®®å¼€å‘ å°†BaseViewåˆ é™¤ï¼ŒFirstTypeViewå’ŒSecondTypeViewæ”¹å›ç»§æ‰¿äºUIView 1 æ–°å»ºä¸€ä¸ªSwiftæ–‡ä»¶ Nibloadable.swift 2 å®ç°åè®®æ–¹æ³• åè®®ä¸­ä¸å…è®¸å®šä¹‰ç±»æ–¹æ³•ï¼Œéœ€æ”¹ä¸ºé™æ€æ–¹æ³•1234567891011import UIKitprotocol Nibloadable &#123; &#125;extension Nibloadable &#123; static func loadFromNib() -&gt; Self &#123; return Bundle.main.loadNibNamed(&quot;\\(self)&quot;, owner: nil, options: nil)?.first as! Self &#125;&#125; 3 éµå®ˆåè®®123class SecondTypeView: UIView, Nibloadable &#123; var age: Int &#x3D; 10&#125; è¿™æ ·å°±å¯ä»¥äº†ï¼Œè€Œä¸”ä½ åœ¨è°ƒç”¨loadFromNibæ–¹æ³•æ—¶å¯ä»¥å‘ç°ï¼Œç±»å‹æ˜¯å¯¹åº”ä¸Šçš„ å¥½äº†ï¼Œé¢å‘åè®®å¼€å‘çš„åº”ç”¨å°±\bè®°å½•åˆ°è¿™é‡Œï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°å¤§å®¶ï¼ Demo","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Swift","slug":"Swift","permalink":"http://linxunfeng.top/tags/Swift/"}]},{"title":"iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰","slug":"iOS-Swift-é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰","date":"2017-09-12T09:30:29.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2017/09/12/iOS-Swift-é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰/","link":"","permalink":"http://linxunfeng.top/2017/09/12/iOS-Swift-%E9%9D%A2%E5%90%91%E5%8D%8F%E8%AE%AE%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89/","excerpt":"ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡å¼€å‘æ€ç»´æ–¹å¼æ˜¯å°†ç±»ä¸­å®ç°çš„ç›¸ä¼¼æ–¹æ³•æŠ½å–å‡ºæ¥ï¼Œæ¥ç€æ”¾å…¥ä¸€ä¸ªBaseç±»ï¼Œç„¶åç»§æ‰¿äºBaseç±»åå„ä¸ªç±»å³å¯æ‰¾æ‹¥æœ‰ç›¸åŒçš„æ–¹æ³•ï¼Œä¸ç”¨å†ä¸€ä¸ªä¸ªæ‰‹åŠ¨å®ç°ã€‚æ¯”å¦‚ï¼šä¸€ä¸ªPersonç±»ï¼Œä¸€ä¸ªDogç±»ï¼Œå®ƒä»¬éƒ½æ‹¥æœ‰æ–¹æ³•eatï¼Œé‚£ä¹ˆå°±å¯ä»¥æ–°å»ºä¸€ä¸ªAnimalç±»ï¼Œå°†eatæ–¹æ³•æŠ½å–å‡ºæ¥æ”¾å…¥å…¶ä¸­ï¼Œç„¶åå°†Personç±»å’ŒDogç±»éƒ½ç»§æ‰¿äºAnimalã€‚ä½†æ˜¯ï¼Œå¦‚æœç°åœ¨åˆæœ‰ä¸€ä¸ªRobotç±»ï¼Œä¹Ÿéœ€è¦æ‹¥æœ‰eatæ–¹æ³•ï¼Œè€Œæ­¤æ—¶ä¹Ÿå°†å…¶ç»§æ‰¿äºAnimalçš„è¯æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ï¼Œäºæ˜¯æˆ‘ä»¬å°±éœ€è¦è½¬æ¢æ€ç»´ï¼Œé¢å‘åè®®å¼€å‘~ +","text":"ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡å¼€å‘æ€ç»´æ–¹å¼æ˜¯å°†ç±»ä¸­å®ç°çš„ç›¸ä¼¼æ–¹æ³•æŠ½å–å‡ºæ¥ï¼Œæ¥ç€æ”¾å…¥ä¸€ä¸ªBaseç±»ï¼Œç„¶åç»§æ‰¿äºBaseç±»åå„ä¸ªç±»å³å¯æ‰¾æ‹¥æœ‰ç›¸åŒçš„æ–¹æ³•ï¼Œä¸ç”¨å†ä¸€ä¸ªä¸ªæ‰‹åŠ¨å®ç°ã€‚æ¯”å¦‚ï¼šä¸€ä¸ªPersonç±»ï¼Œä¸€ä¸ªDogç±»ï¼Œå®ƒä»¬éƒ½æ‹¥æœ‰æ–¹æ³•eatï¼Œé‚£ä¹ˆå°±å¯ä»¥æ–°å»ºä¸€ä¸ªAnimalç±»ï¼Œå°†eatæ–¹æ³•æŠ½å–å‡ºæ¥æ”¾å…¥å…¶ä¸­ï¼Œç„¶åå°†Personç±»å’ŒDogç±»éƒ½ç»§æ‰¿äºAnimalã€‚ä½†æ˜¯ï¼Œå¦‚æœç°åœ¨åˆæœ‰ä¸€ä¸ªRobotç±»ï¼Œä¹Ÿéœ€è¦æ‹¥æœ‰eatæ–¹æ³•ï¼Œè€Œæ­¤æ—¶ä¹Ÿå°†å…¶ç»§æ‰¿äºAnimalçš„è¯æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ï¼Œäºæ˜¯æˆ‘ä»¬å°±éœ€è¦è½¬æ¢æ€ç»´ï¼Œé¢å‘åè®®å¼€å‘~ + OCæ— æ³•åšåˆ°é¢å‘åè®®å¼€å‘ï¼Œè€ŒSwiftå¯ä»¥ï¼Œå› ä¸ºSwiftå¯ä»¥åšåˆ°åè®®æ–¹æ³•çš„å…·ä½“å®ç°ï¼Œè€ŒOCä¸è¡Œ é¢å‘å¯¹è±¡å¼€å‘ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡å¼€å‘æ€ç»´æ–¹å¼æ˜¯å°†ç±»ä¸­å®ç°çš„ç›¸ä¼¼æ–¹æ³•æŠ½å–å‡ºæ¥ï¼Œæ¥ç€æ”¾å…¥ä¸€ä¸ªBaseç±»ï¼Œç„¶åç»§æ‰¿äºBaseç±»åå„ä¸ªç±»å³å¯æ‰¾æ‹¥æœ‰ç›¸åŒçš„æ–¹æ³•ï¼Œä¸ç”¨å†ä¸€ä¸ªä¸ªæ‰‹åŠ¨å®ç°ã€‚æ¯”å¦‚ï¼šä¸€ä¸ªPersonç±»ï¼Œä¸€ä¸ªDogç±»ï¼Œå®ƒä»¬éƒ½æ‹¥æœ‰æ–¹æ³•eatï¼Œé‚£ä¹ˆå°±å¯ä»¥æ–°å»ºä¸€ä¸ªAnimalç±»ï¼Œå°†eatæ–¹æ³•æŠ½å–å‡ºæ¥æ”¾å…¥å…¶ä¸­ï¼Œç„¶åå°†Personç±»å’ŒDogç±»éƒ½ç»§æ‰¿äºAnimalã€‚ä½†æ˜¯ï¼Œå¦‚æœç°åœ¨åˆæœ‰ä¸€ä¸ªRobotç±»ï¼Œä¹Ÿéœ€è¦æ‹¥æœ‰eatæ–¹æ³•ï¼Œè€Œæ­¤æ—¶ä¹Ÿå°†å…¶ç»§æ‰¿äºAnimalçš„è¯æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ï¼Œäºæ˜¯æˆ‘ä»¬å°±éœ€è¦è½¬æ¢æ€ç»´ï¼Œé¢å‘åè®®å¼€å‘~ é¢å‘åè®®å¼€å‘é¢å‘åè®®å¼€å‘çš„æ ¸å¿ƒæ˜¯ï¼š æ¨¡å—åŒ–ï¼ˆç»„ä»¶åŒ–ï¼‰ æˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸‹åè®®çš„ä¸€èˆ¬ä½¿ç”¨ï¼Œæ–°å»ºä¸€ä¸ªSwiftæ–‡ä»¶LXFProtocol.swift12345import Foundationprotocol LXFProtocol &#123; func eat()&#125;æˆ‘ä»¬çš„Personç±»éµå®ˆåè®®LXFProtocolï¼Œéœ€è¦æˆ‘ä»¬å®ç°åè®®ä¸­çš„æ–¹æ³•ï¼Œå¦‚ï¼š12345class Person: NSObject, LXFProtocol &#123; func eat() &#123; &#x2F;&#x2F; &#125;&#125;é‚£æˆ‘ä»¬æ¯ä¸ªç±»éƒ½è¿™æ ·åšçš„è¯è·Ÿç›´æ¥å¤åˆ¶ç²˜è´´ä»£ç å¹¶æ²¡ä»€ä¹ˆä¸åŒ~~è€Œå¼€å¤´å·²ç»æåˆ°ä¸€ç‚¹ï¼š Swiftå¯ä»¥åšåˆ°åè®®æ–¹æ³•çš„å…·ä½“å®ç° \bé‚£ä¹ˆç°åœ¨ï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªSwiftæ–‡ä»¶Eatable.swiftï¼Œä»¥åŒºåˆ†LXFProtocol.swiftEatable.swiftä¸­çš„ä»£ç å®ç°å¦‚ä¸‹ï¼š1234567891011import Foundationprotocol Eatable &#123; &#x2F;&#x2F; å¯å£°æ˜å˜é‡&#125;extension Eatable &#123; func eat() &#123; &#x2F;&#x2F; å®ç°å…·ä½“çš„åŠŸèƒ½ &#125;&#125;æœ‰2ä¸ªæ³¨æ„ç‚¹ protocolä¸­å¯ä»¥å£°æ˜å˜é‡ï¼Œ\bæ–¹ä¾¿åœ¨åè®®æ–¹æ³•ä¸­ä½¿ç”¨ åè®®æ–¹æ³•çš„å…·ä½“å®ç°éœ€è¦åœ¨extensionä¸­æ¥å®ç° ä½¿Dogç±»éµå®ˆEatable123class Dog: NSObject, Eatable &#123;&#125;è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨å…¶å®ƒåœ°æ–¹è½»æ¾è°ƒç”¨dogçš„eatæ–¹æ³•ï¼ŒPersonç±»ä¸Robotç±»ä¹Ÿæ˜¯å¦‚æ³•ç‚®åˆ¶ è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡é¢å‘åè®®çš„æ–¹å¼ç»™ç±»å®šåˆ¶ä¸åŒçš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯æ¨¡å—åŒ–ã€‚å¯ä»¥å‘ç°Swiftçš„é¢å‘åè®®ç¼–ç¨‹è·Ÿc++çš„å¤šç»§æ‰¿å¾ˆç›¸ä¼¼ çº¦æŸç°åœ¨çš„è¿™ä¸ªEatableåè®®æ˜¯å¯ä»¥è¢«\bä»»æ„éµå®ˆçš„ï¼Œå¦‚æœæˆ‘ä»¬\bæœ‰è¿™ä¹ˆä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬åˆ›å»ºçš„åè®®åªæ˜¯è¢«UIViewControlleréµå®ˆï¼Œé‚£æˆ‘ä»¬è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿã€å½“ç„¶ï¼ŒEatableåè®®åªèƒ½è¢«UIViewControlleréµå®ˆå¾ˆæ‰¯æ·¡ï¼Œè¿™é‡Œåªæ˜¯ä¸¾ä¾‹ï¼Œä¸è¦å¤ªåœ¨æ„å’¯~~ã€‘ åœ¨ extension åé¢åŠ ä¸Šçº¦æŸå…³é”®å­—ã€whereã€‘ï¼Œå¹¶æ³¨æ˜è¯¥åè®®åªèƒ½è¢«UIViewControllerè¿™ä¸ªç±»ï¼ˆåŒ…æ‹¬å­ç±»ï¼‰æ‰€éµå®ˆï¼Œè€Œä¸”æ­¤æ—¶æˆ‘ä»¬è¿˜å¯ä»¥æ‹¿åˆ°éµå®ˆè¯¥åè®®çš„æ§åˆ¶å™¨çš„view 123456789101112&#x2F;&#x2F;import Foundationimport UIKitprotocol Eatable &#123; &#125;extension Eatable where Self : UIViewController &#123; func eat() &#123; view.backgroundColor &#x3D; UIColor.red &#125;&#125; Demoæ¥ä¸‹æ¥ä»¥ä¸€ä¸ªå®é™…åº”ç”¨æ¥å·©å›ºä¸‹å§ iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Swift","slug":"Swift","permalink":"http://linxunfeng.top/tags/Swift/"}]},{"title":"iOS - Swift é«˜ä»¿å¾®ä¿¡","slug":"iOS-Swift-é«˜ä»¿å¾®ä¿¡","date":"2017-09-12T09:29:00.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2017/09/12/iOS-Swift-é«˜ä»¿å¾®ä¿¡/","link":"","permalink":"http://linxunfeng.top/2017/09/12/iOS-Swift-%E9%AB%98%E4%BB%BF%E5%BE%AE%E4%BF%A1/","excerpt":"ä»2016å¹´12æœˆä»½å¼€å§‹åšåˆ° 2017å¹´2æœˆ16ï¼Œè™½è¯´è¿™ä¸ªé¡¹ç›®çœ‹èµ·æ¥ä¸å¤§ï¼Œä½†æ˜¯é”»ç‚¼äººçš„åœ°æ–¹è¿˜çœŸæ˜¯å¾ˆå¤šçš„ï¼Œå¾®ä¿¡é€šè®¯å½•è”ç³»äººçš„æŒ‰æ‹¼éŸ³æ’åºï¼Œè‡ªå®šä¹‰è¡¨æƒ…é”®ç›˜ä¸­é‡åˆ°çš„åˆ†é¡µæ»šåŠ¨ï¼Œå¾®ä¿¡èŠå¤©ç•Œé¢çš„å›¾ç‰‡æ˜¾ç¤ºã€è¯­éŸ³ä¿¡æ¯çš„åŠ¨ç”»ç­‰ã€‚æŒ‘æˆ˜ç€å„ç§å„æ ·çš„éœ€æ±‚ï¼Œæœ¬äººä¹Ÿå°†é‡åˆ°çš„é—®é¢˜çš„è§£å†³æ–¹æ¡ˆåšäº†è®°å½•å¹¶æ•´ç†äº†ä¸€ä¸‹ï¼Œå¸Œæœ›èƒ½ç»™iOSç¨‹åºå‘˜åŒèƒä»¬å¸¦æ¥å¸®åŠ©ã€‚ç›®å‰åŸºæœ¬çš„èŠå¤©å·²å®Œæˆï¼Œå®ç°äº†ä¸€éƒ¨åˆ†ä¸ªäººä¿¡æ¯çš„ä¿®æ”¹ï¼ŒåŠŸèƒ½æˆ‘ä¼šå°½å¿«å®Œå–„çš„ï¼ +","text":"ä»2016å¹´12æœˆä»½å¼€å§‹åšåˆ° 2017å¹´2æœˆ16ï¼Œè™½è¯´è¿™ä¸ªé¡¹ç›®çœ‹èµ·æ¥ä¸å¤§ï¼Œä½†æ˜¯é”»ç‚¼äººçš„åœ°æ–¹è¿˜çœŸæ˜¯å¾ˆå¤šçš„ï¼Œå¾®ä¿¡é€šè®¯å½•è”ç³»äººçš„æŒ‰æ‹¼éŸ³æ’åºï¼Œè‡ªå®šä¹‰è¡¨æƒ…é”®ç›˜ä¸­é‡åˆ°çš„åˆ†é¡µæ»šåŠ¨ï¼Œå¾®ä¿¡èŠå¤©ç•Œé¢çš„å›¾ç‰‡æ˜¾ç¤ºã€è¯­éŸ³ä¿¡æ¯çš„åŠ¨ç”»ç­‰ã€‚æŒ‘æˆ˜ç€å„ç§å„æ ·çš„éœ€æ±‚ï¼Œæœ¬äººä¹Ÿå°†é‡åˆ°çš„é—®é¢˜çš„è§£å†³æ–¹æ¡ˆåšäº†è®°å½•å¹¶æ•´ç†äº†ä¸€ä¸‹ï¼Œå¸Œæœ›èƒ½ç»™iOSç¨‹åºå‘˜åŒèƒä»¬å¸¦æ¥å¸®åŠ©ã€‚ç›®å‰åŸºæœ¬çš„èŠå¤©å·²å®Œæˆï¼Œå®ç°äº†ä¸€éƒ¨åˆ†ä¸ªäººä¿¡æ¯çš„ä¿®æ”¹ï¼ŒåŠŸèƒ½æˆ‘ä¼šå°½å¿«å®Œå–„çš„ï¼ + LXFWeChatSwift 3.0 é«˜ä»¿å¾®ä¿¡ ä¸¤ä¸ªæµ‹è¯•è´¦å·ï¼š lxf lqr å¯†ç éƒ½æ˜¯123456 æºç åœ°å€ç äº‘http://git.oschina.net/LinXunFeng/LXFWeChat GitHubhttps://github.com/LinXunFeng/LXFWeChat åœ¨æ­¤æä¾›å­˜æ”¾äºç™¾åº¦äº‘çš„å®Œæ•´é¡¹ç›®ã€\bé«˜ä»¿å¾®ä¿¡ã€‘- ç™¾åº¦äº‘å¸Œæœ›å„ä½èƒ½åœ¨æˆ‘çš„é¡¹ç›®ä¸ŠçŒ®å‡ºä¸€ä¸ªå®è´µçš„Starè°¢è°¢ ä»2016å¹´12æœˆä»½å¼€å§‹åšåˆ°ç°åœ¨ï¼Œè™½è¯´è¿™ä¸ªé¡¹ç›®çœ‹èµ·æ¥ä¸å¤§ï¼Œä½†æ˜¯é”»ç‚¼äººçš„åœ°æ–¹è¿˜çœŸæ˜¯å¾ˆå¤šçš„ï¼Œå¾®ä¿¡é€šè®¯å½•è”ç³»äººçš„æŒ‰æ‹¼éŸ³æ’åºï¼Œè‡ªå®šä¹‰è¡¨æƒ…é”®ç›˜ä¸­é‡åˆ°çš„åˆ†é¡µæ»šåŠ¨ï¼Œå¾®ä¿¡èŠå¤©ç•Œé¢çš„å›¾ç‰‡æ˜¾ç¤ºã€è¯­éŸ³ä¿¡æ¯çš„åŠ¨ç”»ç­‰ã€‚æŒ‘æˆ˜ç€å„ç§å„æ ·çš„éœ€æ±‚ï¼Œæœ¬äººä¹Ÿå°†é‡åˆ°çš„é—®é¢˜çš„è§£å†³æ–¹æ¡ˆåšäº†è®°å½•å¹¶æ•´ç†äº†ä¸€ä¸‹ï¼Œå¸Œæœ›èƒ½ç»™iOSç¨‹åºå‘˜åŒèƒä»¬å¸¦æ¥å¸®åŠ©ã€‚ç›®å‰åŸºæœ¬çš„èŠå¤©å·²å®Œæˆï¼Œå®ç°äº†ä¸€éƒ¨åˆ†ä¸ªäººä¿¡æ¯çš„ä¿®æ”¹ï¼ŒåŠŸèƒ½æˆ‘ä¼šå°½å¿«å®Œå–„çš„ï¼ æ¨¡ä»¿å¾®ä¿¡çš„å¯¼èˆªæ åœ¨navigationBaråº•éƒ¨æ·»åŠ ä¸€ä¸ªæ·»åŠ äº†æ¸å˜å±‚çš„view1234567891011121314151617let blurBackView = UIView()blurBackView.frame = CGRect(x: 0, y: -20, width: kScreenW, height: 64)let gradintLayer = CAGradientLayer()gradintLayer.frame = CGRect(x: 0, y: 0, width: kScreenW, height: 64)gradintLayer.colors = [ UIColor.hexInt(0x040012).withAlphaComponent(0.76).cgColor, UIColor.hexInt(0x040012).withAlphaComponent(0.28).cgColor]gradintLayer.startPoint = CGPoint(x: 0, y: 0)gradintLayer.endPoint = CGPoint(x: 0, y: 1.0)blurBackView.layer.addSublayer(gradintLayer)blurBackView.isUserInteractionEnabled = falseblurBackView.alpha = 0.5// è®¾ç½®å¯¼èˆªæ æ ·å¼navigationBar.barStyle = .blacknavigationBar.insertSubview(blurBackView, at: 0) è¡¨æƒ…é¢æ¿å’Œæ›´å¤šé¢æ¿é‡åˆ°çš„é—®é¢˜æ€»ç»“äº†ä¸€ä¸‹ï¼Œå¯ä»¥å‚è€ƒä¸‹ä»¥ä¸‹æ€»ç»“çš„æ–‡ç«  ã€ŠiOS - Swift UICollectionViewæ¨ªå‘åˆ†é¡µæ»šåŠ¨ï¼Œcellå·¦å³æ’ç‰ˆã€‹ ã€ŠiOS-Swift-UICollectionViewæ¨ªå‘åˆ†é¡µçš„é—®é¢˜ã€‹ èŠå¤©ç•Œé¢ã€ŠiOS-Swift ä»¿å¾®ä¿¡èŠå¤©å›¾ç‰‡æ˜¾ç¤ºã€‹ ã€ŠiOS-Swift-UITableViewçš„scrollToRowçš„â€å‘â€ã€‹ ã€ŠiOS-Swift-UIButtonä¸­ImageViewçš„animationImagesåŠ¨ç”»æ‰§è¡Œå®Œæ¯•åï¼Œå›¾æ ‡å˜æš—ã€‹ é¦–é¡µã€ŠiOS - Swift ä»¿å¾®ä¿¡å°çº¢ç‚¹(æ— æ•°å­—)ã€‹ ç›®å‰å®Œæˆçš„åŠŸèƒ½å¾®ä¿¡ç•Œé¢ æ˜¾ç¤ºå³ä¸Šè§’çš„èœå• æ˜¾ç¤ºæœ€è¿‘è”ç³»äºº æœ€è¿‘è”ç³»äººä¿¡æ¯æœªè¯»æ•°çš„æ˜¾ç¤º é€šè®¯å½•ç•Œé¢ è”ç³»äººçš„æ’åº è”ç³»äººæ€»æ•°æ˜¾ç¤º å‘ç°ç•Œé¢ åŠ¨æ€å°çº¢ç‚¹çš„æ˜¾ç¤º è´­ç‰©é€‰é¡¹çš„é“¾æ¥è·³è½¬ æˆ‘ç•Œé¢ ä¸ªäººå¤´åƒçš„ä¸Šä¼ ä¸è®¾ç½®ï¼ŒåŠå¤´åƒçš„ä¿å­˜ æˆ‘çš„äºŒç»´ç ç•Œé¢çš„æ˜¾ç¤ºåŠäºŒç»´ç çš„ä¿å­˜ èŠå¤©ç•Œé¢ å°è§†é¢‘çš„å½•åˆ¶ä¸å‘é€ å°è§†é¢‘çš„æ’­æ”¾ èŠå¤©æ—¶é—´ å›¾ç‰‡çš„å‘é€ä¸æ˜¾ç¤º æœªå‘é€æˆåŠŸçš„é‡å‘åŠŸèƒ½ è¯­éŸ³çš„å½•åˆ¶ä¸å‘é€ è¯­éŸ³çš„æ’­æ”¾åŠ¨æ€æ•ˆæœ å·²çŸ¥BUG å°è§†é¢‘å’Œå›¾ç‰‡å‘é€å‡ºå»åä¸èƒ½ç«‹å³æ›´æ–°æ˜¾ç¤ºç¼©ç•¥å›¾ æ›´æ¢å¤´åƒæ¨¡æ‹Ÿå™¨æµ‹è¯•æ­£å¸¸ï¼ŒçœŸæœºæ— æ•ˆã€‚ã€‚ 2017-07-24 æ›´æ–°æŠ½ç©ºå‡ºæ¥æ·»åŠ äº†ä¸€ä¸ªç®€å•çš„ç›´æ’­åŠŸèƒ½ï¼ˆå¯¹æ–¹éœ€è¦å…ˆè¿›å…¥åˆ°å¯¹åº”çš„èŠå¤©ç•Œé¢ï¼‰ç›¸å…³åšæ–‡ï¼šiOS-ç»™é«˜ä»¿å¾®ä¿¡æ·»åŠ ç›´æ’­èŠå¤©åŠŸèƒ½éœ€è¦ç”¨åˆ°ç¼–è¯‘å¥½çš„Bç«™å¼€æºåº“ijkplayer ï¼Œç”±äºæ‰“åŒ…å¥½çš„æ–‡ä»¶å¤ªå¤§ï¼Œä¼ ä¸ä¸Šæ¥ï¼Œæ‰€ä»¥éœ€è¦å„ä½å»è‡ªå·±ç¼–è¯‘é›†æˆè¿›å»ã€‚ æ•ˆæœå›¾åŠ¨æ€å›¾ é™æ€å›¾","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"http://linxunfeng.top/tags/Swift/"},{"name":"iOSé¡¹ç›®","slug":"iOSé¡¹ç›®","permalink":"http://linxunfeng.top/tags/iOS%E9%A1%B9%E7%9B%AE/"}]},{"title":"iOS-ARCä¸MRCçš„å•ä¾‹è®¾è®¡æ¨¡å¼","slug":"iOS-ARCä¸MRCçš„å•ä¾‹è®¾è®¡æ¨¡å¼","date":"2017-09-12T09:25:47.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2017/09/12/iOS-ARCä¸MRCçš„å•ä¾‹è®¾è®¡æ¨¡å¼/","link":"","permalink":"http://linxunfeng.top/2017/09/12/iOS-ARC%E4%B8%8EMRC%E7%9A%84%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","excerpt":"å•ä¾‹è®¾è®¡æ¨¡å¼(Singleton) å°±æ˜¯ä¿è¯æŸä¸ªç±»åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ä»å§‹åˆ°ç»ˆåªæœ‰ä¸€ä¸ªçš„ä¸€ç§æ–¹æ¡ˆ +","text":"å•ä¾‹è®¾è®¡æ¨¡å¼(Singleton) å°±æ˜¯ä¿è¯æŸä¸ªç±»åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ä»å§‹åˆ°ç»ˆåªæœ‰ä¸€ä¸ªçš„ä¸€ç§æ–¹æ¡ˆ + å•ä¾‹è®¾è®¡æ¨¡å¼(Singleton)\bå®šä¹‰å°±æ˜¯ä¿è¯æŸä¸ªç±»åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ä»å§‹åˆ°ç»ˆåªæœ‰ä¸€ä¸ªçš„ä¸€ç§æ–¹æ¡ˆ ä½œç”¨ èŠ‚çœå†…å­˜å¼€é”€ ä¿è¯æ•´ä¸ªç¨‹åºä¸­ä½¿ç”¨åŒä¸€ä»½èµ„æº å®ç°é¦–å…ˆå°†æˆ‘ä»¬çš„ç¯å¢ƒè®¾ç½®ä¸ºéARCç¯å¢ƒï¼Œå³MRCï¼Œå¦‚å›¾ åœ¨MRCæ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬å¾—è‡ªå·±æ‰‹åŠ¨é‡Šæ”¾èµ„æºï¼Œæ‰€ä»¥å¾—é‡å†™ä¸€äº›ä¸èµ„æºåˆ›å»ºä¸é‡Šæ”¾ç›¸å…³çš„æ–¹æ³•ï¼Œä»¥ä¿è¯å•ä¾‹å¯¹è±¡çš„å”¯ä¸€ã€‚ æ–°å»ºä¸€ä¸ªç»§æ‰¿äºNSObjectçš„ç±» LXFFileToolï¼Œæˆ‘ç›´æ¥ä¸Šä»£ç ï¼Œå¹¶å†™ä¸Šæ³¨é‡ŠLXFFileTool.h123@interface LXFFileTool : NSObject+ (instancetype)sharedFileTool;@endLXFFileTool.m12345678910111213141516171819202122232425262728293031323334353637383940414243#import \"LXFFileTool.h\"@implementation LXFFileToolstatic LXFFileTool *_fileTools = nil;/** * allocæ–¹æ³•å†…éƒ¨ä¼šè°ƒç”¨allocWithZone: * @param zone ç³»ç»Ÿåˆ†é…ç»™appçš„å†…å­˜ */+ (instancetype)allocWithZone:(struct _NSZone *)zone &#123; if (_fileTools == nil) &#123; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; // å®‰å…¨(è¿™ä¸ªä»£ç åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡) _fileTools = [super allocWithZone:zone]; &#125;); &#125; return _fileTools;&#125;- (oneway void)release &#123; // åœ¨allocWithZoneä¸­ä½¿ç”¨äº†GCDä»¤åˆ›å»ºå¯¹è±¡çš„ä»£ç åªæ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœ_fileToolsè¢«é‡Šæ”¾åˆ™æ— æ³•å†åˆ›å»º // é‡å†™releaseæ–¹æ³•ï¼Œé˜²æ­¢_fileToolsè¢«é‡Šæ”¾&#125;// é‡å†™retainæ–¹æ³•- (instancetype)retain &#123; return self;&#125;// é‡å†™retainCounté”å®šå¼•ç”¨è®¡æ•°- (NSUInteger)retainCount &#123; return 1;&#125;// é‡å†™initæ–¹æ³•ï¼Œé˜²æ­¢å•ä¾‹æ‰€æ‹¥æœ‰çš„å±æ€§å€¼è¢«é‡ç½®// è®©åˆå§‹åŒ–çš„æ–¹æ³•åªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼Œè‡ªç„¶å±æ€§å€¼å°±æ²¡æœ‰æœºä¼šè¢«é‡ç½®- (instancetype)init &#123; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; _fileTools = [super init]; // initä¼šå…ˆè°ƒç”¨allocæ–¹æ³• &#125;); return _fileTools;&#125;// ä»¿é€ ç³»ç»Ÿçš„å•ä¾‹åˆ›å»ºæ–¹å¼ï¼Œæä¾›ç±»æ–¹æ³•+ (instancetype)sharedFileTool &#123; // ç”±äºæˆ‘ä»¬å·²ç»é‡å†™äº†initæ–¹æ³•ä¿è¯äº†å•ä¾‹å¯¹è±¡çš„å”¯ä¸€äº†ï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥è°ƒç”¨initæ–¹æ³•å³å¯ã€‚ return [[self alloc] init];&#125;@end MRCä¸‹å°±æ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬çš„ç›®çš„å°±æ˜¯åªèƒ½åˆ›å»ºå’Œåˆå§‹åŒ–ä¸€æ¬¡å¯¹è±¡ï¼Œä¸ç»™æœºä¼šé‡Šæ”¾ï¼Œä¹Ÿä¸ç»™æœºä¼šé‡æ–°åˆå§‹åŒ–ï¼Œä»è€Œä¿è¯äº†è¯¥å¯¹è±¡çš„å”¯ä¸€ã€‚ é‚£ç°åœ¨æ¥çœ‹çœ‹ARCä¸‹æ˜¯å¦‚ä½•å®ç°å•ä¾‹çš„å§ã€‚å…¶å®ARCä¸‹ä¸MRCçš„åŒºåˆ«å°±æ˜¯ARCä¸‹æˆ‘ä»¬ä¸ç”¨è‡ªå·±å†æ‰‹åŠ¨å»é‡Šæ”¾èµ„æºäº†ï¼Œä»è€Œä½¿ä»£ç ä¸Šå¤§åŒå°å¼‚ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚123456789101112131415161718192021222324#import \"LXFFileTool.h\"@implementation LXFFileToolstatic LXFFileTool *_fileTools = nil;+ (instancetype)allocWithZone:(struct _NSZone *)zone &#123; if (_fileTools == nil) &#123; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; _fileTools = [super allocWithZone:zone]; &#125;); &#125; return _fileTools;&#125;- (instancetype)init &#123; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; _fileTools = [super init]; &#125;); return _fileTools;&#125;+ (instancetype)sharedFileTool &#123; return [[self alloc] init];&#125; æ‰¹é‡åˆ›å»ºå•ä¾‹ ç°åœ¨æˆ‘ä»¬å·²ç»çŸ¥é“äº†ARCä¸MRCä¸‹åˆ†åˆ«æ˜¯å¦‚ä½•åˆ›å»ºå•ä¾‹çš„äº†ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¸€ä¸ªé¡¹ç›®é‡Œéœ€è¦å¤šä¸ªå•ä¾‹ï¼Œé‚£æˆ‘ä»¬åªèƒ½æŠŠä»£ç å¤åˆ¶ç²˜è´´å†æ”¹æ”¹å°±å®Œäº‹å—ï¼Ÿè¿™æœªå…ä¹Ÿå¤ªéº»çƒ¦äº†å§ã€‚é‚£æˆ‘ä»¬èƒ½ä¸èƒ½åšåˆ°å¿«é€Ÿä¸”æ–¹ä¾¿çš„åˆ›å»ºå•ä¾‹å¯¹è±¡å‘¢ï¼Ÿå¯ä»¥çš„ï¼Œåˆ©ç”¨å® é¦–å…ˆå…ˆè¯´ä¸‹ä¸€äº›å…³äºå®çš„çŸ¥è¯†å§ ä½¿ç”¨ #define å…³é”®å­—æ¥å®šä¹‰å® å®å®šä¹‰åªèƒ½æ˜¯å•è¡Œçš„ï¼Œä¸èƒ½æ¢è¡Œ é‚£ç°åœ¨æ¥è®¨è®ºä¸‹ä¸€äº›ç–‘æƒ‘å§ï¼Œä½ è¯´å®åªèƒ½å•è¡Œï¼Œå¯æ˜¯åˆ›å»ºå•ä¾‹çš„ä»£ç å¯æ˜¯æœ‰å¾ˆå¤šè¡Œå‘€ï¼è¿˜æœ‰æˆ‘ä»¬å¦‚ä½•åšåˆ°è‡ªå®šä¹‰ç±»æ–¹æ³•å(å°±æ˜¯ sharedXXX )ï¼Ÿå¥½ï¼Œæˆ‘ä»¬æ¥ä»‹ç»ä¸‹å®ä¸‹çš„ä¸¤ä¸ªç‰¹æ®Šç¬¦å· å®çš„ç‰¹æ®Šç¬¦å· \b \bä½œç”¨ \\ ç”¨æ¥è½¬è¯‘æ¢è¡Œç¬¦ï¼Œå³å±è”½æ¢è¡Œç¬¦ ## å°†ä¸¤ä¸ªç›¸é‚»çš„æ ‡è®°(token)è¿æ¥ä¸ºä¸€ä¸ªå•ç‹¬çš„æ ‡è®° æƒ³äº†è§£å…¶å®ƒå…³äºå®çš„é¢„å¤„ç†å‘½ä»¤å¯ä»¥è‡ªè¡Œç™¾åº¦å‚è€ƒâ€Cè¯­è¨€çš„é¢„å¤„ç†å‘½ä»¤â€ ç®€å•æ¥è¯´ï¼Œ\\ç”¨äºå–æ¶ˆæ¢è¡Œï¼Œ##ç”¨æ¥è¿æ¥ï¼Œè€Œæˆ‘ä»¬å°±ç”¨##æ¥å®ç°è‡ªå®šä¹‰ç±»æ–¹æ³•å åˆ›å»ºä¸€ä¸ªå¤´æ–‡ä»¶Singleton.hç”¨æ¥å­˜æ”¾å®å®šä¹‰å…ˆæ¥çœ‹çœ‹å®šä¹‰.hä¸­ sharedXXX æ˜¯å¦‚ä½•é€šè¿‡å®æ¥å®šä¹‰çš„12// .hæ–‡ä»¶çš„å®ç°#define SingletonH(methodName) + (instancetype)shared##methodName;ç°åœ¨å›åˆ°LXFFileTool.hä¸­ï¼Œç›´æ¥ä¸€è¡Œå®šä¹‰sharedFileToolè¿™ä¸ªç±»æ–¹æ³•1234#import \"Singleton.h\"@interface LXFFileTool : NSObjectSingletonH(FileTool)@endæˆ‘ä»¬åªéœ€è¦å°†æ–¹æ³•åFileToolä¼ å…¥SingletonH()ä¸­å°±å¯ä»¥æ‹¼æ¥ä¸ºsharedFileTool é‚£ç°åœ¨å†æ¥çœ‹çœ‹å®šä¹‰.mä¸­åˆ›å»ºå•ä¾‹çš„æ–¹å¼ï¼Œä»¥ARCä¸ºä¾‹1234567891011121314151617181920212223#define SingletonM(methodName) \\static id _instance = nil; \\+ (instancetype)allocWithZone:(struct _NSZone *)zAone &#123; \\ if (_instance == nil) &#123; \\ static dispatch_once_t onceToken; \\ dispatch_once(&amp;onceToken, ^&#123; \\ _instance = [super allocWithZone:zone]; \\ &#125;); \\ &#125; \\ return _instance; \\&#125; \\\\- (instancetype)init &#123; \\ static dispatch_once_t onceToken; \\ dispatch_once(&amp;onceToken, ^&#123; \\ _instance = [super init]; \\ &#125;); \\ return _instance; \\&#125; \\\\+ (instancetype)shared##methodName &#123; \\ return [[self alloc] init]; \\&#125; åœ¨æ¯ä¸€ä¸ªè¡Œåé¢åŠ ä¸Š(åæ–œæ )å–æ¶ˆæ¢è¡Œï¼Œä½¿ç”¨##æ¥æ‹¼æ¥ä¼ å…¥çš„æ–¹æ³•åï¼Œä½†è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼šæœ€åä¸€è¡Œä¸èƒ½åŠ åæ–œæ  å›åˆ°LXFFileTool.mä¸­ï¼Œ\bä¸€è¡Œå®ç°åˆ›å»ºå•ä¾‹1234#import \"LXFFileTool.h\"@implementation LXFFileToolSingletonM(FileTool)@endå¥½ï¼Œç°åœ¨è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¦‚æœæˆ‘çš„é¡¹ç›®ä¸­æœ‰ä¸ªåˆ«æ–‡ä»¶æ˜¯éœ€è¦MRCç¯å¢ƒçš„ï¼Œé‚£æˆ‘è¯¥æ€ä¹ˆåŠæ‰èƒ½è®©åˆ›å»ºå•ä¾‹ä¹Ÿæ˜¯å¦‚æ­¤ç®€å•å‘¢ï¼Ÿå¾ˆç®€å•ï¼ŒåŠ ä¸ªåˆ¤æ–­å°±å¥½äº†ï¼Œå¤§è‡´åˆ¤æ–­å¦‚ä¸‹ï¼Œè¯¦æƒ…çœ‹æ–‡ç« æœ€åé™„ä¸Šçš„Demo12345#if __has_feature(objc_arc) // ARC// å†™ä¸ŠARCä¸‹çš„å®šä¹‰ä»£ç #else // éARC// å†™ä¸ŠMRCä¸‹çš„å®šä¹‰ä»£ç #endif å¥½äº†ï¼Œç°åœ¨ç”¨èµ·æ¥æ˜¯ä¸æ˜¯æ–¹ä¾¿å¤šäº†ï¼Ÿæˆ‘ä»¬åªè¦åˆ›å»ºä¸€ä¸ªç±»ï¼Œç„¶ååœ¨.hæ–‡ä»¶ä¸­å†™SingletonH(XXX)ï¼Œå†åœ¨.mæ–‡ä»¶ä¸­å†™SingletonM(XXX)å°±å¯ä»¥å®ç°å•ä¾‹äº†~ æŒ‡å®šç¯å¢ƒé¡ºä¾¿æä¸‹å¦‚ä½•åœ¨MRCä¸‹æŒ‡å®šæŸä¸ªç±»æ–‡ä»¶ä½¿ç”¨çš„ç¯å¢ƒä¸ºARCå¦‚å›¾ï¼Œå¯ä»¥åœ¨ Build Phases -&gt; Compile Sources ä¸­åŒå‡»æŸä¸ªéœ€è¦ARCç¯å¢ƒçš„ç±»æ–‡ä»¶ï¼Œç„¶åå†™ä¸Š 1-fobjc-arc å¦‚æœæ˜¯æŒ‡å®šMRCï¼Œåˆ™å†™ä¸Š1-fno-objc-arc Demoæœ€åï¼Œé™„ä¸ŠDemo: LXFSingleton","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Objective-C","slug":"Objective-C","permalink":"http://linxunfeng.top/tags/Objective-C/"}]},{"title":"iOS-Swift-UIButtonä¸­ImageViewçš„animationImagesåŠ¨ç”»æ‰§è¡Œå®Œæ¯•åï¼Œå›¾æ ‡å˜æš—","slug":"iOS-Swift-UIButtonä¸­ImageViewçš„animationImagesåŠ¨ç”»æ‰§è¡Œå®Œæ¯•åï¼Œå›¾æ ‡å˜æš—","date":"2017-09-12T09:22:32.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2017/09/12/iOS-Swift-UIButtonä¸­ImageViewçš„animationImagesåŠ¨ç”»æ‰§è¡Œå®Œæ¯•åï¼Œå›¾æ ‡å˜æš—/","link":"","permalink":"http://linxunfeng.top/2017/09/12/iOS-Swift-UIButton%E4%B8%ADImageView%E7%9A%84animationImages%E5%8A%A8%E7%94%BB%E6%89%A7%E8%A1%8C%E5%AE%8C%E6%AF%95%E5%90%8E%EF%BC%8C%E5%9B%BE%E6%A0%87%E5%8F%98%E6%9A%97/","excerpt":"æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£çš„è¯´æ˜ å½“è¯¥å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼ŒæŒ‰é’®åœ¨é«˜äº®çŠ¶æ€ä¸‹ï¼Œå›¾ç‰‡ä¼šç»˜åˆ¶æˆé«˜äº®ï¼ˆ\bå‰ææ˜¯æ²¡æœ‰æ‰‹åŠ¨è®¾ç½®é«˜äº®å›¾ç‰‡ï¼‰ã€‚å¹¶ä¸”è¯¥å€¼çš„é»˜è®¤å€¼ä¸ºtrueæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å±æ€§adjustsImageWhenHighlightedè®¾ç½®ä¸ºfalseï¼Œä¸è®©ç³»ç»Ÿè‡ªåŠ¨å¸®æˆ‘ä»¬è®¾ç½®é«˜äº®çŠ¶æ€ä¸‹æ˜¾ç¤ºçš„å›¾ç‰‡å³å¯ã€‚ +","text":"æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£çš„è¯´æ˜ å½“è¯¥å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼ŒæŒ‰é’®åœ¨é«˜äº®çŠ¶æ€ä¸‹ï¼Œå›¾ç‰‡ä¼šç»˜åˆ¶æˆé«˜äº®ï¼ˆ\bå‰ææ˜¯æ²¡æœ‰æ‰‹åŠ¨è®¾ç½®é«˜äº®å›¾ç‰‡ï¼‰ã€‚å¹¶ä¸”è¯¥å€¼çš„é»˜è®¤å€¼ä¸ºtrueæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å±æ€§adjustsImageWhenHighlightedè®¾ç½®ä¸ºfalseï¼Œä¸è®©ç³»ç»Ÿè‡ªåŠ¨å¸®æˆ‘ä»¬è®¾ç½®é«˜äº®çŠ¶æ€ä¸‹æ˜¾ç¤ºçš„å›¾ç‰‡å³å¯ã€‚ + æƒ…å†µè´´å‡ºé‡è¦ä»£ç  123456// è®¾ç½®æŒ‰é’®å›¾ç‰‡åŠ¨ç”»æ•°ç»„voiceButton.imageView?.animationImages = [ #imageLiteral(resourceName: \"message_voice_sender_playing_1\"), #imageLiteral(resourceName: \"message_voice_sender_playing_2\"), #imageLiteral(resourceName: \"message_voice_sender_playing_3\")] 12// å¼€å§‹åŠ¨ç”»voiceButton.imageView?.startAnimating() 12// åœæ­¢åŠ¨ç”»voiceButton.imageView?.stopAnimating() åŸå› è¿™ä¸ªæŒ‰é’®åœ¨ç»“æŸåŠ¨ç”»ä¹‹åä¹‹æ‰€ä»¥ä¼šå˜æš—ï¼Œæ˜¯å› ä¸ºå®ƒåœ¨åŠ¨ç”»ç»“æŸä¹‹åè‡ªåŠ¨æ˜¾ç¤ºä¸ºé«˜äº®å›¾\bç‰‡ï¼Œä¸ä¿¡ï¼Ÿé‚£åªå¥½ä¸Šè¯æ®äº†~12// è®¾ç½®è¯­éŸ³æŒ‰é’®çš„é«˜äº®å›¾ç‰‡voiceButton.setImage(#imageLiteral(resourceName: \"message_voice_sender_normal\"), for: .highlighted) é‚£çŸ¥é“åŸå› ä¹‹åå°±å¾ˆå¥½è§£å†³äº† è§£å†³æ–¹æ¡ˆæ–¹æ¡ˆä¸€ï¼šè®¾ç½®æŒ‰é’®çš„é«˜äº®å›¾ç‰‡å°†æŒ‰é’®çš„é«˜äº®å›¾ç‰‡ä¸æ™®é€šçŠ¶æ€ä¸‹çš„ä¸€è‡´å³å¯ã€‚è¿™é‡Œå°±å†èµ˜è¿°äº† æ–¹æ¡ˆäºŒï¼šadjustsImageWhenHighlighted = falseåœ¨UIButtonä¸­æœ‰è¿™ä¹ˆä¸€ä¸ªå±æ€§1adjustsImageWhenHighlightedæŸ¥çœ‹å®˜æ–¹æ–‡æ¡£çš„è¯´æ˜å½“è¯¥å±æ€§è®¾ç½®ä¸ºtrueæ—¶ï¼ŒæŒ‰é’®åœ¨é«˜äº®çŠ¶æ€ä¸‹ï¼Œå›¾ç‰‡ä¼šç»˜åˆ¶æˆé«˜äº®ï¼ˆ\bå‰ææ˜¯æ²¡æœ‰æ‰‹åŠ¨è®¾ç½®é«˜äº®å›¾ç‰‡ï¼‰ã€‚å¹¶ä¸”è¯¥å€¼çš„é»˜è®¤å€¼ä¸ºtrueæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å±æ€§adjustsImageWhenHighlightedè®¾ç½®ä¸ºfalseï¼Œä¸è®©ç³»ç»Ÿè‡ªåŠ¨å¸®æˆ‘ä»¬è®¾ç½®é«˜äº®çŠ¶æ€ä¸‹æ˜¾ç¤ºçš„å›¾ç‰‡å³å¯ã€‚ æ•ˆæœ é™„ä¸Šç›¸å…³é¡¹ç›®ï¼šSwift 3.0 é«˜ä»¿å¾®ä¿¡","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Swift","slug":"Swift","permalink":"http://linxunfeng.top/tags/Swift/"}]},{"title":"Swift 3.0 é«˜ä»¿å–œé©¬æ‹‰é›…FM","slug":"Swift-3-0-é«˜ä»¿å–œé©¬æ‹‰é›…FM","date":"2017-09-12T09:20:37.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2017/09/12/Swift-3-0-é«˜ä»¿å–œé©¬æ‹‰é›…FM/","link":"","permalink":"http://linxunfeng.top/2017/09/12/Swift-3-0-%E9%AB%98%E4%BB%BF%E5%96%9C%E9%A9%AC%E6%8B%89%E9%9B%85FM/","excerpt":"åŸºäºSwift 3.0 ç¼–å†™è€Œæˆ,è¿è¡Œç¯å¢ƒè¦æ±‚: Xcode 8.0 +","text":"åŸºäºSwift 3.0 ç¼–å†™è€Œæˆ,è¿è¡Œç¯å¢ƒè¦æ±‚: Xcode 8.0 + é«˜ä»¿å–œé©¬æ‹‰é›…FMgitHub: https://github.com/LinXunFeng/LXFFM è¯´æ˜åŸºäºSwift 3.0 ç¼–å†™è€Œæˆ,è¿è¡Œç¯å¢ƒè¦æ±‚: Xcode 8.0 LXFFMåŸOCç‰ˆ: https://github.com/Eastwu5788/XMLYFMä»åŸç‰ˆä½œè€…çš„æºä»£ç ä¸Šå­¦åˆ°äº†å¾ˆå¤š,ååˆ†æ„Ÿè°¢.ç”±äºåªæ˜¯æœ¬äººOCè½¬Swiftçš„è¯•ç»ƒé¡¹ç›®,æ‰€ä»¥æœ‰äº›å†…å®¹å¹¶æ²¡æœ‰å®ç°,å“ˆå“ˆ æ•ˆæœå›¾","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Swift","slug":"Swift","permalink":"http://linxunfeng.top/tags/Swift/"}]},{"title":"iOS - Swift UITableViewçš„scrollToRowçš„å‘","slug":"iOS-Swift-UITableViewçš„scrollToRowçš„å‘","date":"2017-09-12T09:16:39.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2017/09/12/iOS-Swift-UITableViewçš„scrollToRowçš„å‘/","link":"","permalink":"http://linxunfeng.top/2017/09/12/iOS-Swift-UITableView%E7%9A%84scrollToRow%E7%9A%84%E5%9D%91/","excerpt":"ä»Šå¤©é„™äººä½¿ç”¨SnapKitæ¥å¸ƒå±€cellï¼Œç„¶åç”¨scrollToRowæ¥æ»šåˆ°åº•éƒ¨å°±é‡åˆ°äº†ä¸€ä¸ªå¾ˆå¥‡è‘©çš„ç°è±¡ã€‚æˆ‘è®¾ç½®äº†åœ¨é”®ç›˜å¼¹å‡ºåèŠå¤©æ¶ˆæ¯åˆ—è¡¨ä¼šè‡ªåŠ¨æ»šåˆ°åº•éƒ¨ã€‚1.éšä¾¿è¾“å…¥ä¸€æ¡æ¶ˆæ¯ï¼Œç‚¹å‘é€åï¼Œåœ¨èŠå¤©æ¶ˆæ¯åˆ—è¡¨ä¸­å¹¶æ²¡æœ‰æ»šåˆ°æœ€æ–°æ¶ˆæ¯é‚£ä¸€è¡Œã€‚2.é€€å‡ºé”®ç›˜ä¸åšä»»ä½•æ“ä½œå†æ‰“å¼€é”®ç›˜ä¹Ÿæ˜¯æ»šåˆ°åˆšæ‰é‚£é‡Œ(å³æœ€æ–°æ¶ˆæ¯çš„ä¸Šä¸€æ¡æ‰€åœ¨ä½ç½®)3.åªæœ‰åœ¨é€€å‡ºé”®ç›˜åæŠŠèŠå¤©æ¶ˆæ¯åˆ—è¡¨çš„æ¶ˆæ¯å‘ä¸Šæ‹‰ä¸€ç‚¹è·ç¦»éœ²å‡ºæœ€æ–°æ¶ˆæ¯æ‰€åœ¨çš„cellä¹‹åï¼Œå†ç‚¹å‡»æ‰æœ‰ç”¨ +","text":"ä»Šå¤©é„™äººä½¿ç”¨SnapKitæ¥å¸ƒå±€cellï¼Œç„¶åç”¨scrollToRowæ¥æ»šåˆ°åº•éƒ¨å°±é‡åˆ°äº†ä¸€ä¸ªå¾ˆå¥‡è‘©çš„ç°è±¡ã€‚æˆ‘è®¾ç½®äº†åœ¨é”®ç›˜å¼¹å‡ºåèŠå¤©æ¶ˆæ¯åˆ—è¡¨ä¼šè‡ªåŠ¨æ»šåˆ°åº•éƒ¨ã€‚1.éšä¾¿è¾“å…¥ä¸€æ¡æ¶ˆæ¯ï¼Œç‚¹å‘é€åï¼Œåœ¨èŠå¤©æ¶ˆæ¯åˆ—è¡¨ä¸­å¹¶æ²¡æœ‰æ»šåˆ°æœ€æ–°æ¶ˆæ¯é‚£ä¸€è¡Œã€‚2.é€€å‡ºé”®ç›˜ä¸åšä»»ä½•æ“ä½œå†æ‰“å¼€é”®ç›˜ä¹Ÿæ˜¯æ»šåˆ°åˆšæ‰é‚£é‡Œ(å³æœ€æ–°æ¶ˆæ¯çš„ä¸Šä¸€æ¡æ‰€åœ¨ä½ç½®)3.åªæœ‰åœ¨é€€å‡ºé”®ç›˜åæŠŠèŠå¤©æ¶ˆæ¯åˆ—è¡¨çš„æ¶ˆæ¯å‘ä¸Šæ‹‰ä¸€ç‚¹è·ç¦»éœ²å‡ºæœ€æ–°æ¶ˆæ¯æ‰€åœ¨çš„cellä¹‹åï¼Œå†ç‚¹å‡»æ‰æœ‰ç”¨ + ç®€ä»‹åœ¨tableViewä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šç”¨åˆ°scrollToRowè¿™ä¸ªæ¥æ§åˆ¶tableViewæ»šåˆ°æŒ‡å®šçš„æŸä¸€è¡Œã€‚ä¸€èˆ¬å†™æ³•å¦‚ä¸‹æ‰€ç¤º123456// MARK: æ»šåˆ°åº•éƒ¨func scrollToBottom(animated: Bool = false) &#123; if dataArr.count &gt; 0 &#123; tableView.scrollToRow(at: IndexPath(row: dataArr.count - 1, section: 0), at: .bottom, animated: animated) &#125;&#125; æƒ…å†µä»Šå¤©é„™äººä½¿ç”¨SnapKitæ¥å¸ƒå±€cellï¼Œç„¶åç”¨scrollToRowæ¥æ»šåˆ°åº•éƒ¨å°±é‡åˆ°äº†ä¸€ä¸ªå¾ˆå¥‡è‘©çš„ç°è±¡ã€‚æˆ‘è®¾ç½®äº†åœ¨é”®ç›˜å¼¹å‡ºåèŠå¤©æ¶ˆæ¯åˆ—è¡¨ä¼šè‡ªåŠ¨æ»šåˆ°åº•éƒ¨ã€‚1.éšä¾¿è¾“å…¥ä¸€æ¡æ¶ˆæ¯ï¼Œç‚¹å‘é€åï¼Œåœ¨èŠå¤©æ¶ˆæ¯åˆ—è¡¨ä¸­å¹¶æ²¡æœ‰æ»šåˆ°æœ€æ–°æ¶ˆæ¯é‚£ä¸€è¡Œã€‚2.é€€å‡ºé”®ç›˜ä¸åšä»»ä½•æ“ä½œå†æ‰“å¼€é”®ç›˜ä¹Ÿæ˜¯æ»šåˆ°åˆšæ‰é‚£é‡Œ(å³æœ€æ–°æ¶ˆæ¯çš„ä¸Šä¸€æ¡æ‰€åœ¨ä½ç½®)3.åªæœ‰åœ¨é€€å‡ºé”®ç›˜åæŠŠèŠå¤©æ¶ˆæ¯åˆ—è¡¨çš„æ¶ˆæ¯å‘ä¸Šæ‹‰ä¸€ç‚¹è·ç¦»éœ²å‡ºæœ€æ–°æ¶ˆæ¯æ‰€åœ¨çš„cellä¹‹åï¼Œå†ç‚¹å‡»æ‰æœ‰ç”¨ åˆ†æåœ¨æ— å¥ˆä¹‹ä¸‹ï¼Œç»è¿‡äº†ä¸€æ­¥æ­¥çš„æ¢ç´¢ï¼Œç»ˆäºå‘ç°äº†é—®é¢˜çš„æ‰€åœ¨é¦–å…ˆæˆ‘ä»¬è¦äº†è§£ä¸€ä¸‹scrollToRowæ‰§è¡Œåä¼šè°ƒç”¨å“ªäº›å‡½æ•°åŠé¡ºåºä¼šè°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•1func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell1func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -&gt; CGFloat æ­¥éª¤ä¸€æˆ‘åœ¨ heightForRow ä¸­å†™äº†å…·ä½“çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æŠŠé«˜åº¦å†™æ­»ï¼Œä¸å†æ˜¯åŠ¨æ€è·å–ã€‚æ¥ç€æ‰§è¡Œç¨‹åºå¾—åˆ°å¦‚ä¸‹ç»“æœæ¯”å¦‚æˆ‘åŸæœ¬æœ‰10æ¡æ•°æ®ï¼Œç°åœ¨åŠ å…¥äº†ä¸€æ¡åæ‰§è¡Œäº†scrollToRowï¼Œå®ƒä¼š1.å…ˆè°ƒç”¨ heightForRow 11æ¬¡ï¼Œå³åŒ…æ‹¬æœ€æ–°åŠ å…¥çš„é‚£ä¸€æ¡2.ç„¶åå†è°ƒç”¨ cellForRow3.æœ€ååœ¨è°ƒä¸€æ¬¡ heightForRowåé¢çš„2å’Œ3æ˜¯é’ˆå¯¹æœ€æ–°æ¶ˆæ¯çš„ æ­¥éª¤äºŒæˆ‘åœ¨ heightForRow ä¸­ä¸å†å†™æ­»é«˜åº¦ï¼Œ\bè€Œæ˜¯ä»æ¨¡å‹æ•°æ®ä¸­åŠ¨æ€è·å–é«˜åº¦(é«˜åº¦æ˜¯åœ¨cellå¸ƒå±€åè·å–çš„ï¼Œå†èµ‹å€¼åˆ°æ¨¡å‹æ•°æ®ä¸­çš„cellHeightå˜é‡)1æ‰§è¡Œç¨‹åºå¾—åˆ°\bè¿™ä¸ªç»“æœï¼šè°ƒç”¨ heightForRow 11æ¬¡ï¼Œç„¶åå°±æ²¡äº†å¥½å§ï¼Œé—®é¢˜å°±å‡ºç°åœ¨å¯¹heightForRowçš„ç¬¬11æ¬¡è°ƒç”¨ï¼Œå‰10æ¬¡éƒ½æœ‰è¿”å›å…·ä½“çš„é«˜åº¦ï¼Œè€Œæœ€åä¸€æ¬¡æ˜¯0~ã€‚ ç»“è®º\bç°åœ¨æ¸…æ¥šäº†ï¼Œè¦æƒ³åœ¨è°ƒç”¨ scrollToRow åˆ°æŒ‡å®šçš„é‚£ä¸€è¡Œï¼Œå‰ææ¡ä»¶æ˜¯é‚£ä¸€è¡Œçš„é«˜åº¦ä¸èƒ½ä¸º0ã€‚æ‰€ä»¥åœ¨ä¸Šé¢çš„æƒ…å†µä¸­ï¼Œå‘é€å®Œæ¶ˆæ¯åï¼Œæœ€æ–°æ¶ˆæ¯çš„cellçš„ç¡®æ˜¯æ’å…¥åˆ°äº†tableViewï¼Œä¹Ÿæœ‰æ˜¾ç¤ºå‡ºæ¥(åé¢æˆ‘è‡ªå·±æµ‹çš„)ï¼Œä½†å°±æ˜¯æ— æ³•æ»šåˆ°æœ€æ–°æ¶ˆæ¯é‚£ä¸€è¡Œï¼Œå°±æ˜¯å› ä¸º heightForRow è¿”å›çš„é«˜åº¦ä¸º0åœ¨ä¸Šé¢çš„æƒ…å†µä¸­ï¼Œå‘ä¸Šæ‹‰ä¸€ç‚¹è·ç¦»éœ²å‡ºcellåscrollToRowæ‰æœ‰æ•ˆå°±æ˜¯å› ä¸ºæ­¤æ—¶heightForRowè¿”å›çš„é«˜åº¦ä¸å†ä¸º0 è§£å†³æ–¹æ¡ˆæŒ‰æœ¬äººè‡ªèº«çš„æƒ…å†µæ¥è¯´ï¼Œæœ‰ä¸¤ç§è§£å†³æ–¹æ³• ç¬¬ä¸€ç§åœ¨ä¼ å…¥çš„æ¨¡å‹æ•°æ®ä¸­ç»™äºˆæ˜ç¡®è®¡ç®—å‡ºæ¥çš„æ•°å€¼å°±å¥½ã€‚ ç¬¬äºŒç§æˆ‘ä½¿ç”¨SnapKitæ¥è‡ªåŠ¨å¸ƒå±€cellçš„\bä½ç½®ç„¶åå†æ¥è·å–é«˜åº¦ï¼Œè¿™åšæ³•ä¸»è¦å°±æ˜¯ä¸ºäº†é¿å…è¿ç®—ã€‚æ‰€ä»¥æˆ‘ä¸é€‰ç”¨ç¬¬ä¸€ç§è§£å†³æ–¹æ³•å¥½äº†ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š1234// dataArræ˜¯ç”¨æ¥å­˜æ”¾æ¨¡å‹çš„æ•°ç»„let indexPath = IndexPath(row: dataArr.count - 1, section: 0)// è°ƒç”¨tableViewçš„æ•°æ®æºåŠæ³•_ = self.tableView(tableView, cellForRowAt: indexPath)åœ¨æ’å…¥\bæœ€æ–°æ¶ˆæ¯åï¼Œè°ƒç”¨tableViewçš„æ•°æ®æº\bæ–¹æ³•æ¥è®©å®ƒå…ˆå¯¹cellè¿›è¡Œå¸ƒå±€ï¼Œè¿™æ ·å°±è·å–åˆ°äº†cellçš„é«˜åº¦ï¼Œç„¶åå†æ‰§è¡Œ scrollToRow å°±å¥½äº†ã€‚","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Swift","slug":"Swift","permalink":"http://linxunfeng.top/tags/Swift/"}]},{"title":"iOS-Swift ä»¿å¾®ä¿¡èŠå¤©å›¾ç‰‡æ˜¾ç¤º","slug":"iOS-Swift-ä»¿å¾®ä¿¡èŠå¤©å›¾ç‰‡æ˜¾ç¤º","date":"2017-09-12T08:57:35.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2017/09/12/iOS-Swift-ä»¿å¾®ä¿¡èŠå¤©å›¾ç‰‡æ˜¾ç¤º/","link":"","permalink":"http://linxunfeng.top/2017/09/12/iOS-Swift-%E4%BB%BF%E5%BE%AE%E4%BF%A1%E8%81%8A%E5%A4%A9%E5%9B%BE%E7%89%87%E6%98%BE%E7%A4%BA/","excerpt":"å…¶å®åŸç†æ¯”è¾ƒç®€å•ï¼Œå‡†å¤‡ä¸€å¼ å›¾ç‰‡MaskImgaeï¼Œå…ˆå¯¹å…¶è¿›è¡Œæ‹‰ä¼¸ï¼Œç„¶åæŒ‰ç…§å…¶è½®å»“å¯¹å›¾ç‰‡è¿›è¡Œè£å‰ªå°±è¡Œäº† +","text":"å…¶å®åŸç†æ¯”è¾ƒç®€å•ï¼Œå‡†å¤‡ä¸€å¼ å›¾ç‰‡MaskImgaeï¼Œå…ˆå¯¹å…¶è¿›è¡Œæ‹‰ä¼¸ï¼Œç„¶åæŒ‰ç…§å…¶è½®å»“å¯¹å›¾ç‰‡è¿›è¡Œè£å‰ªå°±è¡Œäº† + æ•ˆæœå›¾å¦‚å›¾æ‰€ç¤ºï¼Œå›¾ç‰‡å·¦ä¾§æœ‰ä¸ªå°ç®­å¤´ åŸç†å…¶å®åŸç†æ¯”è¾ƒç®€å•ï¼Œå‡†å¤‡ä¸€å¼ å›¾ç‰‡MaskImgaeï¼Œå…ˆå¯¹å…¶è¿›è¡Œæ‹‰ä¼¸ï¼Œç„¶åæŒ‰ç…§å…¶è½®å»“å¯¹å›¾ç‰‡è¿›è¡Œè£å‰ªå°±è¡Œäº† æ­¥éª¤è¿™é‡Œæ‘˜é‡ç‚¹è¯´ï¼Œå¸ƒå±€ä»€ä¹ˆçš„æŒ‰è‡ªå·±æ„æ„¿å»å¼„å§ã€‚æˆ‘å›ºå®šäº†å›¾ç‰‡çš„æ˜¾ç¤ºå¤§å°ä¸º 102 * 152 1ã€å¯¹MaskImgaeè¿›è¡Œæ‹‰ä¼¸123456// è®¾ç½®æ‹‰ä¼¸èŒƒå›´let stretchInsets = UIEdgeInsetsMake(30, 28, 23, 28)// å¾…æ‹‰ä¼¸çš„å›¾ç‰‡let stretchImage = UIImage(named: \"SenderImageNodeMask\")// è¿›è¡Œæ‹‰ä¼¸let bubbleMaskImage = stretchImage.resizableImage(withCapInsets: stretchInsets, resizingMode: .stretch) æ‹‰ä¼¸çš„æ•ˆæœå¦‚å›¾ 2ã€å¯¹imageViewè®¾ç½®è£å‰ªåŒºåŸŸè¿™é‡Œæˆ‘çš„ imageView å« chatImgViewä¸Šé¢çš„æ‹‰ä¼¸æ•ˆæœå›¾æ˜¯ä¸´æ—¶æŠŠæ‹‰ä¼¸å¥½çš„å›¾ç‰‡èµ‹å€¼ç»™äº†chatImgViewï¼Œåªæ˜¯ä¸ºäº†ç»™å¤§å®¶çœ‹åˆ°æ•ˆæœè€Œå·²ï¼Œ\bå„ä½çœ‹å®˜å¦‚æœæœ‰èµ‹å€¼è¯·è®°å¾—æ”¹å›æ¥~~ å¥½ï¼Œä¸‹é¢è¿›è¡Œè£å‰ª12345678910111213141516// æ–°å»ºä¸€ä¸ªå›¾å±‚let layer = CALayer()// è®¾ç½®å›¾å±‚æ˜¾ç¤ºçš„å†…å®¹ä¸ºæ‹‰ä¼¸è¿‡çš„MaskImgaelayer.contents = bubbleMaskImage.cgImage// è®¾ç½®æ‹‰ä¼¸èŒƒå›´(æ³¨æ„ï¼šè¿™é‡ŒcontentsCenterçš„CGRectæ˜¯æ¯”ä¾‹ï¼ˆä¸æ˜¯ç»å¯¹åæ ‡ï¼‰)layer.contentsCenter = self.CGRectCenterRectForResizableImage(bubbleMaskImage)// è®¾ç½®å›¾å±‚å¤§å°ä¸chatImgViewç›¸åŒlayer.frame = CGRect(x: 0, y: 0, width: 102, height: 152)// è®¾ç½®æ¯”ä¾‹layer.contentsScale = UIScreen.main.scale// è®¾ç½®ä¸é€æ˜åº¦layer.opacity = 1// è®¾ç½®è£å‰ªèŒƒå›´self.chatImgView.layer.mask = layer// è®¾ç½®è£å‰ªæ‰è¶…å‡ºçš„åŒºåŸŸself.chatImgView.layer.masksToBounds = true12345678910func CGRectCenterRectForResizableImage(_ image: UIImage) -&gt; CGRect &#123; // LXFLog(\"\\(image.capInsets)\") // è¿™é‡Œçš„image.capInsetså°±æ˜¯UIEdgeInsetsMake(30, 28, 23, 28) return CGRect( x: image.capInsets.left / image.size.width, y: image.capInsets.top / image.size.height, width: (image.size.width - image.capInsets.right - image.capInsets.left) / image.size.width, height: (image.size.height - image.capInsets.bottom - image.capInsets.top) / image.size.height )&#125;è¿™æ ·å°±å®Œæˆäº† è§£é‡Šä¸€ä¸‹ä¸‹UIEdgeInsetsMakeMaskImgae çš„å¤§å°ä¸º 56 * 5012// UIEdgeInsetsMake(top: CGFloat, left: CGFloat, bottom: CGFloat, right: CGFloat)UIEdgeInsetsMake(30, 28, 23, 28)çº¢è‰²èŒƒå›´å°±æ˜¯è¦æ‹‰ä¼¸çš„èŒƒå›´(éšæ‰‹ä¸€æ‰£ï¼Œä¸å¤ªå‡†ç¡®ï¼Œæ„æ€æ„æ€ä¸‹å°±å¥½äº†~~) contentsCenterè¿™æ˜¯å¯¹æŸä¸ªåŒºåŸŸè¿›è¡Œå…¨é¢æ‹‰ä¼¸ï¼Œå¦‚æœä¸è®¾ç½®çš„è¯é»˜è®¤å€¼ä¸º1CGRect(x: 0, y: 0, width: 1, height: 1)å°±æ˜¯ç›´æ¥è¿›è¡Œç¼©æ”¾é‚£æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ï¼Œå¦‚æœä¸å¯¹contentsCenterè¿™ä¸ªå€¼è¿›è¡Œè®¾ç½®ä¼šæ˜¯ä»€ä¹ˆæ•ˆæœæˆ‘ä»¬æ¥çœ‹ä¸‹å®˜æ–¹è§£é‡Š 1234var contentsCenter: CGRect &#123; get set &#125;Description The rectangle that defines how the layer contents are scaledif the layerâ€™s contents are resized. Animatable. ç¿»è¯‘ï¼šå¦‚æœå›¾å±‚çš„å†…å®¹æ˜¯é‡æ–°è®¾ç½®äº†å°ºå¯¸çš„ï¼Œé‚£å®šä¹‰çš„è¿™ä¸ªçŸ©å½¢(contentsCenter)æ˜¯ä¸ºäº†å‘Šè¯‰å›¾å±‚ï¼Œå›¾å±‚çš„å†…å®¹æ˜¯å¦‚ä½•è¢«ç¼©æ”¾çš„ é‚£æ˜äº†ï¼Œæˆ‘ä»¬çš„å›¾ç‰‡æ˜¯è¢«æ‹‰ä¼¸åå†ç»˜åˆ¶åˆ°layerä¸Šçš„ï¼Œä¸ºäº†æ­£ç¡®æ˜¾ç¤ºæˆ‘ä»¬çš„å›¾ç‰‡ï¼Œæˆ‘ä»¬å¾—å‘Šè¯‰layerå®ƒæ˜¯æ€ä¹ˆè¢«è¿›è¡Œæ‹‰ä¼¸çš„ã€‚æ˜¯çš„ï¼Œå°±æ˜¯ä¸‹é¢ä»£ç æ‰€æŒ‡å®šçš„èŒƒå›´1UIEdgeInsetsMake(30, 28, 23, 28)\bä½†æ˜¯ï¼Œæ­£å¦‚ä¸Šé¢æåˆ°è¿‡çš„ï¼ŒcontentsCenteræ‰€è¦èµ‹å€¼çš„CGRectæ˜¯æ¯”ä¾‹ï¼Œä¸æ˜¯ç»å¯¹åæ ‡ï¼Œæ‰€ä»¥ç°åœ¨æˆ‘ä»¬å¾—\bé€šè¿‡(30, 28, 23, 28)\bè·å–æ¯”ä¾‹å€¼ï¼Œè½¬æ¢æ–¹æ³•å·²ç»åœ¨ä¸Šé¢ç»™å‡ºäº†ï¼Œå°±æ˜¯CGRectCenterRectForResizableImageæˆ‘ä»¬æ¥æ‰“å°ä¸‹ image.capInsetsçš„å†…å®¹12345LXFLog(\"\\(image.capInsets)\")LXFLog(\"\\(image.capInsets.top)\")LXFLog(\"\\(image.capInsets.bottom)\")LXFLog(\"\\(image.capInsets.left)\")LXFLog(\"\\(image.capInsets.right)\")æ‰“å°ç»“æœ12345UIEdgeInsets(top: 30.0, left: 28.0, bottom: 23.0, right: 28.0)30.023.028.028.0\bå¥½ï¼Œç°åœ¨ç»“åˆ ä¸‹é¢çš„å›¾ ä¸ CGRectCenterRectForResizableImage æ–¹æ³•ä¸­çš„ä»£ç å°±å¾ˆæ˜ç¡®æ¯”ä¾‹æ˜¯æ€ä¹ˆå–åˆ°çš„äº† é™„ä¸Šç›¸å…³é¡¹ç›®ï¼šSwift 3.0 é«˜ä»¿å¾®ä¿¡","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Swift","slug":"Swift","permalink":"http://linxunfeng.top/tags/Swift/"}]},{"title":"iOS-Swift-UICollectionViewæ¨ªå‘åˆ†é¡µçš„é—®é¢˜","slug":"iOS-Swift-UICollectionViewæ¨ªå‘åˆ†é¡µçš„é—®é¢˜","date":"2017-09-12T08:53:55.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2017/09/12/iOS-Swift-UICollectionViewæ¨ªå‘åˆ†é¡µçš„é—®é¢˜/","link":"","permalink":"http://linxunfeng.top/2017/09/12/iOS-Swift-UICollectionView%E6%A8%AA%E5%90%91%E5%88%86%E9%A1%B5%E7%9A%84%E9%97%AE%E9%A2%98/","excerpt":"æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥è§£å†³ï¼Œæ•°æ®åªæœ‰11ä¸ªï¼Œè¦åˆ†ä¸¤é¡µéœ€è¦16ä¸ªï¼Œé‚£æˆ‘ä»¬å¯ä»¥ç›´æ¥æ·»åŠ æ•°æ®åˆ°16ä¸ªï¼Œç„¶ååœ¨dataSourceä¸­è¿”å›cellæ—¶è¿›è¡Œåˆ¤æ–­åŠå¤„ç†å³å¯ã€‚ä¸è¿‡å¯¹äºç°åœ¨æ¥è¯´å¤ªå°é¢˜å¤§åšäº†ï¼Œæˆ‘é€‰ç¬¬äºŒç§æ–¹å¼~ +","text":"æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥è§£å†³ï¼Œæ•°æ®åªæœ‰11ä¸ªï¼Œè¦åˆ†ä¸¤é¡µéœ€è¦16ä¸ªï¼Œé‚£æˆ‘ä»¬å¯ä»¥ç›´æ¥æ·»åŠ æ•°æ®åˆ°16ä¸ªï¼Œç„¶ååœ¨dataSourceä¸­è¿”å›cellæ—¶è¿›è¡Œåˆ¤æ–­åŠå¤„ç†å³å¯ã€‚ä¸è¿‡å¯¹äºç°åœ¨æ¥è¯´å¤ªå°é¢˜å¤§åšäº†ï¼Œæˆ‘é€‰ç¬¬äºŒç§æ–¹å¼~ + UICollectionViewæ¨ªå‘åˆ†é¡µçš„é—®é¢˜æƒ…å†µç›´æ¥çœ‹å›¾å·²ç»è®¾ç½®collectionViewçš„isPagingEnabledä¸ºtrueäº†ï¼Œå¯æ˜¯å‡ºç°äº†è¿™ç§æƒ…å†µï¼ŒåŸå› å°±æ˜¯collectionViewçš„contentSizeä¸å¤Ÿã€‚ 12345678&lt;UICollectionView: 0x7fc565076000; frame &#x3D; (0 0; 375 197); clipsToBounds &#x3D; YES; gestureRecognizers &#x3D; &lt;NSArray: 0x6180000557e0&gt;; layer &#x3D; &lt;CALayer: 0x61000022a5a0&gt;; contentOffset: &#123;187.5, 0&#125;; contentSize: &#123;562.5, 192.25&#125;&gt; è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥è§£å†³ï¼Œæ•°æ®åªæœ‰11ä¸ªï¼Œè¦åˆ†ä¸¤é¡µéœ€è¦16ä¸ªï¼Œé‚£æˆ‘ä»¬å¯ä»¥ç›´æ¥æ·»åŠ æ•°æ®åˆ°16ä¸ªï¼Œç„¶ååœ¨dataSourceä¸­è¿”å›cellæ—¶è¿›è¡Œåˆ¤æ–­åŠå¤„ç†å³å¯ã€‚ä¸è¿‡å¯¹äºç°åœ¨æ¥è¯´å¤ªå°é¢˜å¤§åšäº†ï¼Œæˆ‘é€‰ç¬¬äºŒç§æ–¹å¼~ ç›´æ¥ä¿®æ”¹contentSizeæˆ‘è‡ªå®šä¹‰äº†ä¸€ä¸ªç»§æ‰¿äºUICollectionViewFlowLayoutçš„Layout(LXFChatMoreCollectionLayout)ï¼Œè®©UICollectionViewåœ¨åˆ›å»ºçš„æ—¶å€™ä½¿ç”¨äº†å®ƒ åœ¨ LXFChatMoreCollectionLayout.swift ä¸­æˆ‘ä»¬éœ€è¦é‡å†™çˆ¶ç±»çš„collectionViewContentSizeï¼Œå°†contentSizeå–å‡ºæ¥ä¿®æ”¹ä¸ºæˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„newSizeå°±å¯ä»¥äº†ä»£ç å¦‚ä¸‹1234567override var collectionViewContentSize: CGSize &#123; let size: CGSize = super.collectionViewContentSize let collectionViewWidth: CGFloat = self.collectionView!.frame.size.width let nbOfScreen: Int = Int(ceil(size.width / collectionViewWidth)) let newSize: CGSize = CGSize(width: collectionViewWidth * CGFloat(nbOfScreen), height: size.height) return newSize&#125;æ³¨ï¼šceilå‡½æ•°çš„ä½œç”¨æ˜¯æ±‚ä¸å°äºç»™å®šå®æ•°çš„æœ€å°æ•´æ•°ã€‚ceil(2)=ceil(1.2)=cei(1.5)=2.00 æ•ˆæœ è‡³äºå¦‚ä½•è®©itemæ°´å¹³å¸ƒå±€ï¼Œè¯·å‚è€ƒã€ŠiOS - Swift UICollectionViewæ¨ªå‘åˆ†é¡µæ»šåŠ¨ï¼Œcellå·¦å³æ’ç‰ˆã€‹ é™„ä¸Šç›¸å…³é¡¹ç›®ï¼šSwift 3.0 é«˜ä»¿å¾®ä¿¡","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Swift","slug":"Swift","permalink":"http://linxunfeng.top/tags/Swift/"}]},{"title":"iOS - Swift UICollectionViewæ¨ªå‘åˆ†é¡µæ»šåŠ¨ï¼Œcellå·¦å³æ’ç‰ˆ","slug":"iOS-Swift-UICollectionViewæ¨ªå‘åˆ†é¡µæ»šåŠ¨ï¼Œcellå·¦å³æ’ç‰ˆ","date":"2017-09-12T08:49:37.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2017/09/12/iOS-Swift-UICollectionViewæ¨ªå‘åˆ†é¡µæ»šåŠ¨ï¼Œcellå·¦å³æ’ç‰ˆ/","link":"","permalink":"http://linxunfeng.top/2017/09/12/iOS-Swift-UICollectionView%E6%A8%AA%E5%90%91%E5%88%86%E9%A1%B5%E6%BB%9A%E5%8A%A8%EF%BC%8Ccell%E5%B7%A6%E5%8F%B3%E6%8E%92%E7%89%88/","excerpt":"æœ€è¿‘åœ¨åšè¡¨æƒ…é”®ç›˜æ—¶é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ç”¨UICollectionViewæ¥å¸ƒå±€è¡¨æƒ…ï¼Œä½¿ç”¨æ¨ªå‘åˆ†é¡µæ»šåŠ¨ï¼Œä½†åœ¨æœ€åä¸€é¡µå‡ºç°äº†å¦‚å›¾æ‰€ç¤ºçš„æƒ…å†µ +","text":"æœ€è¿‘åœ¨åšè¡¨æƒ…é”®ç›˜æ—¶é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ç”¨UICollectionViewæ¥å¸ƒå±€è¡¨æƒ…ï¼Œä½¿ç”¨æ¨ªå‘åˆ†é¡µæ»šåŠ¨ï¼Œä½†åœ¨æœ€åä¸€é¡µå‡ºç°äº†å¦‚å›¾æ‰€ç¤ºçš„æƒ…å†µ + æƒ…å†µæœ€è¿‘åœ¨åšè¡¨æƒ…é”®ç›˜æ—¶é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ç”¨UICollectionViewæ¥å¸ƒå±€è¡¨æƒ…ï¼Œä½¿ç”¨æ¨ªå‘åˆ†é¡µæ»šåŠ¨ï¼Œä½†åœ¨æœ€åä¸€é¡µå‡ºç°äº†å¦‚å›¾æ‰€ç¤ºçš„æƒ…å†µ æƒ…å†µåˆ†æå›¾æ˜¯çš„ï¼Œç°åœ¨çš„itemåˆ†å¸ƒå°±æ˜¯è¿™ä¸ªé¬¼æ ·å­ç°åœ¨æƒ³è¦åšçš„ï¼Œå°±æ˜¯å°†ç°åœ¨è¿™ä¸ªé¬¼æ ·å­å˜æˆå¦å¤–ä¸€ç§æ ·å­ï¼Œå¦‚å›¾é‚£æ€ä¹ˆåŠï¼Ÿåªå¥½é‡æ–°å¸ƒå±€itemäº† è§£å†³æ–¹æ¡ˆæˆ‘æ˜¯è‡ªå®šäº†ä¸€ä¸ªLayout(LXFChatEmotionCollectionLayout)ï¼Œè®©UICollectionViewåœ¨åˆ›å»ºçš„æ—¶å€™ä½¿ç”¨äº†å®ƒ åœ¨ LXFChatEmotionCollectionLayout.swift ä¸­ æ·»åŠ ä¸€ä¸ªå±æ€§æ¥ä¿å­˜æ‰€æœ‰itemçš„attributes12// ä¿å­˜æ‰€æœ‰itemçš„attributesfileprivate var attributesArr: [UICollectionViewLayoutAttributes] = [] é‡æ–°å¸ƒå±€12345678910111213141516171819202122232425262728293031323334353637// MARK:- é‡æ–°å¸ƒå±€override func prepare() &#123; super.prepare() let itemWH: CGFloat = kScreenW / CGFloat(kEmotionCellNumberOfOneRow) // è®¾ç½®itemSize itemSize = CGSize(width: itemWH, height: itemWH) minimumLineSpacing = 0 minimumInteritemSpacing = 0 scrollDirection = .horizontal // è®¾ç½®collectionViewå±æ€§ collectionView?.isPagingEnabled = true collectionView?.showsHorizontalScrollIndicator = false collectionView?.showsVerticalScrollIndicator = true let insertMargin = (collectionView!.bounds.height - 3 * itemWH) * 0.5 collectionView?.contentInset = UIEdgeInsetsMake(insertMargin, 0, insertMargin, 0) /// é‡ç‚¹åœ¨è¿™é‡Œ var page = 0 let itemsCount = collectionView?.numberOfItems(inSection: 0) ?? 0 for itemIndex in 0..&lt;itemsCount &#123; let indexPath = IndexPath(item: itemIndex, section: 0) let attributes = UICollectionViewLayoutAttributes(forCellWith: indexPath) page = itemIndex / (kEmotionCellNumberOfOneRow * kEmotionCellRow) // é€šè¿‡ä¸€ç³»åˆ—è®¡ç®—, å¾—åˆ°x, yå€¼ let x = itemSize.width * CGFloat(itemIndex % Int(kEmotionCellNumberOfOneRow)) + (CGFloat(page) * kScreenW) let y = itemSize.height * CGFloat((itemIndex - page * kEmotionCellRow * kEmotionCellNumberOfOneRow) / kEmotionCellNumberOfOneRow) attributes.frame = CGRect(x: x, y: y, width: itemSize.width, height: itemSize.height) // æŠŠæ¯ä¸€ä¸ªæ–°çš„å±æ€§ä¿å­˜èµ·æ¥ attributesArr.append(attributes) &#125;&#125; è¿”å›æ‰€æœ‰å½“å‰å¯è§çš„Attributes123456789override func layoutAttributesForElements(in rect: CGRect) -&gt; [UICollectionViewLayoutAttributes]? &#123; var rectAttributes: [UICollectionViewLayoutAttributes] = [] _ = attributesArr.map(&#123; if rect.contains($0.frame) &#123; rectAttributes.append($0) &#125; &#125;) return rectAttributes&#125; å¤§åŠŸå‘Šæˆ å®Œæ•´ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657import UIKitlet kEmotionCellNumberOfOneRow = 8let kEmotionCellRow = 3class LXFChatEmotionCollectionLayout: UICollectionViewFlowLayout &#123; // ä¿å­˜æ‰€æœ‰item fileprivate var attributesArr: [UICollectionViewLayoutAttributes] = [] // MARK:- é‡æ–°å¸ƒå±€ override func prepare() &#123; super.prepare() let itemWH: CGFloat = kScreenW / CGFloat(kEmotionCellNumberOfOneRow) // è®¾ç½®itemSize itemSize = CGSize(width: itemWH, height: itemWH) minimumLineSpacing = 0 minimumInteritemSpacing = 0 scrollDirection = .horizontal // è®¾ç½®collectionViewå±æ€§ collectionView?.isPagingEnabled = true collectionView?.showsHorizontalScrollIndicator = false collectionView?.showsVerticalScrollIndicator = true let insertMargin = (collectionView!.bounds.height - 3 * itemWH) * 0.5 collectionView?.contentInset = UIEdgeInsetsMake(insertMargin, 0, insertMargin, 0) var page = 0 let itemsCount = collectionView?.numberOfItems(inSection: 0) ?? 0 for itemIndex in 0..&lt;itemsCount &#123; let indexPath = IndexPath(item: itemIndex, section: 0) let attributes = UICollectionViewLayoutAttributes(forCellWith: indexPath) page = itemIndex / (kEmotionCellNumberOfOneRow * kEmotionCellRow) // é€šè¿‡ä¸€ç³»åˆ—è®¡ç®—, å¾—åˆ°x, yå€¼ let x = itemSize.width * CGFloat(itemIndex % Int(kEmotionCellNumberOfOneRow)) + (CGFloat(page) * kScreenW) let y = itemSize.height * CGFloat((itemIndex - page * kEmotionCellRow * kEmotionCellNumberOfOneRow) / kEmotionCellNumberOfOneRow) attributes.frame = CGRect(x: x, y: y, width: itemSize.width, height: itemSize.height) // æŠŠæ¯ä¸€ä¸ªæ–°çš„å±æ€§ä¿å­˜èµ·æ¥ attributesArr.append(attributes) &#125; &#125; override func layoutAttributesForElements(in rect: CGRect) -&gt; [UICollectionViewLayoutAttributes]? &#123; var rectAttributes: [UICollectionViewLayoutAttributes] = [] _ = attributesArr.map(&#123; if rect.contains($0.frame) &#123; rectAttributes.append($0) &#125; &#125;) return rectAttributes &#125; &#125; é™„ä¸Šç›¸å…³é¡¹ç›®ï¼šSwift 3.0 é«˜ä»¿å¾®ä¿¡","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Swift","slug":"Swift","permalink":"http://linxunfeng.top/tags/Swift/"}]},{"title":"iOS - é€šè¿‡runtimeè·å–æŸä¸ªç±»ä¸­æ‰€æœ‰çš„å˜é‡å’Œæ–¹æ³•","slug":"iOS-é€šè¿‡runtimeè·å–æŸä¸ªç±»ä¸­æ‰€æœ‰çš„å˜é‡å’Œæ–¹æ³•","date":"2017-09-12T08:32:11.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2017/09/12/iOS-é€šè¿‡runtimeè·å–æŸä¸ªç±»ä¸­æ‰€æœ‰çš„å˜é‡å’Œæ–¹æ³•/","link":"","permalink":"http://linxunfeng.top/2017/09/12/iOS-%E9%80%9A%E8%BF%87runtime%E8%8E%B7%E5%8F%96%E6%9F%90%E4%B8%AA%E7%B1%BB%E4%B8%AD%E6%89%80%E6%9C%89%E7%9A%84%E5%8F%98%E9%87%8F%E5%92%8C%E6%96%B9%E6%B3%95/","excerpt":"è‹¹æœå®˜æ–¹çš„ç±»ä¸­åªæä¾›ç»™æˆ‘ä»¬ä¸€å°éƒ¨åˆ†æˆå‘˜å˜é‡å’Œæ–¹æ³•,ä½†æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦çš„æ°å¥½å°±æ²¡æœ‰æä¾›,è¿™æ ·å°±ä¼šä»¤å¼€å‘äººå‘˜ååˆ†æ‡Šæ¼äº†,é‚£æ€æ ·æ‰èƒ½è·å–è¯¥ç±»ä¸­æ‰€æœ‰çš„å˜é‡åŠæ–¹æ³•,ç”¨æ¥æŸ¥æ‰¾æ˜¯å¦æœ‰ç›¸å¯¹åº”çš„å˜é‡å’Œæ–¹æ³•å‘¢?æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è‹¹æœè‡ªå¸¦çš„ è¿è¡Œæ—¶(runtime) æ¥è·å–+","text":"è‹¹æœå®˜æ–¹çš„ç±»ä¸­åªæä¾›ç»™æˆ‘ä»¬ä¸€å°éƒ¨åˆ†æˆå‘˜å˜é‡å’Œæ–¹æ³•,ä½†æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦çš„æ°å¥½å°±æ²¡æœ‰æä¾›,è¿™æ ·å°±ä¼šä»¤å¼€å‘äººå‘˜ååˆ†æ‡Šæ¼äº†,é‚£æ€æ ·æ‰èƒ½è·å–è¯¥ç±»ä¸­æ‰€æœ‰çš„å˜é‡åŠæ–¹æ³•,ç”¨æ¥æŸ¥æ‰¾æ˜¯å¦æœ‰ç›¸å¯¹åº”çš„å˜é‡å’Œæ–¹æ³•å‘¢?æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è‹¹æœè‡ªå¸¦çš„ è¿è¡Œæ—¶(runtime) æ¥è·å–+ è‹¹æœå®˜æ–¹çš„ç±»ä¸­åªæä¾›ç»™æˆ‘ä»¬ä¸€å°éƒ¨åˆ†æˆå‘˜å˜é‡å’Œæ–¹æ³•,ä½†æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦çš„æ°å¥½å°±æ²¡æœ‰æä¾›,è¿™æ ·å°±ä¼šä»¤å¼€å‘äººå‘˜ååˆ†æ‡Šæ¼äº†,é‚£æ€æ ·æ‰èƒ½è·å–è¯¥ç±»ä¸­æ‰€æœ‰çš„å˜é‡åŠæ–¹æ³•,ç”¨æ¥æŸ¥æ‰¾æ˜¯å¦æœ‰ç›¸å¯¹åº”çš„å˜é‡å’Œæ–¹æ³•å‘¢?æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è‹¹æœè‡ªå¸¦çš„ è¿è¡Œæ—¶(runtime) æ¥è·å– è¿è¡Œæ—¶(Runtime): è‹¹æœå®˜æ–¹ä¸€å¥—Cè¯­è¨€åº“ èƒ½åšå¾ˆå¤šåº•å±‚æ“ä½œ(æ¯”å¦‚è®¿é—®éšè—çš„ä¸€äº›æˆå‘˜å˜é‡\\æˆå‘˜æ–¹æ³•â€¦.) ä»¥ä¸‹ä»¥ UITextField ä¸ºä¾‹ ä¸€. åŒ…å«è¿è¡Œæ—¶å¤´æ–‡ä»¶1#import &lt;objc/runtime.h&gt; äºŒ. è·å–æ‰€æœ‰çš„æˆå‘˜å˜é‡123456789101112131415161718unsigned int count = 0; // æ‹·è´å‡ºæ‰€èƒ¡çš„æˆå‘˜å˜é‡åˆ—è¡¨Ivar *ivars = class_copyIvarList([UITextField class], &amp;count); for (int i = 0; i&lt;count; i++) &#123; // å–å‡ºæˆå‘˜å˜é‡ Ivar ivar = *(ivars + i); // æ‰“å°æˆå‘˜å˜é‡åå­— LXFLog(@\"%s\", ivar_getName(ivar)); // æ‰“å°æˆå‘˜å˜é‡çš„æ•°æ®ç±»å‹ LXFLog(@\"%s\", ivar_getTypeEncoding(ivar));&#125; // é‡Šæ”¾free(ivars); Swiftçš„å†™æ³•å¦‚ä¸‹1234567var count: UInt32 = 0let ivars = class_copyIvarList(UIViewController.self, &amp;count)!for i in 0..&lt;count &#123; let namePoint = ivar_getName(ivars[Int(i)])! let name = String(cString: namePoint) print(name)&#125; ä¸‰. è·å–æ‰€æœ‰çš„æˆå‘˜æ–¹æ³•// ä¸‹é¢çš„UITextFieldæ”¹ä¸ºä½ æƒ³è·å–æ‰€æœ‰å±æ€§çš„ç±»å// methCount: è¿™ä¸ªç±»æ‰€æœ‰å±æ€§çš„ä¸ªæ•°123456789101112131415unsigned int methCount = 0;Method *meths = class_copyMethodList([UITextField class], &amp;methCount); for(int i = 0; i &lt; methCount; i++) &#123; Method meth = meths[i]; SEL sel = method_getName(meth); const char *name = sel_getName(sel); NSLog(@\"%s\", name);&#125; free(meths);æœ€å,é€šè¿‡KVCçš„æ–¹å¼ç»™ç›¸åº”çš„æˆå‘˜å˜é‡èµ‹å€¼å³å¯!å¦‚:12345// ä¿®æ”¹ç‚¹ä½æ–‡å­—é¢œè‰²UILabel *placeholderLabel = [self valueForKeyPath:@\"_placeholderLabel\"];placeholderLabel.textColor = [UIColor redColor];// æˆ–è€…è¿™æ ·[self setValue:[UIColor grayColor] forKeyPath:@\"_placeholderLabel.textColor\"];","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Objective-C","slug":"Objective-C","permalink":"http://linxunfeng.top/tags/Objective-C/"}]},{"title":"iOS - å®ç°UINavigationå…¨å±åŠ¨è¿”å›(äºŒ)","slug":"iOS-å®ç°UINavigationå…¨å±åŠ¨è¿”å›-äºŒ","date":"2017-09-12T01:05:03.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2017/09/12/iOS-å®ç°UINavigationå…¨å±åŠ¨è¿”å›-äºŒ/","link":"","permalink":"http://linxunfeng.top/2017/09/12/iOS-%E5%AE%9E%E7%8E%B0UINavigation%E5%85%A8%E5%B1%8F%E5%8A%A8%E8%BF%94%E5%9B%9E-%E4%BA%8C/","excerpt":"åœ¨ iOS - å®ç°UINavigationå…¨å±æ»‘\båŠ¨è¿”å›(ä¸€) ä¸­æˆ‘ä»¬å®ç°äº†æ»‘åŠ¨è¿”å›çš„åŠŸèƒ½ï¼Œä½†ä¸æ˜¯å…¨å±æ»‘åŠ¨è¿”å›ï¼Œå¾—åœ¨å·¦ä¾§è¾¹ç¼˜è½»æ‰«æ‰èƒ½æ»‘åŠ¨è¿”å›~UINavigationControllerè‡ªå¸¦çš„åªèƒ½åœ¨è¾¹ç¼˜è½»æ‰«æ‰èƒ½æ»‘åŠ¨è¿”å›ï¼Œè¿™ç”¨æˆ·ä½“éªŒæ˜¯ä¸å¥½çš„ï¼Œæ¥ä¸‹æ¥å®ç°å…¨å±æ»‘åŠ¨è¿”å›! +","text":"åœ¨ iOS - å®ç°UINavigationå…¨å±æ»‘\båŠ¨è¿”å›(ä¸€) ä¸­æˆ‘ä»¬å®ç°äº†æ»‘åŠ¨è¿”å›çš„åŠŸèƒ½ï¼Œä½†ä¸æ˜¯å…¨å±æ»‘åŠ¨è¿”å›ï¼Œå¾—åœ¨å·¦ä¾§è¾¹ç¼˜è½»æ‰«æ‰èƒ½æ»‘åŠ¨è¿”å›~UINavigationControllerè‡ªå¸¦çš„åªèƒ½åœ¨è¾¹ç¼˜è½»æ‰«æ‰èƒ½æ»‘åŠ¨è¿”å›ï¼Œè¿™ç”¨æˆ·ä½“éªŒæ˜¯ä¸å¥½çš„ï¼Œæ¥ä¸‹æ¥å®ç°å…¨å±æ»‘åŠ¨è¿”å›! + å›é¡¾åœ¨ iOS - å®ç°UINavigationå…¨å±æ»‘\båŠ¨è¿”å›(ä¸€) ä¸­æˆ‘ä»¬å®ç°äº†æ»‘åŠ¨è¿”å›çš„åŠŸèƒ½ï¼Œä½†ä¸æ˜¯å…¨å±æ»‘åŠ¨è¿”å›ï¼Œå¾—åœ¨å·¦ä¾§è¾¹ç¼˜è½»æ‰«æ‰èƒ½æ»‘åŠ¨è¿”å›~UINavigationControllerè‡ªå¸¦çš„åªèƒ½åœ¨è¾¹ç¼˜è½»æ‰«æ‰èƒ½æ»‘åŠ¨è¿”å›ï¼Œè¿™ç”¨æˆ·ä½“éªŒæ˜¯ä¸å¥½çš„ï¼Œæ¥ä¸‹æ¥å®ç°å…¨å±æ»‘åŠ¨è¿”å›! æ€è·¯æ—¢ç„¶è‡ªå¸¦çš„æ»‘åŠ¨è¿”å›åªèƒ½æ˜¯åœ¨è¾¹ç¼˜ï¼Œé‚£æˆ‘ä»¬èƒ½ä¸èƒ½ä¿®æ”¹ä½¿å®ƒè§¦æ‘¸èŒƒå›´å˜å¤§ç”šè‡³å…¨å±å‘¢ï¼Ÿå…ˆæ¥çœ‹ä¸‹ç³»ç»Ÿæ‰‹åŠ¿æœ‰æ²¡æœ‰æä¾›å±æ€§æˆ–æ–¹æ³•ä¾›æˆ‘ä»¬ä½¿ç”¨1NSLog(@\"%@\", self.interactivePopGestureRecognizer);æ‰“å°ä¿¡æ¯ï¼š123456/*&lt;UIScreenEdgePanGestureRecognizer: 0x7fd542611e20; state = Possible; delaysTouchesBegan = YES; view = &lt;UILayoutContainerView 0x7fd542706300&gt;; target= &lt;(action=handleNavigationTransition:, target=&lt;_UINavigationInteractiveTransition 0x7fd542611ce0&gt;)&gt;&gt;*/åŸæ¥ç³»ç»Ÿæ‰‹åŠ¿çš„ç±»å‹ä¸º UIScreenEdgePanGestureRecognizer ï¼Œè½¬åˆ°å®šä¹‰ï¼Œå‘ç°æœ‰ä¸€ä¸ªå±æ€§1UIRectEdge edgesæ˜¯ä¸ªç»“æ„ä½“12345678typedef NS_OPTIONS(NSUInteger, UIRectEdge) &#123; UIRectEdgeNone = 0, UIRectEdgeTop = 1 &lt;&lt; 0, UIRectEdgeLeft = 1 &lt;&lt; 1, UIRectEdgeBottom = 1 &lt;&lt; 2, UIRectEdgeRight = 1 &lt;&lt; 3, UIRectEdgeAll = UIRectEdgeTop | UIRectEdgeLeft | UIRectEdgeBottom | UIRectEdgeRight&#125;åªæä¾›äº†è¿™å‡ æ ·ï¼Œéƒ½æ˜¯è¾¹ç¼˜çš„ï¼Œè¿™æ ·å°±åªå¥½å¦å¯»ä»–è·¯äº†ã€‚æ—¢ç„¶æ²¡æœ‰æä¾›æ–¹å¼ç»™æˆ‘ä»¬ç°å®è¦æ±‚ï¼Œé‚£æˆ‘ä»¬å°±è‡ªå·±æ·»åŠ ä¸€ä¸ªæ‹–åŠ¨æ‰‹åŠ¿ UIPanGestureRecognizeræ¥æ›¿å®ƒæ‰§è¡Œæ»‘åŠ¨è¿”å›åŠŸèƒ½ã€‚12UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:target action:@selector(handleNavigationTransition:)];[self.view addGestureRecognizer:pan];æ·»åŠ ä¸€ä¸ªæ‹–åŠ¨æ‰‹åŠ¿ï¼Œè®©ä»–æ‰§è¡Œç³»ç»Ÿæ‰‹åŠ¿çš„æ“ä½œï¼Œè°ƒç”¨handleNavigationTransition:æ–¹æ³•ï¼ˆåˆšæ‰æ‰“å°çš„ä¿¡æ¯ä¸­å¯ä»¥å¾—çŸ¥ï¼‰ï¼Œç°åœ¨çš„é—®é¢˜å°±æ˜¯targetæ˜¯è°ï¼Ÿæˆ‘ä»¬å¯ä»¥çœ‹çœ‹UIScreenEdgePanGestureRecognizerä¸­æ˜¯å¦æœ‰çº¿ç´¢å‘¢ï¼Ÿ1UIScreenEdgePanGestureRecognizer *gest = self.interactivePopGestureRecognizer;æ‰¾äº†åŠå¤©æ²¡æ‰¾ç€ï¼Œä½†æ˜¯UIScreenEdgePanGestureRecognizerç»§æ‰¿äºUIPanGestureRecognizerï¼Œè€ŒUIPanGestureRecognizeråˆç»§æ‰¿äºUIGestureRecognizerï¼Œåœ¨UIGestureRecognizeræä¾›çš„æ–¹æ³•ä¸­æˆ‘ä»¬å¯ä»¥æ¨æ–­å‡ºä¸€å®šæœ‰targetï¼Œè€Œä¸”è¿˜æ˜¯å¼ºå¼•ç”¨çš„ç§æœ‰å±æ€§ï¼é‚£æˆ‘ä»¬å°±å¯ä»¥ç”¨OCå¼ºå¤§çš„æ€æ‰‹é”KVCæ¥å¾—åˆ°è¿™ä¸ªå±æ€§ï¼Œä½†æ˜¯å‰ææ˜¯æˆ‘ä»¬å¾—çŸ¥é“targetæ‰€æŒ‡å±æ€§æ˜¯ä»€ä¹ˆåå­—å‚ç…§æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ï¼šiOS - é€šè¿‡runtimeè·å–æŸä¸ªç±»ä¸­æ‰€æœ‰çš„å˜é‡å’Œæ–¹æ³•1234567891011121314151617// OC runtime æœºåˆ¶// åªèƒ½åŠ¨æ€è·å–å½“å‰ç±»çš„æˆå‘˜å±æ€§ï¼Œä¸èƒ½è·å–å…¶å­ç±»ï¼Œæˆ–è€…çˆ¶ç±»çš„å±æ€§unsigned int count = 0;// æ‹·è´å‡ºæ‰€èƒ¡çš„æˆå‘˜å˜é‡åˆ—è¡¨Ivar *ivars = class_copyIvarList([UIGestureRecognizer class], &amp;count);for (int i = 0; i&lt;count; i++) &#123; // å–å‡ºæˆå‘˜å˜é‡ Ivar ivar = *(ivars + i); // æ‰“å°æˆå‘˜å˜é‡åå­— NSLog(@\"%s\", ivar_getName(ivar)); // æ‰“å°æˆå‘˜å˜é‡çš„æ•°æ®ç±»å‹ NSLog(@\"%s\", ivar_getTypeEncoding(ivar));&#125; // é‡Šæ”¾ free(ivars);åœ¨æ‰“å°ä¸­æˆ‘ä»¬æ‰¾åˆ°äº†UIGestureRecognizerçš„ç§æœ‰å±æ€§ _targetsï¼Œæ˜¯ä¸ªæ•°ç»„ï¼Œè€Œä¸”åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œå…ƒç´ çš„ç±»å‹å¦‚å›¾æ‰€ç¤ºé‚£å°±å¥½åŠäº†ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°targetäº†12NSArray *targets = [gest valueForKeyPath:@\"_targets\"]; // æ‰“å°å¯ä»¥å‘ç°é‡Œé¢å°±ä¸€ä¸ªå…ƒç´ id target = [targets[0] valueForKeyPath:@\"_target\"];è¿™æ ·æˆ‘ä»¬å°±å·®ä¸å¤šå®ç°å…¨å±æ»‘åŠ¨è¿”å›çš„åŠŸèƒ½ï¼Œä½†æ˜¯æœ‰ä¸ªbugå¦‚å›¾æ‰€ç¤ºï¼Œåœ¨æœ€åé‡Œå›åˆ°æ ¹æ§åˆ¶å™¨ç•Œé¢åæˆ‘å†ä¸€æ¬¡å‘å³æ»‘åŠ¨ï¼Œæ¥ç€ç‚¹å‡»Buttonï¼Œå®ƒæ²¡æœ‰å°†FirstVCå¼¹å‡ºï¼Œè¿™å°±æ˜¯ä¼ è¯´ä¸­çš„bugï¼Œé‚£æˆ‘ä»¬ç°åœ¨åœ¨åšçš„ï¼Œå°±æ˜¯åœ¨æ ¹æ§åˆ¶å™¨ä¸è®©æ»‘åŠ¨è¿”å›ç”Ÿæ•ˆï¼Œå³ç¦ç”¨æ‰‹åŠ¿ã€‚ç›‘å¬æ‰‹åŠ¿ï¼Œéµå®ˆåè®®UIGestureRecognizerDelegateï¼Œå®ç°ä»£ç†æ–¹æ³• 12// å½“å½“å‰æ§åˆ¶å™¨æ˜¯æ˜¯æ ¹æ§åˆ¶å™¨æ—¶ä¸è®©ç§»é™¤å½“å‰æ§åˆ¶å™¨(æ¢å¥è¯è¯´å°±æ˜¯ç¦æ­¢æ‰‹åŠ¿)pan.delegate = self; 1234567#pragma mark - UIGestureRecognizerDelegate// å½“å¼€å§‹æ»‘åŠ¨æ—¶è°ƒç”¨- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer &#123; // å½“ä¸ºæ ¹æ§åˆ¶å™¨æ˜¯ä¸è®©ç§»é™¤å½“å‰æ§åˆ¶å™¨ï¼Œéæ ¹æ§åˆ¶å™¨æ—¶å…è®¸ç§»é™¤ NSLog(@\"%ld\", self.viewControllers.count); BOOL open = self.viewControllers.count &gt; 1; return open;&#125; æœ€åè¯´ä¸¤å¥è¿™æ ·å°±å¯ä»¥å…¨å±æ»‘åŠ¨äº†ï¼Œä¸è¿‡è®©æˆ‘ä»¬æ¥çœ‹çœ‹æˆ‘ä»¬æ·»åŠ æ‰‹åŠ¿çš„ä¹ æƒ¯123UIPanGestureRecognizer *myPan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(pan)];[self.view addGestureRecognizer:myPan];myPan.delegate = self;æˆ‘ä»¬åœ¨æ·»åŠ æ‰‹åŠ¿æ—¶è®¾ç½®äº†targetä¸ºselfï¼Œè€Œdelegateä¹Ÿä¸ºselfé‚£æ˜¯ä¸æ˜¯å¯ä»¥æ¨æ–­å‡ºç³»ç»Ÿæ‰‹åŠ¿çš„delegateå°±æ˜¯æˆ‘ä»¬åˆšåˆšæƒ³è¦çš„targetå‘¢ï¼Œç­”æ¡ˆæ˜¯æ˜¯çš„1id target = self.interactivePopGestureRecognizer.delegate;æ‰€ä»¥æˆ‘ä»¬çš„targetå°±å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼è·å¾—ï¼Œä¸ç”¨KVCçš„æ–¹å¼å“¦ï¼Œæœ€ååˆ«å¿˜äº†ç¦ç”¨ç³»ç»Ÿæ‰‹åŠ¿12// ç¦æ­¢ç³»ç»Ÿçš„æ‰‹åŠ¿self.interactivePopGestureRecognizer.enabled = NO;è¿™æ ·ï¼Œæˆ‘ä»¬å°±å®ç°äº†å…¨å±æ»‘åŠ¨è¿”å›çš„åŠŸèƒ½äº†~ æºç  Objective-C è®°å¾—éµå®ˆåè®®ï¼š UIGestureRecognizerDelegateLXFNavigationController.m12345678910111213- (void)viewDidLoad &#123; [super viewDidLoad]; // ç³»ç»Ÿçš„æ‰‹åŠ¿ UIScreenEdgePanGestureRecognizer *gest = self.interactivePopGestureRecognizer; // target id target = self.interactivePopGestureRecognizer.delegate; // ç¦æ­¢ç³»ç»Ÿçš„æ‰‹åŠ¿ self.interactivePopGestureRecognizer.enabled = NO; UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:target action:@selector(handleNavigationTransition:)]; [self.view addGestureRecognizer:pan]; // ç›‘å¬ä»£ç† pan.delegate = self;&#125;12345678#pragma mark - UIGestureRecognizerDelegate// å½“å¼€å§‹æ»‘åŠ¨æ—¶è°ƒç”¨- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer &#123; // å½“ä¸ºæ ¹æ§åˆ¶å™¨æ˜¯ä¸è®©ç§»é™¤å½“å‰æ§åˆ¶å™¨ï¼Œéæ ¹æ§åˆ¶å™¨æ—¶å…è®¸ç§»é™¤ NSLog(@\"%ld\", self.viewControllers.count); BOOL open = self.viewControllers.count &gt; 1; return open;&#125; Swift LXFNavigationController.swift1234567891011override func viewDidLoad() &#123; super.viewDidLoad() guard let targets &#x3D; interactivePopGestureRecognizer!.value(forKey: &quot;_targets&quot;) as? [NSObject] else &#123; return &#125; let targetObjc &#x3D; targets.first let target &#x3D; targetObjc?.value(forKey: &quot;target&quot;) let action &#x3D; Selector((&quot;handleNavigationTransition:&quot;)) let panGes &#x3D; UIPanGestureRecognizer(target: target, action: action) view.addGestureRecognizer(panGes)&#125;","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"Swift","slug":"Swift","permalink":"http://linxunfeng.top/tags/Swift/"},{"name":"Objective-C","slug":"Objective-C","permalink":"http://linxunfeng.top/tags/Objective-C/"}]},{"title":"iOS - å®ç°UINavigationå…¨å±åŠ¨è¿”å›(ä¸€)","slug":"iOS-å®ç°UINavigationå…¨å±åŠ¨è¿”å›-ä¸€","date":"2017-09-11T21:53:59.000Z","updated":"2020-12-04T23:01:37.413Z","comments":true,"path":"2017/09/11/iOS-å®ç°UINavigationå…¨å±åŠ¨è¿”å›-ä¸€/","link":"","permalink":"http://linxunfeng.top/2017/09/11/iOS-%E5%AE%9E%E7%8E%B0UINavigation%E5%85%A8%E5%B1%8F%E5%8A%A8%E8%BF%94%E5%9B%9E-%E4%B8%80/","excerpt":"interactivePopGestureRecognizer æ˜¯UINavigationControllerè‡ªå¸¦æ‰‹åŠ¿ï¼Œå½“æˆ‘ä»¬è‡ªå®šä¹‰äº†å¯¼èˆªæ¡çš„è¿”å›æŒ‰é’®åï¼Œè¿™ä¸ªæ‰‹åŠ¿å°±è‡ªåŠ¨å¤±æ•ˆäº†ï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³•æ»‘åŠ¨è¿”å›ã€‚+","text":"interactivePopGestureRecognizer æ˜¯UINavigationControllerè‡ªå¸¦æ‰‹åŠ¿ï¼Œå½“æˆ‘ä»¬è‡ªå®šä¹‰äº†å¯¼èˆªæ¡çš„è¿”å›æŒ‰é’®åï¼Œè¿™ä¸ªæ‰‹åŠ¿å°±è‡ªåŠ¨å¤±æ•ˆäº†ï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³•æ»‘åŠ¨è¿”å›ã€‚+ è¦ç‚¹interactivePopGestureRecognizer æ˜¯UINavigationControllerè‡ªå¸¦æ‰‹åŠ¿ï¼Œå½“æˆ‘ä»¬è‡ªå®šä¹‰äº†å¯¼èˆªæ¡çš„è¿”å›æŒ‰é’®åï¼Œè¿™ä¸ªæ‰‹åŠ¿å°±è‡ªåŠ¨å¤±æ•ˆäº†ï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³•æ»‘åŠ¨è¿”å›ã€‚ æ¡ä»¶å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬ä¸å¾—ä¸è‡ªå®šä¹‰å¯¼èˆªæ¡çš„è¿”å›æŒ‰é’®ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿè¦æ»‘åŠ¨è¿”å›ä¸Šä¸€çº§çš„æ•ˆæœã€‚ æ€è·¯æ—¢ç„¶è‡ªåŠ¨å¤±æ•ˆï¼Œé‚£æˆ‘ä»¬å°±å‘Šè¯‰å®ƒä»€ä¹ˆæ—¶å€™ç”Ÿæ•ˆã€‚ åœ¨éæ ¹æ§åˆ¶å™¨ä¸‹ç”Ÿæ•ˆ(ç”¨äºæ»‘åŠ¨è¿”å›ä¸Šä¸€çº§) åœ¨æ ¹æ§åˆ¶å™¨ä¸‹å¤±æ•ˆ(é˜²æ­¢æ ¹æ§åˆ¶å™¨è¢«ç§»é™¤ï¼Œå½“ç„¶ç³»ç»Ÿä¸ä¼šè®©æˆ‘ä»¬æŠŠå®ƒç§»é™¤ï¼Œåªæ˜¯ä¼šå‡ºç°bug)ç¿»è¯‘ï¼šç¬¬ä¸€ä¸ªè¢«æ·»åŠ çš„æ§åˆ¶å™¨æˆä¸ºæ°¸è¿œä¸ä¼šè¢«å‡ºæ ˆçš„æ ¹æ§åˆ¶å™¨ æ­¥éª¤è‡ªå®šä¹‰ä¸€ä¸ª UINavigationController ï¼Œå³ç»§æ‰¿äº UINavigationController ï¼Œåå­—ä¸º LXFNavigationController ï¼Œå°†ä»£ç†è®¾ä¸ºè‡ªå·±ï¼Œéµå®ˆåè®® UINavigationControllerDelegate ï¼Œ\bå®ç°ä»£ç†æ–¹æ³• navigationController:didShowViewController:animated: ä»£ç LXFNavigationController.m 12/** ç³»ç»Ÿæ‰‹åŠ¿ä»£ç† */@property(nonatomic, strong) id popGesture; 1234567- (void)viewDidLoad &#123; [super viewDidLoad]; // è®°å½•ç³»ç»Ÿæ‰‹åŠ¿ä»£ç† self.popGesture = self.interactivePopGestureRecognizer; self.delegate = self;&#125; 123456789101112131415161718#pragma mark - UINavigationControllerDelegate// å½“æ§åˆ¶å™¨æ˜¾ç¤ºå®Œæ¯•çš„æ—¶å€™è°ƒç”¨- (void)navigationController:(UINavigationController *)navigationController didShowViewController:(UIViewController *)viewController animated:(BOOL)animated &#123; // æ ¹æ® æ ˆ å…ˆè¿›åå‡º if (self.viewControllers[0] == viewController) &#123; // æ ¹æ§åˆ¶å™¨ // è¿˜åŸä»£ç† self.interactivePopGestureRecognizer.delegate = self.popGesture; &#125; else &#123; // éæ§åˆ¶å™¨ // æ¸…ç©ºæ‰‹åŠ¿ä»£ç†å°±èƒ½å®ç°æ»‘åŠ¨è¿”å›ï¼ŒiOS6ä¸æ”¯æŒ self.interactivePopGestureRecognizer.delegate = nil; &#125; // å¦‚æœå½“å‰æ§åˆ¶å™¨ä¸ºæ ¹æ§åˆ¶å™¨ï¼Œåˆ™ä½¿æ‰‹åŠ¿å¤±æ•ˆï¼Œä¸ç„¶æ‰‹åŠ¿ä¼šå°†æ ¹æ§åˆ¶å™¨ç§»é™¤ if (self.viewControllers.count == 1) &#123; self.interactivePopGestureRecognizer.enabled = NO; &#125; else &#123; self.interactivePopGestureRecognizer.enabled = YES; &#125;&#125; é™„ä¸ŠDemo æœ€åè¯´ä¸¤å¥è¿™æ ·å°±å¯ä»¥äº†ï¼Œä½†æ˜¯æ³¨æ„äº†ï¼Œç°åœ¨å®ç°çš„æ˜¯æ»‘åŠ¨è¿”å›åŠŸèƒ½ï¼Œå¹¶æ²¡æœ‰å…¨å±æ»‘åŠ¨è¿”å›~~æ¥ä¸‹æ¥çœ‹ä¸‹ä¸€ç¯‡å§ iOS - å®ç°UINavigationå…¨å±æ»‘\båŠ¨è¿”å›(äºŒ)","categories":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/categories/iOS/"}],"tags":[{"name":"iOS","slug":"iOS","permalink":"http://linxunfeng.top/tags/iOS/"},{"name":"Swift","slug":"Swift","permalink":"http://linxunfeng.top/tags/Swift/"},{"name":"Objective-C","slug":"Objective-C","permalink":"http://linxunfeng.top/tags/Objective-C/"}]}]}