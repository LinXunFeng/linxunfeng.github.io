<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[æ‰“é€ Moyaä¾¿æ·è§£æžåº“ï¼Œæä¾›RxSwiftæ‹“å±•]]></title>
    <url>%2F2018%2F05%2F24%2F%E6%89%93%E9%80%A0Moya%E4%BE%BF%E6%8D%B7%E8%A7%A3%E6%9E%90%E5%BA%93%EF%BC%8C%E6%8F%90%E4%BE%9BRxSwift%E6%8B%93%E5%B1%95%2F</url>
    <content type="text"><![CDATA[MoyaMapperæ˜¯åŸºäºŽMoyaå’ŒSwiftyJSONå°è£…çš„å·¥å…·ï¼Œä»¥Moyaçš„pluginçš„æ–¹å¼æ¥å®žçŽ°é—´æŽ¥è§£æžï¼Œæ”¯æŒRxSwift + ä¸€ã€æ¦‚è¿°1ã€ç›¸ä¿¡å¤§å®¶åœ¨ä½¿ç”¨Swiftå¼€å‘æ—¶ï¼ŒMoyaæ˜¯é¦–é€‰çš„ç½‘ç»œå·¥å…·ï¼Œåœ¨æ¨¡åž‹è§£æžè¿™ä¸€å—ï¼ŒSwiftç‰ˆæ¨¡åž‹è§£æžçš„ç›¸å…³ç¬¬ä¸‰æ–¹åº“æœ‰å¾ˆå¤šï¼Œæœ¬äººæœ€ä¹ æƒ¯ç”¨çš„å°±æ˜¯SwiftyJSONã€‚ 2ã€ä¸‹é¢ä¼šå¼€å§‹è®²è§£æ•´ä¸ªä¸»è¦çš„å¼€å‘åŠŸèƒ½ä¸Žæ€æƒ³ã€‚ 3ã€ä»¥ä¸‹å†…å®¹æ˜¯åŸºäºŽå¤§å®¶ä¼šä½¿ç”¨Moyaå’ŒSwiftJSONçš„å‰æä¸‹æ‰€è‘—ï¼Œè¿˜ä¸ä¼šçš„åŒå­¦å¯ä»¥å…ˆç®€å•äº†è§£åŽå†æ¥é˜…è¯»æœ¬ç¯‡æ–‡ç« å“¦ï½ž äºŒã€åŠŸèƒ½å¼€å‘ä¸Žæ€æƒ³è®²è§£1ã€å°è¯•æ¨¡åž‹è§£æžMoyaè¯·æ±‚æœåŠ¡å™¨è¿”å›žçš„æ•°æ®ä»¥Responseç±»è¿”å›žç»™æˆ‘ä»¬ï¼Œé‚£æˆ‘ä»¬å°±ç»™Responseç±»åšä¸€ä¸ªæ‰©å±•ï¼Œè¿™é‡Œä»¥è§£æžæ¨¡åž‹ä¸ºä¾‹1234567// éœ€è¦ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œå‘ŠçŸ¥æˆ‘ä»¬è¦è½¬æ¢å‡ºä»€ä¹ˆæ¨¡åž‹public func mapObject&lt;T: Modelable&gt;(_ type: T.Type) -&gt; T &#123; // æ¨¡åž‹è§£æžè¿‡ç¨‹ ã€‚ã€‚ã€‚ return T&#125; Q: é‚£ä¸­é—´çš„è§£æžè¿‡ç¨‹è¯¥æ€Žä¹ˆå†™å‘¢ï¼Ÿ A: å¯ä»¥è®©å¼€å‘è€…éµå®ˆæŸä¸ªåè®®ï¼Œå®žçŽ°æŒ‡å®šçš„è½¬æ¢æ–¹æ³•å¹¶æè¿°è½¬æ¢å…³ç³»ã€‚å…¶è½¬æ¢è¿‡ç¨‹æˆ‘ä»¬ä¸éœ€è¦çŸ¥é“ï¼Œäº¤ç»™å¼€å‘è€…å³å¯ã€‚ é‚£æŽ¥ç€æˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ªåè®®Modelableï¼Œå¹¶å£°æ˜Žè½¬æ¢æ–¹æ³•123public protocol Modelable &#123; mutating func mapping(_ json: JSON)&#125; å¼€å‘è€…åˆ›å»ºä¸€ä¸ªMyMoelçš„ç»“æž„ä½“ï¼Œéµå®ˆåè®®Modelable,å¹¶å®žçŽ°mappingï¼Œä¹¦å†™è½¬æ¢å…³ç³»1234567struct MyModel: Modelable &#123; var _id = "" mutating func mapping(_ json: JSON) &#123; self._id = json["_id"].stringValue &#125;&#125; ä»¥ç›®å‰çš„çŽ°çŠ¶æ¥åˆ†æžä¸€ä¸‹ï¼šmapObjectå¯ä»¥è®©å¼€å‘è€…ä¼ å…¥æ¨¡åž‹ç±»åž‹ï¼Œè€Œæˆ‘ä»¬çš„åè®®æ–¹æ³•å´å¹¶éžæ˜¯ä¸ªç±»æ–¹æ³•ã€‚é‚£æˆ‘ä»¬éœ€è¦å…ˆå¾—åˆ°è¿™ä¸ªæ¨¡åž‹ç±»åž‹çš„å¯¹è±¡ï¼Œå†æ¥è°ƒç”¨mappingæ–¹æ³• 2ã€æ¨¡åž‹è§£æžçš„é©±åŠ¨å¼€å‘Q: æ€Žä¹ˆå¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Ÿ A: å¯ä»¥åœ¨åè®®ä¸­å£°æ˜Žä¸€ä¸ªåˆå§‹åŒ–æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ã€‚æ˜¯çš„ï¼Œæˆ‘ä»¬åœ¨mapObjectä¸­åˆ›å»ºå¯¹åº”æ¨¡åž‹ç±»åž‹çš„å¯¹è±¡ï¼Œè°ƒç”¨mappingæ–¹æ³•æ¥è½¬æ¢æ•°æ®ï¼Œå†æŠŠæ¨¡åž‹å¯¹è±¡ä¼ å‡ºåŽ»å³å¯ã€‚ é‚£æˆ‘ä»¬åœ¨Modelableä¸­å£°æ˜Žä¸€ä¸ªinitæ–¹æ³•ï¼Œå¹¶ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼ŒåŒºåˆ«äºŽå…¶å®ƒåˆå§‹åŒ–æ–¹æ³•1234public protocol Modelable &#123; mutating func mapping(_ json: JSON) init(_ json: JSON)&#125; OKï¼ŒçŽ°åœ¨æŠŠmapObjectæ–¹æ³•è¡¥é½æ¨¡åž‹è§£æžè¿‡ç¨‹ 1234567public func mapObject&lt;T: Modelable&gt;(_ type: T.Type) -&gt; T &#123; let modelJson = JSON(data)["modelKey"] // æ¨¡åž‹è§£æžè¿‡ç¨‹ var obj = T.init(modelJson) obj.mapping(modelJson) return obj&#125; 3ã€è‡ªå®šä¹‰è§£æžé”®åQ: è¿™æ ·æ˜¯æžå®šè§£æžäº†ï¼Œä½†æ˜¯ç½‘ç»œè¯·æ±‚å›žæ¥çš„jsonæ ¼å¼é”™ç»¼å¤æ‚ï¼Œæœ‰ä»€ä¹ˆåŠžæ³•å¯ä»¥è®©å¼€å‘è€…æ¥è‡ªè¡ŒæŒ‡å®šmodelå¯¹åº”çš„é”®åå‘¢ï¼Ÿ A: å—¯å—¯ï¼Œæ—¢ç„¶è§£æžè¿‡ç¨‹æ˜¯åœ¨ Response æ‰©å±•é‡Œæ“ä½œçš„ï¼Œé‚£æˆ‘ä»¬å¯ä»¥é€šè¿‡åè®®å®šä¹‰é”®åå±žæ€§ï¼Œå¹¶ä¸”ä½¿ç”¨ Runtime ç»™ResponseåŠ¨æ€æ·»åŠ ä¸€ä¸ªå±žæ€§ï¼Œæ¥è®°å½•éµå®ˆåè®®åŽçš„ç›¸åº”ç±»å 12345678910public protocol ModelableParameterType &#123; /// è¯·æ±‚æˆåŠŸæ—¶çŠ¶æ€ç å¯¹åº”çš„å€¼ static var successValue: String &#123; get &#125; /// çŠ¶æ€ç å¯¹åº”çš„é”® static var statusCodeKey: String &#123; get &#125; /// è¯·æ±‚åŽçš„æç¤ºè¯­å¯¹åº”çš„é”® static var tipStrKey: String &#123; get &#125; /// è¯·æ±‚åŽçš„ä¸»è¦æ¨¡åž‹æ•°æ®çš„é”® static var modelKey: String &#123; get &#125;&#125; 123456789101112131415// MARK:- runtimeextension Response &#123; private struct AssociatedKeys &#123; static var lxf_modelableParameterKey = "lxf_modelableParameterKey" &#125; var lxf_modelableParameter: ModelableParameterType.Type &#123; get &#123; let value = objc_getAssociatedObject(self, &amp;AssociatedKeys.lxf_modelableParameterKey) as AnyObject guard let type = value as? ModelableParameterType.Type else &#123; return NullParameter.self &#125; return type &#125; set &#123; objc_setAssociatedObject(self, &amp;AssociatedKeys.lxf_modelableParameterKey, newValue, .OBJC_ASSOCIATION_RETAIN_NONATOMIC) &#125; &#125;&#125; è¿™é‡Œæœ‰ä¸ªå‘ï¼š_SwiftValueé—®é¢˜ (çŒ®ä¸Š å‚è€ƒé“¾æŽ¥)å¦‚æžœæˆ‘ä»¬å­˜å‚¨çš„ä¸æ˜¯OCå¯¹è±¡ï¼Œé‚£ä¹ˆobjc_getAssociatedObjectå–å‡ºæ¥çš„å€¼çš„ç±»åž‹ç»Ÿç»Ÿä¸º_SwiftValueï¼Œç›´æŽ¥as? ModelableParameterType.Typeç»å¯¹æ˜¯nilï¼Œéœ€è¦åœ¨å–å‡ºæ¥åŽas AnyObjectå†è½¬æ¢ä¸ºå…¶å®ƒç±»åž‹æ‰ä¼šæˆåŠŸï½žï½ž çŽ°åœ¨å¼€å‘è€…å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªç±»æ¥éµå®ˆModelableParameterTypeåè®®ï¼Œå¹¶è‡ªå®šä¹‰è§£æžé”®å123456struct NetParameter : ModelableParameterType &#123; static var successValue: String &#123; return "false" &#125; static var statusCodeKey: String &#123; return "error" &#125; static var tipStrKey: String &#123; return "errMsg" &#125; static var modelKey: String &#123; return "results" &#125;&#125; 4ã€æ’ä»¶æ³¨å…¥Q: åŽ‰å®³äº†ï¼Œä¸è¿‡è¦åœ¨ä»€ä¹ˆæ—¶æœºä¸‹å­˜å‚¨è¿™ä¸ªè‡ªå®šä¹‰é”®åçš„NetParameterï¼Ÿ A: é¢ï¼Œè¿™ä¸ªï½žï½žï½ž å“¦ï¼Œå¯¹äº†ï¼Œå¯ä»¥é€šè¿‡Moyaæä¾›çš„æ’ä»¶æœºåˆ¶ï¼ ç¿»å‡ºMoyaä¸­çš„Plugin.Swiftï¼Œæ‰¾åˆ°è¿™ä¸ªprocessæ–¹æ³•ï¼Œçœ‹çœ‹æ–¹æ³•è¯´æ˜Žã€‚123/// åœ¨ç»“æŸä¹‹å‰ï¼Œå¯ä»¥è¢«ç”¨æ¥ä¿®æ”¹è¯·æ±‚ç»“æžœ/// Called to modify a result before completion.func process(_ result: Result&lt;Moya.Response, MoyaError&gt;, target: TargetType) -&gt; Result&lt;Moya.Response, MoyaError&gt; é‚£å¥½ï¼Œæˆ‘ä»¬ä¹Ÿåšä¸€ä¸ªæ’ä»¶MoyaMapperPluginç»™å¼€å‘è€…ä½¿ç”¨ï¼Œåœ¨åˆ›å»ºMoyaMapperPluginæ—¶æŠŠè‡ªå®šä¹‰è§£æžé”®åçš„ç±»åž‹ä¼ è¿›æ¥1234567891011121314151617public struct MoyaMapperPlugin: PluginType &#123; var parameter: ModelableParameterType.Type public init&lt;T: ModelableParameterType&gt;(_ type: T.Type) &#123; parameter = type &#125; // modify response public func process(_ result: Result&lt;Response, MoyaError&gt;, target: TargetType) -&gt; Result&lt;Response, MoyaError&gt; &#123; _ = result.map &#123; (response) -&gt; Response in // è¶æœºæ·»åŠ ç›¸å…³æ•°æ® response.lxf_modelableParameter = parameter return response &#125; return result &#125;&#125; ä½¿ç”¨ï¼šå¼€å‘è€…åœ¨åˆ›å»ºMoyaProviderå¯¹è±¡æ—¶ï¼Œé¡ºä¾¿æ³¨å…¥æ’ä»¶ã€‚(OS: è¿™ä¸€æ­¥å ªç§°â€œæ³¨å…¥çµé­‚â€)1MoyaProvider&lt;LXFNetworkTool&gt;(plugins: [MoyaMapperPlugin(NetParameter.self)]) 5ã€æ€»ç»“ ä»¥ä¸Šå°±æ˜¯ä¸»è¦çš„è¸©å‘è¿‡ç¨‹äº†ã€‚æ¨¡åž‹æ•°ç»„è§£æžå’ŒæŒ‡å®šè§£æžä¹Ÿè·Ÿè¿™äº›å·®ä¸å¤šçš„ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚æœ¬äººå·²ç»å°†å…¶å°è£…æˆä¸€ä¸ªå¼€æºåº“ MoyaMapperï¼ŒåŒ…å«äº†ä¸Šè¿°å·²ç»å’Œæœªæ›¾è¯´æ˜Žçš„åŠŸèƒ½ï¼Œä¸‹é¢ä¼šè®²è§£å¦‚ä½•åŽ»ä½¿ç”¨ã€‚ä»¥ä¸Šéƒ¨åˆ†å¯ä»¥ç§°ä¸ºå¼€èƒƒèœï¼Œç›®çš„å°±æ˜¯å¹³æ»‘è¿‡æ¸¡åˆ°ä¸‹é¢MoyaMapperçš„å…·ä½“ä½¿ç”¨ã€‚ å¯èƒ½å•å•ä½¿ç”¨MoyaMapperçš„é»˜è®¤å­åº“Coreï¼Œä½œç”¨ä½“ä¼šä¸Šå¹¶ä¸ä¼šå¾ˆæ·±ã€‚ä½†æ˜¯ï¼Œå¦‚æžœä½ ä¹Ÿæ˜¯ä½¿ç”¨RxSwiftæ¥å¼€å‘é¡¹ç›®çš„è¯ï¼Œè¯·å®‰è£…&#39;MoyaMapper/Rx&#39;å§ï¼Œç»å¯¹ä¸€ä¸ªå­—ï¼šã€Œçˆ½ã€ äºŒã€MoyaMapperçš„ä½¿ç”¨ MoyaMapperæ˜¯åŸºäºŽMoyaå’ŒSwiftyJSONå°è£…çš„å·¥å…·ï¼Œä»¥Moyaçš„pluginçš„æ–¹å¼æ¥å®žçŽ°é—´æŽ¥è§£æžï¼Œæ”¯æŒRxSwift 1ã€å®šä¹‰å¹¶æ³¨å…¥è‡ªå®šä¹‰é”®åç±» å®šä¹‰ä¸€ä¸ªéµå®ˆModelableParameterTypeåè®®çš„ç»“æž„ä½“ 1234567// å„å‚æ•°è¿”å›žçš„å†…å®¹è¯·å‚è€ƒä¸Šé¢JSONæ•°æ®å¯¹ç…§å›¾struct NetParameter : ModelableParameterType &#123; static var successValue: String &#123; return "false" &#125; static var statusCodeKey: String &#123; return "error" &#125; static var tipStrKey: String &#123; return "" &#125; static var modelKey: String &#123; return "results" &#125;&#125; æ­¤å¤–ï¼Œè¿™é‡Œè¿˜å¯ä»¥åšç®€å•çš„è·¯å¾„å¤„ç†ï¼Œä»¥åº”ä»˜å„ç§æƒ…å†µï¼Œä»¥â€™&gt;â€™éš”å¼€ 12345// å‡è®¾è¿”å›žçš„jsonæ•°æ®å…³äºŽè¯·æ±‚çŠ¶æ€çš„ç›¸å…³æ•°æ®å¦‚ä¸‹æ‰€ç¤ºï¼Œerror: &#123; 'errorStatus':false 'errMsg':'error Argument type'&#125; 12// æˆ‘ä»¬æŒ‡æ˜Žè§£æžè·¯å¾„ï¼šerrorå¯¹è±¡ä¸‹çš„errMsgå­—æ®µï¼Œä¸€å±‚å±‚è¡¨ç¤ºä¸‹åŽ»å³å¯static var tipStrKey: String &#123; return "error&gt;errMsg" &#125; ä»¥pluginçš„æ–¹å¼ä¼ é€’ç»™MoyaProvider 12// MoyaMapperPluginè¿™é‡Œåªéœ€è¦ä¼ å…¥ç±»åž‹MoyaProvider&lt;LXFNetworkTool&gt;(plugins: [MoyaMapperPlugin(NetParameter.self)]) 2ã€å®šä¹‰è§£æžæ¨¡åž‹åˆ›å»ºä¸€ä¸ªéµå®ˆModelableåè®®çš„ç»“æž„ä½“ 1234567891011121314struct MyModel: Modelable &#123; var _id = "" ... init(_ json: JSON) &#123; &#125; mutating func mapping(_ json: JSON) &#123; self._id = json["_id"].stringValue ... &#125;&#125;éµå®ˆModelableåè®®ï¼Œå®žçŽ°åè®®çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œåœ¨`mapping`æ–¹æ³•ä¸­æè¿°æ¨¡åž‹å­—æ®µçš„å…·ä½“è§£æž 3ã€è§£æžæ•°æ®0x00 è¯·æ±‚ç»“æžœä¸Žæ¨¡åž‹è§£æž123456789101112// Resultpublic func mapResult(params: ModelableParamsBlock? = nil) -&gt; MoyaMapperResult// Modelpublic func mapObject&lt;T: Modelable&gt;(_ type: T.Type, modelKey: String? = nil) -&gt; T// Result+Modelpublic func mapObjResult&lt;T: Modelable&gt;(_ type: T.Type, params: ModelableParamsBlock? = nil) -&gt; (MoyaMapperResult, T)// Modelspublic func mapArray&lt;T: Modelable&gt;(_ type: T.Type, modelKey: String? = nil) -&gt; [T]// Result+Modelspublic func mapArrayResult&lt;T: Modelable&gt;(_ type: T.Type, params: ModelableParamsBlock? = nil) -&gt; (MoyaMapperResult, [T]) ä¸Šé¢çš„äº”ä¸ªæ–¹æ³•ï¼Œè§‚å…¶åï¼ŒçŸ¥å…¶æ„ï¼Œè¿™é‡Œå°±ä¸è¿‡å¤šè§£é‡Šäº†ï¼Œä¸»è¦æ³¨æ„ä¸¤ç‚¹ï¼š result 1234// å…ƒç¥–ç±»åž‹// å‚æ•°1ï¼šæ ¹æ®statusCodeKeyå–å‡ºçš„å€¼ä¸ŽsuccessValueæ˜¯å¦ç›¸ç­‰// å‚æ•°2ï¼šæ ¹æ®tipStrKeyå–å‡ºçš„å€¼resultï¼š(Bool, String) params 12// params: ModelableParamsBlock? = nil// è¿™é‡Œåªæœ‰åœ¨ç‰¹æ®Šåœºæ™¯ä¸‹æ‰éœ€è¦ä½¿ç”¨åˆ°ã€‚å¦‚ï¼šé¡¹ç›®ä¸­éœ€è¦åœ¨æŸå¤„ä½¿ç”¨ç‰¹å®šæŽ¥å£ï¼Œä½†æ˜¯è¿”å›žçš„jsonæ ¼å¼è·Ÿè‡ªå·±é¡¹ç›®çš„ä¸ä¸€æ ·ï¼Œå¹¶ä¸”åªæœ‰è¿™ä¹ˆä¸€ä¸¤å¤„ç”¨å¾—ç€è¯¥é¢å¤–æŽ¥å£ï¼Œé‚£å°±éœ€è¦æˆ‘ä»¬è¿™ä¸ªå‚æ•°äº†ï¼Œä»¥Blockçš„æ–¹å¼è¿”å›žè§£æžå‚æ•°ç±»åž‹ã€‚ 0x01ã€ç‰¹å®šè§£æž1234// Modelpublic func toJSON(modelKey: String? = nil) -&gt; JSON// èŽ·å–æŒ‡å®šè·¯å¾„çš„å€¼public func fetchJSONString(path: String? = nil, keys: [JSONSubscriptType]) -&gt; String è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œå¦‚æžœæ²¡æœ‰æŒ‡å®šè·¯å¾„ï¼Œé»˜è®¤éƒ½æ˜¯é’ˆå¯¹modelKeyçš„12345// fetchJSONString(keys: &lt;[JSONSubscriptType]&gt;)1ã€é€šè¿‡ keys ä¼ é€’æ•°ç»„, è¯¥æ•°ç»„å¯ä¼ å…¥çš„ç±»åž‹ä¸º Int å’Œ String2ã€é»˜è®¤æ˜¯ä»¥ modelKey æ‰€ç¤ºè·¯å¾„ï¼Œæ¥èŽ·å–ç›¸åº”çš„æ•°å€¼ã€‚å¦‚æžœmodelKeyå¹¶éžæ˜¯ä½ æ‰€æƒ³è¦ä½¿ç”¨çš„è§£æžè·¯å¾„ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹æ–¹çš„é‡è½½æ–¹æ³•é‡æ–°æŒ‡å®šè·¯å¾„å³å¯// response.fetchJSONString(path: &lt;String?&gt;, keys: &lt;[JSONSubscriptType]&gt;) MoyaMapperä¹Ÿæä¾›äº†Rxå­åº“ï¼Œä¸ºæ–¹ä¾¿RxSwiftçš„æµå¼ç¼–ç¨‹ä¸‹ä¾¿æ·è§£æžæ•°æ® 12345MoyaMapperé»˜è®¤åªå®‰è£…Coreä¸‹çš„æ–‡ä»¶pod 'MoyaMapper'RxSwiftæ‹“å±•pod 'MoyaMapper/Rx' å…·ä½“ä½¿ç”¨è¿˜ä¸æ˜¯å¾ˆæ˜Žç™½çš„åŒå­¦å¯ä»¥ä¸‹è½½å¹¶è¿è¡ŒExampleçœ‹çœ‹ å¦‚æžœMoyaMapperæœ‰ä»€ä¹ˆä¸è¶³çš„åœ°æ–¹ï¼Œæ¬¢è¿Žæå‡ºissuesï¼Œæ„Ÿè°¢å¤§å®¶çš„æ”¯æŒ]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Swift</tag>
        <tag>RxSwift</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS é¢å‘åè®®æ–¹å¼å°è£…ç©ºç™½é¡µåŠŸèƒ½]]></title>
    <url>%2F2018%2F04%2F07%2FiOS-%E9%9D%A2%E5%90%91%E5%8D%8F%E8%AE%AE%E6%96%B9%E5%BC%8F%E5%B0%81%E8%A3%85%E7%A9%BA%E7%99%BD%E9%A1%B5%E5%8A%9F%E8%83%BD%2F</url>
    <content type="text"><![CDATA[ä¸ºäº†è‰¯å¥½çš„äº¤äº’ä½“éªŒï¼Œç›¸ä¿¡å¤§å®¶åœ¨å¯¹å¾…scrollViewæ— æ•°æ®æ—¶çš„æç¤ºé¡µéƒ½ä¼šä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹æ¥å®šåˆ¶ï¼Œæœ€å…¸åž‹çš„å°±æ˜¯ä½¿ç”¨DZNEmptyDataSetã€‚ä½†æ˜¯æ¯ä¸ªç•Œé¢éƒ½å†™ä¸€å †ä¸ŽDZNEmptyDataSetDelegateï¼ŒDZNEmptyDataSetSourceç›¸å…³çš„ä»£ç å°±ä¸å¤ªå¥½ï¼Œé‚£ä¸€èˆ¬æƒ…å†µä¸‹è‡ªç„¶çš„å°±ä¼šé‡‡ç”¨ç»§æ‰¿çš„æ–¹å¼æ¥é¿å…ã€‚è€ŒSwifté™¤äº†å¯ä»¥é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå®ƒè¿˜å¯ä»¥é¢å‘åè®®ç¼–ç¨‹ã€‚é‚£å¯ä¸å¯ä»¥ä¹Ÿç”¨åè®®æ¥è§£å†³æƒ…å†µå‘¢ï¼Ÿå˜¿å˜¿ï¼Œè¿™ä¸ªå¯ä»¥æœ‰ï¼Œé‚£æˆ‘ä»¬æŽ¥ä¸‹æ¥å°±æ¥è¯•è¯•æ€Žä¹ˆé€šè¿‡åè®®çš„æ–¹å¼æ¥é¿å…ä¸Šè¿°æƒ…å†µï¼Œå¹¶ä¸”å®žçŽ°ä¸€è¡Œä»£ç æ·»åŠ ç©ºç™½é¡µåŠŸèƒ½ + ä¸ºäº†è‰¯å¥½çš„äº¤äº’ä½“éªŒï¼Œç›¸ä¿¡å¤§å®¶åœ¨å¯¹å¾…scrollViewæ— æ•°æ®æ—¶çš„æç¤ºé¡µéƒ½ä¼šä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹æ¥å®šåˆ¶ï¼Œæœ€å…¸åž‹çš„å°±æ˜¯ä½¿ç”¨DZNEmptyDataSetã€‚ä½†æ˜¯æ¯ä¸ªç•Œé¢éƒ½å†™ä¸€å †ä¸ŽDZNEmptyDataSetDelegateï¼ŒDZNEmptyDataSetSourceç›¸å…³çš„ä»£ç å°±ä¸å¤ªå¥½ï¼Œé‚£ä¸€èˆ¬æƒ…å†µä¸‹è‡ªç„¶çš„å°±ä¼šé‡‡ç”¨ç»§æ‰¿çš„æ–¹å¼æ¥é¿å…ã€‚è€ŒSwifté™¤äº†å¯ä»¥é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå®ƒè¿˜å¯ä»¥é¢å‘åè®®ç¼–ç¨‹ã€‚é‚£å¯ä¸å¯ä»¥ä¹Ÿç”¨åè®®æ¥è§£å†³æƒ…å†µå‘¢ï¼Ÿå˜¿å˜¿ï¼Œè¿™ä¸ªå¯ä»¥æœ‰ï¼Œé‚£æˆ‘ä»¬æŽ¥ä¸‹æ¥å°±æ¥è¯•è¯•æ€Žä¹ˆé€šè¿‡åè®®çš„æ–¹å¼æ¥é¿å…ä¸Šè¿°æƒ…å†µï¼Œå¹¶ä¸”å®žçŽ°ä¸€è¡Œä»£ç æ·»åŠ ç©ºç™½é¡µåŠŸèƒ½ å‰è¨€å¦‚æžœå¯¹é¢å‘åè®®æœ‰ç–‘é—®çš„åŒå­¦å¯ä»¥çœ‹ä¸‹æˆ‘ä¹‹å‰çš„ä¸¤ç¯‡æ–‡ç«  iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰ iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰ ä¹‹å‰çš„æ–‡ç« ä¸­æåˆ°äº†ï¼Œåè®®é™¤äº†èµ·è§„èŒƒä½œç”¨ï¼Œè¿˜æœ‰åˆ«ä¸€ä¸ªç”¨å¤„ï¼Œå°±æ˜¯èµ‹äºˆèƒ½åŠ›ã€‚æˆ‘ä»¬çŽ°åœ¨çš„ç›®çš„å°±æ˜¯è®©ç›®æ ‡æŽ§åˆ¶å™¨æˆ–è€…ç›®æ ‡è§†å›¾åœ¨éµå®ˆæˆ‘ä»¬çš„åè®®åŽï¼Œå°±å¯ä»¥æœ‰å®žçŽ°ç©ºç™½é¡µçš„åŠŸèƒ½ã€‚ ä¸€ã€åŸºæœ¬å®žçŽ°1ã€åˆ›å»ºåè®®1234// MARK:- ç©ºè§†å›¾å ä½åè®®public protocol LXFEmptyDataSetable &#123; &#125; 2ã€ç¡®å®šé¢å‘ç±»ç¡®å®šæˆ‘ä»¬é¢å‘çš„ç±»ï¼Œä¸€èˆ¬tableViewæˆ–è€…collectionViewéƒ½æ˜¯å†™åœ¨æŽ§åˆ¶å™¨é‡Œï¼Œé‚£æˆ‘ä»¬é¢å‘çš„ç±»å°±è§„å®šä¸ºUIViewControllerï¼Œæˆ–è®¸ä¹Ÿæœ‰äººå†™åœ¨UIViewé‡Œï¼Œä¸è¿‡è¿™é‡Œå…ˆæŒ‰UIViewControlleræ¥å†™å§1234// MARK:- UIViewController - ç©ºè§†å›¾å ä½åè®®public extension LXFEmptyDataSetable where Self : UIViewController &#123; // 3ã€çš„å®žçŽ°çš„æ–¹æ³•å†™åœ¨è¿™é‡Œ&#125; 3ã€å®šä¹‰åŠŸèƒ½æ–¹æ³•å°†scrollViewä¼ é€’è¿›æ¥ï¼Œè®©æˆ‘ä»¬å®šä¹‰çš„æ–¹æ³•æ¥æš—åœ°é‡Œåšäº›æ“ä½œ1234func lxf_EmptyDataSet(_ scrollView: UIScrollView) &#123; scrollView.emptyDataSetDelegate = self scrollView.emptyDataSetSource = self&#125; 4ã€è®¾ç½®æ•°æ®æºå’Œä»£ç†åœ¨3ã€å®šä¹‰åŠŸèƒ½æ–¹æ³•ä¸­å°†delegateå’Œsourceè®¾ç½®ä¸ºäº†self ï¼Œè€Œåè®®æ˜¯æ— æ³•éµå®ˆå†æ¬¡éµå®ˆå…¶å®ƒåè®®çš„ï¼Œé‚£è®©ä»€ä¹ˆæ¥éµå®ˆå¯¹åº”çš„åè®®å‘¢ï¼Ÿè¦æ˜Žç™½è¿™é‡Œçš„selfæŒ‡çš„æ˜¯UIViewController,è€ƒè™‘åˆ°UIViewçš„å¯èƒ½ï¼Œè¿™é‡Œæˆ‘å°±è®©ä¸‡ç‰©å¯¹è±¡ä¹‹çˆ¶NSObjectæ¥éµå®ˆï¼Œå¹¶å®žçŽ°å¯¹åº”çš„æ•°æ®æºæ–¹æ³•å’Œä»£ç†æ–¹æ³•1234567891011extension NSObject : DZNEmptyDataSetDelegate, DZNEmptyDataSetSource &#123; public func image(forEmptyDataSet scrollView: UIScrollView!) -&gt; UIImage! &#123; // è¿”å›žæç¤ºå›¾ç‰‡ &#125; public func title(forEmptyDataSet scrollView: UIScrollView!) -&gt; NSAttributedString! &#123; // è®¾ç½®å¯Œæ–‡æœ¬æ ‡é¢˜ &#125; public func verticalOffset(forEmptyDataSet scrollView: UIScrollView!) -&gt; CGFloat &#123; // è®¾ç½®çºµå‘åç§» &#125;&#125; äºŒã€å®šåˆ¶ç©ºç™½é¡µé€šè¿‡ä¸Šè¿°æ­¥éª¤åŽï¼Œåªè¦è®©UIViewControlleréµå®ˆæˆ‘ä»¬çš„åè®®ï¼Œå†è°ƒç”¨ä¸€ä¸‹lxf_EmptyDataSetæ–¹æ³•å°±å¯ä»¥å®žçŽ°æ•°æ®ç©ºç™½é¡µäº†ã€‚ä½†æ˜¯ï¼Œè¿™æ ·ç›´æŽ¥å†™æ­»çš„æ–¹å¼å¾ˆä¸å¥½ï¼Œæœ‰æ—¶å€™ä¸€äº›åœºæ™¯æ˜¯éœ€è¦æˆ‘ä»¬åšå‡ºå®šåˆ¶çš„ï¼Œé‚£æ€Žä¹ˆå®žçŽ°å®šåˆ¶å‘¢ï¼Ÿåè®®åˆä¸èƒ½æœ‰è‡ªå·±çš„å˜é‡æ¥å­˜æ”¾æˆ‘ä»¬çš„å®šåˆ¶ã€‚ è¿™é‡Œå…ˆåšå‡ºä¸€ä¸ªé™å®šï¼Œæˆ‘ä»¬è¦ä½¿ç”¨é‡è½½æ–¹æ³•æ¥å®Œæˆè¯¥åŠŸèƒ½ï¼Œå®žçŽ°å³å¯é«˜å®šåˆ¶ï¼Œåˆå¯ä½¿ç”¨é»˜è®¤å®šåˆ¶ã€‚ å›žåˆ°åˆšåˆšçš„è¯é¢˜ï¼Œä½¿ç”¨UserDefaultsæ¥å®žçŽ°å¯ä»¥å—ï¼Ÿå¯ä»¥ï¼Œä½†æ˜¯æ¯”è¾ƒéº»çƒ¦ï¼Œå› ä¸ºUserDefaultsæ˜¯å•ä¾‹ï¼Œæ•´ä¸ªè¿›ç¨‹å…±ç”¨è¿™ä¸€ä»½èµ„æºï¼Œå¦‚æžœä½ å½“å‰controlleréµå®ˆäº†æˆ‘ä»¬çš„åè®®LXFEmptyDataSetableå¹¶åšå‡ºäº†å®šåˆ¶ï¼Œé‚£ä¹ˆå½“ä¸‹ä¸€ä¸ªcontrolleråœ¨éµå®ˆåè®®åŽä½¿ç”¨äº†é»˜è®¤å®šåˆ¶æ—¶ï¼Œé‚£ä½ è¦æ€Žä¹ˆåŠžï¼Ÿè¿˜è¦åŒºåˆ†scrollViewï¼Œé‚£å°±å¾—ä¿å­˜å½“å‰scrollViewï¼Œåœ¨é€€å‡ºå½“å‰controlleråŽè¿˜è¦æŠŠå¯¹åº”çš„ä¸œè¥¿ç½®ç©ºã€‚å¥½å’¯å¥½å’¯ï¼Œé‚£ä½ è¯´åˆ°åº•è¦æ€Žä¹ˆæžæ‰æœ€åˆé€‚ï¼Ÿ è§£å†³æ–¹æ¡ˆï¼šæ‹“å±•UIScrollViewï¼ï¼ï¼æœ‰æ²¡æœ‰å‘çŽ°ï¼Ÿï¼Œéžå¸¸åœ°æ°å·§ï¼Œæˆ‘ä»¬å®šä¹‰çš„æ–¹æ³•lxf_EmptyDataSetéœ€è¦å¤–ç•Œå°†UIScrollViewä¼ é€’è¿›æ¥ï¼Œåœ¨DZNEmptyDataSetçš„æ•°æ®æºæ–¹æ³•å’Œä»£ç†æ–¹æ³•ä¹Ÿæœ‰scrollViewã€‚é‚£è®©UIScrollViewæ¥æºå¸¦æˆ‘ä»¬çš„å®šåˆ¶å°±å¥½å•¦ã€‚ 1ã€å®šä¹‰å®šåˆ¶ç›¸å…³çš„æžšä¸¾è¿™é‡Œæˆ‘å®šä¹‰äº†å¸¸ç”¨çš„å®šåˆ¶ç›¸å…³çš„æžšä¸¾1234567891011121314public enum LXFEmptyDataSetAttributeKeyType &#123; /// çºµå‘åç§»(-50) CGFloat case verticalOffset /// æç¤ºè¯­(æš‚æ— æ•°æ®) String case tipStr /// æç¤ºè¯­çš„font(system15) UIFont case tipFont /// æç¤ºè¯­é¢œè‰²(D2D2D2) UIColor case tipColor /// æç¤ºå›¾(LXFEmptyDataPic) UIImage case tipImage /// å…è®¸æ»šåŠ¨(true) Bool case allowScroll&#125; 2ã€æ‹“å±•UIScrollViewä¸ºUIScrollViewå®šä¹‰ä¸€ä¸ªå®šåˆ¶ç›¸å…³çš„å±žæ€§å­—å…¸1234567891011121314extension UIScrollView &#123; private struct AssociatedKeys &#123; static var lxf_emptyAttributeDict:[LXFEmptyDataSetAttributeKeyType : Any]? &#125; /// å±žæ€§å­—å…¸ var lxf_emptyAttributeDict: [LXFEmptyDataSetAttributeKeyType : Any]? &#123; get &#123; return objc_getAssociatedObject(self, &amp;AssociatedKeys.lxf_emptyAttributeDict) as? [LXFEmptyDataSetAttributeKeyType : Any] &#125; set &#123; objc_setAssociatedObject(self, &amp;AssociatedKeys.lxf_emptyAttributeDict, newValue as [LXFEmptyDataSetAttributeKeyType : Any]?, objc_AssociationPolicy.OBJC_ASSOCIATION_RETAIN_NONATOMIC) &#125; &#125;&#125; 3ã€å®Œå–„lxf_EmptyDataSetæ–¹æ³•è¿™é‡Œæˆ‘ä»¬è®©å¤–ç•Œé€šè¿‡é—­åŒ…çš„æ–¹å¼æ¥å®šåˆ¶è‡ªå·±çš„ç©ºç™½é¡µ12345678// MARK:- UIViewController - ç©ºè§†å›¾å ä½åè®®public extension LXFEmptyDataSetable where Self : UIViewController &#123; func lxf_EmptyDataSet(_ scrollView: UIScrollView, attributeBlock: (()-&gt;([LXFEmptyDataSetAttributeKeyType : Any]))? = nil) &#123; scrollView.lxf_emptyAttributeDict = attributeBlock != nil ? attributeBlock!() : nil scrollView.emptyDataSetDelegate = self scrollView.emptyDataSetSource = self &#125;&#125; 4ã€ä½¿ç”¨å®šåˆ¶å±žæ€§å­—å…¸è¿™é‡Œä»¥è¿”å›žæç¤ºå›¾ç‰‡çš„æ–¹æ³•ä¸ºä¾‹å§123456public func image(forEmptyDataSet scrollView: UIScrollView!) -&gt; UIImage! &#123; guard let tipImg = scrollView.lxf_emptyAttributeDict?[.tipImage] as? UIImage else &#123; return UIImage(named: &quot;LXFEmptyDataPic&quot;) &#125; return tipImg&#125; 5ã€å¤–ç•Œçš„ä½¿ç”¨å§¿åŠ¿1234567891011121314151617181920212223242526class LXFEmptyDemoController: UIViewController &#123; override func viewDidLoad() &#123; super.viewDidLoad() initUI() &#125;&#125;extension LXFEmptyDemoController: LXFEmptyDataSetable &#123; fileprivate func initUI() &#123; let tableView = UITableView() // ... // é«˜å®šåˆ¶ self.lxf_EmptyDataSet(tableView) &#123; () -&gt; ([LXFEmptyDataSetAttributeKeyType : Any]) in return [ .tipStr:"å“Ÿå“Ÿå“Ÿ", .verticalOffset:-150, .allowScroll: false ] &#125; // é»˜è®¤å®šåˆ¶ // self.lxf_EmptyDataSet(tableView) &#125;&#125; ä¸‰ã€å¼€æºåº“æˆ‘å¯¹è¿™ä¸ªè¿‡ç¨‹è¿›è¡Œä¸€æ¬¡æ•´ç†ï¼Œå¹¶åšæˆä¸€ä¸ªåä¸º LXFProtocolTool çš„åº“å¹¶ä¸Šä¼ è‡³gitHubã€‚å¯ä»¥ä½¿ç”¨Cocoapodsçš„æ–¹å¼æ¥å®‰è£…ä½¿ç”¨ 1pod &apos;LXFProtocolTool&apos; æˆ‘ä¹Ÿå°† iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰ ä¸­æåŠçš„é€šè¿‡åè®®ä¾¿æ·åŠ è½½xibçš„åŠŸèƒ½ä¹Ÿé›†æˆäº†è¿›æ¥ã€‚å¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦åœ¨Podfileå†™æ˜Žè¦å®‰è£…çš„åŠŸèƒ½ XibåŠ è½½ 1pod &apos;LXFProtocolTool/LXFNibloadable&apos; ç©ºç™½è§†å›¾ 1pod &apos;LXFProtocolTool/LXFEmptyDataSetable&apos; åˆ›å»ºè¿™ä¸ªåº“çš„ç›®çš„æ˜¯ä¸ºäº†é€šè¿‡åè®®çš„æ–¹å¼æ¥æ–¹ä¾¿å¿«æ·åœ°å®žçŽ°ä¸€äº›çš„å®žç”¨åŠŸèƒ½ï¼Œç›®å‰åŠŸèƒ½ä¸å¤šï¼Œä¸è¿‡å¾€åŽä¼šé€æ¸å¢žåŠ ï¼Œæˆ–è®¸ä½ æœ‰ä»€ä¹ˆæƒ³å®žçŽ°çš„åŠŸèƒ½ä¹Ÿå¯ä»¥æå‡ºæ¥ï¼Œå–œæ¬¢çš„å°±ç»™ä¸ªStaré¼“åŠ±ä¸‹æˆ‘å§ ðŸš€ ðŸš€ ðŸš€]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Swift</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS ç»„ä»¶åŒ–å¼€å‘ï¼ˆå››ï¼‰ï¼šfastlaneå®žçŽ°podè‡ªåŠ¨åŒ–]]></title>
    <url>%2F2018%2F04%2F06%2FiOS-%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9Afastlane%E5%AE%9E%E7%8E%B0pod%E8%87%AA%E5%8A%A8%E5%8C%96%2F</url>
    <content type="text"><![CDATA[åœ¨ç¬¬ä¸€æ¬¡ç»„ä»¶åŒ–çš„æ—¶å€™ï¼Œéœ€è¦æ‰§è¡Œå¾ˆå¤šæ“ä½œï¼Œè¿™äº›æ“ä½œå¯ä»¥åœ¨ã€iOS ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨ã€‘ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œåœ¨ç»„ä»¶åŒ–åŽçš„é‡å¤æ€§æ“ä½œå°±æ˜¯å‡çº§ï¼Œè€Œå‡çº§è¿™ä¸ªè¿‡ç¨‹æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬æœ‰ä»€ä¹ˆåŠžæ³•å¯ä»¥å¾ˆæ–¹ä¾¿çš„æžå®šè¿™ä¸€è¿‡ç¨‹æ¥èŠ‚çº¦æˆ‘ä»¬å¤§é‡çš„æ—¶é—´å‘¢ï¼Ÿ + åœ¨ç¬¬ä¸€æ¬¡ç»„ä»¶åŒ–çš„æ—¶å€™ï¼Œéœ€è¦æ‰§è¡Œå¾ˆå¤šæ“ä½œï¼Œè¿™äº›æ“ä½œå¯ä»¥åœ¨ã€iOS ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨ã€‘ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œåœ¨ç»„ä»¶åŒ–åŽçš„é‡å¤æ€§æ“ä½œå°±æ˜¯å‡çº§ï¼Œè€Œå‡çº§è¿™ä¸ªè¿‡ç¨‹æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬æœ‰ä»€ä¹ˆåŠžæ³•å¯ä»¥å¾ˆæ–¹ä¾¿çš„æžå®šè¿™ä¸€è¿‡ç¨‹æ¥èŠ‚çº¦æˆ‘ä»¬å¤§é‡çš„æ—¶é—´å‘¢ï¼Ÿ ä¸€ã€å‡çº§å¿…å¤‡æ“ä½œä¿®æ”¹å®Œæ ¸å¿ƒä»£ç åŽï¼Œä¸€å…±è¿˜éœ€è¦åšä»¥ä¸‹å‡ æ­¥ï¼š1ã€ä¿®æ”¹specæ–‡ä»¶ï¼ˆä¿®æ”¹s.versionï¼Œs.descriptionç­‰ï¼‰2ã€pod install ï¼ˆä½¿Exampleä¸Žpodä¸‹æ¥çš„åº“äº§ç”Ÿå…³è”ï¼‰3ã€æäº¤æœ¬åœ°ä»“åº“ä»£ç è‡³è¿œç¨‹ä»“åº“4ã€æ‰“æ ‡ç­¾ï¼Œå¹¶æäº¤è‡³è¿œç¨‹5ã€éªŒè¯specï¼Œå¹¶æè‡³ç§æœ‰ç´¢å¼•åº“ äºŒã€Fastlane1ã€ç®€ä»‹Fastlaneæ–‡æ¡£è¯´æ˜Ž Fastlaneæ˜¯ä¸€ä¸ªrubyè„šæœ¬é›†åˆï¼Œå®ƒå¯ä»¥æŒ‰ç…§æˆ‘ä»¬æŒ‡å®šçš„è·¯çº¿ï¼Œåœ¨æŒ‡å®šä½ç½®æ‰§è¡Œæˆ‘ä»¬æ‰€è¦æ‰§è¡Œçš„æ“ä½œã€‚è¿™é‡Œæˆ‘ä»¬ç§°è¿™æ ·çš„è·¯çº¿ä¸ºã€Œèˆªé“(lane)ã€ï¼Œè¿™æ ·çš„æ“ä½œç§°ä¸ºã€ŒActionã€ Actionæ˜¯Fastlaneè‡ªåŠ¨åŒ–æµç¨‹ä¸­çš„æœ€å°æ‰§è¡Œå•å…ƒï¼Œç”¨æ¥æ‰§è¡ŒFastlaneè„šæœ¬ä¸­çš„å‘½ä»¤ï¼Œå…³äºŽæ›´å¤šçš„æè¿°å¯ä»¥åˆ°Actions - fastlane docsæŸ¥çœ‹ï¼Œé‡Œé¢ä¹Ÿä»‹ç»äº†å¸¸ç”¨çš„actionæœ‰å“ªäº›ï¼Œé¡ºå¸¦é™„ä¸Šactionçš„æºç åœ°å€ï¼Œè¿™ä¸ªæºç åœ¨åŽé¢è‡ªå®šä¹‰èµ·å‚è€ƒä½œç”¨ 2ã€ å®‰è£… ç¡®ä¿rubyä¸ºæœ€æ–°ç‰ˆæœ¬ 12brew updatebrew install ruby å®‰è£…fastlane 1sudo gem install -n /usr/local/bin fastlane æŸ¥çœ‹å½“å‰fastlaneç‰ˆæœ¬ 1fastlane --version æŸ¥çœ‹æ‰€æœ‰action 1fastlane actions ä¸‰ã€fastlaneåˆå§‹åŒ–cdåˆ°ä½ çš„æœ¬åœ°ç»„ä»¶ä»“åº“çš„æ ¹ç›®å½• åˆå§‹åŒ–fastlanefastlane initä¸è¿‡è¿™ä¸ªæ­¥éª¤å¯¹æˆ‘ä»¬æ¥è¯´å¯ä»¥è·³è¿‡ï¼Œåœ¨initåŽæç¤ºä½ è¾“å…¥ä¸€äº›ä¸œè¥¿ï¼ŒåŒ…æ‹¬ä¸Šä¼ éœ€è¦ç”¨åˆ°çš„APPLE IDä»€ä¹ˆçš„ä¸€å †ä¸œè¥¿ï¼Œç”±äºŽæˆ‘ä»¬å¹¶ä¸æ¶‰åŠè¿™äº›ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨æ›´æ–¹ä¾¿çš„æ–¹å¼ 123456# åˆ›å»ºä¸€ä¸ªfastlaneæ–‡ä»¶å¤¹# è¿›å…¥fastlaneç›®å½•# åˆ›å»ºä¸€ä¸ªFastfileæ–‡ä»¶mkdir fastlanecd fastlanetouch Fastfile 1ã€ä¿®æ”¹Fastfile123456789desc &apos;æè¿°èˆªé“ä½œç”¨&apos;lane :èˆªé“åç§° do |options|// options å¯ä»¥ç”¨æ¥ä¼ é€’å‚æ•°// ç¤ºä¾‹ï¼švarName = options[:name]// èˆªé“ä¸Šéœ€è¦æ‰§è¡Œçš„æ“ä½œend èˆªé“ä¸Šè¦æ‰«æçš„æ“ä½œå¯ä»¥åˆ°Actionsä¸ŠæŸ¥æ‰¾ï¼Œå¯ä»¥é€šè¿‡å…³é”®å­—æœç´¢ï¼Œå¦‚ä¸‹å›¾ç‚¹è¿›åŽ»å¯ä»¥çœ‹åˆ°å…·ä½“çš„ä½¿ç”¨åŠå‚æ•°è¯´æ˜Ž è¿™é‡Œé™„ä¸Šæœ¬äººçš„Fastfileå†…å®¹ï¼š123456789101112131415161718192021222324252627282930313233343536373839desc &apos;LXFUpdatePodTool èˆªé“ç”¨æ¥è‡ªåŠ¨åŒ–å‡çº§ç»´æŠ¤ç§æœ‰åº“&apos;lane : LXFUpdatePodTool do |options|tagNum = options[:tag]podspecName = options[:specName]# èˆªé“ä¸Šéœ€è¦æ‰§è¡Œçš„æ“ä½œ# å…·ä½“actionåˆ° https://docs.fastlane.tools/actions ä¸Šé¢æŸ¥æ‰¾# è¿™é‡Œçš„è·¯å¾„ä»¥ä»“åº“æ ¹ç›®å½•ä¸ºå‡†# 1ã€ä¿®æ”¹specæ–‡ä»¶ï¼ˆä¿®æ”¹s.versionï¼Œs.descriptionç­‰ï¼‰# 2ã€pod install ï¼ˆä½¿Exampleä¸Žpodä¸‹æ¥çš„åº“äº§ç”Ÿå…³è”ï¼‰cocoapods( clean: true, podfile: &quot;./Example/Podfile&quot;)# 3ã€æäº¤æœ¬åœ°ä»“åº“ä»£ç è‡³è¿œç¨‹ä»“åº“git_add(path: &quot;.&quot;)git_commit(path: &quot;.&quot;, message: &quot;upgrade repo&quot;)push_to_git_remote# 4ã€æ‰“æ ‡ç­¾ï¼Œå¹¶æäº¤è‡³è¿œç¨‹add_git_tag( tag: tagNum)push_git_tags# 5ã€éªŒè¯specï¼Œå¹¶æè‡³ç§æœ‰ç´¢å¼•åº“pod_lib_lint(allow_warnings: true)# å› ä¸ºæœ¬åœ°ç´¢å¼•åº“repoçš„åå­—æ˜¯åŸºæœ¬ä¸Šä¸ä¼šåŽ»æ”¹å˜çš„ï¼Œæ‰€ä»¥è¿™é‡Œç›´æŽ¥å†™æ­» LXFSpecs# podspecçš„åå­—éœ€è¦ç”±å¤–ç•Œä¼ å…¥pod_push(path: &quot;#&#123;podspecName&#125;.podspec&quot;, repo: &quot;LXFSpecs&quot;)end 2ã€éªŒè¯Fastfile1fastlane lanes 3ã€æ‰§è¡Œfastlaneéœ€è¦åœ¨ç»„ä»¶ä»“åº“çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œ 1fastlane LXFUpdatePodTool tag:0.1.1 specName:LXFMain æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ä¸è¶…è¿‡30ç§’ï½ž å››ã€è‡ªå®šä¹‰Actionä»¥ä¸Šçš„è¿‡ç¨‹å·²ç»å¯ä»¥å®Œæˆä¸€æ•´ä¸ªè‡ªåŠ¨åŒ–æ›´æ–°äº†ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªè¾“å…¥çš„tagå¯èƒ½ä¼šé¢ä¸´ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯æœ¬åœ°å’Œè¿œç¨‹éƒ½å¯èƒ½å·²ç»å­˜åœ¨ï¼Œå³å‘ç”Ÿå†²çªï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥é€‰æ‹©è‡ªåŠ¨åˆ é™¤æœ¬åœ°å’Œè¿œç¨‹å†²çªçš„é‚£ä¸ªtagï¼Œå†é‡æ–°ä¸Šä¼ å½“å‰tag 1ã€åˆ›å»ºä¸€ä¸ªæ–°çš„action1fastlane new_action æŒ‰è¦æ±‚è¾“å…¥Actionåç§° å®ŒæˆåŽfastlaneç›®å½•ä¸‹å°±ä¼šå¤šå‡ºä¸€ä¸ªåä¸ºactionsçš„æ–‡ä»¶å¤¹ï¼Œé‡Œé¢å­˜æ”¾çš„å°±æ˜¯ä½ è‡ªå®šä¹‰action 2ã€ç¼–è¾‘è‡ªå®šä¹‰actionæ‰“å¼€remove_git_tag.rbï¼Œå¼€å§‹è‡ªå®šä¹‰æˆ‘ä»¬çš„actionå§ï¼Œä»€ä¹ˆï¼Ÿä¸ä¼šè¯­æ³•æ€Žä¹ˆåŠžï¼Ÿå¯ä»¥å‚è€ƒåˆ«äººçš„å˜›ï¼Œä¸Šé¢ç»™å‡ºçš„actionçš„æºç åœ°å€å°±æœ‰ç”¨æ­¦ä¹‹åœ°äº†ï¼Œæ¯”å¦‚pod_pushã€‚è¿™é‡Œæˆ‘ç›´æŽ¥è´´å‡ºæˆ‘å·²ç»å®Œæˆçš„ä¸»è¦ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960# å¯ä»¥ä½¿ç”¨ fastlane action remove_git_tag æ¥å‚çœ‹è¯¦ç»†æè¿°def self.run(params) # è¿™é‡Œå†™è¦æ‰§è¡Œçš„æ“ä½œ # params[:å‚æ•°åç§°] å‚æ•°åç§°ä¸Žä¸‹é¢self.available_optionsä¸­çš„ä¿æŒä¸€è‡´ tagNum = params[:tagNum] rmLocalTag = params[:rmLocalTag] rmRemoteTag = params[:rmRemoteTag] command = [] if rmLocalTag # åˆ é™¤æœ¬åœ°æ ‡ç­¾ # git tag -d æ ‡ç­¾åç§° command &lt;&lt; &quot;git tag -d #&#123;tagNum&#125;&quot; end if rmRemoteTag # åˆ é™¤è¿œç¨‹æ ‡ç­¾ # git push origin :æ ‡ç­¾åç§° command &lt;&lt; &quot;git push origin :#&#123;tagNum&#125;&quot; end result = Actions.sh(command.join(&apos;&amp;&apos;)) UI.success(&quot;Successfully remove tag ðŸš€ &quot;) return resultenddef self.description # å¯¹å½“å‰è„šæœ¬çš„ç®€å•æè¿° &quot;åˆ é™¤tag&quot;enddef self.details # å¯¹å½“å‰è„šæœ¬çš„å…·ä½“æè¿° &quot;ä½¿ç”¨å½“å‰actionæ¥åˆ é™¤æœ¬åœ°å’Œè¿œç¨‹å†²çªçš„tag&quot;enddef self.available_options # ç”¨æ¥ä¼ é€’å‚æ•° [ FastlaneCore::ConfigItem.new(key: :tagNum, description: &quot;è¾“å…¥å³å°†åˆ é™¤çš„tag&quot;, is_string: true), FastlaneCore::ConfigItem.new(key: :rmLocalTag, description: &quot;æ˜¯å¦åˆ é™¤æœ¬åœ°tag&quot;, optional:true, is_string: false, default_value: true), FastlaneCore::ConfigItem.new(key: :rmRemoteTag, description: &quot;æ˜¯å¦åˆ é™¤è¿œç¨‹tag&quot;, optional:true, is_string: false, default_value: true) ]enddef self.authors # ä½œè€…å§“å [&quot;LinXunFeng&quot;]end 3ã€æŸ¥çœ‹actionæè¿°åŒæ ·ï¼Œè¿™é‡Œå…ˆcdåˆ°ç»„ä»¶åº“çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼ŒåŽŸå› æ˜¯è¿™ä¸ªè‡ªå®šä¹‰actionåªå­˜åœ¨å½“å‰æ ¹ç›®å½•ä¸‹çš„fastlaneä¸­ï¼Œå…¶å®ƒfastlaneçš„éžè‡ªå®šä¹‰çš„actionå°±ä¸ç”¨åœ¨å½“å‰æ ¹ç›®å½•ä¸‹æ“ä½œï½ž1fastlane action remove_git_tag 4ã€æµ‹è¯•æ‰§è¡Œå…ˆæ¥çœ‹çœ‹å½“å‰ç»„ä»¶åº“å·²å­˜åœ¨çš„tag1git tag å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘æ˜¯å·²ç»æœ‰ä¸€ä¸ª0.1.1ç‰ˆæœ¬çš„äº†ã€‚è¿™æ—¶æˆ‘ä»¬å†æ¥æ‰§è¡Œä¸€æ¬¡LXFUpdatePodToolèˆªé“1fastlane LXFUpdatePodTool tag:0.1.1 specName:LXFMain äº”ã€å·¥å…·æ‹¿èµ°LXFUpdatePodTool å·²ç»ä¼ åˆ°æˆ‘çš„GitHubä¸Šï¼Œéœ€è¦çš„åŒå­¦å°±æ‹¿èµ°å§ï¼Œé¡ºæ‰‹ç»™ä¸ªStarå’¯ Orz]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>Git</tag>
        <tag>GitHub</tag>
        <tag>Cocoapods</tag>
        <tag>iOS</tag>
        <tag>ç»„ä»¶åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸‰ï¼‰ï¼šåŠ è½½èµ„æºæ–‡ä»¶]]></title>
    <url>%2F2018%2F04%2F06%2FiOS-%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%8A%A0%E8%BD%BD%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[ç»è¿‡å‰ä¸¤ç¯‡æ–‡ç« çš„å­¦ä¹ ï¼Œç›¸ä¿¡å¯¹ç»„ä»¶åŒ–å¼€å‘æœ‰äº†å¤§è‡´çš„äº†è§£ï¼Œé‚£æˆ‘ä»¬è¿™ç¯‡æ–‡ç« å°±æ¥è®²è®²èµ„æºæ–‡ä»¶çš„åŠ è½½å§ + ç»è¿‡å‰ä¸¤ç¯‡æ–‡ç« çš„å­¦ä¹ ï¼Œç›¸ä¿¡å¯¹ç»„ä»¶åŒ–å¼€å‘æœ‰äº†å¤§è‡´çš„äº†è§£ï¼Œé‚£æˆ‘ä»¬è¿™ç¯‡æ–‡ç« å°±æ¥è®²è®²èµ„æºæ–‡ä»¶çš„åŠ è½½å§ è¿™é‡Œæˆ‘æ–°å»ºäº†ä¸€ä¸ªLXFMainç»„ä»¶åº“ï¼Œä¸»è¦æ˜¯ç”¨æ¥æ˜¾ç¤ºTabBarçš„çŽ©æ„ï¼Œç„¶åŽå†è¿›è¡Œç»„ä»¶åŒ–æŠ½ç¦»å‡ºæ¥ï¼Œå…¶ä¸­çš„è¿‡ç¨‹è¿™é‡Œä¸å†èµ˜è¿°ï¼Œè¿˜æ²¡äº†è§£è¿‡çš„åŒå­¦å»ºè®®å…ˆé˜…è¯»ä¸‹è¿™ä¸¤ç¯‡æ–‡ç« å§ iOS ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨ iOS ç»„ä»¶åŒ–å¼€å‘ï¼ˆäºŒï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„æ›´æ–°ä¸Žå­åº“ è¿™é‡Œè·Ÿä¹‹å‰ä¸ä¸€æ ·çš„åœ°æ–¹åœ¨äºŽå¤šäº†å›¾ç‰‡èµ„æºï¼Œç»„ä»¶çš„æ ¸å¿ƒä»£ç æ”¾åœ¨Classesæ–‡ä»¶å¤¹ä¸­ï¼Œè€Œå›¾ç‰‡æˆ‘ä»¬åˆ™å­˜æ”¾äºŽAssetsç›®å½•ä¸‹ï¼Œå¦‚å›¾æ‰€ç¤º ä¸€ã€ä¿®æ”¹Specå°†å…³äºŽèµ„æºåŠ è½½çš„æ³¨é‡ŠåŽ»æŽ‰1234s.resource_bundles = &#123; # &apos;LXFMain&apos; =&gt; [&apos;LXFMain/Assets/*.png&apos;] &apos;LXFMain&apos; =&gt; [&apos;LXFMain/Assets/*&apos;]&#125; å›žåˆ°LXFMainçš„æ¨¡æ¿åº“ï¼Œæˆ‘ä»¬è¿›è¡Œä¸€æ¬¡æœ¬åœ°çš„å®‰è£…å’Œæµ‹è¯•(pod install) å¯ä»¥çœ‹åˆ°ï¼Œå›¾ç‰‡èµ„æºä¹Ÿå®‰è£…è¿›æ¥äº†ï¼Œä½†æ˜¯è¿è¡Œçš„æ•ˆæžœå¦‚ä¸‹å›¾ï¼Œå›¾ç‰‡å¹¶ä¸èƒ½æˆåŠŸåŠ è½½å‡ºæ¥ äºŒã€ä¿®æ”¹åŠ è½½èµ„æºä»£ç è¿™æ˜¯å½“å‰åŠ è½½å›¾ç‰‡çš„ç›¸å…³ä»£ç 1[UIImage imageNamed:@&quot;å›¾ç‰‡åç§°&quot;]; å³å‡»æ˜¾ç¤ºåŒ…å†…å®¹ å›¾ç‰‡å°±åœ¨è¿™ä¸ªLXFMain.bundleé‡Œé¢(è¿™é‡Œå°±ä¸æˆªå›¾çœ‹äº†)ï¼Œè¿™é‡Œä¸»è¦æ˜¯è®©å¤§å®¶å¯¹è¿™ä¸ªç›®å½•ç»“æž„æœ‰ä¸ªäº†è§£ æˆ‘ä»¬å¯¹imageNamedè¿›è¡Œè·³è½¬åˆ°å®šä¹‰æ“ä½œ 1// load from main bundle å¯ä»¥çœ‹åˆ°ï¼Œå®˜æ–¹æ³¨é‡Šç€imageNamedåŠ è½½çš„æ˜¯main bundleä¸­çš„èµ„æº,mainBundleçš„ä½ç½®å¦‚ä¸‹å›¾ è¿™æ ·å½“ç„¶å°±æ— æ³•åŠ è½½åˆ°å›¾ç‰‡å•¦ï¼Œæˆ‘ä»¬éœ€è¦è®©å®ƒåŠ è½½è‡ªå·±å½“å‰æ‰€åœ¨bundleé‡Œçš„å›¾ç‰‡ ï¼Œæ‰€ä»¥åŠ è½½å›¾ç‰‡çš„ä»£ç éœ€è¦è¿›è¡Œä¿®æ”¹1234NSString *normalImgName = @"ä¸ªäºº@2x.png";NSBundle *curBundle = [NSBundle bundleForClass:self.class]; // èŽ·å–å½“å‰bundleNSString *normalImgPath = [curBundle pathForResource:normalImgName ofType:nil inDirectory:@"LXFMain.bundle"];UIImage *normalImage = [UIImage imageWithContentsOfFile:normalImgPath]; ä½†æ˜¯ç›´æŽ¥å†™LXFMain.bundleå¹¶ä¸å¥½ï¼Œä¸å¯æŽ§ï¼Œæ‰€ä»¥è¿˜éœ€è¦æ”¹è¿›ä¸€ä¸‹ï¼š12345678NSString *normalImgName = [NSString stringWithFormat:@&quot;%@@2x.png&quot;, normalImg];NSBundle *curBundle = [NSBundle bundleForClass:self.class];// *********** é‡ç‚¹ *********** //NSString *curBundleName = curBundle.infoDictionary[@&quot;CFBundleName&quot;];NSString *curBundleDirectory = [NSString stringWithFormat:@&quot;%@.bundle&quot;, curBundleName];NSString *normalImgPath = [curBundle pathForResource:normalImgName ofType:nil inDirectory:curBundleDirectory];// *************************** //UIImage *normalImage = [UIImage imageWithContentsOfFile:normalImgPath]; ä¸‰ã€èŠèŠxibXibçš„åŠ è½½ä¹Ÿæ˜¯å¦‚æ­¤1234NSBundle *curBundle = [NSBundle bundleForClass:self.class];LXFCenterView *centerView = (LXFCenterView *)[curBundle loadNibNamed:@&quot;LXFCenterView&quot; owner:nil options:nil].firstObject;centerView.frame = CGRectMake(30, 140, 200, 100);[self.view addSubview:centerView]; ä¸è¿‡xibä¸­å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¦‚æžœæ˜¯ç›´æŽ¥åœ¨xibä¸­æ‹–å…¥ä¸€ä¸ªimageViewæŽ§ä»¶æ¥è®¾ç½®å›¾ç‰‡çš„åŠ è½½ï¼Œæˆ‘ä»¬åˆ™éœ€è¦åœ¨å›¾ç‰‡åå­—å‰åŠ ä¸Šå½“å‰bundleåç§°1LXFMain.bundle/ä¸ªäºº è¿™é‡Œé™¤äº†å½“å‰xibè¦åŠ è½½çš„å›¾ç‰‡ä¸å±žäºŽmainBundleè¿™ä¸ªåŽŸå› ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç‚¹å°±æ˜¯xibæ–‡ä»¶ä¸Žbundleå­˜æ”¾ä½ç½®å±žäºŽåŒä¸€çº§åˆ«ï¼Œæ•…ç›´æŽ¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„çš„æ–¹å¼ï¼Œåœ¨å›¾ç‰‡åå­—å‰åŠ ä¸Šbundleåç§°å³å¯ã€‚ è™½ç„¶æ— æ³•åœ¨xibä¸Šç›´æŽ¥çœ‹åˆ°æ•ˆæžœï¼Œä¸è¿‡ç¡®å®žæ˜¯æœ‰æ•ˆçš„ å››ã€é‡åˆ°çš„å°é—®é¢˜1[!] Unable to find a pod with name, author, summary, or description matching `lxfmain` æˆ‘åšå®Œä¸€åˆ‡æ“ä½œåŽå‘çŽ°æœç´¢æŠ¥ä¸Šé¢é‚£ä¸ªé”™ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åˆ é™¤æœ¬åœ°ç´¢å¼•æ–‡ä»¶ï¼Œç„¶åŽå†æœç´¢ä¸€éï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¸®ä½ å†ç”Ÿæˆä¸€åˆ‡æœ¬åœ°ç´¢å¼•æ–‡ä»¶ï¼Œç„¶åŽå°±æžå®šäº†ï½ž12rm -rf ~/Library/Caches/CocoaPods/search_index.json pod search lxfmain]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>Git</tag>
        <tag>GitHub</tag>
        <tag>Cocoapods</tag>
        <tag>iOS</tag>
        <tag>ç»„ä»¶åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS ç»„ä»¶åŒ–å¼€å‘ï¼ˆäºŒï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„æ›´æ–°ä¸Žå­åº“]]></title>
    <url>%2F2018%2F04%2F06%2FiOS-%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E8%BF%9C%E7%A8%8B%E7%A7%81%E6%9C%89%E5%BA%93%E7%9A%84%E6%9B%B4%E6%96%B0%E4%B8%8E%E5%AD%90%E5%BA%93%2F</url>
    <content type="text"><![CDATA[åœ¨ä¸Šä¸€ç¯‡ã€iOS ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨ã€‘ä¸­æˆ‘ä»¬å·²ç»å®žæˆ˜äº†è¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬æ“ä½œï¼Œä½†æ˜¯ç»„ä»¶ä¸å¯èƒ½ä¸Šä¼ ä¸€æ¬¡å°±å®Œäº‹äº†ï¼Œéšç€ä¸šåŠ¡çš„å¢žåŠ ï¼Œæˆ‘ä»¬çš„ç»„ä»¶å¯èƒ½è¿˜éœ€è¦æ·»åŠ æ›´å¤šçš„ä¸œè¥¿ï¼Œæˆ–è€…ä¿®å¤ä¸€äº›é—®é¢˜ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬å¯¹ç§æœ‰åº“ä»£ç è¿›è¡Œå‡çº§ä¸Žç»´æŠ¤ + åœ¨ä¸Šä¸€ç¯‡ã€iOS ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨ã€‘ä¸­æˆ‘ä»¬å·²ç»å®žæˆ˜äº†è¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬æ“ä½œï¼Œä½†æ˜¯ç»„ä»¶ä¸å¯èƒ½ä¸Šä¼ ä¸€æ¬¡å°±å®Œäº‹äº†ï¼Œéšç€ä¸šåŠ¡çš„å¢žåŠ ï¼Œæˆ‘ä»¬çš„ç»„ä»¶å¯èƒ½è¿˜éœ€è¦æ·»åŠ æ›´å¤šçš„ä¸œè¥¿ï¼Œæˆ–è€…ä¿®å¤ä¸€äº›é—®é¢˜ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬å¯¹ç§æœ‰åº“ä»£ç è¿›è¡Œå‡çº§ä¸Žç»´æŠ¤ è¿™é‡Œä»¥å¯¹åŸºç¡€ç»„ä»¶é‡Œæ·»åŠ äº†ä¸€ä¸ªCacheå·¥å…·ä¸ºä¾‹ æ·»åŠ å®ŒæˆåŽæˆ‘ä»¬éœ€è¦æ›´æ–°åˆ°è¿œç¨‹ä»“åº“ ä¸€ã€æ›´æ–°è¿œç¨‹ä»“åº“cd åˆ°æœ¬åœ°ä»“åº“çš„ä½ç½®ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œ 1ã€ä»£ç æ›´æ–°123git add .git commit -m &apos;æ›´æ–°æè¿°&apos;git push origin master 2ã€ç‰ˆæœ¬æ›´æ–°ç‰ˆæœ¬æ›´æ–° è¿™ä¸€æ­¥éžå¸¸é‡è¦ï¼Œä¸ºæ›´æ–°ç´¢å¼•åº“åšå‡†å¤‡ 12git tag -a &apos;æ–°ç‰ˆæœ¬å·&apos; -m &apos;æ³¨é‡Š&apos;git push --tags æŸ¥çœ‹è¿œç¨‹ä»“åº“ï¼Œæ ‡ç­¾æ•°å·²ç»æœ‰2ä¸ªäº†ï¼Œç‚¹è¿›åŽ»å°±å¯ä»¥çœ‹åˆ°0.2.0ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä¸åŽ»çœ‹äº† äºŒã€ä¿®æ”¹æè¿°æ–‡ä»¶å¹¶æ›´æ–°ç´¢å¼•åº“1ã€ä¿®æ”¹Sepcæ‰“å¼€ä½ çš„xx.podspecæ–‡ä»¶ï¼Œå°†åŽŸæœ¬çš„ç‰ˆæœ¬å·æ”¹ä¸º0.2.0ï¼Œä¸Žåˆšåˆšçš„tagä¿æŒä¸€è‡´1s.version = &apos;0.2.0&apos; 2ã€éªŒè¯è¿œç¨‹Spec1pod spec lint --private 3ã€æ›´æ–°ç´¢å¼•åº“1pod repo push ç´¢å¼•åº“åç§° xxx.podspec ä¸‰ã€æ›´æ–°ä½¿ç”¨123// --no-repo-update ä¸æ›´æ–°æœ¬åœ°ç´¢å¼•åº“// å› ä¸ºåˆšåˆšå·²ç»è‡ªå·±æ‰‹åŠ¨æ›´æ–°è¿‡äº†ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬é€‰æ‹©è·³è¿‡æ›´æ–°pod update --no-repo-update å››ã€ç¬¬ä¸‰æ–¹ä¾èµ–å½“æˆ‘ä»¬çš„ç§æœ‰åº“éœ€è¦ä¾èµ–å…¶å®ƒç¬¬ä¸‰æ–¹æ‰å¯ä»¥æ­£å¸¸ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨specæ–‡ä»¶ä¸­å¼€å¯ä¾èµ–ï¼Œä¾‹å¦‚ä¸‹é¢æ‰€ç¤ºä»£ç ï¼Œè¡¨æ˜Žå½“å‰ä»“åº“éœ€è¦ä¾èµ–AFNå’ŒSDWebImage12s.dependency &apos;AFNetworking&apos;, &apos;~&gt; 3.2.0&apos;s.dependency &apos;SDWebImage&apos;, &apos;~&gt; 4.3.3&apos; ä¿®æ”¹åŽæ›´æ–°æ“ä½œåŒä¸Šæ‰€è¿°ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚ ä½†æ˜¯è¿™é‡Œå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æžœæ¥äº†ä¸€ä½æ–°çš„å°ä¼™ä¼´ï¼Œä»–æ‰€è´Ÿè´£çš„éƒ¨åˆ†åªéœ€è¦LXFBaseä¸‹çš„Categoryï¼Œè€ŒLXFBaseä¸‹çš„Cacheæ‰éœ€è¦ä¾èµ–SDWebImageï¼Œæ­¤æ—¶ä»–è‹¥æ˜¯podä¸€æ•´ä¸ªLXFBaseå²‚ä¸æ˜¯å¹³ç™½æ— æ•…å®‰è£…äº†ç¬¬ä¸‰æ–¹ä¾èµ–åº“ï¼Œé‚£åº”è¯¥æ€Žä¹ˆåšå‘¢ï¼Ÿ æ–¹æ¡ˆå°±æ˜¯å¯ä»¥é€šè¿‡å­åº“Subspecsæ¥è§£å†³å› éœ€è¦ä¸€ä¸ªå°å°çš„å·¥å…·è€Œä¾èµ–æ•´ä¸ªåŸºç¡€ç»„ä»¶çš„é—®é¢˜ äº”ã€å­åº“Subspecsä»€ä¹ˆæ˜¯Subspecsï¼Ÿè¿™é‡Œæˆ‘ä»¬å¯ä»¥æœç´¢ä¸€ä¸‹SDWebImage 1pod search &apos;SDWebImage&apos; å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æžœæˆ‘ä»¬åªéœ€è¦ç”¨åˆ°SDWebImageä¸­çš„GIFåŠŸèƒ½ï¼Œé‚£ä¹ˆå¹¶ä¸éœ€è¦å°†æ•´ä¸ªSDWebImageéƒ½ä¸‹è½½ä¸‹æ¥ï¼Œåœ¨Podfileä¸­å°†pod &#39;SDWebImage&#39; æ”¹ä¸º pod SDWebImage/GIFå³å¯å•ç‹¬ä½¿ç”¨è¿™ä¸€åŠŸèƒ½ é‚£æŽ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥çœ‹çœ‹æ€Žä¹ˆæè¿°ä¸€ä¸ªå­åº“å§ å­åº“æ ¼å¼123s.subspec &apos;å­åº“åç§°&apos; do |åˆ«å|end å› ä¸ºè¿™é‡Œå·²ç»åˆ†ç¦»å‡ºå­åº“äº†ï¼Œæ‰€ä»¥s.source_fileså’Œs.dependencyå°±ä¸èƒ½è¿™ä¹ˆä½¿ç”¨äº†ï¼Œéœ€è¦æˆ‘ä»¬åœ¨å­åº“é‡Œåˆ†åˆ«æŒ‡å®šï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æŽ¥æŠŠåŽŸæ¥çš„s.source_fileså’Œs.dependencyéƒ½æ³¨é‡ŠæŽ‰ã€‚å†™æ³•å‚è€ƒå¦‚ä¸‹ 123456789101112131415# s.source_files = &apos;LXFBase/Classes/**/*&apos;# s.dependency &apos;SDWebImage&apos;, &apos;~&gt; 4.3.3&apos;s.subspec &apos;Cache&apos; do |c| c.source_files = &apos;LXFBase/Classes/Cache/**/*&apos; c.dependency &apos;SDWebImage&apos;, &apos;~&gt; 4.3.3&apos;ends.subspec &apos;Category&apos; do |c| c.source_files = &apos;LXFBase/Classes/Category/**/*&apos;ends.subspec &apos;Tool&apos; do |t| t.source_files = &apos;LXFBase/Classes/Tool/**/*&apos;end ä¿®æ”¹åŽå†æŒ‰ä¹‹å‰çš„æ­¥éª¤æ›´æ–°ç´¢å¼•åº“å’Œç»„ä»¶åº“å°±å¯ä»¥äº† ps: åœ¨æ·»åŠ ç¬¬ä¸‰æ–¹ä¾èµ–æè¿°åŽåšéªŒè¯æˆ–è€…ä¸Šä¼ æ“ä½œå¯èƒ½ä¼šå¾ˆæ…¢ï¼Œå› ä¸ºå®ƒåœ¨å…‹éš†ç¬¬ä¸‰æ–¹åº“å¦‚SDWebImageï¼Œæœ‰å…´è¶£çš„å¯ä»¥åœ¨å‘½ä»¤åŽé¢åŠ å…¥--verboseæ¥æŸ¥çœ‹è¯¦æƒ…æƒ…å†µ1pod spec lint --private --verbose åœ¨æˆåŠŸæ›´æ–°ç»„ä»¶åº“å’Œç´¢å¼•åº“åŽæˆ‘ä»¬å†æ¥æœç´¢ä¸€ä¸‹è¯•è¯•1pod search &apos;LXFBase&apos; çŽ°åœ¨å°±å¯ä»¥çˆ±è£…å“ªä¸ªå°±è£…å“ªä¸ªäº†ï¼Œåœ¨Podfileä¸­æŒ‡å®šè¦å®‰è£…çš„å­åº“å°±è¡Œäº†1pod &apos;LXFBase/Cache&apos; 1pod install]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>Git</tag>
        <tag>GitHub</tag>
        <tag>Cocoapods</tag>
        <tag>iOS</tag>
        <tag>ç»„ä»¶åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨]]></title>
    <url>%2F2018%2F04%2F06%2FiOS-%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E8%BF%9C%E7%A8%8B%E7%A7%81%E6%9C%89%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[éšç€é¡¹ç›®åŠŸèƒ½çš„ä¸æ–­å¢žåŠ ï¼Œè¶Šæ¥è¶Šå¤šçš„å¼€å‘äººå‘˜åŠ å…¥ï¼Œä¸šåŠ¡ä¸»çº¿ä¹Ÿéšä¹‹è¶Šæ¥è¶Šå¤šï¼Œé€ æˆè€¦åˆè¶Šæ¥è¶Šä¸¥é‡ï¼Œç¼–è¯‘è¶Šæ¥è¶Šæ…¢ï¼Œæµ‹è¯•ä¸ç‹¬ç«‹ç­‰ä¸€ç³»åˆ—é—®é¢˜ã€‚ä¸ºäº†è§£å†³æ­¤ç±»æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘åˆ°ä½¿ç”¨ç»„ä»¶åŒ–å¼€å‘ + éšç€é¡¹ç›®åŠŸèƒ½çš„ä¸æ–­å¢žåŠ ï¼Œè¶Šæ¥è¶Šå¤šçš„å¼€å‘äººå‘˜åŠ å…¥ï¼Œä¸šåŠ¡ä¸»çº¿ä¹Ÿéšä¹‹è¶Šæ¥è¶Šå¤šï¼Œé€ æˆè€¦åˆè¶Šæ¥è¶Šä¸¥é‡ï¼Œç¼–è¯‘è¶Šæ¥è¶Šæ…¢ï¼Œæµ‹è¯•ä¸ç‹¬ç«‹ç­‰ä¸€ç³»åˆ—é—®é¢˜ã€‚ä¸ºäº†è§£å†³æ­¤ç±»æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘åˆ°ä½¿ç”¨ç»„ä»¶åŒ–å¼€å‘ 1.æ¦‚å¿µç»„ä»¶åŒ–å°±æ˜¯å°†ä¸€ä¸ªå•ä¸€å·¥ç¨‹çš„é¡¹ç›®, åˆ†è§£æˆä¸ºå„ä¸ªç‹¬ç«‹çš„ç»„ä»¶ï¼Œ ç„¶åŽæŒ‰ç…§æŸç§æ–¹å¼, ä»»æ„ç»„ç»‡æˆä¸€ä¸ªæ‹¥æœ‰å®Œæ•´ä¸šåŠ¡é€»è¾‘çš„å·¥ç¨‹ã€‚ 2.ä¼˜åŠ¿ ç‹¬ç«‹ï¼šç‹¬ç«‹ç¼–å†™ã€ç¼–è¯‘ã€è¿è¡Œã€æµ‹è¯• é‡ç”¨ï¼šåŠŸèƒ½ä»£ç çš„é‡å¤ä½¿ç”¨ã€‚æ¯”å¦‚ä¸åŒé¡¹ç›®ä½¿ç”¨åŒä¸€åŠŸèƒ½æ¨¡å— é«˜æ•ˆï¼šä»»æ„å¢žåˆ æ¨¡å—ï¼Œå®žçŽ°é«˜æ•ˆè¿­ä»£ ç»„ä»¶åŒ–è¿˜å¯ä»¥é…åˆäºŒè¿›åˆ¶åŒ–, æé«˜é¡¹ç›®ç¼–è¯‘é€Ÿåº¦ 3.ç»„ä»¶åˆ†ç±»å¤§ä½“ä¸Šåˆ†ä¸‰ç±»ï¼šåŸºç¡€ç»„ä»¶ã€åŠŸèƒ½ç»„ä»¶å’Œä¸šåŠ¡ç»„ä»¶ åŸºç¡€ç»„ä»¶ï¼šä¹Ÿç§°ä¸ºå…¬å…±ç»„ä»¶ï¼Œå­˜æ”¾å¹³æ—¶å®šä¹‰çš„å®ã€å¸¸é‡ã€åè®®ã€åˆ†ç±»ã€å¯¹å¿…è¦çš„ç¬¬ä¸‰æ–¹çš„å°è£…ç±»ï¼Œä»¥åŠå„ç§å¤„ç†å·¥å…·ç±»ï¼Œå¦‚ï¼šæ—¶é—´ã€æ—¥æœŸã€è®¾å¤‡ä¿¡æ¯ã€æ–‡ä»¶å¤„ç†ã€æ²™ç›’ç®¡ç†ç­‰ åŠŸèƒ½ç»„ä»¶ï¼š è‡ªå®šä¹‰è§†å›¾æŽ§ä»¶ã€ä¸€äº›ç‰¹å®šåŠŸèƒ½çš„å°è£…ï¼ˆå¦‚å½•éŸ³ã€æ’­æ”¾éŸ³é¢‘å°è£…ï¼‰ ä¸šåŠ¡ç»„ä»¶ï¼šå„ç§ä¸šåŠ¡çº¿ æœ¬ç¯‡å…ˆæ¥ä»‹ç»ä¸‹è¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨ï¼Œå»ºè®®æŒ‰é¡ºåºçœ‹å®Œä¹‹åŽï¼Œå›žæ¥å†çœ‹ä¸€éæ­¥éª¤å½’çº³ï¼ŒåŠ æ·±äº†è§£ï¼Œå¦‚æœ‰ä¸è¶³ä¹‹å¤„ï¼Œæ¬¢è¿ŽæŒ‡å‡ºï¼Œæ„Ÿè°¢ : ) æ­¥éª¤å½’çº³ åˆ›å»ºè¿œç¨‹ç´¢å¼•åº“å’Œç§æœ‰åº“ å°†è¿œç¨‹ç´¢å¼•åº“æ·»åŠ åˆ°æœ¬åœ° pod repo add ç´¢å¼•åº“åç§° ç´¢å¼•åº“åœ°å€ åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªpodæ¨¡æ¿åº“ pod lib create ç»„ä»¶åç§°å°†æ¡†æž¶çš„æ ¸å¿ƒä»£ç æ·»åŠ åˆ°Classesç›®å½•ä¸‹æœ¬åœ°å®‰è£…æµ‹è¯•æ ¸å¿ƒä»£ç æ˜¯å¦å¯ç”¨ pod installä¿®æ”¹Specæè¿°æ–‡ä»¶å°†ä¿®æ”¹å¥½çš„æ¨¡æ¿åº“ä¸Šä¼ è‡³è¿œç¨‹ç§æœ‰åº“ ä¸Šä¼ ä»£ç å’Œæ‰“æ ‡ç­¾git initgit add .git commit -m &quot;æäº¤æè¿°&quot;git remote add origin è¿œç¨‹ç§æœ‰åº“åœ°å€git push origin mastergit tag &#39;0.1.0&#39;git push --tags æäº¤specè‡³ç§æœ‰ç´¢å¼•åº“pod lib lint --privatepod spec lint --privatepod repo push ç´¢å¼•åº“çš„æœ¬åœ°åç§° xx.podspec ä½¿ç”¨source å®˜æ–¹ç´¢å¼•åº“urlsource ç§æœ‰ç´¢å¼•åº“urlpod &#39;ç»„ä»¶åç§°&#39;pod install æŽ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥å®žæˆ˜å¦‚ä½•åˆ›å»ºå’Œä½¿ç”¨ç§æœ‰åº“ ä¸€ã€åˆ›å»ºç§æœ‰ç´¢å¼•åº“è¿™é‡Œä»¥ç äº‘ä¸ºä¾‹ï¼Œåˆ›å»ºä¸€ä¸ªLXFSpecsçš„ç§æœ‰ç´¢å¼•åº“ï¼Œè¿™çŽ©æ„çš„ä½œç”¨å¦‚å…¶åï¼Œå°±æ˜¯ç”¨æ¥ç´¢å¼•çš„ äºŒã€æœ¬åœ°æ·»åŠ ç§æœ‰ç´¢å¼•åº“1ã€æŸ¥çœ‹æœ¬åœ°ç´¢å¼•åº“1pod repo å¦‚å›¾ï¼Œç›®å‰æœ¬åœ°ä»…æœ‰githubä¸Šçš„é‚£ä¸ªå…¬æœ‰ç´¢å¼•åº“ 2ã€æ·»åŠ ç§æœ‰ç´¢å¼•åº“å°†æˆ‘ä»¬åˆšåˆšæ–°å»ºçš„ç§æœ‰ç´¢å¼•åº“LXFSpecsæ·»åŠ åˆ°æœ¬åœ° 12// pod repo add ç´¢å¼•åº“åç§° ç´¢å¼•åº“åœ°å€pod repo add LXFSpecs https://gitee.com/LinXunFeng/LXFSpecs.git çŽ°åœ¨æœ¬åœ°å°±æœ‰ä¸¤ä¸ªç´¢å¼•åº“ï¼Œå¥½ï¼Œç´¢å¼•åº“çš„äº‹æƒ…å°±å…ˆæ”¾ä¸€è¾¹åŽ»äº†ï½ž ä¸‰ã€åˆ›å»ºç»„ä»¶åº“ç äº‘ä¸Šçš„åˆ›å»ºæ“ä½œåŒä¸Šï¼Œè¿™é‡Œä»¥LXFBaseä¸ºä¾‹ï¼Œåˆ›å»ºåŸºç¡€ç»„ä»¶åº“ 1ã€å¿«é€Ÿåˆ›å»ºæ¨¡ç‰ˆåº“åˆ°åˆé€‚çš„ä½ç½®åˆ›å»ºä¸€ä¸ªä¸Žç»„ä»¶åç›¸åŒçš„æ–‡ä»¶å¤¹ï¼Œcdè¿›åŽ»åŽï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤12// pod lib create ç»„ä»¶åpod lib create LXFBase è¿™é‡Œä¼šè®©ä½ é…ç½®ä¸€äº›ä¿¡æ¯ï¼Œæ ¹æ®è‡ªå·±çš„æƒ…å†µè‡ªè¡Œé…ç½®å³å¯ã€‚ 2ã€æ·»åŠ ç»„ä»¶å†…å®¹åˆ›å»ºå®ŒæˆåŽä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æ‰“å¼€ç›¸åº”çš„Exampleé¡¹ç›®ï¼ŒLXFBaseç›®å½•ä¸­ä¼šå‡ºçŽ°å¦‚å›¾è¿™äº›æ–‡ä»¶ï¼Œæˆ‘ä»¬æŠŠåŸºç¡€ç»„ä»¶ç›¸å…³çš„ä¸œè¥¿ä¸¢åˆ°Classesæ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶ä¸”æŠŠReplaceMe.mæ–‡ä»¶åˆ é™¤ é»˜è®¤Classesæ–‡ä»¶å¤¹ä¸­å­˜æ”¾çš„æ–‡ä»¶å°±æ˜¯pod installæ—¶è¦ä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶ï¼Œå½“ç„¶å¯ä»¥é€šè¿‡ä¿®æ”¹specæ–‡ä»¶çš„é…ç½®æ¥æ›´æ”¹ä½ç½® 3ã€å®‰è£…ä¸Žæµ‹è¯•æœ¬åœ°åº“åœ¨Exampleé¡¹ç›®çš„Podfileæ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ°1pod &apos;LXFBase&apos;, :path =&gt; &apos;../&apos; æ¨¡æ¿åº“å·²ç»é»˜è®¤å¸®æˆ‘ä»¬åœ¨Podfileä¸­æŒ‡å®šäº†LXFBase.podspecçš„ä½ç½®ï¼Œä½¿ç»„ä»¶LXFBaseå¯ä»¥æ­£å¸¸å®‰è£…ä½¿ç”¨å’Œæ–¹ä¾¿æµ‹è¯• 1pod install å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å·²ç»å°†æœ¬åœ°çš„ç»„ä»¶æ·»åŠ è¿›Exampleä¸­äº†ï¼ŒçŽ°åœ¨å¯ä»¥å°½æƒ…åœ°åšä½ æƒ³åšçš„æµ‹è¯•ï¼Œç¡®ä¿ç»„ä»¶çš„å¯ç”¨ã€‚ æµ‹è¯•ç»„ä»¶æ²¡æœ‰é—®é¢˜åŽï¼Œæˆ‘ä»¬æŽ¥ä¸‹æ¥å°±è¦å°†podspecæ–‡ä»¶ä¸Šä¼ è‡³ç§æœ‰ç´¢å¼•åº“ï¼Œä¸è¿‡åœ¨æ­¤ä¹‹å‰ï¼Œéœ€è¦å¯¹specè¿›è¡Œä¿®æ”¹ã€‚ 4ã€ ä¿®æ”¹Specå…·ä½“çš„é…ç½®è¯´æ˜Žå¯ä»¥å‚è€ƒCocoapods åˆ›å»ºç¬¬ä¸‰æ–¹æ¡†æž¶ ä¸»è¦çš„ä¿®æ”¹å†…å®¹ 123456789 s.name = &apos;LXFBase&apos; s.version = &apos;0.1.0&apos; s.summary = &apos;LXFBase.&apos; s.description = &lt;&lt;-DESCLXFBaseæ˜¯åŸºç¡€ç»„ä»¶åº“ï¼ŒåŒ…æ‹¬åˆ†ç±»å’Œå¸¸ç”¨å·¥å…· DESC s.homepage = &apos;https://gitee.com/LinXunFeng/LXFBase&apos; s.source = &#123; :git =&gt; &apos;https://gitee.com/LinXunFeng/LXFBase.git&apos;, :tag =&gt; s.version.to_s &#125; s.source_files = &apos;LXFBase/Classes/**/*&apos; å››ã€ä¸Šä¼ ç»„ä»¶ä»£ç 1ã€å°†ä»£ç æäº¤åˆ°ç»„ä»¶ä»“åº“123456git add .git commit -m &apos;firstCommit&apos;git remote add origin https://gitee.com/LinXunFeng/LXFBase.git// ç¬¬ä¸€æ¬¡pushå¦‚æžœæŠ¥é”™çš„è¯å¯ä»¥åŠ ä¸Š-f// git push -f origin mastergit push origin master 2ã€æ‰“æ ‡ç­¾æ ‡ç­¾0.1.0ä¸Žspecä¸­çš„s.versionä¿æŒä¸€è‡´12git tag &apos;0.1.0&apos;git push --tags äº”ã€æäº¤podspecåˆ°ç§æœ‰ç´¢å¼•åº“åœ¨ä¸Šä¼ specæ–‡ä»¶å‰æˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªéªŒè¯æ¥èŠ‚çœæ—¶é—´ï¼Œä¸ç„¶æ¯æ¬¡éƒ½æŽ¨é€å¾ˆä¹…ç»“æžœè¿˜æ˜¯éªŒè¯å¤±è´¥ï¼Œä¼šæ°”æ­»äººçš„ï½ž 1ã€æœ¬åœ°éªŒè¯Specçš„å¿…å¡«å­—æ®µ12// æœ¬åœ°éªŒè¯ä¸ä¼šéªŒè¯ s.source ä¸­çš„tagpod lib lint 2ã€è¿œç¨‹éªŒè¯12// è¿œç¨‹éªŒè¯ä¼šéªŒè¯ s.source ä¸­çš„tagï¼Œå¦‚æžœæ­¤æ—¶æ²¡æœ‰æ‰“ä¸Šç›¸åº”çš„æ ‡ç­¾åˆ™ä¼šæŠ¥é”™pod spec lint å¦‚æžœä½ åˆšæ‰æ²¡æœ‰æ‰“æ ‡ç­¾å¹¶ä¸Šä¼ è‡³è¿œç¨‹ç§æœ‰åº“å°±æ¥è¿›è¡Œè¿œç¨‹éªŒè¯ï¼Œè‚¯å®šæ˜¯ä¼šæŠ¥é”™çš„ åœ¨æ‰“å®Œå¹¶ä¸Šä¼ tagåŽå†è¿›è¡Œè¿œç¨‹éªŒè¯ï¼Œå°±ä¼šéªŒè¯æˆåŠŸäº†ï¼ŒéªŒè¯æˆåŠŸåŽæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œï¼šæäº¤podspecæ–‡ä»¶åˆ°ç´¢å¼•åº“ éªŒè¯ç§æœ‰åº“æç¤ºå¦‚æžœéªŒè¯çš„æ˜¯ç§æœ‰åº“ï¼Œåˆ™åœ¨åŽé¢åŠ ä¸Š--private,å¦åˆ™ä¼šæœ‰è­¦å‘Šï¼Œä½ å¯ä»¥é€‰æ‹©--allow-warningsæ¥å¿½ç•¥è¯¥è­¦å‘Š12pod lib lint --privatepod spec lint --private 3ã€æäº¤podspec12// pod repo push ç§æœ‰ç´¢å¼•åº“åç§° specåç§°.podspec pod repo push LXFSpecs LXFBase.podspec è¿™é‡Œçš„æ“ä½œè¿‡ç¨‹ï¼šå…ˆå°†æˆ‘ä»¬çš„ä»£ç ç›´æŽ¥pushåˆ°æœ¬åœ°ç´¢å¼•åº“LXFSpecsï¼ŒæŽ¨é€åŽä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åŒæ­¥åˆ°è¿œç¨‹ç´¢å¼•åº“ å†æ¥çœ‹çœ‹ç äº‘ä¸Šçš„ç§æœ‰ç´¢å¼•åº“LXFSpecs æ¥æµ‹è¯•ä¸‹æœç´¢æˆ‘ä»¬çš„ç»„ä»¶1pod search &apos;LXFBase&apos; å…­ã€ä½¿ç”¨ç§æœ‰åº“è¿™æ—¶æˆ‘ä»¬å¯ä»¥æ¥è¯•è¯•é€šè¿‡podå½¢å¼æ¥æ·»åŠ ç»„ä»¶LXFBaseï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›® 1ã€æ·»åŠ Podfileæ–‡ä»¶1pod init 2ã€åœ¨Podfileçš„æœ€é¡¶éƒ¨æ·»åŠ å¦‚ä¸‹æè¿°123// ç¬¬äºŒè¡Œæ˜¯ä¸ºäº†ä¿è¯å…¬æœ‰åº“çš„æ­£å¸¸ä½¿ç”¨source &apos;https://gitee.com/LinXunFeng/LXFSpecs.git&apos;source &apos;https://github.com/CocoaPods/Specs.git&apos; 3ã€æ·»åŠ ä½¿ç”¨ç»„ä»¶LXFBase1pod &apos;LXFBase&apos; 4ã€å®‰è£…ç»„ä»¶1pod install]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>Git</tag>
        <tag>GitHub</tag>
        <tag>Cocoapods</tag>
        <tag>iOS</tag>
        <tag>ç»„ä»¶åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Cocoapods åˆ›å»ºç¬¬ä¸‰æ–¹æ¡†æž¶]]></title>
    <url>%2F2018%2F04%2F06%2FCocoapods-%E5%88%9B%E5%BB%BA%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A1%86%E6%9E%B6%2F</url>
    <content type="text"><![CDATA[å°†æ¡†æž¶ä¸­çš„ä¸»è¦æ–‡ä»¶æ”¾å…¥åˆ°ä¸€ä¸ªæŒ‡å®šæ–‡ä»¶å¤¹ä¸­ï¼Œæ¯”å¦‚å«Classesæˆ–è€…Libéƒ½å¯ä»¥ + ä¸€ã€ä¸Šä¼ é¡¹ç›®åˆ°githubå°†æ¡†æž¶ä¸­çš„ä¸»è¦æ–‡ä»¶æ”¾å…¥åˆ°ä¸€ä¸ªæŒ‡å®šæ–‡ä»¶å¤¹ä¸­ï¼Œæ¯”å¦‚å«Classesæˆ–è€…Libéƒ½å¯ä»¥ æ‰“å¼€ç»ˆç«¯ï¼Œcdåˆ°æ¡†æž¶ç›®å½• 1cd /Users/lxf/xxxx/LXFPhotoHelper åˆå§‹åŒ–ä»“åº“ 1git init å°†å½“å‰ç›®å½•æ·»åŠ åˆ°ç¼“å­˜åŒº 1git add . æäº¤åˆ°æœ¬åœ°ä»“åº“ 1git commit -m &apos;æè¿°&apos; æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€ 1git remote add origin https://github.com/LinXunFeng/xxx.git æäº¤åˆ°è¿œç¨‹ä»“åº“ 1git push origin master å¦‚æžœå‡ºçŽ°å¦‚ä¸‹æç¤º1fatal: unable to access &apos;https://github.com/xxx/xxx.git/&apos;: The requested URL returned error: 403 åŽŸå› æ˜¯æœ¬åœ°ç¼“å­˜äº†ç”¨æˆ·åå’Œå¯†ç ç¼–è¾‘.gitç›®å½•ä¸‹çš„configæ–‡ä»¶1vi .git/config æ‰¾åˆ°urlé‚£ä¸€è¡Œï¼Œåœ¨github.comå‰åŠ ä¸Šç”¨æˆ·ååŽä¿å­˜ï¼Œå†é‡æ–°æ‰§è¡ŒæŽ¨é€æ“ä½œ1url = https://LinXunFeng@github.com/LinXunFeng/xxx.git æ‰“æ ‡ç­¾ 1234// å…·ä½“è¯´æ˜Žå¯ä»¥æ‰§è¡Œ`git tag --help`åŽæŸ¥çœ‹// git tag -a &apos;ç‰ˆæœ¬å·&apos; -m &apos;tagæè¿°&apos;// æ³¨æ„ä¸€ä¸‹ï¼Œè¿™é‡Œæ‰“çš„æ ‡ç­¾åªæ˜¯åœ¨æœ¬åœ°git tag &apos;0.0.1&apos; æŽ¨ç€æ‰€æœ‰æ ‡ç­¾è‡³è¿œç¨‹ä»“åº“ 123// åªæŽ¨ç€æŒ‡å®šç‰ˆæœ¬// git push origin ç‰ˆæœ¬å· git push --tags äºŒã€åˆ›å»ºå¹¶ä¿®æ”¹podspecæ–‡ä»¶ åˆ›å»ºSpecæ–‡ä»¶12// åç§°ä¸€èˆ¬ä¸Žå·¥ç¨‹åç§°ä¿æŒä¸€è‡´pod spec create æ¡†æž¶åç§° ä¿®æ”¹Specæ–‡ä»¶123456789101112131415s.name = &quot;LXFPhotoHelperï¼ˆä»“åº“åç§°ï¼‰&quot;s.version = &quot;0.0.1ï¼ˆç‰ˆæœ¬å·ï¼Œè¿™é‡Œè·Ÿä¸‹é¢s.sourceä¸­çš„tagæœ‰å…³ï¼‰&quot;s.summary = &quot;å¯¹ä½ è‡ªå·±ä»“åº“çš„ç®€å•æè¿°ï¼Œä¸è¦å†™å¤ªå¤šå­—&quot;s.description = &quot;è¿™ä¸ªæ˜¯è¯¦ç»†æè¿°ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œæ–‡å­—çš„é•¿åº¦éœ€è¦æ¯” s.summaryçš„è¦é•¿ï¼Œä¸ç„¶ä¼šå‡ºçŽ°è­¦å‘Š&quot;s.homepage = &quot;ä»“åº“é¦–é¡µåœ°å€ï¼Œå¦‚https://github.com/LinXunFeng/LXFPhotoHelper&quot;s.license = &quot;MIT&quot;s.author = &#123; &quot;LinXunFeng&quot; =&gt; &quot;598600855@qq.com&quot; &#125;# sourceå­˜æ”¾çš„åœ°å€æ˜¯ä»£ç çš„çœŸæ­£åœ°å€s.source = &#123; :git =&gt; &quot;ä»“åº“å¯¹åº”çš„gitåœ°å€ï¼Œå¦‚https://github.com/LinXunFeng/LXFPhotoHelper.git&quot;, :tag =&gt; &quot;#&#123;s.version&#125;&quot; &#125;# pod installæ—¶çœŸæ­£ä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶è·¯å¾„ï¼Œè¿™é‡ŒæŒ‡å®šçš„æ˜¯ä½ ä»“åº“ä¸‹çš„Classesç›®å½•ä¸­çš„æ‰€æœ‰.hå’Œ.mæ–‡ä»¶ï¼ˆå¡«å†™çš„æ˜¯ç›¸å¯¹åœ°å€ï¼‰# ** é€šé…ç›®å½•s.source_files = &quot;Classes&quot;, &quot;Classes/**/*.&#123;h,m&#125;&quot;# s.library = &quot;sqlite3&quot; # æ¡†æž¶ä¾èµ–ç³»ç»Ÿçš„sqlite3 ä¹Ÿå¯ä»¥ä¸Šå®˜ç½‘çš„æ‰‹å†Œã€Podspec Syntax Referenceã€‘ä¸ŠæŸ¥çœ‹ è¿™é‡Œéœ€è¦æˆ‘ä»¬æ³¨æ„çš„æ˜¯s.version= &quot;0.0.1&quot;ï¼Œè¿™é‡Œçš„ç‰ˆæœ¬å·è¦ä¸Žåˆšåˆšæ‰“çš„tagä¸€è‡´ ä¸‰ã€æ³¨å†Œtrunk123// --verbose æ‰“å°è¯¦æƒ…ä¿¡æ¯// pod trunk register é‚®ç®± &apos;ä½ çš„åç§°&apos; --verbosepod trunk register 598600855@qq.com &apos;LinXunFeng&apos; --verbose ç„¶åŽåŽ»éªŒè¯é‚®ç®±éªŒè¯æˆåŠŸåŽä¼šæç¤ºæˆ‘ä»¬å›žåˆ°ç»ˆç«¯ï¼Œå¹¶æ•²å…¥pod trunk push åç§°.podspec å››ã€ä¸Šä¼ Specæ‰§è¡Œpod trunk pushåŽä¼šæœ‰ä¸€ä¸ªå®¡æ ¸çš„è¿‡ç¨‹ï¼Œå¦‚æžœæç¤ºæ²¡æœ‰é€šè¿‡ï¼Œæœ‰ERRORå°±ä¿®æ”¹å¥½åŽé‡æ–°pushï¼Œå¦‚æžœåªæ˜¯WARNå¯ä»¥é€‰æ‹©åœ¨pod trunk pushåŽé¢åŠ ä¸Š--allow-warningsæ¥å¿½ç•¥å®ƒä»¬1pod trunk push LXFPhotoHelper.podspec --allow-warnings å¦‚æžœå‡ºçŽ°å¦‚ä¸‹ä¿¡æ¯ï¼Œåˆ™è¯´æ˜Žä½ çš„æ¡†æž¶åå­—å·²è¢«å ç”¨ï¼Œå¾—é‡æ–°æ”¹ä¸ªåå­—ï½žæ‰€ä»¥ï¼Œåœ¨åˆ›å»ºä½ è‡ªå·±çš„cocoapodsä»“åº“æ—¶æœ€å¥½æ˜¯åˆ°cocoapods.orgä¸Šå…ˆæŸ¥ä¸€ä¸‹æœ‰æ²¡æœ‰ç›¸åŒåå­—çš„1[!] You (xxx@qq.com) are not allowed to push new versions for this pod. The owners of this pod are yyy@qq.com. ä¸Šä¼ æˆåŠŸåŽä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æ›´æ–°æœ¬åœ°ä»“åº“ï¼Œå¦‚æžœæ— æ³•æœç´¢åˆ°è‡ªå·±çš„æ¡†æž¶ï¼Œå¯ä»¥å…ˆåˆ æŽ‰æœ¬åœ°çš„ç´¢å¼•æ–‡ä»¶åŽå†æœç´¢ä¸€æ¬¡1rm ~/Library/Caches/CocoaPods/search_index.json å½“ä½¿ç”¨pod search å‘½ä»¤å¯ä»¥æœç´¢è‡ªå·±çš„æ¡†æž¶æ—¶, é‚£ä¹ˆå°±æ„å‘³ç€å®¡æ ¸é€šè¿‡äº†]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>Git</tag>
        <tag>GitHub</tag>
        <tag>Cocoapods</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Python - è™šæ‹ŸçŽ¯å¢ƒ]]></title>
    <url>%2F2018%2F04%2F02%2FPython-%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%2F</url>
    <content type="text"><![CDATA[å¹³æ—¶åœ¨å¼€å‘æ—¶æˆ‘ä»¬éƒ½ä¼šå…ˆå®‰è£…ä¸€äº›pythonéœ€è¦çš„åŒ…ï¼Œæ¯æ¬¡å®‰è£…éƒ½ä¼šæœ‰ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¦‚æžœä¸åŒé¡¹ç›®éœ€è¦ä¸åŒç‰ˆæœ¬çš„åŒ…æ—¶å°±ä¼šå‡ºçŽ°ä¸å…¼å®¹çš„æƒ…å†µã€‚åº”å¯¹è¿™ç§æƒ…å†µæˆ‘ä»¬å°±å¯ä»¥æ­å»ºå¤šä¸ªè™šæ‹ŸçŽ¯å¢ƒæ¥åº”å¯¹ä¸åŒçš„çŽ¯å¢ƒéœ€æ±‚ï¼Œåœ¨è™šæ‹ŸçŽ¯å¢ƒä¸­æ­å»ºä¸€ä¸ªPythoné¡¹ç›®è¿è¡Œæ‰€éœ€è¦çš„é‚£äº›åŒ…ï¼Œå°†æ¥æ ¹æ®è¿è¡Œçš„é¡¹ç›®æ¥åˆ‡æ¢ä¸åŒçŽ¯å¢ƒå³å¯ + å¹³æ—¶åœ¨å¼€å‘æ—¶æˆ‘ä»¬éƒ½ä¼šå…ˆå®‰è£…ä¸€äº›pythonéœ€è¦çš„åŒ…ï¼Œæ¯æ¬¡å®‰è£…éƒ½ä¼šæœ‰ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¦‚æžœä¸åŒé¡¹ç›®éœ€è¦ä¸åŒç‰ˆæœ¬çš„åŒ…æ—¶å°±ä¼šå‡ºçŽ°ä¸å…¼å®¹çš„æƒ…å†µã€‚åº”å¯¹è¿™ç§æƒ…å†µæˆ‘ä»¬å°±å¯ä»¥æ­å»ºå¤šä¸ªè™šæ‹ŸçŽ¯å¢ƒæ¥åº”å¯¹ä¸åŒçš„çŽ¯å¢ƒéœ€æ±‚ï¼Œåœ¨è™šæ‹ŸçŽ¯å¢ƒä¸­æ­å»ºä¸€ä¸ªPythoné¡¹ç›®è¿è¡Œæ‰€éœ€è¦çš„é‚£äº›åŒ…ï¼Œå°†æ¥æ ¹æ®è¿è¡Œçš„é¡¹ç›®æ¥åˆ‡æ¢ä¸åŒçŽ¯å¢ƒå³å¯ æˆ‘ä»¬å¯ä»¥åœ¨å½“å‰ç”¨æˆ·çš„å®¶ç›®å½•ä¸­æ‰¾åˆ°ã€.virtualenvsã€‘æ–‡ä»¶å¤¹ï¼ŒæŸ¥çœ‹å½“å‰æ‰€æœ‰çš„è™šæ‹ŸçŽ¯å¢ƒ åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒ åˆ›å»ºï¼šmkvirtualenv [è™šæ‹ŸçŽ¯å¢ƒåç§°] 1mkvirtualenv lxfenv1 æ³¨ï¼šåˆ›å»ºçš„è¿‡ç¨‹éœ€è¦è”ç½‘ 1Installing setuptools, pkg_resources, pip, wheel...done. åˆšåˆšå®‰è£…æ—¶æç¤ºå®‰è£…çš„è¿™äº›ä¸œè¥¿å°±å­˜æ”¾åœ¨ä½ åˆ›å»ºå¥½çš„è™šæ‹ŸçŽ¯å¢ƒä¸‹çš„ã€lib/python2.7/site-packages/ã€‘ç›®å½•ä¸­ é€€å‡ºï¼šdeactivateå½“æˆ‘ä»¬å®‰è£…å¥½è™šæ‹ŸçŽ¯å¢ƒåŽé»˜è®¤å°±ä½¿ç”¨äº†è¯¥è™šæ‹ŸçŽ¯å¢ƒï¼Œå¦‚å›¾æ ‡è¯†å¤„å¯ä»¥çœ‹å‡º å¦‚æžœä½ æƒ³é€€å‡ºå½“å‰çš„è™šæ‹ŸçŽ¯å¢ƒï¼Œæˆ–ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š 1deactivate è¿›å…¥ï¼šworkon [è™šæ‹ŸçŽ¯å¢ƒåç§°] ä½¿ç”¨æŒ‡å®šçš„è™šæ‹ŸçŽ¯å¢ƒåˆ™ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š 1workon lxfenv1 åˆ é™¤ï¼šrmvirtualenv [è™šæ‹ŸçŽ¯å¢ƒåç§°] 1rmvirtualenv lxfenv1 å®‰è£…æ‹“å±•åŒ… æŸ¥çœ‹å½“å‰å®‰è£…å¥½çš„åŒ… 123pip listæˆ–è€…pip freeze ps: ä¸Šå›¾pip listä¸­åˆ—å‡ºçš„å››ä¸ªåŒ…æ˜¯å®‰è£…è™šæ‹ŸçŽ¯å¢ƒå¿…å®šä¼šå®‰è£…çš„åŒ…å¦‚å›¾ï¼Œpip listä¼šåˆ—å‡ºæ‰€æœ‰çš„åŒ…ï¼Œè€Œpip freezeåªä¼šåˆ—å‡ºæ‰©å±•çš„åŒ… å®‰è£…æŒ‡å®šåŒ…12pip install django==1.8.2# ==1.8.2 ä¸ºæŒ‡å®šç‰ˆæœ¬å·ï¼Œä¸å†™åˆ™ç›´æŽ¥å®‰è£…æœ€æ–°çš„åŒ… æ³¨ï¼š pip install xxx ä¼šè‡ªåŠ¨åˆ é™¤æ—§ç‰ˆæœ¬ï¼Œå†å®‰è£…æ–°ç‰ˆæœ¬ å¦‚æžœä¸çŸ¥é“åŒ…åå¯ä»¥åˆ°pypiä¸Šæœç´¢]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RxSwift + MJRefresh æ‰“é€ è‡ªåŠ¨å¤„ç†åˆ·æ–°æŽ§ä»¶çŠ¶æ€]]></title>
    <url>%2F2017%2F10%2F24%2FRxSwift-MJExtension-%E6%89%93%E9%80%A0%E8%87%AA%E5%8A%A8%E5%A4%84%E7%90%86%E5%88%B7%E6%96%B0%E6%8E%A7%E4%BB%B6%E7%8A%B6%E6%80%81%2F</url>
    <content type="text"><![CDATA[MVVMçš„æ¨¡å¼ä¸­ï¼Œå¤šå‡ºäº†ViewModelè¿™ä¸ªè§’è‰²ï¼Œå°†é€»è¾‘å¤„ç†ã€ç½‘ç»œè¯·æ±‚ç­‰ç¹æ‚æ“ä½œä¸­ViewControllerä¸­æŠ½ç¦»å‡ºæ¥ï¼ŒViewControllerå¾—ä»¥ç˜¦èº«ã€‚ç»“åˆRxSwiftæž¶æž„ï¼Œæˆ‘ä»¬ä¸€èˆ¬å°±ä¼šåœ¨ViewModelä¸­å®šä¹‰ä¸€ä¸ªinputæ”¶é›†ç¹æ‚æ“ä½œæ‰€éœ€çš„ä¿¡æ¯ï¼Œé€šè¿‡ä¸€ä¸ªtransformæ–¹æ³•å°†inputä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œè¿›è€Œå¾—åˆ°ä¸€ä¸ªoutputä¾›controllerä½¿ç”¨ã€‚ åœ¨ä½¿ç”¨RxSwiftå¼€å‘æ—¶ä¼šå¤§é‡çš„ä½¿ç”¨åˆ°è¿™ç§å½¢å¼ï¼Œå…¶ä¸­å°±åŒ…æ‹¬æˆ‘ä»¬çš„ç½‘ç»œè¯·æ±‚ã€‚ + æœ¬æ–‡æ˜¯åŸºäºŽ iOS - RxSwift é¡¹ç›®å®žæˆ˜è®°å½• æ‰€è¿°ï¼Œå¦‚æžœä½ è¿˜æœªé˜…è¯»è¿‡ï¼Œå»ºè®®ä½ æœ€å¥½è¿˜å…ˆé˜…è¯»ä¸€éï¼Œå¹¶ä¸‹è½½Demoç†Ÿæ‚‰ä¸€ä¸‹ : ) å‰è¨€MVVMçš„æ¨¡å¼ä¸­ï¼Œå¤šå‡ºäº†ViewModelè¿™ä¸ªè§’è‰²ï¼Œå°†é€»è¾‘å¤„ç†ã€ç½‘ç»œè¯·æ±‚ç­‰ç¹æ‚æ“ä½œä¸­ViewControllerä¸­æŠ½ç¦»å‡ºæ¥ï¼ŒViewControllerå¾—ä»¥ç˜¦èº«ã€‚ç»“åˆRxSwiftæž¶æž„ï¼Œæˆ‘ä»¬ä¸€èˆ¬å°±ä¼šåœ¨ViewModelä¸­å®šä¹‰ä¸€ä¸ªinputæ”¶é›†ç¹æ‚æ“ä½œæ‰€éœ€çš„ä¿¡æ¯ï¼Œé€šè¿‡ä¸€ä¸ªtransformæ–¹æ³•å°†inputä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œè¿›è€Œå¾—åˆ°ä¸€ä¸ªoutputä¾›controllerä½¿ç”¨ã€‚ åœ¨ä½¿ç”¨RxSwiftå¼€å‘æ—¶ä¼šå¤§é‡çš„ä½¿ç”¨åˆ°è¿™ç§å½¢å¼ï¼Œå…¶ä¸­å°±åŒ…æ‹¬æˆ‘ä»¬çš„ç½‘ç»œè¯·æ±‚ã€‚ç»“åˆ iOS - RxSwift é¡¹ç›®å®žæˆ˜è®°å½• ä¸­æ‰€è¿°çš„â€œMJRefreshåœ¨RxSwiftä¸­çš„ä½¿ç”¨â€ï¼Œåœ¨outputä¸­å®šä¹‰äº†ä¸€ä¸ªå˜é‡1let refreshStatus = Variable&lt;LXFRefreshStatus&gt;(.none) controlleré€šè¿‡outputå°†å…¶è¿›è¡Œç›‘å¬ï¼Œä»Žè€Œå½“å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œcontrollerå°±èƒ½å®žæ—¶èŽ·å–å½“å‰åº”æ‰€å¤„çš„åˆ·æ–°çŠ¶æ€12345678910111213141516vmOutput.refreshStatus.asObservable().subscribe(onNext: &#123;[weak self] status in switch status &#123; case .beingHeaderRefresh: self?.tableView.mj_header.beginRefreshing() case .endHeaderRefresh: self?.tableView.mj_header.endRefreshing() case .beingFooterRefresh: self?.tableView.mj_footer.beginRefreshing() case .endFooterRefresh: self?.tableView.mj_footer.endRefreshing() case .noMoreData: self?.tableView.mj_footer.endRefreshingWithNoMoreData() default: break &#125;&#125;).addDisposableTo(rx_disposeBag) å¦‚æžœåœ¨ä¸€ä¸ªé¡¹ç›®å¤šå¤„ä½¿ç”¨åˆ°äº†è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å¼Šç«¯â€”â€”é‡å¤ä»£ç ï¼Œè¿‡äºŽå†—ä½™ã€‚ éš¾é“æˆ‘ä»¬æ¯æ¬¡éƒ½è¦åœ¨controllerä¸­è¿›è¡Œå¦‚æ­¤æ“ä½œå—ï¼Ÿ é¢å‘åè®®å…³äºŽåè®®çš„å†…å®¹å¯ä»¥çœ‹ä¸‹æˆ‘ä¹‹å‰çš„è¿™ä¸¤ç¯‡æ–‡ç« iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰ iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰ æ€»ç»“åè®®çš„ä¸¤å¤§ä½œç”¨ï¼š1ã€è§„èŒƒ 2ã€å®šåˆ¶èƒ½åŠ› å®šä¹‰åè®® Refreshable 1234567891011121314151617/* ============================ Refreshable ================================ */// éœ€è¦ä½¿ç”¨ MJExtension çš„æŽ§åˆ¶å™¨ä½¿ç”¨protocol Refreshable &#123; &#125;extension Refreshable where Self : UIViewController &#123; func initRefreshHeader(_ scrollView: UIScrollView, _ action: @escaping () -&gt; Void) -&gt; MJRefreshHeader &#123; scrollView.mj_header = MJRefreshNormalHeader(refreshingBlock: &#123; action() &#125;) return scrollView.mj_header &#125; func initRefreshFooter(_ scrollView: UIScrollView, _ action: @escaping () -&gt; Void) -&gt; MJRefreshFooter &#123; scrollView.mj_footer = MJRefreshAutoNormalFooter(refreshingBlock: &#123; action() &#125;) return scrollView.mj_footer &#125;&#125; åœ¨controllerä¸­éµå¾ª Refreshable åè®®ï¼Œé€šè¿‡initRefreshHeaderæ–¹æ³•æˆ–è€…initRefreshFooteræ–¹æ³•ç»™tableViewæˆ–è€…collectionViewèµ‹äºˆå¤´éƒ¨æˆ–å°¾éƒ¨åˆ·æ–°çš„èƒ½åŠ›ï¼Œå¹¶ä¸”ä¹¦å†™ä¸‹æ‹‰åˆ·æ–°æ—¶éœ€è¦æ‰§è¡Œçš„ä»£ç 12345// ä»¥ä¸‹æ‹‰åˆ·æ–°ä¸ºä¾‹let refreshHeader = initRefreshHeader(liveCollectionView) &#123; [weak self] in // ä¸‹æ‹‰åŽéœ€è¦æ‰§è¡Œçš„æ“ä½œ self?.vmOutput?.requestCommand.onNext(())&#125; æŽ¥ä¸‹æ¥å†è®²è®²outputï¼Œåªè¦æœ‰ç½‘ç»œè¯·æ±‚çš„åœ°æ–¹ï¼Œå°±ä¼šéœ€è¦éœ€è¦ç›‘å¬è¯·æ±‚çŠ¶æ€ï¼Œæ—¢ç„¶è¿™æ ·ï¼Œé‚£ä¹ˆå¯ä»¥ä¸ºoutputå®šä¹‰ä¸€ä¸ªåè®®OutputRefreshProtocolï¼Œä¸“é—¨ç”¨æ¥è§„èŒƒå¿…éœ€å£°æ˜Žçš„å±žæ€§1234567/* ============================ OutputRefreshProtocol ================================ */// viewModel ä¸­ outputä½¿ç”¨protocol OutputRefreshProtocol &#123; // å‘Šè¯‰å¤–ç•Œçš„tableViewå½“å‰çš„åˆ·æ–°çŠ¶æ€ var refreshStatus : Variable&lt;LXFRefreshStatus&gt; &#123;get&#125;&#125; æŽ¥ç€è®©outputåŽ»éµå¾ªè¯¥åè®®ï¼Œå¹¶è¿›è¡Œåˆå§‹åŒ–åˆ·æ–°çŠ¶æ€çš„å€¼ä¸º.none123456789struct LXFLiveOutput: OutputRefreshProtocol &#123; var refreshStatus: Variable&lt;LXFRefreshStatus&gt; let sections: Driver&lt;[LXFLiveSection]&gt; init(sections: Driver&lt;[LXFLiveSection]&gt;) &#123; self.sections = sections refreshStatus = Variable&lt;LXFRefreshStatus&gt;(.none) &#125;&#125; åˆ°æ­¤ä¸ºæ­¢ï¼Œå…¶å®žè·Ÿä¹‹å‰æ²¡å•¥ä¸¤æ ·ï¼Œåªæ˜¯ä½¿controlleræ›´æ–¹ä¾¿åˆå§‹åŒ–åˆ·æ–°æŽ§ä»¶è€Œå·²ã€‚æŽ¥ä¸‹æ¥æ‰æ˜¯æœ¬æ–‡çš„é‡ç‚¹ã€‚ é‡ç‚¹åˆ·æ–°çš„çŠ¶æ€æ— éžä¹Ÿå°±é‚£ä¹ˆå‡ ç§ï¼Œä¸‹æ‹‰é‡è½½æ•°æ®ï¼Œä¸Šæ‹‰åŠ è½½æ›´å¤šï¼Œè¯·æ±‚å®Œæˆæ—¶ç»“æŸä¸‹æ‹‰æˆ–ä¸Šæ‹‰ç­‰ç­‰ã€‚ã€‚ã€‚é‚£æˆ‘ä»¬ä½•å¿…è¦åœ¨æ¯ä¸ªcontrollerä¸­å†åŽ»ç®¡ç†è¿™ç­‰çäº‹ï¼Ÿï¼Ÿè€Œè‡³æ­¤ï¼Œåˆ·æ–°æŽ§ä»¶çš„çŠ¶æ€æ˜¯ç”±å˜é‡ refreshStatus æ¥å†³å®šï¼Œæ­¤æ—¶ refreshStatus åˆå£°æ˜Žåœ¨ OutputRefreshProtocol åè®®ä¸­ï¼Œæˆ‘ä»¬ä½•ä¸å†å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œå°†åˆ·æ–°æŽ§ä»¶çš„çŠ¶æ€äº¤ç»™refreshStatusè‡ªå·±æ¥å¸®æˆ‘ä»¬å¤„ç†å‘¢ï½ž 1234567891011121314151617181920extension OutputRefreshProtocol &#123; func autoSetRefreshHeaderStatus(header: MJRefreshHeader?, footer: MJRefreshFooter?) -&gt; Disposable &#123; return refreshStatus.asObservable().subscribe(onNext: &#123; (status) in switch status &#123; case .beingHeaderRefresh: header?.beginRefreshing() case .endHeaderRefresh: header?.endRefreshing() case .beingFooterRefresh: footer?.beginRefreshing() case .endFooterRefresh: footer?.endRefreshing() case .noMoreData: footer?.endRefreshingWithNoMoreData() default: break &#125; &#125;) &#125;&#125; è¿™æ—¶éœ€è¦æˆ‘ä»¬å°†åˆ·æ–°æŽ§ä»¶çš„å¯¹è±¡ header / footer ä¼ å…¥åˆ°æ–¹æ³•ä¸­ï¼Œå®žçŽ°è‡ªåŠ¨æŽ§åˆ¶åˆ·æ–°æŽ§ä»¶çŠ¶æ€ã€‚ æ€»ç»“ä½¿ç”¨ä¸€ã€outputä¸­éµå®ˆåè®® OutputRefreshProtocolï¼Œ å¹¶åˆå§‹åŒ– refreshStatus çš„å€¼ä¸º none 123456789struct LXFLiveOutput: OutputRefreshProtocol &#123; var refreshStatus: Variable&lt;LXFRefreshStatus&gt; let sections: Driver&lt;[LXFLiveSection]&gt; init(sections: Driver&lt;[LXFLiveSection]&gt;) &#123; self.sections = sections refreshStatus = Variable&lt;LXFRefreshStatus&gt;(.none) &#125;&#125; äºŒã€controller éµå®ˆåè®® Refreshableï¼Œé€šè¿‡åè®®ä¸­çš„æ–¹æ³•åˆå§‹åŒ–åˆ·æ–°æŽ§ä»¶åŠå¯¹åº”çš„æ“ä½œï¼Œå¹¶å°†åˆ·æ–°æŽ§ä»¶å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ å…¥åˆ°è‡ªåŠ¨å¤„ç†çŠ¶æ€æ–¹æ³•ä¸­1extension LXFLiveViewController: Refreshable 1234let refreshHeader = initRefreshHeader(liveCollectionView) &#123; [weak self] in self?.vmOutput?.requestCommand.onNext(())&#125;vmOutput?.autoSetRefreshHeaderStatus(header: refreshHeader, footer: nil).disposed(by: rx.disposeBag) ä¸‰ã€viewModelä¸­æ ¹æ®å®žé™…æƒ…å†µå®žæ—¶æ›´æ–° refreshStatus çš„åˆ·æ–°çŠ¶æ€ æ¡ˆä¾‹åè®®ï¼šRefreshable.swiftViewModelï¼šLXFLiveViewModelControllerï¼šLXFLiveViewController LXFBiliBili]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Swift</tag>
        <tag>RxSwift</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS - è§†é¢‘é‡‡é›†è¯¦è§£]]></title>
    <url>%2F2017%2F10%2F16%2FiOS-%E8%A7%86%E9%A2%91%E9%87%87%E9%9B%86%E8%AF%A6%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[è‹¹æžœå®˜æ–¹æ–‡æ¡£-AVFoundation ä¸ºäº†ç®¡ç†ä»Žç›¸æœºæˆ–è€…éº¦å…‹é£Žç­‰è¿™æ ·çš„è®¾å¤‡æ•èŽ·åˆ°çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦è¾“å…¥å¯¹è±¡(input)å’Œè¾“å‡ºå¯¹è±¡(output)ï¼Œå¹¶ä¸”ä½¿ç”¨ä¸€ä¸ªä¼šè¯(AVCaptureSession)æ¥ç®¡ç† input å’Œ output ä¹‹å‰çš„æ•°æ®æµ + è‹¹æžœå®˜æ–¹æ–‡æ¡£-AVFoundation ä¸ºäº†ç®¡ç†ä»Žç›¸æœºæˆ–è€…éº¦å…‹é£Žç­‰è¿™æ ·çš„è®¾å¤‡æ•èŽ·åˆ°çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦è¾“å…¥å¯¹è±¡(input)å’Œè¾“å‡ºå¯¹è±¡(output)ï¼Œå¹¶ä¸”ä½¿ç”¨ä¸€ä¸ªä¼šè¯(AVCaptureSession)æ¥ç®¡ç† input å’Œ output ä¹‹å‰çš„æ•°æ®æµï¼š ç±»å ç®€ä»‹ AVCaptureDevice è¾“å…¥è®¾å¤‡ï¼Œä¾‹å¦‚ æ‘„åƒå¤´ éº¦å…‹é£Ž AVCaptureInput è¾“å…¥ç«¯å£ [ä½¿ç”¨å…¶å­ç±»] AVCaptureOutput è®¾å¤‡è¾“å‡º [ä½¿ç”¨å…¶å­ç±»]ï¼Œè¾“å‡ºè§†é¢‘æ–‡ä»¶æˆ–è€…é™æ€å›¾åƒ AVCaptureSession ç®¡ç†è¾“å…¥åˆ°è¾“å‡ºçš„æ•°æ®æµ AVCaptureVideoPreviewLayer å±•ç¤ºé‡‡é›† é¢„è§ˆView å¦‚å›¾ï¼Œé€šè¿‡å•ä¸ª sessionï¼Œä¹Ÿå¯ä»¥ç®¡ç†å¤šä¸ª input å’Œ output å¯¹è±¡ä¹‹é—´çš„æ•°æ®æµï¼Œä»Žè€Œå¾—åˆ°è§†é¢‘ã€é™æ€å›¾åƒå’Œé¢„è§ˆè§†å›¾ å¦‚å›¾ï¼Œinput å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè¾“å…¥ç«¯å£ï¼Œoutput ä¹Ÿå¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®æ¥æºï¼ˆå¦‚ï¼šä¸€ä¸ª AVCaptureMovieFileOutput å¯¹è±¡å¯ä»¥æŽ¥æ”¶è§†é¢‘æ•°æ®å’ŒéŸ³é¢‘æ•°æ®ï¼‰ å½“æ·»åŠ  input å’Œ output åˆ° session ä¸­æ—¶ï¼Œsession ä¼šè‡ªåŠ¨å»ºç«‹èµ·ä¸€ä¸ªè¿žæŽ¥(AVCaptureConnection)ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ª connection æ¥è®¾ç½®ä»Ž input æˆ–è€… ä»Ž output å¾—åˆ°çš„æ•°æ®çš„æœ‰æ•ˆæ€§ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥ç›‘æŽ§åœ¨éŸ³é¢‘ä¿¡é“ä¸­åŠŸçŽ‡çš„å¹³å‡å€¼å’Œå³°å€¼ã€‚ ä½¿ç”¨ Session æ¥ç®¡ç†æ•°æ®æµåˆ›å»ºä¸€ä¸ª session ç”¨æ¥ç®¡ç†æ•èŽ·åˆ°çš„æ•°æ®ï¼Œéœ€è¦å…ˆå°† inputs å’Œ outputs æ·»åŠ åˆ° session ä¸­ï¼Œå½“ session æ‰§è¡Œ [startRunning] æ–¹æ³•åŽå°±ä¼šå¼€å§‹å°†æ•°æ®æµå‘é€è‡³ sessionï¼Œé€šè¿‡æ‰§è¡Œ[stopRunning] æ–¹æ³•æ¥ç»“æŸæ•°æ®æµçš„å‘é€ã€‚12345AVCaptureSession *captureSession = [[AVCaptureSession alloc] init];// æ·»åŠ  inputs å’Œ outputs[session startRunning]; åœ¨ [session startRunning] ä¹‹å‰æˆ‘ä»¬éœ€è¦è¿›è¡Œä¸€äº›åŸºæœ¬çš„é…ç½® (å¦‚ï¼šè®¾å¤‡åˆ†è¾¨çŽ‡ï¼Œæ·»åŠ è¾“å…¥è¾“å‡ºå¯¹è±¡ç­‰) è®¾ç½®åˆ†è¾¨çŽ‡1234// è®¾ç½®åˆ†è¾¨çŽ‡ 720P æ ‡æ¸…if ([captureSession canSetSessionPreset:AVCaptureSessionPreset1280x720]) &#123; captureSession.sessionPreset = AVCaptureSessionPreset1280x720;&#125; é™„è‹¹æžœå®˜æ–¹æ–‡æ¡£ä¸­å¯ä¾›é…ç½®çš„åˆ†è¾¨çŽ‡åˆ—è¡¨ å…¶ä¸­é«˜åˆ†è¾¨çŽ‡(AVCaptureSessionPresetHigh) ä¸ºé»˜è®¤å€¼ï¼Œä¼šæ ¹æ®å½“å‰è®¾å¤‡è¿›è¡Œè‡ªé€‚åº”ï¼Œä½†æ˜¯è¿™æ ·ä¹‹åŽå¯¼å‡ºæ¥çš„æ–‡ä»¶å°±ä¼šå¾ˆå¤§ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è®¾ç½®ä¸ºæ ‡æ¸…(AVCaptureSessionPreset1280x720) å°±å¯ä»¥äº† è¾“å…¥å¯¹è±¡12// ç›´æŽ¥ä½¿ç”¨åŽç½®æ‘„åƒå¤´AVCaptureDevice *videoDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo]; 12345// åœ¨è¿™ä¸ªæ–¹æ³•ä¸­çš„ mediaType æœ‰ä¸‰ä¸ªé€‰é¡¹ä¾›æˆ‘ä»¬ä½¿ç”¨// AVMediaTypeVideo è§†é¢‘// AVMediaTypeAudio éŸ³é¢‘// AVMediaTypeMuxed æ··åˆ(è§†é¢‘ + éŸ³é¢‘)+ (nullable AVCaptureDevice *)defaultDeviceWithMediaType:(AVMediaType)mediaType; ä½†æ˜¯è¿™ç§æ–¹å¼åªèƒ½èŽ·å–åˆ°åŽç½®æ‘„åƒå¤´ï¼Œå¦‚æžœæƒ³è¦èŽ·å–å‰ç½®æ‘„åƒå¤´ï¼Œå¯ä½¿ç”¨12345678AVCaptureDevice *videoDevice;NSArray *devices = [AVCaptureDevice devices];for (AVCaptureDevice *device in devices) &#123; if(device.position == AVCaptureDevicePositionFront) &#123; // å‰ç½®æ‘„åƒå¤´ videoDevice = device; &#125;&#125; 123456// é€šè¿‡è®¾å¤‡èŽ·å–è¾“å…¥å¯¹è±¡AVCaptureDeviceInput *videoInput = [AVCaptureDeviceInput deviceInputWithDevice:videoDevice error:nil];// ç»™ä¼šè¯æ·»åŠ è¾“å…¥if([captureSession canAddInput:videoInput]) &#123; [captureSession addInput:videoInput];&#125; è¾“å‡ºå¯¹è±¡1234567891011121314151617// è§†é¢‘è¾“å‡ºï¼šè®¾ç½®è§†é¢‘åŽŸæ•°æ®æ ¼å¼ï¼šYUV, RGB // è‹¹æžœä¸æ”¯æŒYUVçš„æ¸²æŸ“ï¼Œåªæ”¯æŒRGBæ¸²æŸ“ï¼Œè¿™æ„å‘³ç€ï¼š YUV =&gt; RGBAVCaptureVideoDataOutput *videoOutput = [[AVCaptureVideoDataOutput alloc] init];// videoSettings: è®¾ç½®è§†é¢‘åŽŸæ•°æ®æ ¼å¼ YUV FULLvideoOutput.videoSettings = @&#123;(NSString *)kCVPixelBufferPixelFormatTypeKey:@(kCVPixelFormatType_420YpCbCr8BiPlanarFullRange)&#125;;// è®¾ç½®ä»£ç†ï¼šèŽ·å–å¸§æ•°æ®// é˜Ÿåˆ—ï¼šä¸²è¡Œ/å¹¶è¡Œï¼Œè¿™é‡Œä½¿ç”¨ä¸²è¡Œï¼Œä¿è¯æ•°æ®é¡ºåº dispatch_queue_t queue = dispatch_queue_create(&quot;LinXunFengSerialQueue&quot;, DISPATCH_QUEUE_SERIAL);[videoOutput setSampleBufferDelegate:self queue:queue];// ç»™ä¼šè¯æ·»åŠ è¾“å‡ºå¯¹è±¡if([captureSession canAddOutput:videoOutput]) &#123; // ç»™ä¼šè¯æ·»åŠ è¾“å…¥è¾“å‡ºå°±ä¼šè‡ªåŠ¨å»ºç«‹èµ·è¿žæŽ¥ [captureSession addOutput:videoOutput];&#125; åœ¨è¿™é‡Œï¼Œè¾“å‡ºå¯¹è±¡å¯ä»¥è®¾ç½®å¸§çŽ‡ 12// å¸§çŽ‡ï¼š1ç§’10å¸§å°±å·®ä¸å¤šæ¯”è¾ƒæµç•…äº†videoOutput.minFrameDuration = CMTimeMake(1, 10); è¾“å‡ºå¯¹è±¡åœ¨è®¾ç½®è§†é¢‘åŽŸæ•°æ®æ ¼å¼æ—¶ä½¿ç”¨ videoSettings å±žæ€§ï¼Œéœ€è¦èµ‹å€¼çš„ç±»åž‹æ˜¯å­—å…¸æ ¼å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯YUVï¼Œå¦ä¸€ç§æ˜¯RGBï¼ˆä¸€èˆ¬æˆ‘ä»¬éƒ½ä½¿ç”¨YUVï¼Œå› ä¸ºä½“ç§¯æ¯”RGBå°ï¼‰ 123456789101112// keykCVPixelBufferPixelFormatTypeKey æŒ‡å®šè§£ç åŽçš„å›¾åƒæ ¼å¼// valuekCVPixelFormatType_420YpCbCr8BiPlanarVideoRange : YUV420 ç”¨äºŽæ ‡æ¸…è§†é¢‘[420v]kCVPixelFormatType_420YpCbCr8BiPlanarFullRange : YUV422 ç”¨äºŽé«˜æ¸…è§†é¢‘[420f] kCVPixelFormatType_32BGRA : è¾“å‡ºçš„æ˜¯BGRAçš„æ ¼å¼ï¼Œé€‚ç”¨äºŽOpenGLå’ŒCoreImageåŒºåˆ«ï¼š1ã€å‰ä¸¤ç§æ˜¯ç›¸æœºè¾“å‡ºYUVæ ¼å¼ï¼Œç„¶åŽè½¬æˆRGBAï¼Œæœ€åŽä¸€ç§æ˜¯ç›´æŽ¥è¾“å‡ºBGRAï¼Œç„¶åŽè½¬æˆRGBA;2ã€420v è¾“å‡ºçš„è§†é¢‘æ ¼å¼ä¸ºNV12ï¼›èŒƒå›´ï¼š (luma=[16,235] chroma=[16,240])3ã€420f è¾“å‡ºçš„è§†é¢‘æ ¼å¼ä¸ºNV12ï¼›èŒƒå›´ï¼š (luma=[0,255] chroma=[1,255]) é¢„è§ˆå›¾å±‚123AVCaptureVideoPreviewLayer *previewLayer = [AVCaptureVideoPreviewLayer layerWithSession:captureSession];previewLayer.frame = self.view.bounds;[self.view.layer addSublayer:previewLayer]; å®žæ—¶æ˜¾ç¤ºæ‘„åƒå¤´æ•èŽ·åˆ°çš„å›¾åƒï¼Œä½†ä¸é€‚ç”¨äºŽæ»¤é•œæ¸²æŸ“ ä»£ç†æ–¹æ³•12345678910111213#pragma mark - AVCaptureVideoDataOutputSampleBufferDelegate/* CMSampleBufferRef: å¸§ç¼“å­˜æ•°æ®ï¼Œæè¿°å½“å‰å¸§ä¿¡æ¯ CMSampleBufferGetXXX : èŽ·å–å¸§ç¼“å­˜ä¿¡æ¯ CMSampleBufferGetDuration : èŽ·å–å½“å‰å¸§æ’­æ”¾æ—¶é—´ CMSampleBufferGetImageBuffer : èŽ·å–å½“å‰å¸§å›¾ç‰‡ä¿¡æ¯ */// èŽ·å–å¸§æ•°æ®- (void)captureOutput:(AVCaptureOutput *)output didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection &#123; // captureSession ä¼šè¯å¦‚æžœæ²¡æœ‰å¼ºå¼•ç”¨ï¼Œè¿™é‡Œä¸ä¼šå¾—åˆ°æ‰§è¡Œ NSLog(@&quot;----- sampleBuffer ----- %@&quot;, sampleBuffer);&#125; 12// èŽ·å–å¸§æ’­æ”¾æ—¶é—´CMTime duration = CMSampleBufferGetDuration(sampleBuffer); åœ¨ä»£ç†æ–¹æ³•ä¸­ï¼Œå¯ä»¥æŠŠ sampleBuffer æ•°æ®æ¸²æŸ“å‡ºæ¥åŽ»æ˜¾ç¤ºç”»é¢ã€‚é€‚ç”¨äºŽæ»¤é•œæ¸²æŸ“12345678// èŽ·å–å›¾ç‰‡å¸§æ•°æ®CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);CIImage *ciImage = [CIImage imageWithCVImageBuffer:imageBuffer];UIImage *image = [UIImage imageWithCIImage:ciImage];dispatch_async(dispatch_get_main_queue(), ^&#123; self.imageView.image = image;&#125;); éœ€è¦æ³¨æ„çš„æ˜¯ï¼šä»£ç†æ–¹æ³•ä¸­çš„æ‰€æœ‰åŠ¨ä½œæ‰€åœ¨é˜Ÿåˆ—éƒ½æ˜¯åœ¨å¼‚æ­¥ä¸²è¡Œé˜Ÿåˆ—ä¸­ï¼Œæ‰€ä»¥æ›´æ–°UIçš„æ“ä½œéœ€è¦å›žåˆ°ä¸»é˜Ÿåˆ—ä¸­è¿›è¡Œï¼ï¼ ä½†æ˜¯æ­¤æ—¶ä¼šå‘çŽ°ï¼Œç”»é¢æ˜¯å‘å·¦æ—‹è½¬äº†90åº¦ï¼Œå› ä¸ºé»˜è®¤é‡‡é›†çš„è§†é¢‘æ˜¯æ¨ªå±çš„ï¼Œéœ€è¦æˆ‘ä»¬è¿›ä¸€æ­¥åšè°ƒæ•´ã€‚ä»¥ä¸‹æ­¥éª¤æ·»åŠ åœ¨[session startRunning];ä¹‹å‰å³å¯ï¼Œä½†æ˜¯ä¸€å®šè¦åœ¨æ·»åŠ äº† input å’Œ outputä¹‹åŽï½ž123456// èŽ·å–è¾“å…¥ä¸Žè¾“å‡ºä¹‹é—´çš„è¿žæŽ¥AVCaptureConnection *connection = [videoOutput connectionWithMediaType:AVMediaTypeVideo];// è®¾ç½®é‡‡é›†æ•°æ®çš„æ–¹å‘connection.videoOrientation = AVCaptureVideoOrientationPortrait;// è®¾ç½®é•œåƒæ•ˆæžœé•œåƒconnection.videoMirrored = YES; DemoLXFAudioVideo]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Objective-C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS - é‡‡é›†éŸ³è§†é¢‘åŠå†™å…¥æ–‡ä»¶]]></title>
    <url>%2F2017%2F09%2F26%2FiOS-%E9%87%87%E9%9B%86%E9%9F%B3%E8%A7%86%E9%A2%91%E5%8F%8A%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[éŸ³è§†é¢‘é‡‡é›†åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼šè§†é¢‘é‡‡é›†å’ŒéŸ³é¢‘é‡‡é›†ã€‚åœ¨iOSä¸­å¯ä»¥åŒæ­¥é‡‡é›†è§†é¢‘ä¸ŽéŸ³é¢‘ï¼Œé€šè¿‡ç³»ç»Ÿæ¡†æž¶AVFoundationï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬é‡‡é›†éŸ³é¢‘ä¸Žè§†é¢‘ï¼Œå¯¹äºŽè§†é¢‘è¿˜å¯ä»¥è¿›è¡Œåˆ‡æ¢å‰åŽæ‘„åƒå¤´ï¼Œæœ€ç»ˆæˆ‘ä»¬å°†å½•åˆ¶å¥½çš„è§†é¢‘å†™å…¥æ²™ç›’ä¸­ + éŸ³è§†é¢‘é‡‡é›†åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼šè§†é¢‘é‡‡é›†å’ŒéŸ³é¢‘é‡‡é›†ã€‚åœ¨iOSä¸­å¯ä»¥åŒæ­¥é‡‡é›†è§†é¢‘ä¸ŽéŸ³é¢‘ï¼Œé€šè¿‡ç³»ç»Ÿæ¡†æž¶AVFoundationï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬é‡‡é›†éŸ³é¢‘ä¸Žè§†é¢‘ï¼Œå¯¹äºŽè§†é¢‘è¿˜å¯ä»¥è¿›è¡Œåˆ‡æ¢å‰åŽæ‘„åƒå¤´ï¼Œæœ€ç»ˆæˆ‘ä»¬å°†å½•åˆ¶å¥½çš„è§†é¢‘å†™å…¥æ²™ç›’ä¸­ éŸ³è§†é¢‘æ•°æ®çš„é‡‡é›†ä¸Žå±•ç¤ºä¸€ã€åˆå§‹åŒ–è§†é¢‘çš„è¾“å…¥ä¸Žè¾“å‡º12345678// æ‡’åŠ è½½ä¸€ä¸ªsessionï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½éœ€è¦sessionæ¥æ‰§è¡Œfileprivate lazy var session: AVCaptureSession = AVCaptureSession()// ä¿å­˜è§†é¢‘è¾“å‡ºfileprivate var videoOutput: AVCaptureVideoDataOutput?// ä¿å­˜è§†é¢‘è¾“å…¥fileprivate var videoInput: AVCaptureDeviceInput?// ä¿å­˜é¢„è§ˆå›¾å±‚fileprivate var previewLayer: AVCaptureVideoPreviewLayer? è®¾ç½®è§†é¢‘è¾“å…¥æºä¸Žè¾“å‡ºæº12345678910111213// è®¾ç½®è§†é¢‘è¾“å…¥æºguard let devices = AVCaptureDevice.devices() as? [AVCaptureDevice] else &#123; return &#125;// èŽ·å–æˆ‘ä»¬çš„å‰ç½®æ‘„åƒå¤´(åŽç½®ä¸º.back)guard let device = devices.filter(&#123; $0.position == .front &#125;).first else &#123; return &#125;guard let input = try? AVCaptureDeviceInput(device: device) else &#123; return &#125;self.videoInput = input// è®¾ç½®è§†é¢‘è¾“å‡ºæºlet output = AVCaptureVideoDataOutput()let queue = DispatchQueue.global()// è®¾ç½®ä»£ç†ï¼Œå¹¶åœ¨ä»£ç†ä¸­èŽ·å–é‡‡é›†åˆ°çš„æ•°æ®ï¼Œéœ€è¦éµå®ˆ AVCaptureVideoDataOutputSampleBufferDelegateoutput.setSampleBufferDelegate(self, queue: queue)self.videoOutput = output è®¾ç½®éŸ³é¢‘çš„è¾“å…¥æºä¸Žè¾“å‡ºæº123456789// è®¾ç½®éŸ³é¢‘çš„è¾“å…¥æºguard let device = AVCaptureDevice.defaultDevice(withMediaType: AVMediaTypeAudio) else &#123; return &#125;guard let input = try? AVCaptureDeviceInput(device: device) else &#123;return&#125;// è®¾ç½®éŸ³é¢‘è¾“å‡ºæºlet output = AVCaptureAudioDataOutput()let queue = DispatchQueue.global()// éœ€è¦éµå®ˆ AVCaptureAudioDataOutputSampleBufferDelegateoutput.setSampleBufferDelegate(self, queue: queue) æ·»åŠ éŸ³é¢‘ä¸Žè§†é¢‘çš„è¾“å…¥ä¸Žè¾“å‡ºåˆ°sessionä¸­ï¼Œä½†æ˜¯æ¯æ¬¡æ·»åŠ ä¹‹å‰éœ€è¦å…ˆåˆ¤æ–­æ˜¯å¦å¯ä»¥æ·»åŠ  123456789101112// æ·»åŠ è¾“å…¥ä¸Žè¾“å‡º// æ³¨æ„ï¼šæ¯æ¬¡å¯¹sessionè¿›è¡Œè®¾ç½®ä¹‹å‰éƒ½éœ€è¦è°ƒç”¨sessionçš„ã€beginConfigurationã€‘æ–¹æ³•// æ¥å‘Šè¯‰ç³»ç»Ÿä½ çŽ°åœ¨è¦å¼€å§‹è¿›è¡Œé…ç½®ï¼Œç»“æŸé…ç½®åŽå†è°ƒç”¨ã€commitConfigurationã€‘æ–¹æ³•æ¥æäº¤é…ç½®session.beginConfiguration()if session.canAddInput(input) &#123; session.addInput(input)&#125;if session.canAddOutput(output) &#123; session.addOutput(output)&#125;session.commitConfiguration() äºŒã€å®žçŽ°éŸ³è§†é¢‘çš„é‡‡é›†ä»£ç†éŸ³è§†é¢‘è™½ç„¶éœ€è¦éµå®ˆçš„ä»£ç†åç§°ä¸ä¸€æ ·ï¼Œä½†æ˜¯éœ€è¦å®žçŽ°çš„æ–¹æ³•æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥è¦æ‹¿åˆ°éŸ³é¢‘æˆ–è€…è§†é¢‘å°±å¾—å…ˆè¿›è¡Œåˆ¤æ–­ï¼Œéœ€è¦ç”¨åˆ°AVCaptureOutputçš„è¿™ä¸ªæ–¹æ³•12345// This convenience method returns the first AVCaptureConnection in the receiver&apos;s// connections array that has an AVCaptureInputPort of the specified mediaType. If // no connection with the specified mediaType is found, nil is returned.open func connection(withMediaType mediaType: String!) -&gt; AVCaptureConnection! 123456789extension ViewController: AVCaptureVideoDataOutputSampleBufferDelegate, AVCaptureAudioDataOutputSampleBufferDelegate &#123; func captureOutput(_ captureOutput: AVCaptureOutput!, didOutputSampleBuffer sampleBuffer: CMSampleBuffer!, from connection: AVCaptureConnection!) &#123; if videoOutput?.connection(withMediaType: AVMediaTypeVideo) == connection &#123; print("è§†é¢‘æ•°æ®") &#125; else &#123; print("éŸ³é¢‘æ•°æ®") &#125; &#125;&#125; ä¸‰ã€åˆå§‹åŒ–ä¸€ä¸ªé¢„è§ˆå›¾å±‚ç”¨æ¥æ˜¾ç¤ºé‡‡é›†åˆ°çš„è§†é¢‘ï¼ˆéžé‡‡é›†æ‰€å¿…é¡»çš„æ­¥éª¤ï¼‰1234567// åˆ›å»ºé¢„è§ˆå›¾å±‚guard let previewLayer = AVCaptureVideoPreviewLayer(session: session) else &#123;return&#125;previewLayer.frame = view.bounds// å°†å›¾å±‚æ·»åŠ åˆ°æŽ§åˆ¶å™¨çš„viewçš„layerä¸­view.layer.insertSublayer(previewLayer, at: 0)self.previewLayer = previewLayer çŽ°åœ¨åŸºæœ¬åŠŸèƒ½éƒ½æœ‰äº†ï¼Œå¦‚æžœæƒ³è¦å¼€å§‹é‡‡é›†éŸ³è§†é¢‘åªéœ€è¦è°ƒç”¨1234// å¼€å§‹å½•åˆ¶session.startRunning()// ç»“æŸå½•åˆ¶session.stopRunning() åˆ‡æ¢é•œå¤´å…¶å®žå°±æ˜¯æ¢æŽ‰å½“å‰çš„è§†é¢‘è¾“å…¥æ³•åˆ¶ï¼Œè¿™é‡Œçš„è¿‡ç¨‹è·Ÿä¸Šé¢çš„è®¾ç½®è¾“å…¥æºä¸€æ ·ã€‚123456789101112131415161718// 1.å–å‡ºä¹‹å‰é•œå¤´çš„æ–¹å‘guard let videoInput = videoInput else &#123; return &#125;let position: AVCaptureDevicePosition = videoInput.device.position == .front ? .back : .frontguard let devices = AVCaptureDevice.devices() as? [AVCaptureDevice] else &#123; return &#125;guard let device = devices.filter(&#123; $0.position == position &#125;).first else &#123; return &#125;guard let newInput = try? AVCaptureDeviceInput(device: device) else &#123; return &#125;// 2.ç§»é™¤ä¹‹å‰çš„inputï¼Œæ·»åŠ æ–°çš„inputsession.beginConfiguration()session.removeInput(videoInput)if session.canAddInput(newInput) &#123; session.addInput(newInput)&#125;session.commitConfiguration()// 3.ä¿å­˜æœ€æ–°çš„inputself.videoInput = newInput å½•åˆ¶è§†é¢‘å†™å…¥æ–‡ä»¶1fileprivate var movieOutput: AVCaptureMovieFileOutput? åœ¨å¼€å§‹é‡‡é›†éŸ³è§†é¢‘çš„æ—¶å€™å°±è¦å¼€å§‹å†™å…¥æ–‡ä»¶ 123456789101112131415161718// å¼€å§‹å†™å…¥æ–‡ä»¶ // 1ã€åˆ›å»ºå†™å…¥æ–‡ä»¶çš„è¾“å‡ºlet fileOutput = AVCaptureMovieFileOutput()self.movieOutput = fileOutput // ä¿å­˜èµ·æ¥ï¼Œç”¨äºŽåœæ­¢å†™å…¥æ–‡ä»¶// è®¾ç½®ç±»åž‹ï¼Œä¸ç„¶æŠ¥é”™(è¿™ä¸¤å¥å¾ˆé‡è¦)let connection = fileOutput.connection(withMediaType: AVMediaTypeVideo)connection?.automaticallyAdjustsVideoMirroring = trueif session.canAddOutput(fileOutput) &#123; session.addOutput(fileOutput)&#125;// 2ã€ç›´æŽ¥å¼€å§‹å†™å…¥æ–‡ä»¶let filePath = NSSearchPathForDirectoriesInDomains(.documentDirectory, .userDomainMask, true).first! + "/abc.mp4"let fileUrl = URL(fileURLWithPath: filePath)fileOutput.startRecording(toOutputFileURL: fileUrl, recordingDelegate: self) åœ¨åœæ­¢é‡‡é›†éŸ³è§†é¢‘çš„æ—¶å€™åœæ­¢å†™å…¥æ–‡ä»¶ 12// åœæ­¢å†™å…¥æ–‡ä»¶movieOutput?.stopRecording() è¯¦æƒ…è¯·çœ‹ DEMO]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Swift</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS - LXFDrawBoard å¤šåŠŸèƒ½å°ç”»æ¿]]></title>
    <url>%2F2017%2F09%2F25%2FiOS-LXFDrawBoard-%E5%A4%9A%E5%8A%9F%E8%83%BD%E5%B0%8F%E7%94%BB%E6%9D%BF%2F</url>
    <content type="text"><![CDATA[å°†LXFDrawBoardæ‹–å…¥é¡¹ç›®ä¸­ï¼Œå¯¼å…¥å¤´æ–‡ä»¶LXFDrawBoard.hï¼Œéœ€è¦ä»€ä¹ˆç¬”åˆ·å¯ä»¥åœ¨Brushæ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°å³å¯ä½¿ç”¨ï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•å¯ä»¥å‚è€ƒDemo+ LXFDrawBoardå¤šåŠŸèƒ½å°ç”»æ¿ GitHub: Demo Usage å°†LXFDrawBoardæ‹–å…¥é¡¹ç›®ä¸­ï¼Œå¯¼å…¥å¤´æ–‡ä»¶LXFDrawBoard.hï¼Œéœ€è¦ä»€ä¹ˆç¬”åˆ·å¯ä»¥åœ¨Brushæ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°å³å¯ä½¿ç”¨ï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•å¯ä»¥å‚è€ƒDemo LXFDrawBoardDelegate è¿”å›žéœ€è¦æ·»åŠ çš„æè¿° 1- (NSString *)LXFDrawBoard:(LXFDrawBoard *)drawBoard textForDescLabel:(UILabel *)descLabel; å½“æ·»åŠ æˆ–ä¿®æ”¹æè¿°æ—¶è°ƒç”¨ 1- (void)LXFDrawBoard:(LXFDrawBoard *)drawBoard clickDescLabel:(UILabel *)descLabel; ç¬”åˆ·2017â€“09-25 æ›´æ–°æ©¡çš®æ“¦ LXFEraserBrush é“…ç¬” LXFPencilBrush ç®­å¤´ LXFArrowBrush ç›´çº¿ LXFLineBrush æ–‡æœ¬ LXFTextBrush çŸ©å½¢ LXFRectangleBrush é©¬èµ›å…‹ LXFMosaicBrush æ’¤é”€ä¸Žåæ’¤é”€]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>Objective-C</tag>
        <tag>iOSé¡¹ç›®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS - RxSwift é¡¹ç›®å®žæˆ˜è®°å½•]]></title>
    <url>%2F2017%2F09%2F12%2FiOS-RxSwift-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98%E8%AE%B0%E5%BD%95%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åˆšåˆšæŠŠæŽ¥æ‰‹çš„OCé¡¹ç›®æžå®šï¼Œç»è¿‡æ·±æ€ç†Ÿè™‘åŽï¼Œæœ¬äººå†³å®šä¸‹ä¸ªé¡¹ç›®èµ·å°±ä½¿ç”¨Swift(å­¦äº†è¿™ä¹ˆä¹…çš„Swiftè¿˜æ²¡çœŸæ­£ç”¨åˆ°å®žé™…é¡¹ç›®é‡Œã€‚ã€‚ã€‚)ï¼Œè€Œæ°å·§RxSwiftå·²ç»å‡ºæ¥æœ‰ä¸€äº›æ—¶é—´äº†ï¼Œè¯­æ³•ä¹ŸåŸºæœ¬ä¸Šç¨³å®šï¼Œé‚åªèº«å‰æ¥è¯•æŽ¢è¯•æŽ¢è¿™RxSwiftï¼ŒæŽ¥ç€å°±åšäº†ä¸ªå°Demoï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥çž§ä¸€çž§~ + æœ€è¿‘åˆšåˆšæŠŠæŽ¥æ‰‹çš„OCé¡¹ç›®æžå®šï¼Œç»è¿‡æ·±æ€ç†Ÿè™‘åŽï¼Œæœ¬äººå†³å®šä¸‹ä¸ªé¡¹ç›®èµ·å°±ä½¿ç”¨Swift(å­¦äº†è¿™ä¹ˆä¹…çš„Swiftè¿˜æ²¡çœŸæ­£ç”¨åˆ°å®žé™…é¡¹ç›®é‡Œã€‚ã€‚ã€‚)ï¼Œè€Œæ°å·§RxSwiftå·²ç»å‡ºæ¥æœ‰ä¸€äº›æ—¶é—´äº†ï¼Œè¯­æ³•ä¹ŸåŸºæœ¬ä¸Šç¨³å®šï¼Œé‚åªèº«å‰æ¥è¯•æŽ¢è¯•æŽ¢è¿™RxSwiftï¼ŒæŽ¥ç€å°±åšäº†ä¸ªå°Demoï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥çž§ä¸€çž§~ ç»“æž„1234567891011121314151617.â”œâ”€â”€ Controllerâ”‚ â””â”€â”€ LXFViewController.swift // ä¸»è§†å›¾æŽ§åˆ¶å™¨â”œâ”€â”€ Extensionâ”‚ â””â”€â”€ Response+ObjectMapper.swift // Responseåˆ†ç±»ï¼ŒMoyaè¯·æ±‚å®Œè¿›è¡ŒJsonè½¬æ¨¡åž‹æˆ–æ¨¡åž‹æ•°ç»„â”œâ”€â”€ Modelâ”‚ â””â”€â”€ LXFModel.swift // æ¨¡åž‹â”œâ”€â”€ Protocolâ”‚ â””â”€â”€ LXFViewModelType.swift // å®šä¹‰äº†æ¨¡åž‹åè®®â”œâ”€â”€ Toolâ”‚ â”œâ”€â”€ LXFNetworkTool.swift // å°è£…Moyaè¯·æ±‚â”‚ â””â”€â”€ LXFProgressHUD.swift // å°è£…çš„HUDâ”œâ”€â”€ Viewâ”‚ â”œâ”€â”€ LXFViewCell.swift // è‡ªå®šä¹‰cellâ”‚ â””â”€â”€ LXFViewCell.xib // cellçš„xibæ–‡ä»¶â””â”€â”€ ViewModel â””â”€â”€ LXFViewModel.swift // è§†å›¾æ¨¡åž‹ ç¬¬ä¸‰æ–¹åº“123456789101112RxSwift // æƒ³çŽ©RxSwiftçš„å¿…å¤‡åº“RxCocoa // å¯¹ UIKit Foundation è¿›è¡Œ Rx åŒ–NSObject+Rx // ä¸ºæˆ‘ä»¬æä¾› rx_disposeBag Moya/RxSwift // ä¸ºRxSwiftä¸“ç”¨æä¾›ï¼Œå¯¹Alamofireè¿›è¡Œå°è£…çš„ä¸€ä¸ªç½‘ç»œè¯·æ±‚åº“ObjectMapper // Jsonè½¬æ¨¡åž‹ä¹‹å¿…å¤‡è‰¯å“RxDataSources // å¸®åŠ©æˆ‘ä»¬ä¼˜é›…çš„ä½¿ç”¨tableViewçš„æ•°æ®æºæ–¹æ³•Then // æä¾›å¿«é€Ÿåˆå§‹åŒ–çš„è¯­æ³•ç³–Kingfisher // å›¾ç‰‡åŠ è½½åº“SnapKit // è§†å›¾çº¦æŸåº“Reusable // å¸®åŠ©æˆ‘ä»¬ä¼˜é›…çš„ä½¿ç”¨è‡ªå®šä¹‰cellå’Œview,ä¸å†å‡ºçŽ°OptionalMJRefresh // ä¸Šæ‹‰åŠ è½½ã€ä¸‹æ‹‰åˆ·æ–°çš„åº“SVProgressHUD // ç®€å•æ˜“ç”¨çš„HUD æ•²é»‘æ¿Moyaçš„ä½¿ç”¨Moyaæ˜¯åŸºäºŽAlamofireçš„ç½‘ç»œè¯·æ±‚åº“ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨äº†Moya/Swiftï¼Œå®ƒåœ¨Moyaçš„åŸºç¡€ä¸Šæ·»åŠ äº†å¯¹RxSwiftçš„æŽ¥å£æ”¯æŒã€‚æŽ¥ä¸‹æ¥æˆ‘ä»¬æ¥è¯´ä¸‹Moyaçš„ä½¿ç”¨ ä¸€ã€åˆ›å»ºä¸€ä¸ªæžšä¸¾ï¼Œç”¨æ¥å­˜æ”¾è¯·æ±‚ç±»åž‹ï¼Œè¿™é‡Œæˆ‘é¡ºä¾¿è®¾ç½®ç›¸åº”çš„è·¯å¾„ï¼Œç­‰ä¸‹ç»Ÿä¸€å–å‡ºæ¥ç›´æŽ¥èµ‹å€¼å³å¯123456789enum LXFNetworkTool &#123; enum LXFNetworkCategory: String &#123; case all = "all" case android = "Android" case ios = "iOS" case welfare = "ç¦åˆ©" &#125; case data(type: LXFNetworkCategory, size:Int, index:Int)&#125; äºŒã€ä¸ºè¿™ä¸ªæžšä¸¾å†™ä¸€ä¸ªæ‰©å±•ï¼Œå¹¶éµå¾ªå¡„ TargetTypeï¼Œè¿™ä¸ªåè®®çš„Moyaè¿™ä¸ªåº“è§„å®šçš„åè®®ï¼Œå¯ä»¥æŒ‰ä½Commondé”®+å•å‡»å·¦é”®è¿›å…¥ç›¸åº”çš„æ–‡ä»¶è¿›è¡ŒæŸ¥çœ‹1234567891011121314151617181920212223242526272829303132333435363738394041424344extension LXFNetworkTool: TargetType &#123; /// baseURL ç»Ÿä¸€åŸºæœ¬çš„URL var baseURL: URL &#123; return URL(string: "http://gank.io/api/data/")! &#125; /// pathå­—æ®µä¼šè¿½åŠ è‡³baseURLåŽé¢ var path: String &#123; switch self &#123; case .data(let type, let size, let index): return "\(type.rawValue)/\(size)/\(index)" &#125; &#125; /// HTTPçš„è¯·æ±‚æ–¹å¼ var method: Moya.Method &#123; return .get &#125; /// è¯·æ±‚å‚æ•°(ä¼šåœ¨è¯·æ±‚æ—¶è¿›è¡Œç¼–ç ) var parameters: [String: Any]? &#123; return nil &#125; /// å‚æ•°ç¼–ç æ–¹å¼(è¿™é‡Œä½¿ç”¨URLçš„é»˜è®¤æ–¹å¼) var parameterEncoding: ParameterEncoding &#123; return URLEncoding.default &#125; /// è¿™é‡Œç”¨äºŽå•å…ƒæµ‹è¯•ï¼Œä¸éœ€è¦çš„å°±åƒæˆ‘ä¸€æ ·éšä¾¿å†™å†™ var sampleData: Data &#123; return "LinXunFeng".data(using: .utf8)! &#125; /// å°†è¦è¢«æ‰§è¡Œçš„ä»»åŠ¡(è¯·æ±‚ï¼šrequest ä¸‹è½½ï¼šupload ä¸Šä¼ ï¼šdownload) var task: Task &#123; return .request &#125; /// æ˜¯å¦æ‰§è¡ŒAlamofireéªŒè¯ï¼Œé»˜è®¤å€¼ä¸ºfalse var validate: Bool &#123; return false &#125;&#125; ä¸‰ã€å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡ç”¨äºŽæ•´ä¸ªé¡¹ç›®çš„ç½‘ç»œè¯·æ±‚1let lxfNetTool = RxMoyaProvider&lt;LXFNetworkTool&gt;() è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªå…¨å±€å˜é‡æ¥è¯·æ±‚æ•°æ®äº† RxDataSourceså¦‚æžœä½ æƒ³ç”¨ä¼ ç»Ÿçš„æ–¹å¼ä¹Ÿè¡Œï¼Œä¸è¿‡è¿™å°±å¤±åŽ»äº†ä½¿ç”¨RxSwiftçš„æ„ä¹‰ã€‚å¥½å§ï¼Œæˆ‘ä»¬æŽ¥ä¸‹æ¥è¯´è¯´å¦‚ä½•ä¼˜é›…çš„æ¥å®žçŽ°tableViewçš„æ•°æ®æºã€‚å…¶å®žRxDataSourceså®˜ç½‘ä¸Šå·²ç»æœ‰å¾ˆæ˜Žç¡®çš„ä½¿ç”¨è¯´æ˜Žï¼Œä¸è¿‡æˆ‘è¿˜æ˜¯æ€»ç»“ä¸€ä¸‹æ•´ä¸ªè¿‡ç¨‹å§ã€‚ æ¦‚å¿µç‚¹RxDataSourcesæ˜¯ä»¥sectionæ¥åšä¸ºæ•°æ®ç»“æž„æ¥ä¼ è¾“ï¼Œè¿™ç‚¹å¾ˆé‡è¦ï¼Œå¯èƒ½å¾ˆå¤šåŒå­¦ä¼šæ¯”è¾ƒç–‘æƒ‘è¿™å¥è¯å§ï¼Œæˆ‘åœ¨æ­¤ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ä¼ ç»Ÿçš„æ•°æ®æºå®žçŽ°çš„æ–¹æ³•ä¸­æœ‰ä¸€ä¸ªnumberOfSectionï¼Œæˆ‘ä»¬åœ¨å¾ˆå¤šæƒ…å†µä¸‹åªéœ€è¦ä¸€ä¸ªsectionï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•å¯å®žçŽ°ï¼Œä¹Ÿå¯ä»¥ä¸å®žçŽ°ï¼Œé»˜è®¤è¿”å›žçš„å°±æ˜¯1ï¼Œè¿™ç»™æˆ‘ä»¬å¸¦æ¥çš„ä¸€ä¸ªè¿·æƒ‘ç‚¹ï¼šã€tableViewæ˜¯ç”±rowæ¥ç»„æˆçš„ã€‘ï¼Œä¸çŸ¥é“åœ¨åçš„å„ä½ä¸­æœ‰æ²¡æœ‰æ˜¯è¿™ä¹ˆæƒ³çš„å‘¢ï¼Ÿï¼Ÿæœ‰çš„è¯é‚£ä»Žä»Šå¤©å¼€å§‹å°±è¦è®¤æ¸…æ¥šè¿™ä¸€ç‚¹ï¼Œã€tableViewå…¶å®žæ˜¯ç”±sectionç»„æˆçš„ã€‘ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨RxDataSourcesçš„è¿‡ç¨‹ä¸­ï¼Œå³ä½¿ä½ çš„setionåªæœ‰ä¸€ä¸ªï¼Œé‚£ä½ ä¹Ÿå¾—è¿”å›žä¸€ä¸ªsectionçš„æ•°ç»„å‡ºåŽ»ï¼ï¼ï¼ ä¸€ã€è‡ªå®šä¹‰Sectionåœ¨æˆ‘ä»¬è‡ªå®šä¹‰çš„Modelä¸­åˆ›å»ºä¸€ä¸ªSectionçš„ç»“æž„ä½“ï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ªæ‰©å±•ï¼Œéµå¾ªSectionModelTypeåè®®ï¼Œå®žçŽ°ç›¸åº”çš„åè®®æ–¹æ³•ã€‚çº¦å®šä¿—æˆçš„å†™æ³•å‘¢è¯·å‚è€ƒå¦‚ä¸‹æ–¹å¼12345678910111213141516171819LXFModel.swiftstruct LXFSection &#123; // itemså°±æ˜¯rows var items: [Item] // ä½ ä¹Ÿå¯ä»¥è¿™é‡ŒåŠ ä½ éœ€è¦çš„ä¸œè¥¿ï¼Œæ¯”å¦‚ headerView çš„ title&#125;extension LXFSection: SectionModelType &#123; // é‡å®šä¹‰ Item çš„ç±»åž‹ä¸º LXFModel typealias Item = LXFModel // å®žçŽ°åè®®ä¸­çš„æ–¹å¼ init(original: LXFSection, items: [LXFSection.Item]) &#123; self = original self.items = items &#125;&#125; äºŒã€åœ¨æŽ§åˆ¶å™¨ä¸‹åˆ›å»ºä¸€ä¸ªæ•°æ®æºå±žæ€§ ä»¥ä¸‹ä»£ç å‡åœ¨ LXFViewController.swift æ–‡ä»¶ä¸­12// åˆ›å»ºä¸€ä¸ªæ•°æ®æºå±žæ€§ï¼Œç±»åž‹ä¸ºè‡ªå®šä¹‰çš„Sectionç±»åž‹let dataSource = RxTableViewSectionedReloadDataSource&lt;LXFSection&gt;() ä½¿ç”¨æ•°æ®æºå±žæ€§ç»‘å®šæˆ‘ä»¬çš„cell12345678910// ç»‘å®šcelldataSource.configureCell = &#123; ds, tv, ip, item in // è¿™ä¸ªåœ°æ–¹ä½¿ç”¨äº†Reusableè¿™ä¸ªåº“ï¼Œåœ¨LXFViewCellä¸­éµå®ˆäº†ç›¸åº”çš„åè®® // ä½¿å…¶æ–¹ä¾¿è½¬æ¢cellä¸ºéžå¯é€‰åž‹çš„ç›¸åº”çš„cellç±»åž‹ let cell = tv.dequeueReusableCell(for: ip) as LXFViewCell cell.picView.kf.setImage(with: URL(string: item.url)) cell.descLabel.text = "æè¿°: \(item.desc)" cell.sourceLabel.text = "æ¥æº: \(item.source)" return cell&#125; ä¸‰ã€å°†sectionsåºåˆ—ç»‘å®šç»™æˆ‘ä»¬çš„rows1output.sections.asDriver().drive(tableView.rx.items(dataSource:dataSource)).addDisposableTo(rx_disposeBag) å¤§åŠŸå‘Šæˆï¼ŒæŽ¥ä¸‹æ¥è¯´è¯´sectionåºåˆ—çš„äº§ç”Ÿ ViewModelçš„è§„èŒƒæˆ‘ä»¬çŸ¥é“MVVMæ€æƒ³å°±æ˜¯å°†åŽŸæœ¬åœ¨ViewControllerçš„è§†å›¾æ˜¾ç¤ºé€»è¾‘ã€éªŒè¯é€»è¾‘ã€ç½‘ç»œè¯·æ±‚ç­‰ä»£ç å­˜æ”¾äºŽViewModelä¸­ï¼Œè®©æˆ‘ä»¬æ‰‹ä¸­çš„ViewControllerç˜¦èº«ã€‚è¿™äº›é€»è¾‘ç”±ViewModelè´Ÿè´£ï¼Œå¤–ç•Œä¸éœ€è¦å…³å¿ƒï¼Œå¤–ç•Œåªéœ€è¦ç»“æžœï¼ŒViewModelä¹Ÿåªéœ€è¦å°†ç»“æžœç»™åˆ°å¤–ç•Œï¼ŒåŸºäºŽæ­¤ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåè®®LXFViewModelType ä¸€ã€åˆ›å»ºä¸€ä¸ªLXFViewModelType.swift123456789LXFViewModelType.swift// associatedtype å…³é”®å­— ç”¨æ¥å£°æ˜Žä¸€ä¸ªç±»åž‹çš„å ä½ç¬¦ä½œä¸ºåè®®å®šä¹‰çš„ä¸€éƒ¨åˆ†protocol LXFViewModelType &#123; associatedtype Input associatedtype Output func transform(input: Input) -&gt; Output&#125; äºŒã€viewModeléµå®ˆLXFViewModelTypeåè®® æˆ‘ä»¬å¯ä»¥ä¸ºXFViewModelTypeçš„Inputå’ŒOutputå®šä¹‰åˆ«åï¼Œä»¥ç¤ºåŒºåˆ†ï¼Œå¦‚ï¼šä½ è¿™ä¸ªviewModelçš„ç”¨äºŽè¯·æ±‚é¦–é¡µæ¨¡å—ç›¸å…³è”çš„ï¼Œåˆ™å¯ä»¥å‘½åä¸ºï¼šHomeInput å’Œ HomeOutput æˆ‘ä»¬å¯ä»¥ä¸°å¯Œæˆ‘ä»¬çš„ Input å’Œ Output ã€‚å¯ä»¥çœ‹åˆ°æˆ‘ä¸ºOutputæ·»åŠ äº†ä¸€ä¸ªåºåˆ—ï¼Œç±»åž‹ä¸ºæˆ‘ä»¬è‡ªå®šä¹‰çš„LXFSectionæ•°ç»„ï¼Œåœ¨Inputé‡Œé¢æ·»åŠ äº†ä¸€ä¸ªè¯·æ±‚ç±»åž‹(å³è¦è¯·æ±‚ä»€ä¹ˆæ•°æ®ï¼Œæ¯”å¦‚é¦–é¡µçš„æ•°æ®) æˆ‘ä»¬é€šè¿‡ transform æ–¹æ³•å°†inputæºå¸¦çš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œç”Ÿæˆäº†ä¸€ä¸ªOutput æ³¨æ„ï¼š ä»¥ä¸‹ä»£ç ä¸ºäº†æ–¹ä¾¿é˜…è¯»ï¼Œè¿›è¡Œäº†éƒ¨åˆ†åˆ å‡ 12345678910111213141516171819202122232425262728293031323334353637383940LXFViewModel.swiftextension LXFViewModel: LXFViewModelType &#123; // å­˜æ”¾ç€è§£æžå®Œæˆçš„æ¨¡åž‹æ•°ç»„ let models = Variable&lt;[LXFModel]&gt;([]) // ä¸ºLXFViewModelTypeçš„Inputå’ŒOutputå®šä¹‰åˆ«å typealias Input = LXFInput typealias Output = LXFOutput // ä¸°å¯Œæˆ‘ä»¬çš„Inputå’ŒOutput struct LXFInput &#123; // ç½‘ç»œè¯·æ±‚ç±»åž‹ let category: LXFNetworkTool.LXFNetworkCategory init(category: LXFNetworkTool.LXFNetworkCategory) &#123; self.category = category &#125; &#125; struct LXFOutput &#123; // tableViewçš„sectionsæ•°æ® let sections: Driver&lt;[LXFSection]&gt; init(sections: Driver&lt;[LXFSection]&gt;) &#123; self.sections = sections &#125; &#125; func transform(input: LXFViewModel.LXFInput) -&gt; LXFViewModel.LXFOutput &#123; let sections = models.asObservable().map &#123; (models) -&gt; [LXFSection] in // å½“modelsçš„å€¼è¢«æ”¹å˜æ—¶ä¼šè°ƒç”¨ï¼Œè¿™æ˜¯Variableçš„ç‰¹æ€§ return [LXFSection(items: models)] // è¿”å›žsectionæ•°ç»„ &#125;.asDriver(onErrorJustReturn: []) let output = LXFOutput(sections: sections) // æŽ¥ä¸‹æ¥çš„ä»£ç æ˜¯ç½‘ç»œè¯·æ±‚ï¼Œè¯·ç»“åˆé¡¹ç›®æŸ¥çœ‹ï¼Œä¸ç„¶ä¼šä¸æ–¹ä¾¿é˜…è¯»å’Œç†è§£ &#125;&#125; æŽ¥ç€æˆ‘ä»¬åœ¨ViewControllerä¸­åˆå§‹åŒ–æˆ‘ä»¬çš„inputï¼Œé€šè¿‡transformå¾—åˆ°outputï¼Œç„¶åŽå°†æˆ‘ä»¬outputä¸­çš„sectionsåºåˆ—ç»‘å®štableViewçš„items12345678LXFViewController.swift// åˆå§‹åŒ–inputlet vmInput = LXFViewModel.LXFInput(category: .welfare)// é€šè¿‡transformå¾—åˆ°outputlet vmOutput = viewModel.transform(input: vmInput)vmOutput.sections.asDriver().drive(tableView.rx.items(dataSource: dataSource)).addDisposableTo(rx_disposeBag) RxSwiftä¸­ä½¿ç”¨MJRefreshä¸€ã€å®šä¹‰ä¸€ä¸ªæžšä¸¾LXFRefreshStatusï¼Œç”¨äºŽæ ‡å¿—å½“å‰åˆ·æ–°çŠ¶æ€12345678enum LXFRefreshStatus &#123; case none case beingHeaderRefresh case endHeaderRefresh case beingFooterRefresh case endFooterRefresh case noMoreData&#125; äºŒã€åœ¨LXFOutputæ·»åŠ ä¸€ä¸ªrefreshStatusåºåˆ—ï¼Œç±»åž‹ä¸ºLXFRefreshStatus12// ç»™å¤–ç•Œè®¢é˜…ï¼Œå‘Šè¯‰å¤–ç•Œçš„tableViewå½“å‰çš„åˆ·æ–°çŠ¶æ€let refreshStatus = Variable&lt;LXFRefreshStatus&gt;(.none) æˆ‘ä»¬åœ¨è¿›è¡Œç½‘ç»œè¯·æ±‚å¹¶å¾—åˆ°ç»“æžœä¹‹åŽï¼Œä¿®æ”¹refreshStatusçš„valueä¸ºç›¸åº”çš„LXFRefreshStatusé¡¹ ä¸‰ã€å¤–ç•Œè®¢é˜…outputçš„refreshStatus å¤–ç•Œè®¢é˜…outputçš„refreshStatusï¼Œå¹¶ä¸”æ ¹æ®æŽ¥æ”¶åˆ°çš„å€¼è¿›è¡Œç›¸åº”çš„æ“ä½œ12345678910111213141516vmOutput.refreshStatus.asObservable().subscribe(onNext: &#123;[weak self] status in switch status &#123; case .beingHeaderRefresh: self?.tableView.mj_header.beginRefreshing() case .endHeaderRefresh: self?.tableView.mj_header.endRefreshing() case .beingFooterRefresh: self?.tableView.mj_footer.beginRefreshing() case .endFooterRefresh: self?.tableView.mj_footer.endRefreshing() case .noMoreData: self?.tableView.mj_footer.endRefreshingWithNoMoreData() default: break &#125;&#125;).addDisposableTo(rx_disposeBag) å››ã€outputæä¾›ä¸€ä¸ªrequestCommondç”¨äºŽè¯·æ±‚æ•°æ® PublishSubject çš„ç‰¹ç‚¹ï¼šå³å¯ä»¥ä½œä¸ºObservableï¼Œä¹Ÿå¯ä»¥ä½œä¸ºObserverï¼Œè¯´ç™½äº†å°±æ˜¯å¯ä»¥å‘é€ä¿¡å·ï¼Œä¹Ÿå¯ä»¥è®¢é˜…ä¿¡å·12// å¤–ç•Œé€šè¿‡è¯¥å±žæ€§å‘Šè¯‰viewModelåŠ è½½æ•°æ®ï¼ˆä¼ å…¥çš„å€¼æ˜¯ä¸ºäº†æ ‡å¿—æ˜¯å¦é‡æ–°åŠ è½½ï¼‰let requestCommond = PublishSubject&lt;Bool&gt;() åœ¨transformä¸­ï¼Œæˆ‘ä»¬å¯¹ç”Ÿæˆçš„outputçš„requestCommondè¿›è¡Œè®¢é˜…1234567891011121314output.requestCommond.subscribe(onNext: &#123;[unowned self] isReloadData in self.index = isReloadData ? 1 : self.index+1 lxfNetTool.request(.data(type: input.category, size: 10, index: self.index)).mapArray(LXFModel.self).subscribe(&#123; [weak self] (event) in switch event &#123; case let .next(modelArr): self?.models.value = isReloadData ? modelArr : (self?.models.value ?? []) + modelArr LXFProgressHUD.showSuccess("åŠ è½½æˆåŠŸ") case let .error(error): LXFProgressHUD.showError(error.localizedDescription) case .completed: output.refreshStatus.value = isReloadData ? .endHeaderRefresh : .endFooterRefresh &#125; &#125;).addDisposableTo(self.rx_disposeBag)&#125;).addDisposableTo(rx_disposeBag) äº”ã€åœ¨ViewControllerä¸­åˆå§‹åŒ–åˆ·æ–°æŽ§ä»¶ ä¸ºtableViewè®¾ç½®åˆ·æ–°æŽ§ä»¶ï¼Œå¹¶ä¸”åœ¨åˆ›å»ºåˆ·æ–°æŽ§ä»¶çš„å›žè°ƒä¸­ä½¿ç”¨outputçš„requestCommondå‘å°„ä¿¡å·123456tableView.mj_header = MJRefreshNormalHeader(refreshingBlock: &#123; vmOutput.requestCommond.onNext(true)&#125;)tableView.mj_footer = MJRefreshAutoNormalFooter(refreshingBlock: &#123; vmOutput.requestCommond.onNext(false)&#125;) æ€»ç»“æµç¨‹ï¼š ViewControllerå·²ç»æ‹¿åˆ°outputï¼Œå½“ä¸‹æ‹‰åŠ è½½æ•°æ®çš„æ—¶å€™ï¼Œä½¿ç”¨outputçš„requestCommondå‘å°„ä¿¡æ¯ï¼Œå‘Šè¯‰viewModelæˆ‘ä»¬è¦åŠ è½½æ•°æ® viewModelè¯·æ±‚æ•°æ®ï¼Œåœ¨å¤„ç†å®Œjsonè½¬æ¨¡åž‹æˆ–æ¨¡åž‹æ•°ç»„åŽä¿®æ”¹modelsï¼Œå½“modelsçš„å€¼è¢«ä¿®æ”¹çš„æ—¶å€™ä¼šå‘ä¿¡å·ç»™sectionsï¼Œsectionsåœ¨ViewControllerå·²ç»ç»‘å®šåˆ°tableViewçš„itemsäº†ï¼Œæ‰€ä»¥æ­¤æ—¶tableViewçš„æ•°æ®ä¼šè¢«æ›´æ–°ã€‚æŽ¥ç€æˆ‘ä»¬æ ¹æ®è¯·æ±‚ç»“æžœï¼Œä¿®æ”¹outputçš„refreshStatuså±žæ€§çš„å€¼ å½“outputçš„refreshStatuså±žæ€§çš„å€¼æ”¹å˜åŽï¼Œä¼šå‘å°„ä¿¡å·ï¼Œç”±äºŽå¤–ç•Œä¹‹å‰å·²ç»è®¢é˜…äº†outputçš„refreshStatusï¼Œæ­¤æ—¶å°±ä¼šæ ¹æ®refreshStatusçš„æ–°å€¼æ¥å¤„ç†åˆ·æ–°æŽ§ä»¶çš„çŠ¶æ€ å¥½äº†ï¼Œé™„ä¸ŠRxSwiftDemoã€‚å®Œç»“æ’’èŠ±]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Swift</tag>
        <tag>RxSwift</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ubuntu å®‰è£…nginx æ¥æ­å»ºæŽ¨æµæœåŠ¡å™¨]]></title>
    <url>%2F2017%2F09%2F12%2FUbuntu-%E5%AE%89%E8%A3%85nginx-%E6%9D%A5%E6%90%AD%E5%BB%BA%E6%8E%A8%E6%B5%81%E6%9C%8D%E5%8A%A1%E5%99%A8%2F</url>
    <content type="text"><![CDATA[å¦‚æžœå®‰è£…å‘½ä»¤å›žè½¦ä¹‹åŽå‡ºçŽ°å¦‚ä¸‹ä¿¡æ¯ï¼Œè¯·å‚è€ƒã€Ubuntu â€œæ— æ³•èŽ·å¾—é”â€è§£å†³æ–¹æ¡ˆã€‘è§£å†³ï¼Œä½†æ˜¯æˆ‘äº²æµ‹å¯¹æˆ‘æ²¡ç”¨ï¼Œç›´æŽ¥é‡å¯æžå®š + å®‰è£…nginxå®‰è£…ä¸¤ä¸ªä¾èµ–åº“12sudo apt-get install autoconf automakesudo apt-get install libpcre3 libpcre3-dev å®‰è£…zlibåº“12sudo apt-get install opensslsudo apt-get install libssl-dev å¦‚æžœå®‰è£…å‘½ä»¤å›žè½¦ä¹‹åŽå‡ºçŽ°å¦‚ä¸‹ä¿¡æ¯ï¼Œè¯·å‚è€ƒã€Ubuntu â€œæ— æ³•èŽ·å¾—é”â€è§£å†³æ–¹æ¡ˆã€‘è§£å†³ï¼Œä½†æ˜¯æˆ‘äº²æµ‹å¯¹æˆ‘æ²¡ç”¨ï¼Œç›´æŽ¥é‡å¯æžå®š12E: æ— æ³•èŽ·å¾—é” /var/lib/dpkg/lock - open (11: èµ„æºæš‚æ—¶ä¸å¯ç”¨)E: æ— æ³•é”å®šç®¡ç†ç›®å½•(/var/lib/dpkg/)ï¼Œæ˜¯å¦æœ‰å…¶ä»–è¿›ç¨‹æ­£å ç”¨å®ƒï¼Ÿ è¿›å…¥å®¶ç›®å½•ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè¿™é‡Œä»¥lxfä¸ºä¾‹12cd ~mkdir lxf ä¸‹è½½æ‰€éœ€æºç 1234// ä¸‹è½½nginx-rtmpæºç wget https://github.com/arut/nginx-rtmp-module/archive/master.zip// ä¿®æ”¹åŽ‹ç¼©åŒ…çš„åå­—mv master.zip module.zip 12// ä¸‹è½½nginxwget https://github.com/nginx/nginx/archive/master.zip 12// ä¸‹è½½nginxçš„ä¾èµ–pcreæºç wget ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/pcre-8.39.tar.gz ä¸‹è½½å®Œæˆä¹‹åŽä½¿ç”¨unzipå‘½ä»¤è¿›è¡Œè§£åŽ‹123unzip master.zip unzip module.ziptar -zxvf pcre-8.39.tar.gz é…ç½®ç¼–è¯‘æ–‡ä»¶ï¼Œå‡†å¤‡ç¼–è¯‘å®‰è£…12// å…ˆè¿›å…¥nginx-masterç›®å½•cd nginx-master/ åœ¨nginx-masterç›®å½•ä¸‹æœ‰ä¸€ä¸ªautoæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªåä¸ºconfigureçš„é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å…ˆæ¥é€šè¿‡å®ƒè¿›è¡Œä¸€äº›é…ç½®123// prefix:æŒ‡å®šå®‰è£…ç›®å½•// add-module:æŒ‡å®šæ¨¡å—æ–‡ä»¶å¤¹auto/configure --prefix=/usr/local/nginx --with-pcre=../pcre-8.39 --with-http_ssl_module --with-http_v2_module --with-http_flv_module --with-http_mp4_module --add-module=../nginx-rtmp-module-master/ é…ç½®å¥½ä¹‹åŽä¼šå¤šå‡ºä¸€ä¸ªMakefileæ–‡ä»¶(ä¸€ç§é…ç½®æ–‡ä»¶ï¼Œå®šä¹‰äº†ä¸€ç³»åˆ—çš„è§„åˆ™æ¥æŒ‡å®šç¼–è¯‘æ“ä½œ)ä¸Žobjsæ–‡ä»¶å¤¹ 1234// ç¼–è¯‘make// å®‰è£…sudo make install å½“ä½ makeåŽï¼Œçœ‹åˆ°åˆ™ä»£è¡¨ç¼–è¯‘æˆåŠŸå†æ‰§è¡Œã€sudo make installã€‘ï¼Œçœ‹åˆ°è¿™ä¸ªåˆ™ä»£è¡¨å®‰è£…å®Œæˆ çŽ°åœ¨æˆ‘ä»¬åŽ»æµ‹è¯•ä¸€ä¸‹12 cd /usr/local/nginx/sbin/sudo ./nginx -t çœ‹åˆ°successfulè¯´æ˜Žé…ç½®æ–‡ä»¶æ­£ç¡®ï¼ï¼Œå¦‚æžœæ˜¯failedçš„è¯çœ‹çœ‹ä½ æ˜¯ä¸æ˜¯æ²¡åŠ sudo å¯åŠ¨nginxæœåŠ¡å™¨1sudo ./nginx é»˜è®¤ç«¯å£æ˜¯80ï¼Œæ‰€ä»¥ç›´æŽ¥åˆ°æµè§ˆå™¨ä¸­ç›´æŽ¥æ•²å…¥æœ¬åœ°åœ°å€ 127.0.0.1ï¼Œæ˜¾ç¤ºã€Welcome to nginx!ã€‘å°±ä»£è¡¨nginxå·²ç»æˆåŠŸå®‰è£… é…ç½®nginxåˆ›å»ºæŽ¨æµå­˜æ”¾æ–‡ä»¶å¤¹123// ä¸ºé‡Œä»¥ /usr/local/var/www/hls ä¸ºä¾‹cd /usr/localsudo mkdir -p var/www/hls è¿›å…¥nginxçš„confç›®å½•ï¼Œä½¿ç”¨vimç¼–è¾‘nginx.confæ–‡ä»¶12cd /usr/local/nginx/confsudo vim nginx.conf é…ç½®Nginxï¼Œæ”¯æŒhttpåè®®æ‹‰æµ12345678location /hls &#123; types &#123; application/vnd.apple.mpegurl m3u8; video/mp2t ts; &#125; root /usr/local/var/www; add_header Cache-Control no-cache;&#125; é…ç½®Nginxï¼Œæ”¯æŒrtmpåè®®æŽ¨æµ123456789101112131415rtmp &#123; server &#123; listen 1935; application rtmplive &#123; live on; max_connections 1024; &#125; application hls&#123; live on; hls on; hls_path /usr/local/var/www/hls; hls_fragment 1s; &#125; &#125;&#125; é‡å¯nginxæœåŠ¡å™¨12cd /usr/local/nginx/sbin/sudo ./nginx -s reload å¦‚æžœæ‰§è¡Œã€sudo ./nginx -s reloadã€‘å‡ºçŽ°ä¸‹é¢è¿™ä¸ªé—®é¢˜1nginx: [error] open() "/usr/local/nginx/logs/nginx.pid" failed (2: No such file or directory) å°±ä½¿ç”¨nginx -cçš„å‚æ•°æŒ‡å®šnginx.confæ–‡ä»¶çš„ä½ç½®ï¼ŒæŽ¥ç€å†reloadä¸€ä¸‹å°±å¥½äº†1sudo /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf æˆ‘Ubuntuåœ°å€ä¸º192.168.123.191 æŽ¨æµè‡³RTMPåˆ°æœåŠ¡å™¨ rtmp://192.168.123.191:1935/rtmplive/lxf1ffmpeg -re -i å¼‚å½¢.å¥‘çº¦.mp4 -vcodec libx264 -vprofile baseline -acodec aac -ar 44100 -strict -2 -ac 1 -f flv -s 1280x720 -q 10 rtmp://192.168.123.191:1935/rtmplive/lxf æŽ¨æµè‡³HLSåˆ°æœåŠ¡å™¨ http://192.168.123.191/hls/lxf.m3u81ffmpeg -re -i å¼‚å½¢.å¥‘çº¦.mp4 -vcodec libx264 -vprofile baseline -acodec aac -ar 44100 -strict -2 -ac 1 -f flv -s 1280x720 -q 10 rtmp://192.168.123.191:1935/hls/lxf å¦‚æžœå‡ºçŽ°å¦‚ä¸‹é”™è¯¯è¯´æ˜Žä½ çš„ç”µè„‘æ²¡å®‰è£…ffmpeg1-bash: ffmpeg: command not found ä½¿ç”¨Homebrewæ¥å®‰è£…FFmpeg1234// å®‰è£…Homebrewruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"// å®‰è£…FFmpegbrew install ffmpeg å¼€å§‹æŽ¨æµï¼Œç»ˆç«¯ä¸Šå°±å¼€å§‹ä¸æ–­çš„åˆ·æ–°æŽ¨æµä¿¡æ¯ æˆ‘ä»¬å¯ä»¥ç”¨ç”µè„‘ä¸Šçš„VLCè¿™ä¸ªè½¯ä»¶æ¥æµ‹è¯•æ˜¯å¦æŽ¨æµæˆåŠŸ OKï¼Œrmtpæ‰“å¼€æ­£å¸¸ï¼Œhlså°±ä¸æ¼”ç¤ºäº†ï¼Œä¸€æ ·çš„]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Ubuntu</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS - ç»™é«˜ä»¿å¾®ä¿¡æ·»åŠ ç›´æ’­èŠå¤©åŠŸèƒ½]]></title>
    <url>%2F2017%2F09%2F12%2FiOS-%E7%BB%99%E9%AB%98%E4%BB%BF%E5%BE%AE%E4%BF%A1%E6%B7%BB%E5%8A%A0%E7%9B%B4%E6%92%AD%E8%81%8A%E5%A4%A9%E5%8A%9F%E8%83%BD%2F</url>
    <content type="text"><![CDATA[æŠ½ç©ºç»™ä¹‹å‰åšçš„å¼€æºé¡¹ç›®ã€é«˜ä»¿å¾®ä¿¡ã€‘æ·»åŠ ç›´æ’­åŠŸèƒ½ï¼Œç”±äºŽæ—¶é—´æœ‰é™ï¼Œåšå¾—ä¸æ˜¯å¾ˆå®Œç¾Žï¼Œæœ‰ç©ºå†åŽ»å®Œå–„å§ï¼Œèƒ½ç”¨å°±å¥½~~ + æŠ½ç©ºç»™ä¹‹å‰åšçš„å¼€æºé¡¹ç›®ã€é«˜ä»¿å¾®ä¿¡ã€‘æ·»åŠ ç›´æ’­åŠŸèƒ½ï¼Œç”±äºŽæ—¶é—´æœ‰é™ï¼Œåšå¾—ä¸æ˜¯å¾ˆå®Œç¾Žï¼Œæœ‰ç©ºå†åŽ»å®Œå–„å§ï¼Œèƒ½ç”¨å°±å¥½~~ åœ¨æ­¤æä¾›å­˜æ”¾äºŽç™¾åº¦äº‘çš„å®Œæ•´é¡¹ç›®ã€é«˜ä»¿å¾®ä¿¡ã€‘- ç™¾åº¦äº‘å¸Œæœ›å„ä½èƒ½åœ¨æˆ‘çš„GitHubä¸ŠçŒ®å‡ºä¸€ä¸ªå®è´µçš„Star ã€é«˜ä»¿å¾®ä¿¡ã€‘- GitHubè°¢è°¢ æ³¨æ„ï¼šç›´æ’­åŠŸèƒ½çš„ä½¿ç”¨ï¼ˆå¯¹æ–¹éœ€è¦å…ˆè¿›å…¥åˆ°å¯¹åº”çš„èŠå¤©ç•Œé¢ï¼‰ ä¸¤ä¸ªæµ‹è¯•è´¦å·ï¼š lxf lqr å¯†ç éƒ½æ˜¯123456 æŽ¨æµé¦–å…ˆç¬¬ä¸€ä»¶äº‹å½“ç„¶å°±æ˜¯æ­å»ºä¸€ä¸ªæŽ¨æµæœåŠ¡å™¨ï¼Œè¿™é‡Œè¯·è·³è½¬å‚è€ƒæˆ‘ä¹‹å‰å†™å¥½çš„æ–‡ç« å§ã€Ubuntu å®‰è£…nginx æ¥æ­å»ºæŽ¨æµæœåŠ¡å™¨ã€‘ï¼Œè¿™é‡Œæˆ‘çš„æœåŠ¡å™¨çš„ipåœ°å€æ˜¯ï¼š192.168.123.191 APPä¸ŠæŽ¨æµæˆ‘ä½¿ç”¨çš„æ˜¯ç¬¬ä¸‰æ–¹çš„åº“ LFLiveKitï¼Œè¿™ä¸ªç¬¬ä¸‰æ–¹åº“å·²ç»å¸®æˆ‘ä»¬å¤„ç†äº†å¾ˆå¤šäº‹æƒ…ï¼Œè€Œä¸”è¿˜åŒ…æ‹¬ç¾Žé¢œ~~ã€‚å½“ç„¶ï¼Œæœ‰æ—¶é—´æˆ‘ä»¬è¿˜æ˜¯è¦åŽ»äº†è§£ä¸€ä¸‹åº•å±‚çš„ä¸œè¥¿ï¼Œè¿™é‡Œå°±å…ˆä¸èµ˜è¿°ï¼Œè¿‡å‡ å¤©æŠ½ç©ºå†åšæ€»ç»“ã€‚ å…³é”®ä»£ç å¦‚ä¸‹ 123456789// åˆå§‹åŒ–é…ç½®let audioConfiguration = LFLiveAudioConfiguration.default()let videoConfiguration = LFLiveVideoConfiguration.defaultConfiguration(for: .low2, outputImageOrientation: .portrait)// åˆå§‹åŒ–sessionlet session = LFLiveSession(audioConfiguration: audioConfiguration, videoConfiguration: videoConfiguration)// è®¾ç½®ä»£ç†// session?.delegate = self// è®¾ç½®å±•ç¤ºçš„Viewsession?.preView = self.view 12345let stream = LFLiveStreamInfo()stream.url = "rtmp://192.168.123.191:1935/rtmplive/lxf"; // æœåŠ¡å™¨åœ°å€session.startLive(stream)// å¼€å§‹æŽ¨æµsession.running = true æ‹‰æµè¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯Bç«™çš„å¼€æºåº“ ijkplayer ä¸ºäº†æ–¹ä¾¿å¯ä»¥ç”¨è¿™ä¸ª ç¼–è¯‘å¥½çš„Bç«™å¼€æºåº“ éœ€è¦æ³¨æ„çš„æ˜¯ï¼šIJKPlayeré»˜è®¤ä½¿ç”¨çš„æ˜¯è½¯è§£ç (FFMpeng)ï¼Œå¦‚æžœéœ€è¦ä½¿ç”¨ç¡¬è§£ç éœ€è¦æˆ‘ä»¬è¿›è¡Œç›¸åº”çš„è®¾ç½®123456789101112// è®¾ç½®"videotoolbox"çš„å€¼ä¸º0ä¸ºè½¯è§£ç (é»˜è®¤)ï¼Œè®¾ç½®ä¸º1åˆ™æ˜¯ç¡¬è§£ç let options = IJKFFOptions.byDefault()options?.setOptionIntValue(1, forKey: "videotoolbox", of: kIJKFFOptionCategoryPlayer)let ijkPlayer = IJKFFMoviePlayerController(contentURLString: "rtmp://192.168.123.191:1935/rtmplive/lxf", with: options)// éœ€ä¿å­˜èµ·æ¥self.ijkPlayer = ijkPlayerijkPlayer?.view.frame = view.boundsview.addSubview(ijkPlayer!.view)// å‡†å¤‡æ’­æ”¾ï¼Œå½“è§†é¢‘å‡†å¤‡å¥½çš„æ—¶å€™ä¼šè‡ªåŠ¨è¿›è¡Œæ’­æ”¾ijkPlayer?.prepareToPlay() å°†IJKPlayeræ‰“åŒ…ä»ŽBç«™çš„gitHubä¸Šä¸‹è½½çš„ ijkplayer éœ€è¦æ‰‹åŠ¨ç¼–è¯‘å‡ºæ¥ï¼Œè·Ÿç€è¯´æ˜Žèµ°å°±å¯ä»¥äº†ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°å’¯ï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬å°†å®ƒæ‰“åŒ…ï¼Œæ–¹ä¾¿ä½¿ç”¨ å¦‚æžœä½ ä¸è·Ÿç€è¯´æ˜Žèµ°çš„è¯ä¼šæç¤ºæ‰¾ä¸åˆ° avformat.h è¿™ä¸ªå¤´æ–‡ä»¶ è¿™æ—¶ä½ éœ€è¦åœ¨ç»ˆç«¯cdåˆ°ijkplayerè¿™ä¸ªç›®å½•ï¼Œç„¶åŽæ‰§è¡Œ init-ios.shæ–‡ä»¶ï¼Œå¦‚å›¾ ç„¶åŽç»è¿‡ä¸€æ®µæ¼«é•¿çš„æ—¶é—´ä¹‹åŽï¼Œåœ¨iosç›®å½•ä¸‹å°±å¤šå‡ºäº†è¿™äº›ffmpegç›¸å…³çš„ç›®å½• è¿™ä¸ªæ“ä½œæ˜¯åœ¨ä¸‹è½½ffmpegæºç ï¼Œç„¶ç¼ºå¤±çš„avformat.hå°±åœ¨é‡Œé¢ æ‰“å¼€é¡¹ç›® IJKMediaPlayer è®¾ç½®ä¸º releaseï¼Œè¿™æ ·æ‰“å‡ºæ¥çš„åŒ…ä¼šå°äº› é€‰æ‹©çœŸæœºå’Œæ¨¡æ‹Ÿå™¨ï¼Œå„Command+Bç¼–è¯‘ä¸€æ¬¡ å³å‡»ï¼ŒShow in Finder å¦‚å›¾ï¼Œå°±æœ‰ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œé‡Œé¢å­˜æ”¾ç€çš„å°±æ˜¯æˆ‘ä»¬ç¼–è¯‘å‡ºæ¥çš„åº“ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ä¿¡æ¯1lipo -info IJKMediaFramework é»˜è®¤æ¨¡æ‹Ÿå™¨ç¼–è¯‘å‡ºæ¥çš„åŒ…æ˜¯ä¸æ”¯æŒi386ï¼Œå¦‚æžœå¸Œæœ›æ”¯æŒçš„è¯è¿›å…¥é¡¹ç›®çš„ Build Settingsï¼Œå°† Build Active Architecture Only è®¾ç½®ä¸ºNO å¥½ï¼ŒçŽ°åœ¨å¯¹ç¼–è¯‘å‡ºæ¥çš„åŒ…è¿›è¡Œåˆå¹¶ï¼Œè¿™æ ·å°±å³æ”¯æŒçœŸæœºï¼Œä¹Ÿæ”¯æŒæ¨¡æ‹Ÿå™¨1234// æ ¼å¼// lipo -create path1 path2 -output frameNamelipo -create Release-iphoneos/IJKMediaFramework.framework/IJKMediaFramework Release-iphonesimulator/IJKMediaFramework.framework/IJKMediaFramework -output IJKMediaFramework å°†åˆå¹¶å‡ºæ¥çš„IJKMediaFrameworkæ›¿æ¢ IJKMediaFramework.frameworkä¸­çš„IJKMediaFrameworkï¼Œæœ€åŽå°†æ›¿æ¢å¥½çš„ IJKMediaFramework.framework æ‹–å…¥åˆ°é¡¹ç›®ä¸­ä½¿ç”¨å³å¯ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Swift</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS - æ­éœ²Blockçš„å†…éƒ¨å®žçŽ°åŽŸç†]]></title>
    <url>%2F2017%2F09%2F12%2FiOS-%E6%8F%AD%E9%9C%B2Block%E7%9A%84%E5%86%85%E9%83%A8%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%2F</url>
    <content type="text"><![CDATA[æƒ³å¿…å¤§å®¶å¯¹blockéƒ½å¾ˆç†Ÿæ‚‰äº†ï¼Œè™½ç„¶éƒ½ä¼šç”¨ï¼Œä½†æ˜¯ä½ çœŸçš„çŸ¥é“å®ƒçš„åŽŸç†å—ï¼Ÿæ¯”å¦‚ä¸ºä»€ä¹ˆè¦åŠ ä¸Š__blockï¼Œè¿™ä¸ªä¿®é¥°ç¬¦åˆ°åº•æœ‰ä»€ä¹ˆç”¨ï¼Ÿä¸åŠ ä¼šæœ‰ä»€ä¹ˆåŽæžœï¼Ÿblockåˆæ˜¯å¦‚ä½•å®žçŽ°çš„ç­‰ç­‰ã€‚ã€‚ã€‚è¯¥ç¯‡æ–‡ç« å°±ä¸ºå¤§å®¶æ­æ™“å…³äºŽBlockçš„å®žçŽ°åŽŸç†~ + æƒ³å¿…å¤§å®¶å¯¹blockéƒ½å¾ˆç†Ÿæ‚‰äº†ï¼Œè™½ç„¶éƒ½ä¼šç”¨ï¼Œä½†æ˜¯ä½ çœŸçš„çŸ¥é“å®ƒçš„åŽŸç†å—ï¼Ÿæ¯”å¦‚ä¸ºä»€ä¹ˆè¦åŠ ä¸Š__blockï¼Œè¿™ä¸ªä¿®é¥°ç¬¦åˆ°åº•æœ‰ä»€ä¹ˆç”¨ï¼Ÿä¸åŠ ä¼šæœ‰ä»€ä¹ˆåŽæžœï¼Ÿblockåˆæ˜¯å¦‚ä½•å®žçŽ°çš„ç­‰ç­‰ã€‚ã€‚ã€‚è¯¥ç¯‡æ–‡ç« å°±ä¸ºå¤§å®¶æ­æ™“å…³äºŽBlockçš„å®žçŽ°åŽŸç†~ æŠ›ç –å¼•çŽ‰å…ˆç»™å‡ºé—®é¢˜ï¼Œå¤§å®¶æ€è€ƒä¸‹ç»“æžœå§ï¼Œå¦‚æžœåˆ†åˆ«è°ƒç”¨ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼Œç»“æžœå¦‚ä½•ï¼Ÿ123456789void blockFunc1()&#123; int num = 100; void (^block)() = ^&#123; NSLog(@"num equal %d", num); &#125;; num = 200; block();&#125; 123456789void blockFunc2()&#123; __block int num = 100; void (^block)() = ^&#123; NSLog(@"num equal %d", num); &#125;; num = 200; block();&#125; ç­”æ¡ˆæ˜¯12blockFunc1 : num equal 100blockFunc2 : num equal 200 æ˜¯ä¸æ˜¯æœ‰äººç­”é”™äº†ï¼Ÿå†æ¥ä¸¤ä¸ªå‡½æ•°ã€‚è¿™ä¸¤ä¸ªçš„ç»“æžœä¸ŽblockFunc2ä¸€æ ·ï¼Œæ‰“å°å‡ºæ¥çš„ num ä¸º 20012345678910// å…¨å±€å˜é‡int num = 100;void blockFunc3()&#123; void (^block)() = ^&#123; NSLog(@"num equal %d", num); &#125;; num = 200; block();&#125; 123456789void blockFunc4()&#123; static int num = 100; void (^block)() = ^&#123; NSLog(@"num equal %d", num); &#125;; num = 200; block();&#125; ç–‘é—®ï¼šæˆ‘ä»¬å‘çŽ°numåšä¸ºå±€éƒ¨å˜é‡æ—¶åŠ ä¸Š _ _block ä¿®é¥°ç¬¦ã€numåšä¸ºå…¨å±€å˜é‡ä»¥åŠnumä¸ºé™æ€å±€éƒ¨å˜é‡æ—¶åœ¨blockä¸­è¾“å‡ºç»“æžœæ˜¯ä¸€æ ·çš„ï¼Œçš†ä¸ºè¢«ä¿®æ”¹ä¹‹åŽçš„å€¼ï¼Œè€Œåšä¸ºå±€éƒ¨å˜é‡å¹¶ä¸”æœªåŠ ä¸Š__blockçš„numåœ¨blockä¸­è¾“å‡ºçš„å€¼å´è¿˜æ˜¯æœªèµ‹å€¼ä¹‹å‰çš„å€¼ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼ŸæŽ¢ç´¢è¿™ä¸ªé—®é¢˜æˆ‘ä»¬å°±éœ€è¦çœ‹çœ‹åº•å±‚ç»“æž„æ˜¯å¦‚ä½•å®žçŽ°çš„äº† æŽ¢ç´¢å†…éƒ¨åŽŸç†Objective-Cæ˜¯ä¸€ä¸ªå…¨åŠ¨æ€è¯­è¨€ï¼Œå®ƒçš„ä¸€åˆ‡éƒ½æ˜¯åŸºäºŽruntimeå®žçŽ°çš„ï¼åœ¨è¿è¡Œæ—¶ä¼šå°†OCè½¬æ¢æˆCï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ¥æŸ¥çœ‹å…³äºŽblockåœ¨å†…éƒ¨æ˜¯å¦‚ä½•å®žçŽ°çš„æ–°å»ºä¸€ä¸ªCommand Line Toolé¡¹ç›®ï¼Œå°†ä»¥ä¸Šä»£ç æ”¾å…¥main.mä¸­ï¼Œå¦‚å›¾ è¿™é‡Œæˆ‘ä»¬æ‰“å¼€ç»ˆç«¯ï¼Œcdåˆ°é¡¹ç›®ç›®å½•ä¸‹ï¼Œç„¶åŽå°†ç”¨ä¸‹é¢çš„å‘½ä»¤å°†OCé‡å†™ä¸ºC1clang -rewrite-objc main.m è¿™æ—¶æˆ‘ä»¬å¯ä»¥å‘çŽ°å½“å‰ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªmain.cppæ–‡ä»¶ï¼Œæ‰“å¼€å®ƒå¹¶æ»šåˆ°æœ€ä¸‹é¢ è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°blockFunc1çš„Cè¯­è¨€å®žçŽ°æ–¹æ³• 1234567void blockFunc1()&#123; int num = 100; void (*block)() = ((void (*)())&amp;__blockFunc1_block_impl_0((void *)__blockFunc1_block_func_0, &amp;__blockFunc1_block_desc_0_DATA, num)); num = 200; ((void (*)(__block_impl *))((__block_impl *)block)-&gt;FuncPtr)((__block_impl *)block);&#125; åŽ»æŽ‰ç±»åž‹è½¬æ¢123456789void blockFunc1()&#123; int num = 100; // *************************é‡ç‚¹å¥*********************** void (*block)() = &amp;__blockFunc1_block_impl_0(__blockFunc1_block_func_0, &amp;__blockFunc1_block_desc_0_DATA, num)); // ***************************************************** num = 200; ((void (*)(__block_impl *))((__block_impl *)block)-&gt;FuncPtr)((__block_impl *)block);&#125; è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° blockå®žé™…ä¸Šæ˜¯æŒ‡å‘ç»“æž„ä½“çš„æŒ‡é’ˆ è¯¥ç»“æž„ä½“ä¸º æˆ‘ä»¬æ¥çœ‹ä¸‹å¸¦__blockçš„blockFunc2 åœ¨ blockFunc1 ä¸­ï¼ŒblockæŒ‡å‘äº†ä¸€ä¸ªåä¸ºblockFunc1_block_impl_0çš„ç»“æž„ä½“ï¼Œå¹¶ä¸”åœ¨åˆå§‹åŒ–æ—¶è¾“å…¥äº†ä¸‰ä¸ªå‚æ•°(blockFunc1_block_impl_0æœ€åŽçš„flagsæœ‰é»˜è®¤å‚æ•°ï¼Œæ‰€ä»¥å¯ä»¥ä¸ç”¨ä¼ å‚)ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°å°±æ˜¯æˆ‘ä»¬å†™çš„numï¼Œä¸ŽblockFunc2ç›¸æ¯”è¾ƒï¼Œè¿™é‡Œçš„numå¹¶æ²¡æœ‰å¸¦*å·ï¼Œæ‰€ä»¥è¯´åœ¨è¿™é‡Œå®ƒåªæ˜¯ä¼ å€¼è€Œéžä¼ å€ï¼Œè€Œä¸‹é¢çš„ã€num = 200;ã€‘ä¹Ÿå°±æ²¡ä»€ä¹ˆåµç”¨äº†ã€‚è¿™å°±æ˜¯blockFunc2ã€blockFunc3ä¸ŽblockFunc4ä¸ºä»€ä¹ˆèƒ½æ‰“å°å‡ºnumæ”¹å˜åŽçš„å€¼ï¼Œè€ŒblockFunc1ä¸è¡Œçš„åŽŸå› ã€‚ åœ¨è¿™é‡Œæˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹å‡ºï¼š ç¼–è¯‘å™¨ä¼šå°†blockçš„å†…éƒ¨ä»£ç ç”Ÿæˆå¯¹åº”çš„å‡½æ•° SO æˆ‘ä»¬æ€»ç»“ä¸‹ï¼Œblockåœ¨å†…éƒ¨ä¼šä½œä¸ºä¸€ä¸ªæŒ‡å‘ç»“æž„ä½“çš„æŒ‡é’ˆï¼Œå½“è°ƒç”¨blockçš„æ—¶å€™å…¶å®žå°±æ˜¯æ ¹æ®blockå¯¹åº”çš„æŒ‡é’ˆæ‰¾åˆ°ç›¸åº”çš„å‡½æ•°ï¼Œè¿›è€Œè¿›è¡Œè°ƒç”¨ï¼Œå¹¶ä¼ å…¥è‡ªèº« __blockçš„å®žçŽ°æˆ‘ä»¬å†æ¥çœ‹çœ‹ _ blockï¼Œ _blockä¹Ÿè¢«è½¬æ¢æˆäº†ç»“æž„ä½“ï¼Œå¹¶å«æœ‰5ä¸ªå˜é‡1234567struct __Block_byref_num_0 &#123; void *__isa; // isaæŒ‡é’ˆ__Block_byref_num_0 *__forwarding; // å®žä¾‹æœ¬èº« int __flags; int __size; int num; // æˆ‘ä»¬çš„numå€¼&#125;; å›¾ç‰‡å¯¹åº”ç€blockFunc2ä¸­çš„ 1__block int num = 100; å½“åˆ›å»ºnumå¹¶ç”¨__blockä¿®é¥°çš„æ—¶å€™ï¼Œä¼šåˆå§‹åŒ–è¿™äº”ä¸ªå˜é‡å½“æˆ‘ä»¬æ‰§è¡Œ1num = 200; å¯¹åº”ç€1(num.__forwarding-&gt;num) = 200; ä¸Šé¢åˆšåˆšæåˆ°è¿‡ _ _forwardingæ˜¯å®žä¾‹æœ¬èº«ï¼Œå³ç±»åž‹ç»“æž„ä½“__Block_byref_num_0çš„&amp;numï¼Œå†æ‰¾åˆ°å¯¹åº”çš„numå˜é‡ï¼Œå°†å…¶åŽŸæ¥çš„100ä¿®æ”¹ä¸º200~~ åˆ°æ­¤ï¼Œå…³äºŽBlockå†…éƒ¨å®žçŽ°çš„æ­æ™“ä¹Ÿå°±åˆ°æ­¤ç»“æŸäº†ï¼Œå¸Œæœ›æœ¬æ–‡èƒ½è®©ä½ å¯¹blockæœ‰æ›´æ·±çš„ç†è§£ï¼Œæ„Ÿè°¢ä½ è€å¿ƒçš„é˜…è¯»ï¼]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Objective-C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰]]></title>
    <url>%2F2017%2F09%2F12%2FiOS-Swift-%E9%9D%A2%E5%90%91%E5%8D%8F%E8%AE%AE%E7%BC%96%E7%A8%8B%EF%BC%88%E4%BA%8C%EF%BC%89%2F</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡æ–‡ç« iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰ å·²ç»å¯¹Swiftçš„é¢å‘åè®®ç¼–ç¨‹åšäº†ä»‹ç»ï¼ŒæŽ¥ä¸‹æ¥è¯¥ç¯‡æ–‡ç« å°†ä½¿ç”¨é¢å‘åè®®å¼€å‘(POP)æ¥åšä¸‹å®žé™…çš„åº”ç”¨ + ä¸Šä¸€ç¯‡æ–‡ç« iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰ å·²ç»å¯¹Swiftçš„é¢å‘åè®®ç¼–ç¨‹åšäº†ä»‹ç»ï¼ŒæŽ¥ä¸‹æ¥è¯¥ç¯‡æ–‡ç« å°†ä½¿ç”¨é¢å‘åè®®å¼€å‘(POP)æ¥åšä¸‹å®žé™…çš„åº”ç”¨ åœ¨å®žé™…å¼€å‘ä¸­ï¼Œè‡ªå®šä¹‰ViewåŸºæœ¬ä¸Šæ˜¯å¿…é¡»çš„ï¼Œç›¸ä¿¡è¿™å¯¹æˆ‘ä»¬æ¥è¯´éƒ½æ˜¯æ¯”è¾ƒç®€å•ï¼Œä¸è¿‡æˆ‘ä»¬è¿˜æ˜¯æ¥å›žé¡¾ä¸€ä¸‹ä¸‹~ é¢å‘å¯¹è±¡å¼€å‘1 æ–°å»ºä¸€ä¸ªUIViewçš„FirstTypeView 2 åˆ›å»ºä¸€ä¸ªViewçš„xibæ–‡ä»¶3 è®¾ç½®xibå¯¹åº”çš„classè¿›è¡Œç»‘å®š 4 åœ¨FirstTypeView.swift ä¸­å®žçŽ°ä¸€ä¸ªç±»æ–¹æ³•ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¤–éƒ¨ç”¨xibæ¥åˆå§‹åŒ–FirstTypeView1234567891011import UIKitclass FirstTypeView: UIView &#123; &#125;extension FirstTypeView &#123; class func loadFromNib() -&gt; FirstTypeView &#123; return Bundle.main.loadNibNamed("\(self)", owner: nil, options: nil)?.first as! FirstTypeView &#125;&#125; åœ¨å¤–éƒ¨åªè¦è°ƒç”¨FirstTypeViewçš„loadFromNibæ–¹æ³•å°±å¯ä»¥åˆå§‹åŒ–ä¸€ä¸ªViewæ¥ä½¿ç”¨äº†ã€‚å¥½ï¼ŒçŽ°åœ¨åˆæœ‰ä¸€ä¸ªç±»SecondTypeViewï¼Œä¹Ÿæ˜¯è¦æ±‚ä½¿ç”¨xibæ¥åˆå§‹åŒ–viewã€‚è¿™æ—¶æˆ‘ä»¬å°±ä¼šæƒ³ï¼Œä¸€æ ·çš„åŠ è½½xibçš„æ–¹æ³•ï¼Œé‚£æˆ‘ä»¬å°±æŠŠå®ƒæŠ½å–å‡ºæ¥æ”¾åˆ°çˆ¶ç±»å°±å¯ä»¥äº†ã€‚è¿™é‡Œçš„çˆ¶ç±»ä»¥BaseView.swiftä¸ºä¾‹çˆ¶ç±»çš„ä¸»è¦å®žçŽ°ä»£ç 12345extension BaseView &#123; class func loadFromNib() -&gt; BaseView &#123; return Bundle.main.loadNibNamed("\(self)", owner: nil, options: nil)?.first as! BaseView &#125;&#125; é‚£æˆ‘ä»¬çš„FirstTypeViewå’ŒSecondTypeViewåªéœ€è¦ç›´æŽ¥ç»§æ‰¿äºŽBaseViewå°±å¯ä»¥äº†ï¼Œåœ¨å…¶å®ƒåœ°æ–¹åˆå§‹åŒ–viewä¹Ÿå¾ˆæ–¹ä¾¿12345let firstView = FirstTypeView.loadFromNib()view.addSubview(firstView)let secondView = SecondTypeView.loadFromNib()view.addSubview(secondView) å¥½ï¼ŒçŽ°åœ¨FirstTypeViewé‡Œå£°æ˜Žäº†ä¸€ä¸ªå±žæ€§nameï¼ŒSecondTypeViewå£°æ˜Žçš„å±žæ€§ä¸ºageï¼Œå‡å¦‚æˆ‘ä»¬çŽ°åœ¨è¦ä½¿ç”¨å„è‡ªå¯¹åº”çš„å±žæ€§ï¼Œè¿™æ—¶æ˜¯ç›´æŽ¥ç‚¹ä¸å‡ºæ¥çš„ï¼Œéœ€è¦å…ˆè¿›è¡Œå¼ºè½¬1234567let firstView = FirstTypeView.loadFromNib() as! FirstTypeViewfirstView.name = "LXF"view.addSubview(firstView)let secondView = SecondTypeView.loadFromNib() as! SecondTypeViewsecondView.age = 100view.addSubview(secondView) ä½†æ˜¯è¿™æ ·è§‰å¾—ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œè¿˜éœ€è¦è¿›è¡Œå¼ºè½¬ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½åœ¨BaseViewé‡Œé¢æžå®šå®ƒå‘¢ï¼Ÿå¦‚æžœæ˜¯Swift 2.x çš„è¯æ˜¯å¯ä»¥çš„12345extension BaseView &#123; class func loadFromNib() -&gt; Self &#123; // æ³¨æ„è¿™é‡Œæ˜¯å¤§å†™çš„S return Bundle.main.loadNibNamed(&quot;\(self)&quot;, owner: nil, options: nil)?.first as! Self &#125;&#125; ä½†æ˜¯çŽ°åœ¨Swift 3.0å·²ç»ä¸æ”¯æŒè¿™ç§å†™æ³•äº†ï¼Œä¼šæŠ¥é”™ã€‚è¿™ä¸ªæ—¶å€™å¦‚æžœä½¿ç”¨é¢å‘åè®®çš„å¼€å‘å°±å¾ˆæ–¹ä¾¿äº†ã€‚ é¢å‘åè®®å¼€å‘ å°†BaseViewåˆ é™¤ï¼ŒFirstTypeViewå’ŒSecondTypeViewæ”¹å›žç»§æ‰¿äºŽUIView 1 æ–°å»ºä¸€ä¸ªSwiftæ–‡ä»¶ Nibloadable.swift 2 å®žçŽ°åè®®æ–¹æ³• åè®®ä¸­ä¸å…è®¸å®šä¹‰ç±»æ–¹æ³•ï¼Œéœ€æ”¹ä¸ºé™æ€æ–¹æ³•1234567891011import UIKitprotocol Nibloadable &#123; &#125;extension Nibloadable &#123; static func loadFromNib() -&gt; Self &#123; return Bundle.main.loadNibNamed(&quot;\(self)&quot;, owner: nil, options: nil)?.first as! Self &#125;&#125; 3 éµå®ˆåè®®123class SecondTypeView: UIView, Nibloadable &#123; var age: Int = 10&#125; è¿™æ ·å°±å¯ä»¥äº†ï¼Œè€Œä¸”ä½ åœ¨è°ƒç”¨loadFromNibæ–¹æ³•æ—¶å¯ä»¥å‘çŽ°ï¼Œç±»åž‹æ˜¯å¯¹åº”ä¸Šçš„ å¥½äº†ï¼Œé¢å‘åè®®å¼€å‘çš„åº”ç”¨å°±è®°å½•åˆ°è¿™é‡Œï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°å¤§å®¶ï¼ Demo]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Swift</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰]]></title>
    <url>%2F2017%2F09%2F12%2FiOS-Swift-%E9%9D%A2%E5%90%91%E5%8D%8F%E8%AE%AE%E7%BC%96%E7%A8%8B%EF%BC%88%E4%B8%80%EF%BC%89%2F</url>
    <content type="text"><![CDATA[ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡å¼€å‘æ€ç»´æ–¹å¼æ˜¯å°†ç±»ä¸­å®žçŽ°çš„ç›¸ä¼¼æ–¹æ³•æŠ½å–å‡ºæ¥ï¼ŒæŽ¥ç€æ”¾å…¥ä¸€ä¸ªBaseç±»ï¼Œç„¶åŽç»§æ‰¿äºŽBaseç±»åŽå„ä¸ªç±»å³å¯æ‰¾æ‹¥æœ‰ç›¸åŒçš„æ–¹æ³•ï¼Œä¸ç”¨å†ä¸€ä¸ªä¸ªæ‰‹åŠ¨å®žçŽ°ã€‚æ¯”å¦‚ï¼šä¸€ä¸ªPersonç±»ï¼Œä¸€ä¸ªDogç±»ï¼Œå®ƒä»¬éƒ½æ‹¥æœ‰æ–¹æ³•eatï¼Œé‚£ä¹ˆå°±å¯ä»¥æ–°å»ºä¸€ä¸ªAnimalç±»ï¼Œå°†eatæ–¹æ³•æŠ½å–å‡ºæ¥æ”¾å…¥å…¶ä¸­ï¼Œç„¶åŽå°†Personç±»å’ŒDogç±»éƒ½ç»§æ‰¿äºŽAnimalã€‚ä½†æ˜¯ï¼Œå¦‚æžœçŽ°åœ¨åˆæœ‰ä¸€ä¸ªRobotç±»ï¼Œä¹Ÿéœ€è¦æ‹¥æœ‰eatæ–¹æ³•ï¼Œè€Œæ­¤æ—¶ä¹Ÿå°†å…¶ç»§æ‰¿äºŽAnimalçš„è¯æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ï¼ŒäºŽæ˜¯æˆ‘ä»¬å°±éœ€è¦è½¬æ¢æ€ç»´ï¼Œé¢å‘åè®®å¼€å‘~ + OCæ— æ³•åšåˆ°é¢å‘åè®®å¼€å‘ï¼Œè€ŒSwiftå¯ä»¥ï¼Œå› ä¸ºSwiftå¯ä»¥åšåˆ°åè®®æ–¹æ³•çš„å…·ä½“å®žçŽ°ï¼Œè€ŒOCä¸è¡Œ é¢å‘å¯¹è±¡å¼€å‘ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡å¼€å‘æ€ç»´æ–¹å¼æ˜¯å°†ç±»ä¸­å®žçŽ°çš„ç›¸ä¼¼æ–¹æ³•æŠ½å–å‡ºæ¥ï¼ŒæŽ¥ç€æ”¾å…¥ä¸€ä¸ªBaseç±»ï¼Œç„¶åŽç»§æ‰¿äºŽBaseç±»åŽå„ä¸ªç±»å³å¯æ‰¾æ‹¥æœ‰ç›¸åŒçš„æ–¹æ³•ï¼Œä¸ç”¨å†ä¸€ä¸ªä¸ªæ‰‹åŠ¨å®žçŽ°ã€‚æ¯”å¦‚ï¼šä¸€ä¸ªPersonç±»ï¼Œä¸€ä¸ªDogç±»ï¼Œå®ƒä»¬éƒ½æ‹¥æœ‰æ–¹æ³•eatï¼Œé‚£ä¹ˆå°±å¯ä»¥æ–°å»ºä¸€ä¸ªAnimalç±»ï¼Œå°†eatæ–¹æ³•æŠ½å–å‡ºæ¥æ”¾å…¥å…¶ä¸­ï¼Œç„¶åŽå°†Personç±»å’ŒDogç±»éƒ½ç»§æ‰¿äºŽAnimalã€‚ä½†æ˜¯ï¼Œå¦‚æžœçŽ°åœ¨åˆæœ‰ä¸€ä¸ªRobotç±»ï¼Œä¹Ÿéœ€è¦æ‹¥æœ‰eatæ–¹æ³•ï¼Œè€Œæ­¤æ—¶ä¹Ÿå°†å…¶ç»§æ‰¿äºŽAnimalçš„è¯æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ï¼ŒäºŽæ˜¯æˆ‘ä»¬å°±éœ€è¦è½¬æ¢æ€ç»´ï¼Œé¢å‘åè®®å¼€å‘~ é¢å‘åè®®å¼€å‘é¢å‘åè®®å¼€å‘çš„æ ¸å¿ƒæ˜¯ï¼š æ¨¡å—åŒ–ï¼ˆç»„ä»¶åŒ–ï¼‰ æˆ‘ä»¬å…ˆæ¥å›žé¡¾ä¸‹åè®®çš„ä¸€èˆ¬ä½¿ç”¨ï¼Œæ–°å»ºä¸€ä¸ªSwiftæ–‡ä»¶LXFProtocol.swift12345import Foundationprotocol LXFProtocol &#123; func eat()&#125; æˆ‘ä»¬çš„Personç±»éµå®ˆåè®®LXFProtocolï¼Œéœ€è¦æˆ‘ä»¬å®žçŽ°åè®®ä¸­çš„æ–¹æ³•ï¼Œå¦‚ï¼š12345class Person: NSObject, LXFProtocol &#123; func eat() &#123; // &#125;&#125; é‚£æˆ‘ä»¬æ¯ä¸ªç±»éƒ½è¿™æ ·åšçš„è¯è·Ÿç›´æŽ¥å¤åˆ¶ç²˜è´´ä»£ç å¹¶æ²¡ä»€ä¹ˆä¸åŒ~~è€Œå¼€å¤´å·²ç»æåˆ°ä¸€ç‚¹ï¼š Swiftå¯ä»¥åšåˆ°åè®®æ–¹æ³•çš„å…·ä½“å®žçŽ° é‚£ä¹ˆçŽ°åœ¨ï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªSwiftæ–‡ä»¶Eatable.swiftï¼Œä»¥åŒºåˆ†LXFProtocol.swiftEatable.swiftä¸­çš„ä»£ç å®žçŽ°å¦‚ä¸‹ï¼š1234567891011import Foundationprotocol Eatable &#123; // å¯å£°æ˜Žå˜é‡&#125;extension Eatable &#123; func eat() &#123; // å®žçŽ°å…·ä½“çš„åŠŸèƒ½ &#125;&#125; æœ‰2ä¸ªæ³¨æ„ç‚¹ protocolä¸­å¯ä»¥å£°æ˜Žå˜é‡ï¼Œæ–¹ä¾¿åœ¨åè®®æ–¹æ³•ä¸­ä½¿ç”¨ åè®®æ–¹æ³•çš„å…·ä½“å®žçŽ°éœ€è¦åœ¨extensionä¸­æ¥å®žçŽ° ä½¿Dogç±»éµå®ˆEatable123class Dog: NSObject, Eatable &#123;&#125; è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨å…¶å®ƒåœ°æ–¹è½»æ¾è°ƒç”¨dogçš„eatæ–¹æ³•ï¼ŒPersonç±»ä¸ŽRobotç±»ä¹Ÿæ˜¯å¦‚æ³•ç‚®åˆ¶ è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡é¢å‘åè®®çš„æ–¹å¼ç»™ç±»å®šåˆ¶ä¸åŒçš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯æ¨¡å—åŒ–ã€‚å¯ä»¥å‘çŽ°Swiftçš„é¢å‘åè®®ç¼–ç¨‹è·Ÿc++çš„å¤šç»§æ‰¿å¾ˆç›¸ä¼¼ çº¦æŸçŽ°åœ¨çš„è¿™ä¸ªEatableåè®®æ˜¯å¯ä»¥è¢«ä»»æ„éµå®ˆçš„ï¼Œå¦‚æžœæˆ‘ä»¬æœ‰è¿™ä¹ˆä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬åˆ›å»ºçš„åè®®åªæ˜¯è¢«UIViewControlleréµå®ˆï¼Œé‚£æˆ‘ä»¬è¯¥æ€Žä¹ˆåšå‘¢ï¼Ÿã€å½“ç„¶ï¼ŒEatableåè®®åªèƒ½è¢«UIViewControlleréµå®ˆå¾ˆæ‰¯æ·¡ï¼Œè¿™é‡Œåªæ˜¯ä¸¾ä¾‹ï¼Œä¸è¦å¤ªåœ¨æ„å’¯~~ã€‘ åœ¨ extension åŽé¢åŠ ä¸Šçº¦æŸå…³é”®å­—ã€whereã€‘ï¼Œå¹¶æ³¨æ˜Žè¯¥åè®®åªèƒ½è¢«UIViewControllerè¿™ä¸ªç±»ï¼ˆåŒ…æ‹¬å­ç±»ï¼‰æ‰€éµå®ˆï¼Œè€Œä¸”æ­¤æ—¶æˆ‘ä»¬è¿˜å¯ä»¥æ‹¿åˆ°éµå®ˆè¯¥åè®®çš„æŽ§åˆ¶å™¨çš„view 123456789101112//import Foundationimport UIKitprotocol Eatable &#123; &#125;extension Eatable where Self : UIViewController &#123; func eat() &#123; view.backgroundColor = UIColor.red &#125;&#125; DemoæŽ¥ä¸‹æ¥ä»¥ä¸€ä¸ªå®žé™…åº”ç”¨æ¥å·©å›ºä¸‹å§ iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Swift</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS - Swift é«˜ä»¿å¾®ä¿¡]]></title>
    <url>%2F2017%2F09%2F12%2FiOS-Swift-%E9%AB%98%E4%BB%BF%E5%BE%AE%E4%BF%A1%2F</url>
    <content type="text"><![CDATA[ä»Ž2016å¹´12æœˆä»½å¼€å§‹åšåˆ°çŽ°åœ¨ï¼Œè™½è¯´è¿™ä¸ªé¡¹ç›®çœ‹èµ·æ¥ä¸å¤§ï¼Œä½†æ˜¯é”»ç‚¼äººçš„åœ°æ–¹è¿˜çœŸæ˜¯å¾ˆå¤šçš„ï¼Œå¾®ä¿¡é€šè®¯å½•è”ç³»äººçš„æŒ‰æ‹¼éŸ³æŽ’åºï¼Œè‡ªå®šä¹‰è¡¨æƒ…é”®ç›˜ä¸­é‡åˆ°çš„åˆ†é¡µæ»šåŠ¨ï¼Œå¾®ä¿¡èŠå¤©ç•Œé¢çš„å›¾ç‰‡æ˜¾ç¤ºã€è¯­éŸ³ä¿¡æ¯çš„åŠ¨ç”»ç­‰ã€‚æŒ‘æˆ˜ç€å„ç§å„æ ·çš„éœ€æ±‚ï¼Œæœ¬äººä¹Ÿå°†é‡åˆ°çš„é—®é¢˜çš„è§£å†³æ–¹æ¡ˆåšäº†è®°å½•å¹¶æ•´ç†äº†ä¸€ä¸‹ï¼Œå¸Œæœ›èƒ½ç»™iOSç¨‹åºå‘˜åŒèƒžä»¬å¸¦æ¥å¸®åŠ©ã€‚ç›®å‰åŸºæœ¬çš„èŠå¤©å·²å®Œæˆï¼Œå®žçŽ°äº†ä¸€éƒ¨åˆ†ä¸ªäººä¿¡æ¯çš„ä¿®æ”¹ï¼ŒåŠŸèƒ½æˆ‘ä¼šå°½å¿«å®Œå–„çš„ï¼ + LXFWeChatSwift 3.0 é«˜ä»¿å¾®ä¿¡ ä¸¤ä¸ªæµ‹è¯•è´¦å·ï¼š lxf lqr å¯†ç éƒ½æ˜¯123456 æºç åœ°å€ç äº‘http://git.oschina.net/LinXunFeng/LXFWeChat GitHubhttps://github.com/LinXunFeng/LXFWeChat åœ¨æ­¤æä¾›å­˜æ”¾äºŽç™¾åº¦äº‘çš„å®Œæ•´é¡¹ç›®ã€é«˜ä»¿å¾®ä¿¡ã€‘- ç™¾åº¦äº‘å¸Œæœ›å„ä½èƒ½åœ¨æˆ‘çš„é¡¹ç›®ä¸ŠçŒ®å‡ºä¸€ä¸ªå®è´µçš„Starè°¢è°¢ ä»Ž2016å¹´12æœˆä»½å¼€å§‹åšåˆ°çŽ°åœ¨ï¼Œè™½è¯´è¿™ä¸ªé¡¹ç›®çœ‹èµ·æ¥ä¸å¤§ï¼Œä½†æ˜¯é”»ç‚¼äººçš„åœ°æ–¹è¿˜çœŸæ˜¯å¾ˆå¤šçš„ï¼Œå¾®ä¿¡é€šè®¯å½•è”ç³»äººçš„æŒ‰æ‹¼éŸ³æŽ’åºï¼Œè‡ªå®šä¹‰è¡¨æƒ…é”®ç›˜ä¸­é‡åˆ°çš„åˆ†é¡µæ»šåŠ¨ï¼Œå¾®ä¿¡èŠå¤©ç•Œé¢çš„å›¾ç‰‡æ˜¾ç¤ºã€è¯­éŸ³ä¿¡æ¯çš„åŠ¨ç”»ç­‰ã€‚æŒ‘æˆ˜ç€å„ç§å„æ ·çš„éœ€æ±‚ï¼Œæœ¬äººä¹Ÿå°†é‡åˆ°çš„é—®é¢˜çš„è§£å†³æ–¹æ¡ˆåšäº†è®°å½•å¹¶æ•´ç†äº†ä¸€ä¸‹ï¼Œå¸Œæœ›èƒ½ç»™iOSç¨‹åºå‘˜åŒèƒžä»¬å¸¦æ¥å¸®åŠ©ã€‚ç›®å‰åŸºæœ¬çš„èŠå¤©å·²å®Œæˆï¼Œå®žçŽ°äº†ä¸€éƒ¨åˆ†ä¸ªäººä¿¡æ¯çš„ä¿®æ”¹ï¼ŒåŠŸèƒ½æˆ‘ä¼šå°½å¿«å®Œå–„çš„ï¼ æ¨¡ä»¿å¾®ä¿¡çš„å¯¼èˆªæ åœ¨navigationBaråº•éƒ¨æ·»åŠ ä¸€ä¸ªæ·»åŠ äº†æ¸å˜å±‚çš„view1234567891011121314151617let blurBackView = UIView()blurBackView.frame = CGRect(x: 0, y: -20, width: kScreenW, height: 64)let gradintLayer = CAGradientLayer()gradintLayer.frame = CGRect(x: 0, y: 0, width: kScreenW, height: 64)gradintLayer.colors = [ UIColor.hexInt(0x040012).withAlphaComponent(0.76).cgColor, UIColor.hexInt(0x040012).withAlphaComponent(0.28).cgColor]gradintLayer.startPoint = CGPoint(x: 0, y: 0)gradintLayer.endPoint = CGPoint(x: 0, y: 1.0)blurBackView.layer.addSublayer(gradintLayer)blurBackView.isUserInteractionEnabled = falseblurBackView.alpha = 0.5// è®¾ç½®å¯¼èˆªæ æ ·å¼navigationBar.barStyle = .blacknavigationBar.insertSubview(blurBackView, at: 0) è¡¨æƒ…é¢æ¿å’Œæ›´å¤šé¢æ¿é‡åˆ°çš„é—®é¢˜æ€»ç»“äº†ä¸€ä¸‹ï¼Œå¯ä»¥å‚è€ƒä¸‹ä»¥ä¸‹æ€»ç»“çš„æ–‡ç«  ã€ŠiOS - Swift UICollectionViewæ¨ªå‘åˆ†é¡µæ»šåŠ¨ï¼Œcellå·¦å³æŽ’ç‰ˆã€‹ ã€ŠiOS - Swift UICollectionViewæ¨ªå‘åˆ†é¡µçš„é—®é¢˜ã€‹ èŠå¤©ç•Œé¢ã€ŠiOS - Swift ä»¿å¾®ä¿¡èŠå¤©å›¾ç‰‡æ˜¾ç¤ºã€‹ ã€ŠiOS - Swift UITableViewçš„scrollToRowçš„â€å‘â€ã€‹ ã€ŠiOS - Swift UIButtonä¸­ImageViewçš„animationImagesåŠ¨ç”»æ‰§è¡Œå®Œæ¯•åŽï¼Œå›¾æ ‡å˜æš—ã€‹ é¦–é¡µã€ŠiOS - Swift ä»¿å¾®ä¿¡å°çº¢ç‚¹(æ— æ•°å­—)ã€‹ ç›®å‰å®Œæˆçš„åŠŸèƒ½å¾®ä¿¡ç•Œé¢ æ˜¾ç¤ºå³ä¸Šè§’çš„èœå• æ˜¾ç¤ºæœ€è¿‘è”ç³»äºº æœ€è¿‘è”ç³»äººä¿¡æ¯æœªè¯»æ•°çš„æ˜¾ç¤º é€šè®¯å½•ç•Œé¢ è”ç³»äººçš„æŽ’åº è”ç³»äººæ€»æ•°æ˜¾ç¤º å‘çŽ°ç•Œé¢ åŠ¨æ€å°çº¢ç‚¹çš„æ˜¾ç¤º è´­ç‰©é€‰é¡¹çš„é“¾æŽ¥è·³è½¬ æˆ‘ç•Œé¢ ä¸ªäººå¤´åƒçš„ä¸Šä¼ ä¸Žè®¾ç½®ï¼ŒåŠå¤´åƒçš„ä¿å­˜ æˆ‘çš„äºŒç»´ç ç•Œé¢çš„æ˜¾ç¤ºåŠäºŒç»´ç çš„ä¿å­˜ èŠå¤©ç•Œé¢ å°è§†é¢‘çš„å½•åˆ¶ä¸Žå‘é€ å°è§†é¢‘çš„æ’­æ”¾ èŠå¤©æ—¶é—´ å›¾ç‰‡çš„å‘é€ä¸Žæ˜¾ç¤º æœªå‘é€æˆåŠŸçš„é‡å‘åŠŸèƒ½ è¯­éŸ³çš„å½•åˆ¶ä¸Žå‘é€ è¯­éŸ³çš„æ’­æ”¾åŠ¨æ€æ•ˆæžœ å·²çŸ¥BUG å°è§†é¢‘å’Œå›¾ç‰‡å‘é€å‡ºåŽ»åŽä¸èƒ½ç«‹å³æ›´æ–°æ˜¾ç¤ºç¼©ç•¥å›¾ æ›´æ¢å¤´åƒæ¨¡æ‹Ÿå™¨æµ‹è¯•æ­£å¸¸ï¼ŒçœŸæœºæ— æ•ˆã€‚ã€‚ 2017-07-24 æ›´æ–°æŠ½ç©ºå‡ºæ¥æ·»åŠ äº†ä¸€ä¸ªç®€å•çš„ç›´æ’­åŠŸèƒ½ï¼ˆå¯¹æ–¹éœ€è¦å…ˆè¿›å…¥åˆ°å¯¹åº”çš„èŠå¤©ç•Œé¢ï¼‰ç›¸å…³åšæ–‡ï¼šiOS - ç»™é«˜ä»¿å¾®ä¿¡æ·»åŠ ç›´æ’­èŠå¤©åŠŸèƒ½éœ€è¦ç”¨åˆ°ç¼–è¯‘å¥½çš„Bç«™å¼€æºåº“ijkplayer ï¼Œç”±äºŽæ‰“åŒ…å¥½çš„æ–‡ä»¶å¤ªå¤§ï¼Œä¼ ä¸ä¸Šæ¥ï¼Œæ‰€ä»¥éœ€è¦å„ä½åŽ»è‡ªå·±ç¼–è¯‘é›†æˆè¿›åŽ»ã€‚ æ•ˆæžœå›¾åŠ¨æ€å›¾ é™æ€å›¾]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>Swift</tag>
        <tag>iOSé¡¹ç›®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS - ARCä¸ŽMRCçš„å•ä¾‹è®¾è®¡æ¨¡å¼]]></title>
    <url>%2F2017%2F09%2F12%2FiOS-ARC%E4%B8%8EMRC%E7%9A%84%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[å•ä¾‹è®¾è®¡æ¨¡å¼(Singleton) å°±æ˜¯ä¿è¯æŸä¸ªç±»åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ä»Žå§‹åˆ°ç»ˆåªæœ‰ä¸€ä¸ªçš„ä¸€ç§æ–¹æ¡ˆ + å•ä¾‹è®¾è®¡æ¨¡å¼(Singleton)å®šä¹‰å°±æ˜¯ä¿è¯æŸä¸ªç±»åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ä»Žå§‹åˆ°ç»ˆåªæœ‰ä¸€ä¸ªçš„ä¸€ç§æ–¹æ¡ˆ ä½œç”¨ èŠ‚çœå†…å­˜å¼€é”€ ä¿è¯æ•´ä¸ªç¨‹åºä¸­ä½¿ç”¨åŒä¸€ä»½èµ„æº å®žçŽ°é¦–å…ˆå°†æˆ‘ä»¬çš„çŽ¯å¢ƒè®¾ç½®ä¸ºéžARCçŽ¯å¢ƒï¼Œå³MRCï¼Œå¦‚å›¾ åœ¨MRCæ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬å¾—è‡ªå·±æ‰‹åŠ¨é‡Šæ”¾èµ„æºï¼Œæ‰€ä»¥å¾—é‡å†™ä¸€äº›ä¸Žèµ„æºåˆ›å»ºä¸Žé‡Šæ”¾ç›¸å…³çš„æ–¹æ³•ï¼Œä»¥ä¿è¯å•ä¾‹å¯¹è±¡çš„å”¯ä¸€ã€‚ æ–°å»ºä¸€ä¸ªç»§æ‰¿äºŽNSObjectçš„ç±» LXFFileToolï¼Œæˆ‘ç›´æŽ¥ä¸Šä»£ç ï¼Œå¹¶å†™ä¸Šæ³¨é‡ŠLXFFileTool.h123@interface LXFFileTool : NSObject+ (instancetype)sharedFileTool;@end LXFFileTool.m12345678910111213141516171819202122232425262728293031323334353637383940414243#import "LXFFileTool.h"@implementation LXFFileToolstatic LXFFileTool *_fileTools = nil;/** * allocæ–¹æ³•å†…éƒ¨ä¼šè°ƒç”¨allocWithZone: * @param zone ç³»ç»Ÿåˆ†é…ç»™appçš„å†…å­˜ */+ (instancetype)allocWithZone:(struct _NSZone *)zone &#123; if (_fileTools == nil) &#123; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; // å®‰å…¨(è¿™ä¸ªä»£ç åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡) _fileTools = [super allocWithZone:zone]; &#125;); &#125; return _fileTools;&#125;- (oneway void)release &#123; // åœ¨allocWithZoneä¸­ä½¿ç”¨äº†GCDä»¤åˆ›å»ºå¯¹è±¡çš„ä»£ç åªæ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æžœ_fileToolsè¢«é‡Šæ”¾åˆ™æ— æ³•å†åˆ›å»º // é‡å†™releaseæ–¹æ³•ï¼Œé˜²æ­¢_fileToolsè¢«é‡Šæ”¾&#125;// é‡å†™retainæ–¹æ³•- (instancetype)retain &#123; return self;&#125;// é‡å†™retainCounté”å®šå¼•ç”¨è®¡æ•°- (NSUInteger)retainCount &#123; return 1;&#125;// é‡å†™initæ–¹æ³•ï¼Œé˜²æ­¢å•ä¾‹æ‰€æ‹¥æœ‰çš„å±žæ€§å€¼è¢«é‡ç½®// è®©åˆå§‹åŒ–çš„æ–¹æ³•åªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼Œè‡ªç„¶å±žæ€§å€¼å°±æ²¡æœ‰æœºä¼šè¢«é‡ç½®- (instancetype)init &#123; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; _fileTools = [super init]; // initä¼šå…ˆè°ƒç”¨allocæ–¹æ³• &#125;); return _fileTools;&#125;// ä»¿é€ ç³»ç»Ÿçš„å•ä¾‹åˆ›å»ºæ–¹å¼ï¼Œæä¾›ç±»æ–¹æ³•+ (instancetype)sharedFileTool &#123; // ç”±äºŽæˆ‘ä»¬å·²ç»é‡å†™äº†initæ–¹æ³•ä¿è¯äº†å•ä¾‹å¯¹è±¡çš„å”¯ä¸€äº†ï¼Œæ‰€ä»¥è¿™é‡Œç›´æŽ¥è°ƒç”¨initæ–¹æ³•å³å¯ã€‚ return [[self alloc] init];&#125;@end MRCä¸‹å°±æ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬çš„ç›®çš„å°±æ˜¯åªèƒ½åˆ›å»ºå’Œåˆå§‹åŒ–ä¸€æ¬¡å¯¹è±¡ï¼Œä¸ç»™æœºä¼šé‡Šæ”¾ï¼Œä¹Ÿä¸ç»™æœºä¼šé‡æ–°åˆå§‹åŒ–ï¼Œä»Žè€Œä¿è¯äº†è¯¥å¯¹è±¡çš„å”¯ä¸€ã€‚ é‚£çŽ°åœ¨æ¥çœ‹çœ‹ARCä¸‹æ˜¯å¦‚ä½•å®žçŽ°å•ä¾‹çš„å§ã€‚å…¶å®žARCä¸‹ä¸ŽMRCçš„åŒºåˆ«å°±æ˜¯ARCä¸‹æˆ‘ä»¬ä¸ç”¨è‡ªå·±å†æ‰‹åŠ¨åŽ»é‡Šæ”¾èµ„æºäº†ï¼Œä»Žè€Œä½¿ä»£ç ä¸Šå¤§åŒå°å¼‚ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚123456789101112131415161718192021222324#import "LXFFileTool.h"@implementation LXFFileToolstatic LXFFileTool *_fileTools = nil;+ (instancetype)allocWithZone:(struct _NSZone *)zone &#123; if (_fileTools == nil) &#123; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; _fileTools = [super allocWithZone:zone]; &#125;); &#125; return _fileTools;&#125;- (instancetype)init &#123; static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; _fileTools = [super init]; &#125;); return _fileTools;&#125;+ (instancetype)sharedFileTool &#123; return [[self alloc] init];&#125; æ‰¹é‡åˆ›å»ºå•ä¾‹ çŽ°åœ¨æˆ‘ä»¬å·²ç»çŸ¥é“äº†ARCä¸ŽMRCä¸‹åˆ†åˆ«æ˜¯å¦‚ä½•åˆ›å»ºå•ä¾‹çš„äº†ï¼Œä½†æ˜¯å¦‚æžœæˆ‘ä»¬ä¸€ä¸ªé¡¹ç›®é‡Œéœ€è¦å¤šä¸ªå•ä¾‹ï¼Œé‚£æˆ‘ä»¬åªèƒ½æŠŠä»£ç å¤åˆ¶ç²˜è´´å†æ”¹æ”¹å°±å®Œäº‹å—ï¼Ÿè¿™æœªå…ä¹Ÿå¤ªéº»çƒ¦äº†å§ã€‚é‚£æˆ‘ä»¬èƒ½ä¸èƒ½åšåˆ°å¿«é€Ÿä¸”æ–¹ä¾¿çš„åˆ›å»ºå•ä¾‹å¯¹è±¡å‘¢ï¼Ÿå¯ä»¥çš„ï¼Œåˆ©ç”¨å® é¦–å…ˆå…ˆè¯´ä¸‹ä¸€äº›å…³äºŽå®çš„çŸ¥è¯†å§ ä½¿ç”¨ #define å…³é”®å­—æ¥å®šä¹‰å® å®å®šä¹‰åªèƒ½æ˜¯å•è¡Œçš„ï¼Œä¸èƒ½æ¢è¡Œ é‚£çŽ°åœ¨æ¥è®¨è®ºä¸‹ä¸€äº›ç–‘æƒ‘å§ï¼Œä½ è¯´å®åªèƒ½å•è¡Œï¼Œå¯æ˜¯åˆ›å»ºå•ä¾‹çš„ä»£ç å¯æ˜¯æœ‰å¾ˆå¤šè¡Œå‘€ï¼è¿˜æœ‰æˆ‘ä»¬å¦‚ä½•åšåˆ°è‡ªå®šä¹‰ç±»æ–¹æ³•å(å°±æ˜¯ sharedXXX )ï¼Ÿå¥½ï¼Œæˆ‘ä»¬æ¥ä»‹ç»ä¸‹å®ä¸‹çš„ä¸¤ä¸ªç‰¹æ®Šç¬¦å· å®çš„ç‰¹æ®Šç¬¦å·  ä½œç”¨ \ ç”¨æ¥è½¬è¯‘æ¢è¡Œç¬¦ï¼Œå³å±è”½æ¢è¡Œç¬¦ ## å°†ä¸¤ä¸ªç›¸é‚»çš„æ ‡è®°(token)è¿žæŽ¥ä¸ºä¸€ä¸ªå•ç‹¬çš„æ ‡è®° æƒ³äº†è§£å…¶å®ƒå…³äºŽå®çš„é¢„å¤„ç†å‘½ä»¤å¯ä»¥è‡ªè¡Œç™¾åº¦å‚è€ƒâ€Cè¯­è¨€çš„é¢„å¤„ç†å‘½ä»¤â€ ç®€å•æ¥è¯´ï¼Œ\ç”¨äºŽå–æ¶ˆæ¢è¡Œï¼Œ##ç”¨æ¥è¿žæŽ¥ï¼Œè€Œæˆ‘ä»¬å°±ç”¨##æ¥å®žçŽ°è‡ªå®šä¹‰ç±»æ–¹æ³•å åˆ›å»ºä¸€ä¸ªå¤´æ–‡ä»¶Singleton.hç”¨æ¥å­˜æ”¾å®å®šä¹‰å…ˆæ¥çœ‹çœ‹å®šä¹‰.hä¸­ sharedXXX æ˜¯å¦‚ä½•é€šè¿‡å®æ¥å®šä¹‰çš„12// .hæ–‡ä»¶çš„å®žçŽ°#define SingletonH(methodName) + (instancetype)shared##methodName; çŽ°åœ¨å›žåˆ°LXFFileTool.hä¸­ï¼Œç›´æŽ¥ä¸€è¡Œå®šä¹‰sharedFileToolè¿™ä¸ªç±»æ–¹æ³•1234#import "Singleton.h"@interface LXFFileTool : NSObjectSingletonH(FileTool)@end æˆ‘ä»¬åªéœ€è¦å°†æ–¹æ³•åFileToolä¼ å…¥SingletonH()ä¸­å°±å¯ä»¥æ‹¼æŽ¥ä¸ºsharedFileTool é‚£çŽ°åœ¨å†æ¥çœ‹çœ‹å®šä¹‰.mä¸­åˆ›å»ºå•ä¾‹çš„æ–¹å¼ï¼Œä»¥ARCä¸ºä¾‹1234567891011121314151617181920212223#define SingletonM(methodName) \static id _instance = nil; \+ (instancetype)allocWithZone:(struct _NSZone *)zAone &#123; \ if (_instance == nil) &#123; \ static dispatch_once_t onceToken; \ dispatch_once(&amp;onceToken, ^&#123; \ _instance = [super allocWithZone:zone]; \ &#125;); \ &#125; \ return _instance; \&#125; \\- (instancetype)init &#123; \ static dispatch_once_t onceToken; \ dispatch_once(&amp;onceToken, ^&#123; \ _instance = [super init]; \ &#125;); \ return _instance; \&#125; \\+ (instancetype)shared##methodName &#123; \ return [[self alloc] init]; \&#125; åœ¨æ¯ä¸€ä¸ªè¡ŒåŽé¢åŠ ä¸Š(åæ–œæ )å–æ¶ˆæ¢è¡Œï¼Œä½¿ç”¨##æ¥æ‹¼æŽ¥ä¼ å…¥çš„æ–¹æ³•åï¼Œä½†è¿˜æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼šæœ€åŽä¸€è¡Œä¸èƒ½åŠ åæ–œæ  å›žåˆ°LXFFileTool.mä¸­ï¼Œä¸€è¡Œå®žçŽ°åˆ›å»ºå•ä¾‹1234#import "LXFFileTool.h"@implementation LXFFileToolSingletonM(FileTool)@end å¥½ï¼ŒçŽ°åœ¨è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¦‚æžœæˆ‘çš„é¡¹ç›®ä¸­æœ‰ä¸ªåˆ«æ–‡ä»¶æ˜¯éœ€è¦MRCçŽ¯å¢ƒçš„ï¼Œé‚£æˆ‘è¯¥æ€Žä¹ˆåŠžæ‰èƒ½è®©åˆ›å»ºå•ä¾‹ä¹Ÿæ˜¯å¦‚æ­¤ç®€å•å‘¢ï¼Ÿå¾ˆç®€å•ï¼ŒåŠ ä¸ªåˆ¤æ–­å°±å¥½äº†ï¼Œå¤§è‡´åˆ¤æ–­å¦‚ä¸‹ï¼Œè¯¦æƒ…çœ‹æ–‡ç« æœ€åŽé™„ä¸Šçš„Demo12345#if __has_feature(objc_arc) // ARC// å†™ä¸ŠARCä¸‹çš„å®šä¹‰ä»£ç #else // éžARC// å†™ä¸ŠMRCä¸‹çš„å®šä¹‰ä»£ç #endif å¥½äº†ï¼ŒçŽ°åœ¨ç”¨èµ·æ¥æ˜¯ä¸æ˜¯æ–¹ä¾¿å¤šäº†ï¼Ÿæˆ‘ä»¬åªè¦åˆ›å»ºä¸€ä¸ªç±»ï¼Œç„¶åŽåœ¨.hæ–‡ä»¶ä¸­å†™SingletonH(XXX)ï¼Œå†åœ¨.mæ–‡ä»¶ä¸­å†™SingletonM(XXX)å°±å¯ä»¥å®žçŽ°å•ä¾‹äº†~ æŒ‡å®šçŽ¯å¢ƒé¡ºä¾¿æä¸‹å¦‚ä½•åœ¨MRCä¸‹æŒ‡å®šæŸä¸ªç±»æ–‡ä»¶ä½¿ç”¨çš„çŽ¯å¢ƒä¸ºARCå¦‚å›¾ï¼Œå¯ä»¥åœ¨ Build Phases -&gt; Compile Sources ä¸­åŒå‡»æŸä¸ªéœ€è¦ARCçŽ¯å¢ƒçš„ç±»æ–‡ä»¶ï¼Œç„¶åŽå†™ä¸Š 1-fobjc-arc å¦‚æžœæ˜¯æŒ‡å®šMRCï¼Œåˆ™å†™ä¸Š1-fno-objc-arc Demoæœ€åŽï¼Œé™„ä¸ŠDemo: LXFSingleton]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Objective-C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS - Swift UIButtonä¸­ImageViewçš„animationImagesåŠ¨ç”»æ‰§è¡Œå®Œæ¯•åŽï¼Œå›¾æ ‡å˜æš—]]></title>
    <url>%2F2017%2F09%2F12%2FiOS-Swift-UIButton%E4%B8%ADImageView%E7%9A%84animationImages%E5%8A%A8%E7%94%BB%E6%89%A7%E8%A1%8C%E5%AE%8C%E6%AF%95%E5%90%8E%EF%BC%8C%E5%9B%BE%E6%A0%87%E5%8F%98%E6%9A%97%2F</url>
    <content type="text"><![CDATA[æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£çš„è¯´æ˜Ž å½“è¯¥å±žæ€§è®¾ç½®ä¸ºtrueæ—¶ï¼ŒæŒ‰é’®åœ¨é«˜äº®çŠ¶æ€ä¸‹ï¼Œå›¾ç‰‡ä¼šç»˜åˆ¶æˆé«˜äº®ï¼ˆå‰ææ˜¯æ²¡æœ‰æ‰‹åŠ¨è®¾ç½®é«˜äº®å›¾ç‰‡ï¼‰ã€‚å¹¶ä¸”è¯¥å€¼çš„é»˜è®¤å€¼ä¸ºtrueæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å±žæ€§adjustsImageWhenHighlightedè®¾ç½®ä¸ºfalseï¼Œä¸è®©ç³»ç»Ÿè‡ªåŠ¨å¸®æˆ‘ä»¬è®¾ç½®é«˜äº®çŠ¶æ€ä¸‹æ˜¾ç¤ºçš„å›¾ç‰‡å³å¯ã€‚ + æƒ…å†µè´´å‡ºé‡è¦ä»£ç  123456// è®¾ç½®æŒ‰é’®å›¾ç‰‡åŠ¨ç”»æ•°ç»„voiceButton.imageView?.animationImages = [ #imageLiteral(resourceName: "message_voice_sender_playing_1"), #imageLiteral(resourceName: "message_voice_sender_playing_2"), #imageLiteral(resourceName: "message_voice_sender_playing_3")] 12// å¼€å§‹åŠ¨ç”»voiceButton.imageView?.startAnimating() 12// åœæ­¢åŠ¨ç”»voiceButton.imageView?.stopAnimating() åŽŸå› è¿™ä¸ªæŒ‰é’®åœ¨ç»“æŸåŠ¨ç”»ä¹‹åŽä¹‹æ‰€ä»¥ä¼šå˜æš—ï¼Œæ˜¯å› ä¸ºå®ƒåœ¨åŠ¨ç”»ç»“æŸä¹‹åŽè‡ªåŠ¨æ˜¾ç¤ºä¸ºé«˜äº®å›¾ç‰‡ï¼Œä¸ä¿¡ï¼Ÿé‚£åªå¥½ä¸Šè¯æ®äº†~12// è®¾ç½®è¯­éŸ³æŒ‰é’®çš„é«˜äº®å›¾ç‰‡voiceButton.setImage(#imageLiteral(resourceName: "message_voice_sender_normal"), for: .highlighted) é‚£çŸ¥é“åŽŸå› ä¹‹åŽå°±å¾ˆå¥½è§£å†³äº† è§£å†³æ–¹æ¡ˆæ–¹æ¡ˆä¸€ï¼šè®¾ç½®æŒ‰é’®çš„é«˜äº®å›¾ç‰‡å°†æŒ‰é’®çš„é«˜äº®å›¾ç‰‡ä¸Žæ™®é€šçŠ¶æ€ä¸‹çš„ä¸€è‡´å³å¯ã€‚è¿™é‡Œå°±å†èµ˜è¿°äº† æ–¹æ¡ˆäºŒï¼šadjustsImageWhenHighlighted = falseåœ¨UIButtonä¸­æœ‰è¿™ä¹ˆä¸€ä¸ªå±žæ€§1adjustsImageWhenHighlighted æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£çš„è¯´æ˜Žå½“è¯¥å±žæ€§è®¾ç½®ä¸ºtrueæ—¶ï¼ŒæŒ‰é’®åœ¨é«˜äº®çŠ¶æ€ä¸‹ï¼Œå›¾ç‰‡ä¼šç»˜åˆ¶æˆé«˜äº®ï¼ˆå‰ææ˜¯æ²¡æœ‰æ‰‹åŠ¨è®¾ç½®é«˜äº®å›¾ç‰‡ï¼‰ã€‚å¹¶ä¸”è¯¥å€¼çš„é»˜è®¤å€¼ä¸ºtrueæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å±žæ€§adjustsImageWhenHighlightedè®¾ç½®ä¸ºfalseï¼Œä¸è®©ç³»ç»Ÿè‡ªåŠ¨å¸®æˆ‘ä»¬è®¾ç½®é«˜äº®çŠ¶æ€ä¸‹æ˜¾ç¤ºçš„å›¾ç‰‡å³å¯ã€‚ æ•ˆæžœ é™„ä¸Šç›¸å…³é¡¹ç›®ï¼šSwift 3.0 é«˜ä»¿å¾®ä¿¡]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Swift</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Swift 3.0 é«˜ä»¿å–œé©¬æ‹‰é›…FM]]></title>
    <url>%2F2017%2F09%2F12%2FSwift-3-0-%E9%AB%98%E4%BB%BF%E5%96%9C%E9%A9%AC%E6%8B%89%E9%9B%85FM%2F</url>
    <content type="text"><![CDATA[åŸºäºŽSwift 3.0 ç¼–å†™è€Œæˆ,è¿è¡ŒçŽ¯å¢ƒè¦æ±‚: Xcode 8.0 + é«˜ä»¿å–œé©¬æ‹‰é›…FMgitHub: https://github.com/LinXunFeng/LXFFM è¯´æ˜ŽåŸºäºŽSwift 3.0 ç¼–å†™è€Œæˆ,è¿è¡ŒçŽ¯å¢ƒè¦æ±‚: Xcode 8.0 LXFFMåŽŸOCç‰ˆ: https://github.com/Eastwu5788/XMLYFMä»ŽåŽŸç‰ˆä½œè€…çš„æºä»£ç ä¸Šå­¦åˆ°äº†å¾ˆå¤š,ååˆ†æ„Ÿè°¢.ç”±äºŽåªæ˜¯æœ¬äººOCè½¬Swiftçš„è¯•ç»ƒé¡¹ç›®,æ‰€ä»¥æœ‰äº›å†…å®¹å¹¶æ²¡æœ‰å®žçŽ°,å“ˆå“ˆ æ•ˆæžœå›¾]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Swift</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS - Swift UITableViewçš„scrollToRowçš„å‘]]></title>
    <url>%2F2017%2F09%2F12%2FiOS-Swift-UITableView%E7%9A%84scrollToRow%E7%9A%84%E5%9D%91%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©é„™äººä½¿ç”¨SnapKitæ¥å¸ƒå±€cellï¼Œç„¶åŽç”¨scrollToRowæ¥æ»šåˆ°åº•éƒ¨å°±é‡åˆ°äº†ä¸€ä¸ªå¾ˆå¥‡è‘©çš„çŽ°è±¡ã€‚æˆ‘è®¾ç½®äº†åœ¨é”®ç›˜å¼¹å‡ºåŽèŠå¤©æ¶ˆæ¯åˆ—è¡¨ä¼šè‡ªåŠ¨æ»šåˆ°åº•éƒ¨ã€‚1.éšä¾¿è¾“å…¥ä¸€æ¡æ¶ˆæ¯ï¼Œç‚¹å‘é€åŽï¼Œåœ¨èŠå¤©æ¶ˆæ¯åˆ—è¡¨ä¸­å¹¶æ²¡æœ‰æ»šåˆ°æœ€æ–°æ¶ˆæ¯é‚£ä¸€è¡Œã€‚2.é€€å‡ºé”®ç›˜ä¸åšä»»ä½•æ“ä½œå†æ‰“å¼€é”®ç›˜ä¹Ÿæ˜¯æ»šåˆ°åˆšæ‰é‚£é‡Œ(å³æœ€æ–°æ¶ˆæ¯çš„ä¸Šä¸€æ¡æ‰€åœ¨ä½ç½®)3.åªæœ‰åœ¨é€€å‡ºé”®ç›˜åŽæŠŠèŠå¤©æ¶ˆæ¯åˆ—è¡¨çš„æ¶ˆæ¯å‘ä¸Šæ‹‰ä¸€ç‚¹è·ç¦»éœ²å‡ºæœ€æ–°æ¶ˆæ¯æ‰€åœ¨çš„cellä¹‹åŽï¼Œå†ç‚¹å‡»æ‰æœ‰ç”¨ + ç®€ä»‹åœ¨tableViewä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šç”¨åˆ°scrollToRowè¿™ä¸ªæ¥æŽ§åˆ¶tableViewæ»šåˆ°æŒ‡å®šçš„æŸä¸€è¡Œã€‚ä¸€èˆ¬å†™æ³•å¦‚ä¸‹æ‰€ç¤º123456// MARK: æ»šåˆ°åº•éƒ¨func scrollToBottom(animated: Bool = false) &#123; if dataArr.count &gt; 0 &#123; tableView.scrollToRow(at: IndexPath(row: dataArr.count - 1, section: 0), at: .bottom, animated: animated) &#125;&#125; æƒ…å†µä»Šå¤©é„™äººä½¿ç”¨SnapKitæ¥å¸ƒå±€cellï¼Œç„¶åŽç”¨scrollToRowæ¥æ»šåˆ°åº•éƒ¨å°±é‡åˆ°äº†ä¸€ä¸ªå¾ˆå¥‡è‘©çš„çŽ°è±¡ã€‚æˆ‘è®¾ç½®äº†åœ¨é”®ç›˜å¼¹å‡ºåŽèŠå¤©æ¶ˆæ¯åˆ—è¡¨ä¼šè‡ªåŠ¨æ»šåˆ°åº•éƒ¨ã€‚1.éšä¾¿è¾“å…¥ä¸€æ¡æ¶ˆæ¯ï¼Œç‚¹å‘é€åŽï¼Œåœ¨èŠå¤©æ¶ˆæ¯åˆ—è¡¨ä¸­å¹¶æ²¡æœ‰æ»šåˆ°æœ€æ–°æ¶ˆæ¯é‚£ä¸€è¡Œã€‚2.é€€å‡ºé”®ç›˜ä¸åšä»»ä½•æ“ä½œå†æ‰“å¼€é”®ç›˜ä¹Ÿæ˜¯æ»šåˆ°åˆšæ‰é‚£é‡Œ(å³æœ€æ–°æ¶ˆæ¯çš„ä¸Šä¸€æ¡æ‰€åœ¨ä½ç½®)3.åªæœ‰åœ¨é€€å‡ºé”®ç›˜åŽæŠŠèŠå¤©æ¶ˆæ¯åˆ—è¡¨çš„æ¶ˆæ¯å‘ä¸Šæ‹‰ä¸€ç‚¹è·ç¦»éœ²å‡ºæœ€æ–°æ¶ˆæ¯æ‰€åœ¨çš„cellä¹‹åŽï¼Œå†ç‚¹å‡»æ‰æœ‰ç”¨ åˆ†æžåœ¨æ— å¥ˆä¹‹ä¸‹ï¼Œç»è¿‡äº†ä¸€æ­¥æ­¥çš„æŽ¢ç´¢ï¼Œç»ˆäºŽå‘çŽ°äº†é—®é¢˜çš„æ‰€åœ¨é¦–å…ˆæˆ‘ä»¬è¦äº†è§£ä¸€ä¸‹scrollToRowæ‰§è¡ŒåŽä¼šè°ƒç”¨å“ªäº›å‡½æ•°åŠé¡ºåºä¼šè°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•1func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell 1func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -&gt; CGFloat æ­¥éª¤ä¸€æˆ‘åœ¨ heightForRow ä¸­å†™äº†å…·ä½“çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æŠŠé«˜åº¦å†™æ­»ï¼Œä¸å†æ˜¯åŠ¨æ€èŽ·å–ã€‚æŽ¥ç€æ‰§è¡Œç¨‹åºå¾—åˆ°å¦‚ä¸‹ç»“æžœæ¯”å¦‚æˆ‘åŽŸæœ¬æœ‰10æ¡æ•°æ®ï¼ŒçŽ°åœ¨åŠ å…¥äº†ä¸€æ¡åŽæ‰§è¡Œäº†scrollToRowï¼Œå®ƒä¼š1.å…ˆè°ƒç”¨ heightForRow 11æ¬¡ï¼Œå³åŒ…æ‹¬æœ€æ–°åŠ å…¥çš„é‚£ä¸€æ¡2.ç„¶åŽå†è°ƒç”¨ cellForRow3.æœ€åŽåœ¨è°ƒä¸€æ¬¡ heightForRowåŽé¢çš„2å’Œ3æ˜¯é’ˆå¯¹æœ€æ–°æ¶ˆæ¯çš„ æ­¥éª¤äºŒæˆ‘åœ¨ heightForRow ä¸­ä¸å†å†™æ­»é«˜åº¦ï¼Œè€Œæ˜¯ä»Žæ¨¡åž‹æ•°æ®ä¸­åŠ¨æ€èŽ·å–é«˜åº¦(é«˜åº¦æ˜¯åœ¨cellå¸ƒå±€åŽèŽ·å–çš„ï¼Œå†èµ‹å€¼åˆ°æ¨¡åž‹æ•°æ®ä¸­çš„cellHeightå˜é‡)1æ‰§è¡Œç¨‹åºå¾—åˆ°è¿™ä¸ªç»“æžœï¼šè°ƒç”¨ heightForRow 11æ¬¡ï¼Œç„¶åŽå°±æ²¡äº† å¥½å§ï¼Œé—®é¢˜å°±å‡ºçŽ°åœ¨å¯¹heightForRowçš„ç¬¬11æ¬¡è°ƒç”¨ï¼Œå‰10æ¬¡éƒ½æœ‰è¿”å›žå…·ä½“çš„é«˜åº¦ï¼Œè€Œæœ€åŽä¸€æ¬¡æ˜¯0~ã€‚ ç»“è®ºçŽ°åœ¨æ¸…æ¥šäº†ï¼Œè¦æƒ³åœ¨è°ƒç”¨ scrollToRow åˆ°æŒ‡å®šçš„é‚£ä¸€è¡Œï¼Œå‰ææ¡ä»¶æ˜¯é‚£ä¸€è¡Œçš„é«˜åº¦ä¸èƒ½ä¸º0ã€‚æ‰€ä»¥åœ¨ä¸Šé¢çš„æƒ…å†µä¸­ï¼Œå‘é€å®Œæ¶ˆæ¯åŽï¼Œæœ€æ–°æ¶ˆæ¯çš„cellçš„ç¡®æ˜¯æ’å…¥åˆ°äº†tableViewï¼Œä¹Ÿæœ‰æ˜¾ç¤ºå‡ºæ¥(åŽé¢æˆ‘è‡ªå·±æµ‹çš„)ï¼Œä½†å°±æ˜¯æ— æ³•æ»šåˆ°æœ€æ–°æ¶ˆæ¯é‚£ä¸€è¡Œï¼Œå°±æ˜¯å› ä¸º heightForRow è¿”å›žçš„é«˜åº¦ä¸º0åœ¨ä¸Šé¢çš„æƒ…å†µä¸­ï¼Œå‘ä¸Šæ‹‰ä¸€ç‚¹è·ç¦»éœ²å‡ºcellåŽscrollToRowæ‰æœ‰æ•ˆå°±æ˜¯å› ä¸ºæ­¤æ—¶heightForRowè¿”å›žçš„é«˜åº¦ä¸å†ä¸º0 è§£å†³æ–¹æ¡ˆæŒ‰æœ¬äººè‡ªèº«çš„æƒ…å†µæ¥è¯´ï¼Œæœ‰ä¸¤ç§è§£å†³æ–¹æ³• ç¬¬ä¸€ç§åœ¨ä¼ å…¥çš„æ¨¡åž‹æ•°æ®ä¸­ç»™äºˆæ˜Žç¡®è®¡ç®—å‡ºæ¥çš„æ•°å€¼å°±å¥½ã€‚ ç¬¬äºŒç§æˆ‘ä½¿ç”¨SnapKitæ¥è‡ªåŠ¨å¸ƒå±€cellçš„ä½ç½®ç„¶åŽå†æ¥èŽ·å–é«˜åº¦ï¼Œè¿™åšæ³•ä¸»è¦å°±æ˜¯ä¸ºäº†é¿å…è¿ç®—ã€‚æ‰€ä»¥æˆ‘ä¸é€‰ç”¨ç¬¬ä¸€ç§è§£å†³æ–¹æ³•å¥½äº†ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š1234// dataArræ˜¯ç”¨æ¥å­˜æ”¾æ¨¡åž‹çš„æ•°ç»„let indexPath = IndexPath(row: dataArr.count - 1, section: 0)// è°ƒç”¨tableViewçš„æ•°æ®æºåŠžæ³•_ = self.tableView(tableView, cellForRowAt: indexPath) åœ¨æ’å…¥æœ€æ–°æ¶ˆæ¯åŽï¼Œè°ƒç”¨tableViewçš„æ•°æ®æºæ–¹æ³•æ¥è®©å®ƒå…ˆå¯¹cellè¿›è¡Œå¸ƒå±€ï¼Œè¿™æ ·å°±èŽ·å–åˆ°äº†cellçš„é«˜åº¦ï¼Œç„¶åŽå†æ‰§è¡Œ scrollToRow å°±å¥½äº†ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Swift</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS - Swift ä»¿å¾®ä¿¡èŠå¤©å›¾ç‰‡æ˜¾ç¤º]]></title>
    <url>%2F2017%2F09%2F12%2FiOS-Swift-%E4%BB%BF%E5%BE%AE%E4%BF%A1%E8%81%8A%E5%A4%A9%E5%9B%BE%E7%89%87%E6%98%BE%E7%A4%BA%2F</url>
    <content type="text"><![CDATA[å…¶å®žåŽŸç†æ¯”è¾ƒç®€å•ï¼Œå‡†å¤‡ä¸€å¼ å›¾ç‰‡MaskImgaeï¼Œå…ˆå¯¹å…¶è¿›è¡Œæ‹‰ä¼¸ï¼Œç„¶åŽæŒ‰ç…§å…¶è½®å»“å¯¹å›¾ç‰‡è¿›è¡Œè£å‰ªå°±è¡Œäº† + æ•ˆæžœå›¾å¦‚å›¾æ‰€ç¤ºï¼Œå›¾ç‰‡å·¦ä¾§æœ‰ä¸ªå°ç®­å¤´ åŽŸç†å…¶å®žåŽŸç†æ¯”è¾ƒç®€å•ï¼Œå‡†å¤‡ä¸€å¼ å›¾ç‰‡MaskImgaeï¼Œå…ˆå¯¹å…¶è¿›è¡Œæ‹‰ä¼¸ï¼Œç„¶åŽæŒ‰ç…§å…¶è½®å»“å¯¹å›¾ç‰‡è¿›è¡Œè£å‰ªå°±è¡Œäº† æ­¥éª¤è¿™é‡Œæ‘˜é‡ç‚¹è¯´ï¼Œå¸ƒå±€ä»€ä¹ˆçš„æŒ‰è‡ªå·±æ„æ„¿åŽ»å¼„å§ã€‚æˆ‘å›ºå®šäº†å›¾ç‰‡çš„æ˜¾ç¤ºå¤§å°ä¸º 102 * 152 1ã€å¯¹MaskImgaeè¿›è¡Œæ‹‰ä¼¸123456// è®¾ç½®æ‹‰ä¼¸èŒƒå›´let stretchInsets = UIEdgeInsetsMake(30, 28, 23, 28)// å¾…æ‹‰ä¼¸çš„å›¾ç‰‡let stretchImage = UIImage(named: "SenderImageNodeMask")// è¿›è¡Œæ‹‰ä¼¸let bubbleMaskImage = stretchImage.resizableImage(withCapInsets: stretchInsets, resizingMode: .stretch) æ‹‰ä¼¸çš„æ•ˆæžœå¦‚å›¾ 2ã€å¯¹imageViewè®¾ç½®è£å‰ªåŒºåŸŸè¿™é‡Œæˆ‘çš„ imageView å« chatImgViewä¸Šé¢çš„æ‹‰ä¼¸æ•ˆæžœå›¾æ˜¯ä¸´æ—¶æŠŠæ‹‰ä¼¸å¥½çš„å›¾ç‰‡èµ‹å€¼ç»™äº†chatImgViewï¼Œåªæ˜¯ä¸ºäº†ç»™å¤§å®¶çœ‹åˆ°æ•ˆæžœè€Œå·²ï¼Œå„ä½çœ‹å®˜å¦‚æžœæœ‰èµ‹å€¼è¯·è®°å¾—æ”¹å›žæ¥~~ å¥½ï¼Œä¸‹é¢è¿›è¡Œè£å‰ª12345678910111213141516// æ–°å»ºä¸€ä¸ªå›¾å±‚let layer = CALayer()// è®¾ç½®å›¾å±‚æ˜¾ç¤ºçš„å†…å®¹ä¸ºæ‹‰ä¼¸è¿‡çš„MaskImgaelayer.contents = bubbleMaskImage.cgImage// è®¾ç½®æ‹‰ä¼¸èŒƒå›´(æ³¨æ„ï¼šè¿™é‡ŒcontentsCenterçš„CGRectæ˜¯æ¯”ä¾‹ï¼ˆä¸æ˜¯ç»å¯¹åæ ‡ï¼‰)layer.contentsCenter = self.CGRectCenterRectForResizableImage(bubbleMaskImage)// è®¾ç½®å›¾å±‚å¤§å°ä¸ŽchatImgViewç›¸åŒlayer.frame = CGRect(x: 0, y: 0, width: 102, height: 152)// è®¾ç½®æ¯”ä¾‹layer.contentsScale = UIScreen.main.scale// è®¾ç½®ä¸é€æ˜Žåº¦layer.opacity = 1// è®¾ç½®è£å‰ªèŒƒå›´self.chatImgView.layer.mask = layer// è®¾ç½®è£å‰ªæŽ‰è¶…å‡ºçš„åŒºåŸŸself.chatImgView.layer.masksToBounds = true 12345678910func CGRectCenterRectForResizableImage(_ image: UIImage) -&gt; CGRect &#123; // LXFLog("\(image.capInsets)") // è¿™é‡Œçš„image.capInsetså°±æ˜¯UIEdgeInsetsMake(30, 28, 23, 28) return CGRect( x: image.capInsets.left / image.size.width, y: image.capInsets.top / image.size.height, width: (image.size.width - image.capInsets.right - image.capInsets.left) / image.size.width, height: (image.size.height - image.capInsets.bottom - image.capInsets.top) / image.size.height )&#125; è¿™æ ·å°±å®Œæˆäº† è§£é‡Šä¸€ä¸‹ä¸‹UIEdgeInsetsMakeMaskImgae çš„å¤§å°ä¸º 56 * 5012// UIEdgeInsetsMake(top: CGFloat, left: CGFloat, bottom: CGFloat, right: CGFloat)UIEdgeInsetsMake(30, 28, 23, 28) çº¢è‰²èŒƒå›´å°±æ˜¯è¦æ‹‰ä¼¸çš„èŒƒå›´(éšæ‰‹ä¸€æ‰£ï¼Œä¸å¤ªå‡†ç¡®ï¼Œæ„æ€æ„æ€ä¸‹å°±å¥½äº†~~) contentsCenterè¿™æ˜¯å¯¹æŸä¸ªåŒºåŸŸè¿›è¡Œå…¨é¢æ‹‰ä¼¸ï¼Œå¦‚æžœä¸è®¾ç½®çš„è¯é»˜è®¤å€¼ä¸º1CGRect(x: 0, y: 0, width: 1, height: 1) å°±æ˜¯ç›´æŽ¥è¿›è¡Œç¼©æ”¾é‚£æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ï¼Œå¦‚æžœä¸å¯¹contentsCenterè¿™ä¸ªå€¼è¿›è¡Œè®¾ç½®ä¼šæ˜¯ä»€ä¹ˆæ•ˆæžœæˆ‘ä»¬æ¥çœ‹ä¸‹å®˜æ–¹è§£é‡Š 1234var contentsCenter: CGRect &#123; get set &#125;Description The rectangle that defines how the layer contents are scaledif the layerâ€™s contents are resized. Animatable. ç¿»è¯‘ï¼šå¦‚æžœå›¾å±‚çš„å†…å®¹æ˜¯é‡æ–°è®¾ç½®äº†å°ºå¯¸çš„ï¼Œé‚£å®šä¹‰çš„è¿™ä¸ªçŸ©å½¢(contentsCenter)æ˜¯ä¸ºäº†å‘Šè¯‰å›¾å±‚ï¼Œå›¾å±‚çš„å†…å®¹æ˜¯å¦‚ä½•è¢«ç¼©æ”¾çš„ é‚£æ˜Žäº†ï¼Œæˆ‘ä»¬çš„å›¾ç‰‡æ˜¯è¢«æ‹‰ä¼¸åŽå†ç»˜åˆ¶åˆ°layerä¸Šçš„ï¼Œä¸ºäº†æ­£ç¡®æ˜¾ç¤ºæˆ‘ä»¬çš„å›¾ç‰‡ï¼Œæˆ‘ä»¬å¾—å‘Šè¯‰layerå®ƒæ˜¯æ€Žä¹ˆè¢«è¿›è¡Œæ‹‰ä¼¸çš„ã€‚æ˜¯çš„ï¼Œå°±æ˜¯ä¸‹é¢ä»£ç æ‰€æŒ‡å®šçš„èŒƒå›´1UIEdgeInsetsMake(30, 28, 23, 28) ä½†æ˜¯ï¼Œæ­£å¦‚ä¸Šé¢æåˆ°è¿‡çš„ï¼ŒcontentsCenteræ‰€è¦èµ‹å€¼çš„CGRectæ˜¯æ¯”ä¾‹ï¼Œä¸æ˜¯ç»å¯¹åæ ‡ï¼Œæ‰€ä»¥çŽ°åœ¨æˆ‘ä»¬å¾—é€šè¿‡(30, 28, 23, 28)èŽ·å–æ¯”ä¾‹å€¼ï¼Œè½¬æ¢æ–¹æ³•å·²ç»åœ¨ä¸Šé¢ç»™å‡ºäº†ï¼Œå°±æ˜¯CGRectCenterRectForResizableImageæˆ‘ä»¬æ¥æ‰“å°ä¸‹ image.capInsetsçš„å†…å®¹12345LXFLog("\(image.capInsets)")LXFLog("\(image.capInsets.top)")LXFLog("\(image.capInsets.bottom)")LXFLog("\(image.capInsets.left)")LXFLog("\(image.capInsets.right)") æ‰“å°ç»“æžœ12345UIEdgeInsets(top: 30.0, left: 28.0, bottom: 23.0, right: 28.0)30.023.028.028.0 å¥½ï¼ŒçŽ°åœ¨ç»“åˆ ä¸‹é¢çš„å›¾ ä¸Ž CGRectCenterRectForResizableImage æ–¹æ³•ä¸­çš„ä»£ç å°±å¾ˆæ˜Žç¡®æ¯”ä¾‹æ˜¯æ€Žä¹ˆå–åˆ°çš„äº† é™„ä¸Šç›¸å…³é¡¹ç›®ï¼šSwift 3.0 é«˜ä»¿å¾®ä¿¡]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Swift</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS - Swift UICollectionViewæ¨ªå‘åˆ†é¡µçš„é—®é¢˜]]></title>
    <url>%2F2017%2F09%2F12%2FiOS-Swift-UICollectionView%E6%A8%AA%E5%90%91%E5%88%86%E9%A1%B5%E7%9A%84%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥è§£å†³ï¼Œæ•°æ®åªæœ‰11ä¸ªï¼Œè¦åˆ†ä¸¤é¡µéœ€è¦16ä¸ªï¼Œé‚£æˆ‘ä»¬å¯ä»¥ç›´æŽ¥æ·»åŠ æ•°æ®åˆ°16ä¸ªï¼Œç„¶åŽåœ¨dataSourceä¸­è¿”å›žcellæ—¶è¿›è¡Œåˆ¤æ–­åŠå¤„ç†å³å¯ã€‚ä¸è¿‡å¯¹äºŽçŽ°åœ¨æ¥è¯´å¤ªå°é¢˜å¤§åšäº†ï¼Œæˆ‘é€‰ç¬¬äºŒç§æ–¹å¼~ + UICollectionViewæ¨ªå‘åˆ†é¡µçš„é—®é¢˜æƒ…å†µç›´æŽ¥çœ‹å›¾å·²ç»è®¾ç½®collectionViewçš„isPagingEnabledä¸ºtrueäº†ï¼Œå¯æ˜¯å‡ºçŽ°äº†è¿™ç§æƒ…å†µï¼ŒåŽŸå› å°±æ˜¯collectionViewçš„contentSizeä¸å¤Ÿã€‚ 12345678&lt;UICollectionView: 0x7fc565076000; frame = (0 0; 375 197); clipsToBounds = YES; gestureRecognizers = &lt;NSArray: 0x6180000557e0&gt;; layer = &lt;CALayer: 0x61000022a5a0&gt;; contentOffset: &#123;187.5, 0&#125;; contentSize: &#123;562.5, 192.25&#125;&gt; è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥è§£å†³ï¼Œæ•°æ®åªæœ‰11ä¸ªï¼Œè¦åˆ†ä¸¤é¡µéœ€è¦16ä¸ªï¼Œé‚£æˆ‘ä»¬å¯ä»¥ç›´æŽ¥æ·»åŠ æ•°æ®åˆ°16ä¸ªï¼Œç„¶åŽåœ¨dataSourceä¸­è¿”å›žcellæ—¶è¿›è¡Œåˆ¤æ–­åŠå¤„ç†å³å¯ã€‚ä¸è¿‡å¯¹äºŽçŽ°åœ¨æ¥è¯´å¤ªå°é¢˜å¤§åšäº†ï¼Œæˆ‘é€‰ç¬¬äºŒç§æ–¹å¼~ ç›´æŽ¥ä¿®æ”¹contentSizeæˆ‘è‡ªå®šä¹‰äº†ä¸€ä¸ªç»§æ‰¿äºŽUICollectionViewFlowLayoutçš„Layout(LXFChatMoreCollectionLayout)ï¼Œè®©UICollectionViewåœ¨åˆ›å»ºçš„æ—¶å€™ä½¿ç”¨äº†å®ƒ åœ¨ LXFChatMoreCollectionLayout.swift ä¸­æˆ‘ä»¬éœ€è¦é‡å†™çˆ¶ç±»çš„collectionViewContentSizeï¼Œå°†contentSizeå–å‡ºæ¥ä¿®æ”¹ä¸ºæˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„newSizeå°±å¯ä»¥äº†ä»£ç å¦‚ä¸‹1234567override var collectionViewContentSize: CGSize &#123; let size: CGSize = super.collectionViewContentSize let collectionViewWidth: CGFloat = self.collectionView!.frame.size.width let nbOfScreen: Int = Int(ceil(size.width / collectionViewWidth)) let newSize: CGSize = CGSize(width: collectionViewWidth * CGFloat(nbOfScreen), height: size.height) return newSize&#125; æ³¨ï¼šceilå‡½æ•°çš„ä½œç”¨æ˜¯æ±‚ä¸å°äºŽç»™å®šå®žæ•°çš„æœ€å°æ•´æ•°ã€‚ceil(2)=ceil(1.2)=cei(1.5)=2.00 æ•ˆæžœ è‡³äºŽå¦‚ä½•è®©itemæ°´å¹³å¸ƒå±€ï¼Œè¯·å‚è€ƒã€ŠiOS - Swift UICollectionViewæ¨ªå‘åˆ†é¡µæ»šåŠ¨ï¼Œcellå·¦å³æŽ’ç‰ˆã€‹ é™„ä¸Šç›¸å…³é¡¹ç›®ï¼šSwift 3.0 é«˜ä»¿å¾®ä¿¡]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Swift</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS - Swift UICollectionViewæ¨ªå‘åˆ†é¡µæ»šåŠ¨ï¼Œcellå·¦å³æŽ’ç‰ˆ]]></title>
    <url>%2F2017%2F09%2F12%2FiOS-Swift-UICollectionView%E6%A8%AA%E5%90%91%E5%88%86%E9%A1%B5%E6%BB%9A%E5%8A%A8%EF%BC%8Ccell%E5%B7%A6%E5%8F%B3%E6%8E%92%E7%89%88%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨åšè¡¨æƒ…é”®ç›˜æ—¶é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ç”¨UICollectionViewæ¥å¸ƒå±€è¡¨æƒ…ï¼Œä½¿ç”¨æ¨ªå‘åˆ†é¡µæ»šåŠ¨ï¼Œä½†åœ¨æœ€åŽä¸€é¡µå‡ºçŽ°äº†å¦‚å›¾æ‰€ç¤ºçš„æƒ…å†µ + æƒ…å†µæœ€è¿‘åœ¨åšè¡¨æƒ…é”®ç›˜æ—¶é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ç”¨UICollectionViewæ¥å¸ƒå±€è¡¨æƒ…ï¼Œä½¿ç”¨æ¨ªå‘åˆ†é¡µæ»šåŠ¨ï¼Œä½†åœ¨æœ€åŽä¸€é¡µå‡ºçŽ°äº†å¦‚å›¾æ‰€ç¤ºçš„æƒ…å†µ æƒ…å†µåˆ†æžå›¾æ˜¯çš„ï¼ŒçŽ°åœ¨çš„itemåˆ†å¸ƒå°±æ˜¯è¿™ä¸ªé¬¼æ ·å­çŽ°åœ¨æƒ³è¦åšçš„ï¼Œå°±æ˜¯å°†çŽ°åœ¨è¿™ä¸ªé¬¼æ ·å­å˜æˆå¦å¤–ä¸€ç§æ ·å­ï¼Œå¦‚å›¾é‚£æ€Žä¹ˆåŠžï¼Ÿåªå¥½é‡æ–°å¸ƒå±€itemäº† è§£å†³æ–¹æ¡ˆæˆ‘æ˜¯è‡ªå®šäº†ä¸€ä¸ªLayout(LXFChatEmotionCollectionLayout)ï¼Œè®©UICollectionViewåœ¨åˆ›å»ºçš„æ—¶å€™ä½¿ç”¨äº†å®ƒ åœ¨ LXFChatEmotionCollectionLayout.swift ä¸­ æ·»åŠ ä¸€ä¸ªå±žæ€§æ¥ä¿å­˜æ‰€æœ‰itemçš„attributes12// ä¿å­˜æ‰€æœ‰itemçš„attributesfileprivate var attributesArr: [UICollectionViewLayoutAttributes] = [] é‡æ–°å¸ƒå±€12345678910111213141516171819202122232425262728293031323334353637// MARK:- é‡æ–°å¸ƒå±€override func prepare() &#123; super.prepare() let itemWH: CGFloat = kScreenW / CGFloat(kEmotionCellNumberOfOneRow) // è®¾ç½®itemSize itemSize = CGSize(width: itemWH, height: itemWH) minimumLineSpacing = 0 minimumInteritemSpacing = 0 scrollDirection = .horizontal // è®¾ç½®collectionViewå±žæ€§ collectionView?.isPagingEnabled = true collectionView?.showsHorizontalScrollIndicator = false collectionView?.showsVerticalScrollIndicator = true let insertMargin = (collectionView!.bounds.height - 3 * itemWH) * 0.5 collectionView?.contentInset = UIEdgeInsetsMake(insertMargin, 0, insertMargin, 0) /// é‡ç‚¹åœ¨è¿™é‡Œ var page = 0 let itemsCount = collectionView?.numberOfItems(inSection: 0) ?? 0 for itemIndex in 0..&lt;itemsCount &#123; let indexPath = IndexPath(item: itemIndex, section: 0) let attributes = UICollectionViewLayoutAttributes(forCellWith: indexPath) page = itemIndex / (kEmotionCellNumberOfOneRow * kEmotionCellRow) // é€šè¿‡ä¸€ç³»åˆ—è®¡ç®—, å¾—åˆ°x, yå€¼ let x = itemSize.width * CGFloat(itemIndex % Int(kEmotionCellNumberOfOneRow)) + (CGFloat(page) * kScreenW) let y = itemSize.height * CGFloat((itemIndex - page * kEmotionCellRow * kEmotionCellNumberOfOneRow) / kEmotionCellNumberOfOneRow) attributes.frame = CGRect(x: x, y: y, width: itemSize.width, height: itemSize.height) // æŠŠæ¯ä¸€ä¸ªæ–°çš„å±žæ€§ä¿å­˜èµ·æ¥ attributesArr.append(attributes) &#125;&#125; è¿”å›žæ‰€æœ‰å½“å‰å¯è§çš„Attributes123456789override func layoutAttributesForElements(in rect: CGRect) -&gt; [UICollectionViewLayoutAttributes]? &#123; var rectAttributes: [UICollectionViewLayoutAttributes] = [] _ = attributesArr.map(&#123; if rect.contains($0.frame) &#123; rectAttributes.append($0) &#125; &#125;) return rectAttributes&#125; å¤§åŠŸå‘Šæˆ å®Œæ•´ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657import UIKitlet kEmotionCellNumberOfOneRow = 8let kEmotionCellRow = 3class LXFChatEmotionCollectionLayout: UICollectionViewFlowLayout &#123; // ä¿å­˜æ‰€æœ‰item fileprivate var attributesArr: [UICollectionViewLayoutAttributes] = [] // MARK:- é‡æ–°å¸ƒå±€ override func prepare() &#123; super.prepare() let itemWH: CGFloat = kScreenW / CGFloat(kEmotionCellNumberOfOneRow) // è®¾ç½®itemSize itemSize = CGSize(width: itemWH, height: itemWH) minimumLineSpacing = 0 minimumInteritemSpacing = 0 scrollDirection = .horizontal // è®¾ç½®collectionViewå±žæ€§ collectionView?.isPagingEnabled = true collectionView?.showsHorizontalScrollIndicator = false collectionView?.showsVerticalScrollIndicator = true let insertMargin = (collectionView!.bounds.height - 3 * itemWH) * 0.5 collectionView?.contentInset = UIEdgeInsetsMake(insertMargin, 0, insertMargin, 0) var page = 0 let itemsCount = collectionView?.numberOfItems(inSection: 0) ?? 0 for itemIndex in 0..&lt;itemsCount &#123; let indexPath = IndexPath(item: itemIndex, section: 0) let attributes = UICollectionViewLayoutAttributes(forCellWith: indexPath) page = itemIndex / (kEmotionCellNumberOfOneRow * kEmotionCellRow) // é€šè¿‡ä¸€ç³»åˆ—è®¡ç®—, å¾—åˆ°x, yå€¼ let x = itemSize.width * CGFloat(itemIndex % Int(kEmotionCellNumberOfOneRow)) + (CGFloat(page) * kScreenW) let y = itemSize.height * CGFloat((itemIndex - page * kEmotionCellRow * kEmotionCellNumberOfOneRow) / kEmotionCellNumberOfOneRow) attributes.frame = CGRect(x: x, y: y, width: itemSize.width, height: itemSize.height) // æŠŠæ¯ä¸€ä¸ªæ–°çš„å±žæ€§ä¿å­˜èµ·æ¥ attributesArr.append(attributes) &#125; &#125; override func layoutAttributesForElements(in rect: CGRect) -&gt; [UICollectionViewLayoutAttributes]? &#123; var rectAttributes: [UICollectionViewLayoutAttributes] = [] _ = attributesArr.map(&#123; if rect.contains($0.frame) &#123; rectAttributes.append($0) &#125; &#125;) return rectAttributes &#125; &#125; é™„ä¸Šç›¸å…³é¡¹ç›®ï¼šSwift 3.0 é«˜ä»¿å¾®ä¿¡]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Swift</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS - é€šè¿‡runtimeèŽ·å–æŸä¸ªç±»ä¸­æ‰€æœ‰çš„å˜é‡å’Œæ–¹æ³•]]></title>
    <url>%2F2017%2F09%2F12%2FiOS-%E9%80%9A%E8%BF%87runtime%E8%8E%B7%E5%8F%96%E6%9F%90%E4%B8%AA%E7%B1%BB%E4%B8%AD%E6%89%80%E6%9C%89%E7%9A%84%E5%8F%98%E9%87%8F%E5%92%8C%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[è‹¹æžœå®˜æ–¹çš„ç±»ä¸­åªæä¾›ç»™æˆ‘ä»¬ä¸€å°éƒ¨åˆ†æˆå‘˜å˜é‡å’Œæ–¹æ³•,ä½†æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦çš„æ°å¥½å°±æ²¡æœ‰æä¾›,è¿™æ ·å°±ä¼šä»¤å¼€å‘äººå‘˜ååˆ†æ‡Šæ¼äº†,é‚£æ€Žæ ·æ‰èƒ½èŽ·å–è¯¥ç±»ä¸­æ‰€æœ‰çš„å˜é‡åŠæ–¹æ³•,ç”¨æ¥æŸ¥æ‰¾æ˜¯å¦æœ‰ç›¸å¯¹åº”çš„å˜é‡å’Œæ–¹æ³•å‘¢?æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è‹¹æžœè‡ªå¸¦çš„ è¿è¡Œæ—¶(runtime) æ¥èŽ·å–+ è‹¹æžœå®˜æ–¹çš„ç±»ä¸­åªæä¾›ç»™æˆ‘ä»¬ä¸€å°éƒ¨åˆ†æˆå‘˜å˜é‡å’Œæ–¹æ³•,ä½†æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦çš„æ°å¥½å°±æ²¡æœ‰æä¾›,è¿™æ ·å°±ä¼šä»¤å¼€å‘äººå‘˜ååˆ†æ‡Šæ¼äº†,é‚£æ€Žæ ·æ‰èƒ½èŽ·å–è¯¥ç±»ä¸­æ‰€æœ‰çš„å˜é‡åŠæ–¹æ³•,ç”¨æ¥æŸ¥æ‰¾æ˜¯å¦æœ‰ç›¸å¯¹åº”çš„å˜é‡å’Œæ–¹æ³•å‘¢?æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è‹¹æžœè‡ªå¸¦çš„ è¿è¡Œæ—¶(runtime) æ¥èŽ·å– è¿è¡Œæ—¶(Runtime): è‹¹æžœå®˜æ–¹ä¸€å¥—Cè¯­è¨€åº“ èƒ½åšå¾ˆå¤šåº•å±‚æ“ä½œ(æ¯”å¦‚è®¿é—®éšè—çš„ä¸€äº›æˆå‘˜å˜é‡\æˆå‘˜æ–¹æ³•â€¦.) ä»¥ä¸‹ä»¥ UITextField ä¸ºä¾‹ ä¸€. åŒ…å«è¿è¡Œæ—¶å¤´æ–‡ä»¶1#import &lt;objc/runtime.h&gt; äºŒ. èŽ·å–æ‰€æœ‰çš„æˆå‘˜å˜é‡123456789101112131415161718unsigned int count = 0; // æ‹·è´å‡ºæ‰€èƒ¡çš„æˆå‘˜å˜é‡åˆ—è¡¨Ivar *ivars = class_copyIvarList([UITextField class], &amp;count); for (int i = 0; i&lt;count; i++) &#123; // å–å‡ºæˆå‘˜å˜é‡ Ivar ivar = *(ivars + i); // æ‰“å°æˆå‘˜å˜é‡åå­— LXFLog(@"%s", ivar_getName(ivar)); // æ‰“å°æˆå‘˜å˜é‡çš„æ•°æ®ç±»åž‹ LXFLog(@"%s", ivar_getTypeEncoding(ivar));&#125; // é‡Šæ”¾free(ivars); Swiftçš„å†™æ³•å¦‚ä¸‹1234567var count: UInt32 = 0let ivars = class_copyIvarList(UIViewController.self, &amp;count)!for i in 0..&lt;count &#123; let namePoint = ivar_getName(ivars[Int(i)])! let name = String(cString: namePoint) print(name)&#125; ä¸‰. èŽ·å–æ‰€æœ‰çš„æˆå‘˜æ–¹æ³•// ä¸‹é¢çš„UITextFieldæ”¹ä¸ºä½ æƒ³èŽ·å–æ‰€æœ‰å±žæ€§çš„ç±»å// methCount: è¿™ä¸ªç±»æ‰€æœ‰å±žæ€§çš„ä¸ªæ•°123456789101112131415unsigned int methCount = 0;Method *meths = class_copyMethodList([UITextField class], &amp;methCount); for(int i = 0; i &lt; methCount; i++) &#123; Method meth = meths[i]; SEL sel = method_getName(meth); const char *name = sel_getName(sel); NSLog(@"%s", name);&#125; free(meths); æœ€åŽ,é€šè¿‡KVCçš„æ–¹å¼ç»™ç›¸åº”çš„æˆå‘˜å˜é‡èµ‹å€¼å³å¯!å¦‚:12345// ä¿®æ”¹ç‚¹ä½æ–‡å­—é¢œè‰²UILabel *placeholderLabel = [self valueForKeyPath:@"_placeholderLabel"];placeholderLabel.textColor = [UIColor redColor];// æˆ–è€…è¿™æ ·[self setValue:[UIColor grayColor] forKeyPath:@"_placeholderLabel.textColor"];]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Objective-C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS - å®žçŽ°UINavigationå…¨å±åŠ¨è¿”å›ž(äºŒ)]]></title>
    <url>%2F2017%2F09%2F12%2FiOS-%E5%AE%9E%E7%8E%B0UINavigation%E5%85%A8%E5%B1%8F%E5%8A%A8%E8%BF%94%E5%9B%9E-%E4%BA%8C%2F</url>
    <content type="text"><![CDATA[åœ¨ iOS - å®žçŽ°UINavigationå…¨å±æ»‘åŠ¨è¿”å›ž(ä¸€) ä¸­æˆ‘ä»¬å®žçŽ°äº†æ»‘åŠ¨è¿”å›žçš„åŠŸèƒ½ï¼Œä½†ä¸æ˜¯å…¨å±æ»‘åŠ¨è¿”å›žï¼Œå¾—åœ¨å·¦ä¾§è¾¹ç¼˜è½»æ‰«æ‰èƒ½æ»‘åŠ¨è¿”å›ž~UINavigationControllerè‡ªå¸¦çš„åªèƒ½åœ¨è¾¹ç¼˜è½»æ‰«æ‰èƒ½æ»‘åŠ¨è¿”å›žï¼Œè¿™ç”¨æˆ·ä½“éªŒæ˜¯ä¸å¥½çš„ï¼ŒæŽ¥ä¸‹æ¥å®žçŽ°å…¨å±æ»‘åŠ¨è¿”å›ž! + å›žé¡¾åœ¨ iOS - å®žçŽ°UINavigationå…¨å±æ»‘åŠ¨è¿”å›ž(ä¸€) ä¸­æˆ‘ä»¬å®žçŽ°äº†æ»‘åŠ¨è¿”å›žçš„åŠŸèƒ½ï¼Œä½†ä¸æ˜¯å…¨å±æ»‘åŠ¨è¿”å›žï¼Œå¾—åœ¨å·¦ä¾§è¾¹ç¼˜è½»æ‰«æ‰èƒ½æ»‘åŠ¨è¿”å›ž~UINavigationControllerè‡ªå¸¦çš„åªèƒ½åœ¨è¾¹ç¼˜è½»æ‰«æ‰èƒ½æ»‘åŠ¨è¿”å›žï¼Œè¿™ç”¨æˆ·ä½“éªŒæ˜¯ä¸å¥½çš„ï¼ŒæŽ¥ä¸‹æ¥å®žçŽ°å…¨å±æ»‘åŠ¨è¿”å›ž! æ€è·¯æ—¢ç„¶è‡ªå¸¦çš„æ»‘åŠ¨è¿”å›žåªèƒ½æ˜¯åœ¨è¾¹ç¼˜ï¼Œé‚£æˆ‘ä»¬èƒ½ä¸èƒ½ä¿®æ”¹ä½¿å®ƒè§¦æ‘¸èŒƒå›´å˜å¤§ç”šè‡³å…¨å±å‘¢ï¼Ÿå…ˆæ¥çœ‹ä¸‹ç³»ç»Ÿæ‰‹åŠ¿æœ‰æ²¡æœ‰æä¾›å±žæ€§æˆ–æ–¹æ³•ä¾›æˆ‘ä»¬ä½¿ç”¨1NSLog(@"%@", self.interactivePopGestureRecognizer); æ‰“å°ä¿¡æ¯ï¼š123456/*&lt;UIScreenEdgePanGestureRecognizer: 0x7fd542611e20; state = Possible; delaysTouchesBegan = YES; view = &lt;UILayoutContainerView 0x7fd542706300&gt;; target= &lt;(action=handleNavigationTransition:, target=&lt;_UINavigationInteractiveTransition 0x7fd542611ce0&gt;)&gt;&gt;*/ åŽŸæ¥ç³»ç»Ÿæ‰‹åŠ¿çš„ç±»åž‹ä¸º UIScreenEdgePanGestureRecognizer ï¼Œè½¬åˆ°å®šä¹‰ï¼Œå‘çŽ°æœ‰ä¸€ä¸ªå±žæ€§1UIRectEdge edges æ˜¯ä¸ªç»“æž„ä½“12345678typedef NS_OPTIONS(NSUInteger, UIRectEdge) &#123; UIRectEdgeNone = 0, UIRectEdgeTop = 1 &lt;&lt; 0, UIRectEdgeLeft = 1 &lt;&lt; 1, UIRectEdgeBottom = 1 &lt;&lt; 2, UIRectEdgeRight = 1 &lt;&lt; 3, UIRectEdgeAll = UIRectEdgeTop | UIRectEdgeLeft | UIRectEdgeBottom | UIRectEdgeRight&#125; åªæä¾›äº†è¿™å‡ æ ·ï¼Œéƒ½æ˜¯è¾¹ç¼˜çš„ï¼Œè¿™æ ·å°±åªå¥½å¦å¯»ä»–è·¯äº†ã€‚æ—¢ç„¶æ²¡æœ‰æä¾›æ–¹å¼ç»™æˆ‘ä»¬çŽ°å®žè¦æ±‚ï¼Œé‚£æˆ‘ä»¬å°±è‡ªå·±æ·»åŠ ä¸€ä¸ªæ‹–åŠ¨æ‰‹åŠ¿ UIPanGestureRecognizeræ¥æ›¿å®ƒæ‰§è¡Œæ»‘åŠ¨è¿”å›žåŠŸèƒ½ã€‚12UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:target action:@selector(handleNavigationTransition:)];[self.view addGestureRecognizer:pan]; æ·»åŠ ä¸€ä¸ªæ‹–åŠ¨æ‰‹åŠ¿ï¼Œè®©ä»–æ‰§è¡Œç³»ç»Ÿæ‰‹åŠ¿çš„æ“ä½œï¼Œè°ƒç”¨handleNavigationTransition:æ–¹æ³•ï¼ˆåˆšæ‰æ‰“å°çš„ä¿¡æ¯ä¸­å¯ä»¥å¾—çŸ¥ï¼‰ï¼ŒçŽ°åœ¨çš„é—®é¢˜å°±æ˜¯targetæ˜¯è°ï¼Ÿæˆ‘ä»¬å¯ä»¥çœ‹çœ‹UIScreenEdgePanGestureRecognizerä¸­æ˜¯å¦æœ‰çº¿ç´¢å‘¢ï¼Ÿ1UIScreenEdgePanGestureRecognizer *gest = self.interactivePopGestureRecognizer; æ‰¾äº†åŠå¤©æ²¡æ‰¾ç€ï¼Œä½†æ˜¯UIScreenEdgePanGestureRecognizerç»§æ‰¿äºŽUIPanGestureRecognizerï¼Œè€ŒUIPanGestureRecognizeråˆç»§æ‰¿äºŽUIGestureRecognizerï¼Œåœ¨UIGestureRecognizeræä¾›çš„æ–¹æ³•ä¸­æˆ‘ä»¬å¯ä»¥æŽ¨æ–­å‡ºä¸€å®šæœ‰targetï¼Œè€Œä¸”è¿˜æ˜¯å¼ºå¼•ç”¨çš„ç§æœ‰å±žæ€§ï¼é‚£æˆ‘ä»¬å°±å¯ä»¥ç”¨OCå¼ºå¤§çš„æ€æ‰‹é”KVCæ¥å¾—åˆ°è¿™ä¸ªå±žæ€§ï¼Œä½†æ˜¯å‰ææ˜¯æˆ‘ä»¬å¾—çŸ¥é“targetæ‰€æŒ‡å±žæ€§æ˜¯ä»€ä¹ˆåå­—å‚ç…§æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ï¼šiOS - é€šè¿‡runtimeèŽ·å–æŸä¸ªç±»ä¸­æ‰€æœ‰çš„å˜é‡å’Œæ–¹æ³•1234567891011121314151617// OC runtime æœºåˆ¶// åªèƒ½åŠ¨æ€èŽ·å–å½“å‰ç±»çš„æˆå‘˜å±žæ€§ï¼Œä¸èƒ½èŽ·å–å…¶å­ç±»ï¼Œæˆ–è€…çˆ¶ç±»çš„å±žæ€§unsigned int count = 0;// æ‹·è´å‡ºæ‰€èƒ¡çš„æˆå‘˜å˜é‡åˆ—è¡¨Ivar *ivars = class_copyIvarList([UIGestureRecognizer class], &amp;count);for (int i = 0; i&lt;count; i++) &#123; // å–å‡ºæˆå‘˜å˜é‡ Ivar ivar = *(ivars + i); // æ‰“å°æˆå‘˜å˜é‡åå­— NSLog(@"%s", ivar_getName(ivar)); // æ‰“å°æˆå‘˜å˜é‡çš„æ•°æ®ç±»åž‹ NSLog(@"%s", ivar_getTypeEncoding(ivar));&#125; // é‡Šæ”¾ free(ivars); åœ¨æ‰“å°ä¸­æˆ‘ä»¬æ‰¾åˆ°äº†UIGestureRecognizerçš„ç§æœ‰å±žæ€§ _targetsï¼Œæ˜¯ä¸ªæ•°ç»„ï¼Œè€Œä¸”åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œå…ƒç´ çš„ç±»åž‹å¦‚å›¾æ‰€ç¤ºé‚£å°±å¥½åŠžäº†ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°targetäº†12NSArray *targets = [gest valueForKeyPath:@"_targets"]; // æ‰“å°å¯ä»¥å‘çŽ°é‡Œé¢å°±ä¸€ä¸ªå…ƒç´ id target = [targets[0] valueForKeyPath:@"_target"]; è¿™æ ·æˆ‘ä»¬å°±å·®ä¸å¤šå®žçŽ°å…¨å±æ»‘åŠ¨è¿”å›žçš„åŠŸèƒ½ï¼Œä½†æ˜¯æœ‰ä¸ªbugå¦‚å›¾æ‰€ç¤ºï¼Œåœ¨æœ€åŽé‡Œå›žåˆ°æ ¹æŽ§åˆ¶å™¨ç•Œé¢åŽæˆ‘å†ä¸€æ¬¡å‘å³æ»‘åŠ¨ï¼ŒæŽ¥ç€ç‚¹å‡»Buttonï¼Œå®ƒæ²¡æœ‰å°†FirstVCå¼¹å‡ºï¼Œè¿™å°±æ˜¯ä¼ è¯´ä¸­çš„bugï¼Œé‚£æˆ‘ä»¬çŽ°åœ¨åœ¨åšçš„ï¼Œå°±æ˜¯åœ¨æ ¹æŽ§åˆ¶å™¨ä¸è®©æ»‘åŠ¨è¿”å›žç”Ÿæ•ˆï¼Œå³ç¦ç”¨æ‰‹åŠ¿ã€‚ç›‘å¬æ‰‹åŠ¿ï¼Œéµå®ˆåè®®UIGestureRecognizerDelegateï¼Œå®žçŽ°ä»£ç†æ–¹æ³• 12// å½“å½“å‰æŽ§åˆ¶å™¨æ˜¯æ˜¯æ ¹æŽ§åˆ¶å™¨æ—¶ä¸è®©ç§»é™¤å½“å‰æŽ§åˆ¶å™¨(æ¢å¥è¯è¯´å°±æ˜¯ç¦æ­¢æ‰‹åŠ¿)pan.delegate = self; 1234567#pragma mark - UIGestureRecognizerDelegate// å½“å¼€å§‹æ»‘åŠ¨æ—¶è°ƒç”¨- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer &#123; // å½“ä¸ºæ ¹æŽ§åˆ¶å™¨æ˜¯ä¸è®©ç§»é™¤å½“å‰æŽ§åˆ¶å™¨ï¼Œéžæ ¹æŽ§åˆ¶å™¨æ—¶å…è®¸ç§»é™¤ NSLog(@"%ld", self.viewControllers.count); BOOL open = self.viewControllers.count &gt; 1; return open;&#125; æœ€åŽè¯´ä¸¤å¥è¿™æ ·å°±å¯ä»¥å…¨å±æ»‘åŠ¨äº†ï¼Œä¸è¿‡è®©æˆ‘ä»¬æ¥çœ‹çœ‹æˆ‘ä»¬æ·»åŠ æ‰‹åŠ¿çš„ä¹ æƒ¯123UIPanGestureRecognizer *myPan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(pan)];[self.view addGestureRecognizer:myPan];myPan.delegate = self; æˆ‘ä»¬åœ¨æ·»åŠ æ‰‹åŠ¿æ—¶è®¾ç½®äº†targetä¸ºselfï¼Œè€Œdelegateä¹Ÿä¸ºselfé‚£æ˜¯ä¸æ˜¯å¯ä»¥æŽ¨æ–­å‡ºç³»ç»Ÿæ‰‹åŠ¿çš„delegateå°±æ˜¯æˆ‘ä»¬åˆšåˆšæƒ³è¦çš„targetå‘¢ï¼Œç­”æ¡ˆæ˜¯æ˜¯çš„1id target = self.interactivePopGestureRecognizer.delegate; æ‰€ä»¥æˆ‘ä»¬çš„targetå°±å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼èŽ·å¾—ï¼Œä¸ç”¨KVCçš„æ–¹å¼å“¦ï¼Œæœ€åŽåˆ«å¿˜äº†ç¦ç”¨ç³»ç»Ÿæ‰‹åŠ¿12// ç¦æ­¢ç³»ç»Ÿçš„æ‰‹åŠ¿self.interactivePopGestureRecognizer.enabled = NO; è¿™æ ·ï¼Œæˆ‘ä»¬å°±å®žçŽ°äº†å…¨å±æ»‘åŠ¨è¿”å›žçš„åŠŸèƒ½äº†~ æºç  Objective-C è®°å¾—éµå®ˆåè®®ï¼š UIGestureRecognizerDelegateLXFNavigationController.m12345678910111213- (void)viewDidLoad &#123; [super viewDidLoad]; // ç³»ç»Ÿçš„æ‰‹åŠ¿ UIScreenEdgePanGestureRecognizer *gest = self.interactivePopGestureRecognizer; // target id target = self.interactivePopGestureRecognizer.delegate; // ç¦æ­¢ç³»ç»Ÿçš„æ‰‹åŠ¿ self.interactivePopGestureRecognizer.enabled = NO; UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:target action:@selector(handleNavigationTransition:)]; [self.view addGestureRecognizer:pan]; // ç›‘å¬ä»£ç† pan.delegate = self;&#125; 12345678#pragma mark - UIGestureRecognizerDelegate// å½“å¼€å§‹æ»‘åŠ¨æ—¶è°ƒç”¨- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer &#123; // å½“ä¸ºæ ¹æŽ§åˆ¶å™¨æ˜¯ä¸è®©ç§»é™¤å½“å‰æŽ§åˆ¶å™¨ï¼Œéžæ ¹æŽ§åˆ¶å™¨æ—¶å…è®¸ç§»é™¤ NSLog(@"%ld", self.viewControllers.count); BOOL open = self.viewControllers.count &gt; 1; return open;&#125; Swift LXFNavigationController.swift1234567891011override func viewDidLoad() &#123; super.viewDidLoad() guard let targets = interactivePopGestureRecognizer!.value(forKey: &quot;_targets&quot;) as? [NSObject] else &#123; return &#125; let targetObjc = targets.first let target = targetObjc?.value(forKey: &quot;target&quot;) let action = Selector((&quot;handleNavigationTransition:&quot;)) let panGes = UIPanGestureRecognizer(target: target, action: action) view.addGestureRecognizer(panGes)&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>Swift</tag>
        <tag>Objective-C</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS - å®žçŽ°UINavigationå…¨å±åŠ¨è¿”å›ž(ä¸€)]]></title>
    <url>%2F2017%2F09%2F11%2FiOS-%E5%AE%9E%E7%8E%B0UINavigation%E5%85%A8%E5%B1%8F%E5%8A%A8%E8%BF%94%E5%9B%9E-%E4%B8%80%2F</url>
    <content type="text"><![CDATA[interactivePopGestureRecognizer æ˜¯UINavigationControllerè‡ªå¸¦æ‰‹åŠ¿ï¼Œå½“æˆ‘ä»¬è‡ªå®šä¹‰äº†å¯¼èˆªæ¡çš„è¿”å›žæŒ‰é’®åŽï¼Œè¿™ä¸ªæ‰‹åŠ¿å°±è‡ªåŠ¨å¤±æ•ˆäº†ï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³•æ»‘åŠ¨è¿”å›žã€‚+ è¦ç‚¹interactivePopGestureRecognizer æ˜¯UINavigationControllerè‡ªå¸¦æ‰‹åŠ¿ï¼Œå½“æˆ‘ä»¬è‡ªå®šä¹‰äº†å¯¼èˆªæ¡çš„è¿”å›žæŒ‰é’®åŽï¼Œè¿™ä¸ªæ‰‹åŠ¿å°±è‡ªåŠ¨å¤±æ•ˆäº†ï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³•æ»‘åŠ¨è¿”å›žã€‚ æ¡ä»¶å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬ä¸å¾—ä¸è‡ªå®šä¹‰å¯¼èˆªæ¡çš„è¿”å›žæŒ‰é’®ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿè¦æ»‘åŠ¨è¿”å›žä¸Šä¸€çº§çš„æ•ˆæžœã€‚ æ€è·¯æ—¢ç„¶è‡ªåŠ¨å¤±æ•ˆï¼Œé‚£æˆ‘ä»¬å°±å‘Šè¯‰å®ƒä»€ä¹ˆæ—¶å€™ç”Ÿæ•ˆã€‚ åœ¨éžæ ¹æŽ§åˆ¶å™¨ä¸‹ç”Ÿæ•ˆ(ç”¨äºŽæ»‘åŠ¨è¿”å›žä¸Šä¸€çº§) åœ¨æ ¹æŽ§åˆ¶å™¨ä¸‹å¤±æ•ˆ(é˜²æ­¢æ ¹æŽ§åˆ¶å™¨è¢«ç§»é™¤ï¼Œå½“ç„¶ç³»ç»Ÿä¸ä¼šè®©æˆ‘ä»¬æŠŠå®ƒç§»é™¤ï¼Œåªæ˜¯ä¼šå‡ºçŽ°bug)ç¿»è¯‘ï¼šç¬¬ä¸€ä¸ªè¢«æ·»åŠ çš„æŽ§åˆ¶å™¨æˆä¸ºæ°¸è¿œä¸ä¼šè¢«å‡ºæ ˆçš„æ ¹æŽ§åˆ¶å™¨ æ­¥éª¤è‡ªå®šä¹‰ä¸€ä¸ª UINavigationController ï¼Œå³ç»§æ‰¿äºŽ UINavigationController ï¼Œåå­—ä¸º LXFNavigationController ï¼Œå°†ä»£ç†è®¾ä¸ºè‡ªå·±ï¼Œéµå®ˆåè®® UINavigationControllerDelegate ï¼Œå®žçŽ°ä»£ç†æ–¹æ³• navigationController:didShowViewController:animated: ä»£ç LXFNavigationController.m 12/** ç³»ç»Ÿæ‰‹åŠ¿ä»£ç† */@property(nonatomic, strong) id popGesture; 1234567- (void)viewDidLoad &#123; [super viewDidLoad]; // è®°å½•ç³»ç»Ÿæ‰‹åŠ¿ä»£ç† self.popGesture = self.interactivePopGestureRecognizer; self.delegate = self;&#125; 123456789101112131415161718#pragma mark - UINavigationControllerDelegate// å½“æŽ§åˆ¶å™¨æ˜¾ç¤ºå®Œæ¯•çš„æ—¶å€™è°ƒç”¨- (void)navigationController:(UINavigationController *)navigationController didShowViewController:(UIViewController *)viewController animated:(BOOL)animated &#123; // æ ¹æ® æ ˆ å…ˆè¿›åŽå‡º if (self.viewControllers[0] == viewController) &#123; // æ ¹æŽ§åˆ¶å™¨ // è¿˜åŽŸä»£ç† self.interactivePopGestureRecognizer.delegate = self.popGesture; &#125; else &#123; // éžæŽ§åˆ¶å™¨ // æ¸…ç©ºæ‰‹åŠ¿ä»£ç†å°±èƒ½å®žçŽ°æ»‘åŠ¨è¿”å›žï¼ŒiOS6ä¸æ”¯æŒ self.interactivePopGestureRecognizer.delegate = nil; &#125; // å¦‚æžœå½“å‰æŽ§åˆ¶å™¨ä¸ºæ ¹æŽ§åˆ¶å™¨ï¼Œåˆ™ä½¿æ‰‹åŠ¿å¤±æ•ˆï¼Œä¸ç„¶æ‰‹åŠ¿ä¼šå°†æ ¹æŽ§åˆ¶å™¨ç§»é™¤ if (self.viewControllers.count == 1) &#123; self.interactivePopGestureRecognizer.enabled = NO; &#125; else &#123; self.interactivePopGestureRecognizer.enabled = YES; &#125;&#125; é™„ä¸ŠDemo æœ€åŽè¯´ä¸¤å¥è¿™æ ·å°±å¯ä»¥äº†ï¼Œä½†æ˜¯æ³¨æ„äº†ï¼ŒçŽ°åœ¨å®žçŽ°çš„æ˜¯æ»‘åŠ¨è¿”å›žåŠŸèƒ½ï¼Œå¹¶æ²¡æœ‰å…¨å±æ»‘åŠ¨è¿”å›ž~~æŽ¥ä¸‹æ¥çœ‹ä¸‹ä¸€ç¯‡å§ iOS - å®žçŽ°UINavigationå…¨å±æ»‘åŠ¨è¿”å›ž(äºŒ)]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
        <tag>Swift</tag>
        <tag>Objective-C</tag>
      </tags>
  </entry>
</search>
