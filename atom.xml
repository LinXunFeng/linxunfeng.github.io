<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>LinXunFengâ€˜s Blog</title>
  
  
  <link href="http://linxunfeng.top/atom.xml" rel="self"/>
  
  <link href="http://linxunfeng.top/"/>
  <updated>2020-08-22T14:18:43.876Z</updated>
  <id>http://linxunfeng.top/</id>
  
  <author>
    <name>LinXunFeng</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>åˆ†äº« - Flutteræ‰“é€ å¥½ç”¨çš„æ‰“å°å·¥å…·ç±»</title>
    <link href="http://linxunfeng.top/2020/09/11/Share/%E5%88%86%E4%BA%AB%20-%20Flutter%E6%89%93%E9%80%A0%E5%A5%BD%E7%94%A8%E7%9A%84%E6%89%93%E5%8D%B0%E5%B7%A5%E5%85%B7%E7%B1%BB/"/>
    <id>http://linxunfeng.top/2020/09/11/Share/%E5%88%86%E4%BA%AB%20-%20Flutter%E6%89%93%E9%80%A0%E5%A5%BD%E7%94%A8%E7%9A%84%E6%89%93%E5%8D%B0%E5%B7%A5%E5%85%B7%E7%B1%BB/</id>
    <published>2020-09-11T00:00:00.000Z</published>
    <updated>2020-08-22T14:18:43.876Z</updated>
    
    <content type="html"><![CDATA[<Excerpt in index | é¦–é¡µæ‘˜è¦> <p>å¦‚æœæˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨å‡½æ•°æ—¶æ‹¿åˆ°å½“å‰è°ƒç”¨å †æ ˆï¼Œå°±å¯ä»¥å–åˆ°ä¸€ç³»åˆ—æƒ³è¦çš„æ•°æ®ã€‚</p><p>+<a id="more"></a></p><The rest of contents | ä½™ä¸‹å…¨æ–‡><h2 id="ä¸€ã€æ€è€ƒ"><a href="#ä¸€ã€æ€è€ƒ" class="headerlink" title="ä¸€ã€æ€è€ƒ"></a>ä¸€ã€æ€è€ƒ</h2><p>åš <code>iOS</code> å¼€å‘çš„åŒå­¦éƒ½çŸ¥é“ï¼Œæˆ‘ä»¬åœ¨å¹³æ—¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šç”¨åˆ°éå¸¸å®ç”¨çš„è‡ªå®šä¹‰æ‰“å°åŠŸèƒ½ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¿«é€Ÿå®šä½æ˜¯åœ¨å“ªä¸ªæ§åˆ¶å™¨ï¼Œå“ªä¸€è¡Œä»£ç ã€‚</p><p> åœ¨ <code>OC</code> å’Œ <code>Swift</code> ä¸­éƒ½å¯ä»¥å¾ˆè½»æ¾å®ç°ï¼Œå› ä¸ºç³»ç»Ÿæœ¬æ¥å°±æä¾›äº†ç”¨äºæ—¥å¿—è¾“å‡ºçš„é¢„å¤„ç†å®ï¼Œåªè¦æˆ‘ä»¬æ‹¿æ¥æ‹¼æ¥å°±å¯ä»¥äº†ï¼Œè¿™é‡Œä»¥ <code>Swift</code> çš„æ‰“å°ä¸ºä¾‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">LogType</span>: <span class="title">String</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> error = <span class="string">"â¤ï¸ ERROR"</span></span><br><span class="line">    <span class="keyword">case</span> warning = <span class="string">"ğŸ’› WARNING"</span></span><br><span class="line">    <span class="keyword">case</span> info = <span class="string">"ğŸ’™ INFO"</span></span><br><span class="line">    <span class="keyword">case</span> debug = <span class="string">"ğŸ’š DEBUG"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> log = <span class="type">Logger</span>.shared</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> shared = <span class="type">Logger</span>()</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">init</span>() &#123; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> logDateFormatter: <span class="type">DateFormatter</span> = &#123;</span><br><span class="line">        <span class="keyword">let</span> f = <span class="type">DateFormatter</span>()</span><br><span class="line">        f.dateFormat = <span class="string">"yyyy-MM-dd HH:mm:ss.SSS"</span></span><br><span class="line">        <span class="keyword">return</span> f</span><br><span class="line">    &#125;()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">error</span>&lt;T&gt;<span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="number">_</span> message : T,</span></span></span><br><span class="line"><span class="function"><span class="params">        file : StaticString = #file,</span></span></span><br><span class="line"><span class="function"><span class="params">        function : StaticString = #function,</span></span></span><br><span class="line"><span class="function"><span class="params">        line : UInt = #line</span></span></span><br><span class="line"><span class="function"><span class="params">    )</span></span> &#123;</span><br><span class="line">        <span class="type">LXFLog</span>(message, type: .error, file : file, function: function, line: line)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">warning</span>&lt;T&gt;<span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="number">_</span> message : T,</span></span></span><br><span class="line"><span class="function"><span class="params">        file : StaticString = #file,</span></span></span><br><span class="line"><span class="function"><span class="params">        function : StaticString = #function,</span></span></span><br><span class="line"><span class="function"><span class="params">        line : UInt = #line</span></span></span><br><span class="line"><span class="function"><span class="params">    )</span></span> &#123;</span><br><span class="line">        <span class="type">LXFLog</span>(message, type: .warning, file : file, function: function, line: line)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">info</span>&lt;T&gt;<span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="number">_</span> message : T,</span></span></span><br><span class="line"><span class="function"><span class="params">        file : StaticString = #file,</span></span></span><br><span class="line"><span class="function"><span class="params">        function : StaticString = #function,</span></span></span><br><span class="line"><span class="function"><span class="params">        line : UInt = #line</span></span></span><br><span class="line"><span class="function"><span class="params">    )</span></span> &#123;</span><br><span class="line">        <span class="type">LXFLog</span>(message, type: .info, file : file, function: function, line: line)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">debug</span>&lt;T&gt;<span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="number">_</span> message : T,</span></span></span><br><span class="line"><span class="function"><span class="params">        file : StaticString = #file,</span></span></span><br><span class="line"><span class="function"><span class="params">        function : StaticString = #function,</span></span></span><br><span class="line"><span class="function"><span class="params">        line : UInt = #line</span></span></span><br><span class="line"><span class="function"><span class="params">    )</span></span> &#123;</span><br><span class="line">        <span class="type">LXFLog</span>(message, type: .debug, file : file, function: function, line: line)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MARK:- è‡ªå®šä¹‰æ‰“å°æ–¹æ³•</span></span><br><span class="line"><span class="comment">// target -&gt; Build Settings æœç´¢ Other Swift Flags</span></span><br><span class="line"><span class="comment">// è®¾ç½®Debug æ·»åŠ  -D DEBUG</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">LXFLog</span>&lt;T&gt;<span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="number">_</span> message : T,</span></span></span><br><span class="line"><span class="function"><span class="params">    type: LogType,</span></span></span><br><span class="line"><span class="function"><span class="params">    file : StaticString = #file,</span></span></span><br><span class="line"><span class="function"><span class="params">    function : StaticString = #function,</span></span></span><br><span class="line"><span class="function"><span class="params">    line : UInt = #line</span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span> &#123;</span><br><span class="line">    #<span class="keyword">if</span> <span class="type">DEBUG</span></span><br><span class="line">    <span class="keyword">let</span> time = <span class="type">Logger</span>.logDateFormatter.string(from: <span class="type">Date</span>())</span><br><span class="line">    <span class="keyword">let</span> fileName = (file.description <span class="keyword">as</span> <span class="type">NSString</span>).lastPathComponent</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"\(time) \(type.rawValue) \(fileName):(\(line))-\(message)"</span>)</span><br><span class="line">    #endif</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨åŠæ‰“å°ç»“æœï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">log.debug(<span class="string">"models count -- \(models.count)"</span>)</span><br><span class="line">log.warning(<span class="string">"models count -- \(models.count)"</span>)</span><br><span class="line">log.info(<span class="string">"models count -- \(models.count)"</span>)</span><br><span class="line">log.error(<span class="string">"models count -- \(models.count)"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">ğŸ’š DEBUG XXXViewController.swift:(79)-models count -- 10</span></span><br><span class="line"><span class="comment">ğŸ’› WARNING XXXViewController.swift:(80)-models count -- 10</span></span><br><span class="line"><span class="comment">ğŸ’™ INFO XXXViewController.swift:(81)-models count -- 10</span></span><br><span class="line"><span class="comment">â¤ï¸ ERROR XXXViewController.swift:(82)-models count -- 10</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p><code>OC</code> å’Œ <code>Swift</code> çš„é¢„å¤„ç†å®å¯¹åº”è¡¨</p><table><thead><tr><th>OC</th><th>Swift</th><th></th></tr></thead><tbody><tr><td>__FILE__</td><td>#file</td><td>æ‰“å°å½“å‰æ–‡ä»¶è·¯å¾„</td></tr><tr><td>__LINE__</td><td>#line</td><td>æ‰“å°å½“å‰è¡Œå·ï¼Œæ•´æ•°</td></tr><tr><td>__FUNCTION__</td><td>#function</td><td>æ‰“å°å½“å‰å‡½æ•°æˆ–æ–¹æ³•</td></tr></tbody></table><p>ä½†æ˜¯åœ¨ <code>Dart</code> ä¸­å¹¶æ²¡æœ‰æä¾›è¿™äº›åŠŸèƒ½ï¼Œä½†æ˜¯è¿™ä¸ªåŠŸèƒ½å¯¹æˆ‘ä»¬æ¥è¯´ç¡®å®åˆéå¸¸éœ€è¦ï¼Œé‚£æœ‰ä»€ä¹ˆåŠæ³•å®ç°å®ƒå‘¢ï¼Ÿ</p><center><br>  <span style="font-size:300px; text-alignment:center">ğŸ¤”</span><br></center><p>æˆ‘ä»¬å›æƒ³åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ˜¯ä¸æ˜¯å‘ç°åªè¦ä¸€ä¸å°å¿ƒæŠ›å¼‚å¸¸ï¼Œå°±å¯ä»¥çœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹çš„æ‰“å°å†…å®¹ï¼Œè€Œä¸”è¿˜èƒ½æ¸…æ¥šçš„çŸ¥é“å¼‚å¸¸æ˜¯åœ¨å“ªä¸ªæ–‡ä»¶å’Œå“ªä¸€è¡Œçš„ä»£ç é€ æˆçš„ã€‚</p><p><img src= "/img/loading.gif" data-src="/images/2020/06/Flutter-æ‰“å°å¥½ç”¨çš„Debugæ—¥å¿—/æŠ›å¼‚å¸¸.png" alt=""></p><blockquote><p>æ‰€ä»¥å¦‚æœæˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨å‡½æ•°æ—¶æ‹¿åˆ°å½“å‰è°ƒç”¨å †æ ˆï¼Œå°±å¯ä»¥å–åˆ°ä¸€ç³»åˆ—æƒ³è¦çš„æ•°æ®ã€‚</p></blockquote><h2 id="äºŒã€å®è·µ"><a href="#äºŒã€å®è·µ" class="headerlink" title="äºŒã€å®è·µ"></a>äºŒã€å®è·µ</h2><p>åœ¨ <code>dart:core</code> ä¸­æä¾›äº† <code>å †æ ˆè·Ÿè¸ª(StackTrace)</code>ï¼Œå¯ä»¥é€šè¿‡ <code>StackTrace.current</code> å–åˆ°å½“å‰çš„å †æ ˆä¿¡æ¯ï¼Œæ‰“å°å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¼šå‘ç°è¿™ä¸å¥½æ‹¿åˆ°æˆ‘ä»¬æƒ³è¦çš„ä¿¡æ¯ã€‚</p><p><img src= "/img/loading.gif" data-src="/images/2020/06/Flutter-æ‰“å°å¥½ç”¨çš„Debugæ—¥å¿—/StackTrace.png" alt=""></p><p>è¿™é‡Œæˆ‘ç”¨åˆ°äº†å®˜æ–¹å¼€å‘çš„ä¸€ä¸ªåŒ… <a href="https://pub.dev/packages/stack_trace" target="_blank" rel="noopener">stack_trace</a>ï¼Œå®ƒå¯ä»¥å°†å †æ ˆä¿¡æ¯å˜å¾—æ›´å¤šäººæ€§åŒ–ï¼Œå¹¶æ–¹ä¾¿æˆ‘ä»¬æŸ¥çœ‹å †æ ˆä¿¡æ¯å’Œè·å–æƒ³è¦çš„æ•°æ®ã€‚</p><p><strong>ps: <code>stack_trace</code> åœ¨ <code>Flutter</code> ç¯å¢ƒä¸‹ç›´æ¥å¯¼åŒ…å³å¯ä½¿ç”¨ï¼Œè€Œåœ¨çº¯ <code>Dart</code> ä¸‹éœ€è¦å°†å…¶æ·»åŠ ä¸ºä¾èµ–äº<code>pubspec.yaml</code>ä¸­ã€‚</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="attr">stack_trace:</span> <span class="string">^1.9.3</span></span><br></pre></td></tr></table></figure><p>é‚£ä¸‹é¢æˆ‘ä»¬æ¥è¯•è¯• <a href="https://pub.dev/packages/stack_trace" target="_blank" rel="noopener">stack_trace</a> çš„å¨åŠ›å§<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:stack_trace/stack_trace.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°† StackTrace å¯¹è±¡è½¬æ¢æˆ Chain å¯¹è±¡</span></span><br><span class="line"><span class="comment">// å½“ç„¶ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨ Chain.current();</span></span><br><span class="line"><span class="comment">// final chain = Chain.current();</span></span><br><span class="line"><span class="keyword">final</span> chain = Chain.forTrace(StackTrace.current);</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(chain);</span><br></pre></td></tr></table></figure></p><p>æ‰“å°å†…å®¹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">flutter: package:flutter_test1/main.dart <span class="number">79</span>:<span class="number">17</span>       _MyHomePageState.test_print</span><br><span class="line">package:flutter_test1/main.dart <span class="number">38</span>:<span class="number">5</span>                 _MyHomePageState._incrementCounter</span><br><span class="line">package:flutter/src/material/ink_well.dart <span class="number">779</span>:<span class="number">19</span>    _InkResponseState._handleTap</span><br><span class="line">package:flutter/src/material/ink_well.dart <span class="number">862</span>:<span class="number">36</span>    _InkResponseState.build.&lt;fn&gt;</span><br><span class="line">package:flutter/src/gestures/recognizer.dart <span class="number">182</span>:<span class="number">24</span>  GestureRecognizer.invokeCallback</span><br><span class="line">package:flutter/src/gestures/tap.dart <span class="number">504</span>:<span class="number">11</span>         TapGestureRecognizer.handleTapUp</span><br><span class="line">package:flutter/src/gestures/tap.dart <span class="number">282</span>:<span class="number">5</span>          BaseTapGestureRecognizer._checkUp</span><br><span class="line">package:flutter/src/gestures/tap.dart <span class="number">254</span>:<span class="number">7</span>          BaseTapGestureRecognizer.acceptGesture</span><br><span class="line">package:flutter/src/gestures/arena.dart <span class="number">156</span>:<span class="number">27</span>       GestureArenaManager.sweep</span><br><span class="line">package:flutter/src/gestures/binding.dart <span class="number">222</span>:<span class="number">20</span>     GestureBinding.handleEvent</span><br><span class="line">package:flutter/src/gestures/binding.dart <span class="number">198</span>:<span class="number">22</span>     GestureBinding.dispatchEvent</span><br><span class="line">package:flutter/src/gestures/binding.dart <span class="number">156</span>:<span class="number">7</span>      GestureBinding._handle&lt;â€¦&gt;</span><br></pre></td></tr></table></figure><p>å·¥å…·ä»£ç é›å½¢ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:stack_trace/stack_trace.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°† StackTrace å¯¹è±¡è½¬æ¢æˆ Chain å¯¹è±¡</span></span><br><span class="line"><span class="comment">// å½“ç„¶ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨ Chain.current();</span></span><br><span class="line"><span class="keyword">final</span> chain = Chain.forTrace(StackTrace.current);</span><br><span class="line"><span class="comment">// æ‹¿å‡ºå…¶ä¸­ä¸€æ¡ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">final</span> frames = chain.toTrace().frames;</span><br><span class="line"><span class="keyword">final</span> frame = frames[<span class="number">1</span>];</span><br><span class="line"><span class="comment">// æ‰“å°</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"æ‰€åœ¨æ–‡ä»¶ï¼š<span class="subst">$&#123;frame.uri&#125;</span> æ‰€åœ¨è¡Œ <span class="subst">$&#123;frame.line&#125;</span> æ‰€åœ¨åˆ— <span class="subst">$&#123;frame.column&#125;</span>"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°ç»“æœ</span></span><br><span class="line"><span class="comment">// flutter: æ‰€åœ¨æ–‡ä»¶ï¼špackage:flutterlog/main.dart æ‰€åœ¨è¡Œ 55 æ‰€åœ¨åˆ— 23</span></span><br></pre></td></tr></table></figure><p><code>Frame</code> ç±»çš„å±æ€§</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// <span class="markdown">A single stack frame. Each frame points to a precise location in Dart code.</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Frame</span> </span>&#123;</span><br><span class="line">  <span class="comment">/// <span class="markdown">The URI of the file in which the code is located.</span></span></span><br><span class="line">  <span class="comment">///</span></span><br><span class="line">  <span class="comment">/// <span class="markdown">This URI will usually have the scheme <span class="code">`dart`</span>, <span class="code">`file`</span>, <span class="code">`http`</span>, or <span class="code">`https`</span>.</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">Uri</span> uri;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="markdown">The line number on which the code location is located.</span></span></span><br><span class="line">  <span class="comment">///</span></span><br><span class="line">  <span class="comment">/// <span class="markdown">This can be null, indicating that the line number is unknown or</span></span></span><br><span class="line">  <span class="comment">/// <span class="markdown">unimportant.</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int</span> line;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/// <span class="markdown">The name of the member in which the code location occurs.</span></span></span><br><span class="line">  <span class="comment">///</span></span><br><span class="line">  <span class="comment">/// <span class="markdown">Anonymous closures are represented as <span class="code">`&lt;fn&gt;`</span> in this member string.</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> member;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>uri</code> : è·å–ä»£ç æ‰€åœ¨æ–‡ä»¶çš„è·¯å¾„</li><li><code>line</code> : è·å–ä»£ç æ‰€åœ¨è¡Œ</li><li><code>member</code> : è·å–æ‰€åœ¨æ–¹æ³•</li></ul><p>æ‰“å°çœ‹ä¸€ä¸‹ :</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// uri</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"<span class="subst">$&#123;frame.uri.toString()&#125;</span>"</span>);  <span class="comment">// package:flutter_test1/main.dart</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// member</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"<span class="subst">$&#123;frame.member&#125;</span>"</span>); <span class="comment">// _MyHomePageState.scheduleAsync.&lt;fn&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// line</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"<span class="subst">$&#123;frame.line&#125;</span>"</span>); <span class="comment">// 97</span></span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€å‘ˆä¸Šä»£ç "><a href="#ä¸‰ã€å‘ˆä¸Šä»£ç " class="headerlink" title="ä¸‰ã€å‘ˆä¸Šä»£ç "></a>ä¸‰ã€å‘ˆä¸Šä»£ç </h2><p>ä¸‹é¢æˆ‘åšäº†ä¸€ç‚¹å°è£…ï¼Œç›´æ¥æ‹¿èµ°å³å¯ä½¿ç”¨ï¼Œå®Œæ•´çš„ä»£ç å’Œç¤ºä¾‹è¯·åˆ°GitHubä¸Š<a href="https://github.com/LinXunFeng/flutter_log" target="_blank" rel="noopener">ã€æŸ¥çœ‹ã€‘</a>ã€‚</p><p>ä»£ç ï¼š<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// log.dart</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> FLogMode &#123;</span><br><span class="line">  debug,    <span class="comment">// ğŸ’š DEBUG</span></span><br><span class="line">  warning,  <span class="comment">// ğŸ’› WARNING</span></span><br><span class="line">  info,     <span class="comment">// ğŸ’™ INFO</span></span><br><span class="line">  error,    <span class="comment">// â¤ï¸ ERROR</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> FLog(<span class="built_in">dynamic</span> msg, &#123; FLogMode mode = FLogMode.debug &#125;) &#123;</span><br><span class="line">  <span class="keyword">if</span> (kReleaseMode) &#123; <span class="comment">// releaseæ¨¡å¼ä¸æ‰“å°</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> chain = Chain.current(); <span class="comment">// Chain.forTrace(StackTrace.current);</span></span><br><span class="line">  <span class="comment">// å°† core å’Œ flutter åŒ…çš„å †æ ˆåˆèµ·æ¥ï¼ˆå³ç›¸å…³æ•°æ®åªå‰©å…¶ä¸­ä¸€æ¡ï¼‰</span></span><br><span class="line">  chain = chain.foldFrames((frame) =&gt; frame.isCore || frame.package == <span class="string">"flutter"</span>);</span><br><span class="line">  <span class="comment">// å–å‡ºæ‰€æœ‰ä¿¡æ¯å¸§</span></span><br><span class="line">  <span class="keyword">final</span> frames = chain.toTrace().frames;</span><br><span class="line">  <span class="comment">// æ‰¾åˆ°å½“å‰å‡½æ•°çš„ä¿¡æ¯å¸§</span></span><br><span class="line">  <span class="keyword">final</span> idx = frames.indexWhere((element) =&gt; element.member == <span class="string">"FLog"</span>);</span><br><span class="line">  <span class="keyword">if</span> (idx == <span class="number">-1</span> || idx+<span class="number">1</span> &gt;= frames.length) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è°ƒç”¨å½“å‰å‡½æ•°çš„å‡½æ•°ä¿¡æ¯å¸§</span></span><br><span class="line">  <span class="keyword">final</span> frame = frames[idx+<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> modeStr = <span class="string">""</span>;</span><br><span class="line">  <span class="keyword">switch</span>(mode) &#123;</span><br><span class="line">    <span class="keyword">case</span> FLogMode.debug:</span><br><span class="line">      modeStr = <span class="string">"ğŸ’š DEBUG"</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> FLogMode.warning:</span><br><span class="line">      modeStr = <span class="string">"ğŸ’› WARNING"</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> FLogMode.info:</span><br><span class="line">      modeStr = <span class="string">"ğŸ’™ INFO"</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> FLogMode.error:</span><br><span class="line">      modeStr = <span class="string">"â¤ï¸ ERROR"</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"<span class="subst">$modeStr</span> <span class="subst">$&#123;frame.uri.toString().split(<span class="string">"/"</span>).last&#125;</span>(<span class="subst">$&#123;frame.line&#125;</span>) - <span class="subst">$msg</span> "</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="å››ã€ä½¿ç”¨"><a href="#å››ã€ä½¿ç”¨" class="headerlink" title="å››ã€ä½¿ç”¨"></a>å››ã€ä½¿ç”¨</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›´æ¥ä½¿ç”¨FLog</span></span><br><span class="line">FLog(<span class="string">"flutter_log demo"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// modeï¼šæ‰“å°æ¨¡å¼ï¼ˆé»˜è®¤å€¼ä¸ºdebugï¼‰</span></span><br><span class="line">FLog(<span class="string">"flutter_log demo"</span>, mode: FLogMode.debug);</span><br><span class="line">FLog(<span class="string">"flutter_log demo"</span>, mode: FLogMode.warning);</span><br><span class="line">FLog(<span class="string">"flutter_log demo"</span>, mode: FLogMode.info);</span><br><span class="line">FLog(<span class="string">"flutter_log demo"</span>, mode: FLogMode.error);</span><br></pre></td></tr></table></figure><p>æ‰“å°æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src= "/img/loading.gif" data-src="/images/2020/06/Flutter-æ‰“å°å¥½ç”¨çš„Debugæ—¥å¿—/æ‰“å°æ•ˆæœ.png" alt=""></p>]]></content>
    
    
    <summary type="html">&lt;Excerpt in index | é¦–é¡µæ‘˜è¦&gt; 

&lt;p&gt;å¦‚æœæˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨å‡½æ•°æ—¶æ‹¿åˆ°å½“å‰è°ƒç”¨å †æ ˆï¼Œå°±å¯ä»¥å–åˆ°ä¸€ç³»åˆ—æƒ³è¦çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;+</summary>
    
    
    
    <category term="Share" scheme="http://linxunfeng.top/categories/Share/"/>
    
    
    <category term="Dart" scheme="http://linxunfeng.top/tags/Dart/"/>
    
    <category term="Flutter" scheme="http://linxunfeng.top/tags/Flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter - è§£å†³æ··åˆå¼€å‘iOSè„šæœ¬æ‰“åŒ…é‡åˆ°çš„é—®é¢˜</title>
    <link href="http://linxunfeng.top/2020/08/12/Flutter/Flutter%20-%20%E8%A7%A3%E5%86%B3%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91iOS%E8%84%9A%E6%9C%AC%E6%89%93%E5%8C%85%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <id>http://linxunfeng.top/2020/08/12/Flutter/Flutter%20-%20%E8%A7%A3%E5%86%B3%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91iOS%E8%84%9A%E6%9C%AC%E6%89%93%E5%8C%85%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/</id>
    <published>2020-08-12T00:00:00.000Z</published>
    <updated>2020-08-22T14:18:43.876Z</updated>
    
    <content type="html"><![CDATA[<Excerpt in index | é¦–é¡µæ‘˜è¦> <p>ä½¿ç”¨Xcodeæ‰‹åŠ¨æ‰“åŒ…æ˜¯æ­£å¸¸çš„ï¼Œä½†æ˜¯ä½¿ç”¨è„šæœ¬æ‰“åŒ…ä¼šæŠ¥é”™</p><p>+<a id="more"></a></p><The rest of contents | ä½™ä¸‹å…¨æ–‡><p>ä½¿ç”¨ <code>Xcode</code> æ‰‹åŠ¨æ‰“åŒ…æ˜¯æ­£å¸¸çš„ï¼Œä½†æ˜¯ä½¿ç”¨è„šæœ¬æ‰“åŒ…ä¼šæŠ¥é”™ï¼Œé”™è¯¯å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">The following build commands failed:</span><br><span class="line">PhaseScriptExecution [CP-User]\ Run\ Flutter\ Build\ Script .../Script-C3A097A8FE12FF5F875B057C.sh</span><br><span class="line"></span><br><span class="line">flutter build ios --release</span><br><span class="line">then re-run Archive from Xcode.</span><br><span class="line">Command PhaseScriptExecution failed with a nonzero exit code</span><br></pre></td></tr></table></figure><h2 id="å®šä½é”™è¯¯"><a href="#å®šä½é”™è¯¯" class="headerlink" title="å®šä½é”™è¯¯"></a>å®šä½é”™è¯¯</h2><p><img src= "/img/loading.gif" data-src="/images/2020/08/Flutter-è§£å†³æ··åˆå¼€å‘iOSè„šæœ¬æ‰“åŒ…é‡åˆ°çš„é—®é¢˜/01.png" alt=""></p><p>åˆ° <code>Flutter</code> ç¯å¢ƒç›®å½•ä¸‹ï¼ŒæŒ‰å›¾ä¸Šæ‰€ç¤ºåœ°å€æ‰¾åˆ° <code>xcode_backend.sh</code>ï¼Œä¹Ÿå¯ä»¥ç›´æ¥çœ‹ <a href="https://github.com/flutter/flutter/blob/bcc42901ad6bb3ec644be225b5f9cd998852e0ef/packages/flutter_tools/bin/xcode_backend.sh#L90-L101" target="_blank" rel="noopener">å®˜æ–¹è„šæœ¬é“¾æ¥</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Archive builds (ACTION=install) should always run <span class="keyword">in</span> release mode.</span></span><br><span class="line">if [[ "$ACTION" == "install" &amp;&amp; "$build_mode" != "release" ]]; then</span><br><span class="line">  EchoError "========================================================================"</span><br><span class="line">  EchoError "ERROR: Flutter archive builds must be run in Release mode."</span><br><span class="line">  EchoError ""</span><br><span class="line">  EchoError "To correct, ensure FLUTTER_BUILD_MODE is set to release or run:"</span><br><span class="line">  EchoError "flutter build ios --release"</span><br><span class="line">  EchoError ""</span><br><span class="line">  EchoError "then re-run Archive from Xcode."</span><br><span class="line">  EchoError "========================================================================"</span><br><span class="line">  exit -1</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>å¯ä»¥çœ‹åˆ°ï¼Œå®˜æ–¹è„šæœ¬çš„è¯´æ˜é‡Œé¢ç»™å‡ºä¸¤ä¸ªè§£å†³æ–¹æ¡ˆ</p><blockquote><p>æ–¹æ¡ˆä¸€ï¼šç›´æ¥è®¾ç½® <code>FLUTTER_BUILD_MODE</code> ä¸º <code>release</code></p><p>æ–¹æ¡ˆäºŒï¼šå…ˆè¿è¡Œ <code>flutter build ios --release</code> ï¼Œå†ä½¿ç”¨ <code>Xcode</code> å»æ‰“åŒ…</p></blockquote><p>è¿™é‡Œæˆ‘ä»¬æ˜¯ç”¨ <code>Jenkins</code> è„šæœ¬è¿›è¡Œæ‰“åŒ…ï¼Œæ‰€ä»¥æ–¹æ¡ˆäºŒä¸é€‚ç”¨ï¼Œæ–¹æ¡ˆä¸€æ›´åŠ æ–¹ä¾¿äº›</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> è®¾ç½®Flutterçš„ç¼–è¯‘æ¨¡å¼ä¸ºrelease</span></span><br><span class="line">export FLUTTER_BUILD_MODE=release</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ‰§è¡ŒåŸæœ‰é¡¹ç›®çš„æ‰“åŒ…è„šæœ¬</span></span><br><span class="line">./script/build_iOS.sh</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;Excerpt in index | é¦–é¡µæ‘˜è¦&gt; 

&lt;p&gt;ä½¿ç”¨Xcodeæ‰‹åŠ¨æ‰“åŒ…æ˜¯æ­£å¸¸çš„ï¼Œä½†æ˜¯ä½¿ç”¨è„šæœ¬æ‰“åŒ…ä¼šæŠ¥é”™&lt;/p&gt;
&lt;p&gt;+</summary>
    
    
    
    <category term="Flutter" scheme="http://linxunfeng.top/categories/Flutter/"/>
    
    
    <category term="Dart" scheme="http://linxunfeng.top/tags/Dart/"/>
    
    <category term="Flutter" scheme="http://linxunfeng.top/tags/Flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter - æ··åˆå¼€å‘</title>
    <link href="http://linxunfeng.top/2020/07/12/Flutter/Flutter%20-%20%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/"/>
    <id>http://linxunfeng.top/2020/07/12/Flutter/Flutter%20-%20%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/</id>
    <published>2020-07-12T00:00:00.000Z</published>
    <updated>2020-08-22T14:18:43.876Z</updated>
    
    <content type="html"><![CDATA[<Excerpt in index | é¦–é¡µæ‘˜è¦> <p>ç›®å‰å¤§å¤šæ•°å…¬å¸éƒ½æœ‰è‡ªå·±å¼€å‘å¤šå¹´çš„é¡¹ç›®ï¼Œä¸å¯èƒ½ç›´æ¥ç”¨ <code>Flutter</code> ä»å¤´å¼€å‘ä¸€å¥—ï¼Œé‚£æ ·ä¸å®ç°ï¼Œé™¤éæ˜¯å°é¡¹ç›®ï¼Œå› æ­¤åªèƒ½æ˜¯åœ¨åŸæœ‰çš„åŸºç¡€ä¸Šç”¨ <code>Flutter</code> æ¥å¼€å‘æ–°ä¸šåŠ¡æˆ–é‡æ„æ—§ä¸šåŠ¡ï¼Œè€Œè¿™é‡Œå°±éœ€è¦ç”¨åˆ° <code>Flutter</code> çš„ <code>æ··åˆå¼€å‘</code></p><p>+<a id="more"></a></p><The rest of contents | ä½™ä¸‹å…¨æ–‡><blockquote><p>ç›®å‰å¤§å¤šæ•°å…¬å¸éƒ½æœ‰è‡ªå·±å¼€å‘å¤šå¹´çš„é¡¹ç›®ï¼Œä¸å¯èƒ½ç›´æ¥ç”¨ <code>Flutter</code> ä»å¤´å¼€å‘ä¸€å¥—ï¼Œé‚£æ ·ä¸å®ç°ï¼Œé™¤éæ˜¯å°é¡¹ç›®ï¼Œå› æ­¤åªèƒ½æ˜¯åœ¨åŸæœ‰çš„åŸºç¡€ä¸Šç”¨ <code>Flutter</code> æ¥å¼€å‘æ–°ä¸šåŠ¡æˆ–é‡æ„æ—§ä¸šåŠ¡ï¼Œè€Œè¿™é‡Œå°±éœ€è¦ç”¨åˆ° <code>Flutter</code> çš„ <code>æ··åˆå¼€å‘</code></p></blockquote><h3 id="ä¸€ã€åˆ›å»ºFlutteræ¨¡å—"><a href="#ä¸€ã€åˆ›å»ºFlutteræ¨¡å—" class="headerlink" title="ä¸€ã€åˆ›å»ºFlutteræ¨¡å—"></a>ä¸€ã€åˆ›å»ºFlutteræ¨¡å—</h3><p>ä½¿ç”¨æ··åˆå¼€å‘å°±ä¸èƒ½åƒä¹‹å‰ä¸€æ ·ç›´æ¥ä¸Šæ¥å°±åˆ›å»ºä¸€ä¸ª <code>Flutter</code> é¡¹ç›®ï¼Œè€Œæ˜¯è¦ä½¿ç”¨ <code>Flutteræ¨¡æ¿</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> flutter_module_lxf å¯ä»¥éšä¾¿ä½ å‘½å</span></span><br><span class="line">flutter create --template module flutter_module_lxf</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> --template å¯ä»¥æ›¿æ¢ä¸º -t</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> flutter create -t module flutter_module_lxf</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºå‡ºæ¥çš„ <code>Flutter</code> æ¨¡å—ä¾ç„¶æ˜¯å¯ä»¥åƒä¹‹å‰åˆ›å»ºçš„<code>Flutteré¡¹ç›®</code> ä¸€æ ·æ‰“å¼€å’Œè¿è¡Œçš„ã€‚ </p><p>ç›®å½•ä¸‹æœ‰ä¹Ÿæœ‰ <code>ios</code> å’Œ <code>android</code> ç›®å½•ï¼Œåªä¸è¿‡å‰é¢åŠ äº†ä¸ªç‚¹ ï¼Œæˆäº†ç‚¹ç›®å½•ã€‚</p><p><img src= "/img/loading.gif" data-src="/images/2020/07/Flutter-æ··åˆå¼€å‘/æ··åˆå¼€å‘iOS01.png" alt=""></p><h2 id="äºŒã€iOS"><a href="#äºŒã€iOS" class="headerlink" title="äºŒã€iOS"></a>äºŒã€iOS</h2><h3 id="é›†æˆ"><a href="#é›†æˆ" class="headerlink" title="é›†æˆ"></a>é›†æˆ</h3><blockquote><p>é€šè¿‡ <code>Cocoapods</code> ï¼Œå°† <code>Flutter</code> æ¨¡å—ç¼–è¯‘æˆä¸€ä¸ªåº“ï¼Œå†åˆ°åŸç”Ÿé¡¹ç›®ä¸­è¿›è¡Œå¼•å…¥å’Œä½¿ç”¨å³å¯</p></blockquote><p>åœ¨ <code>Podfile</code> ä¸­æ·»åŠ ä¸¤è¡Œé…ç½®</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŒ‡å®šæˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ Flutter æ¨¡å—çš„è·¯å¾„</span></span><br><span class="line">flutter_application_path = <span class="string">'../flutter_module_lxf'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‹¼æ¥è„šæœ¬æ–‡ä»¶çš„è·¯å¾„: .ios/Flutter/podhelper.rb</span></span><br><span class="line">load File.join(flutter_application_path, <span class="string">'.ios'</span>, <span class="string">'Flutter'</span>, <span class="string">'podhelper.rb'</span>)</span><br></pre></td></tr></table></figure><p>åœ¨æ¯ä¸ªéœ€è¦å¼•ç”¨ <code>Flutter</code> çš„ <code>Target</code> ä¸‹ï¼Œéƒ½éœ€è¦æ·»åŠ ä¸€è¡Œé…ç½®</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">install_all_flutter_pods(flutter_application_path)</span><br></pre></td></tr></table></figure><p>æ·»åŠ åå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">flutter_application_path = <span class="string">'../flutter_module_lxf'</span></span><br><span class="line">load File.join(flutter_application_path, <span class="string">'.ios'</span>, <span class="string">'Flutter'</span>, <span class="string">'podhelper.rb'</span>)</span><br><span class="line"></span><br><span class="line">use_frameworks!</span><br><span class="line">target <span class="string">'LXFFlutterHybridDemo'</span> <span class="keyword">do</span></span><br><span class="line">  </span><br><span class="line">  install_all_flutter_pods(flutter_application_path)</span><br><span class="line">  </span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>æ·»åŠ å®Œæˆåï¼Œæ‰§è¡Œä¸€æ¬¡ <code>pod install</code></p><p>æ··åˆå¼€å‘æ··åˆå¼€å‘<img src= "/img/loading.gif" data-src="/images/2020/07/Flutter-æ··åˆå¼€å‘/æ··åˆå¼€å‘iOS02.png" alt=""></p><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><blockquote><p>ä¸¤ä¸ªæ­¥éª¤</p><ol><li>è·å– Flutterå¼•æ“ <code>FlutterEngine</code></li><li>é€šè¿‡ <code>FlutterEngine</code> åˆ›å»º <code>FlutterViewController</code></li></ol></blockquote><h4 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h4><p><code>AppDelegate</code> ç±»ä¸­å£°æ˜ä¸€ä¸ª <code>FlutterEngine</code> å˜é‡ï¼Œåœ¨ <code>didFinishLaunchingWithOptions</code> æ–¹æ³•ä¸­å¯åŠ¨ <code>Flutterå¼•æ“</code></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AppDelegate.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Flutter</span><br><span class="line"></span><br><span class="line"><span class="meta">@UIApplicationMain</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppDelegate</span>: <span class="title">UIResponder</span>, <span class="title">UIApplicationDelegate</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// åˆ›å»º Flutterå¼•æ“</span></span><br><span class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> flutterEngine = <span class="type">FlutterEngine</span>(name: <span class="string">"lxf"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(<span class="number">_</span> application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: <span class="keyword">Any</span>]?)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å¯åŠ¨ Flutterå¼•æ“</span></span><br><span class="line">        flutterEngine.run()</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> <code>ViewController</code> ä¸­æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»å¼¹å‡º <code>Flutteræ¨¡å—</code></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ViewController.swift</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> btn = <span class="type">UIButton</span>(type: .custom)</span><br><span class="line">  btn.frame = <span class="type">CGRect</span>(x: <span class="number">100</span>, y: <span class="number">200</span>, width: <span class="number">200</span>, height: <span class="number">44</span>)</span><br><span class="line">  btn.backgroundColor = .black</span><br><span class="line">  btn.addTarget(<span class="keyword">self</span>, action: #selector(showFlutterVc), <span class="keyword">for</span>: .touchUpInside)</span><br><span class="line">  btn.setTitle(<span class="string">"å¼¹å‡ºFlutteræ¨¡å—"</span>, <span class="keyword">for</span>: .normal)</span><br><span class="line">  <span class="keyword">self</span>.view.addSubview(btn)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@objc</span> <span class="function"><span class="keyword">func</span> <span class="title">showFlutterVc</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="comment">// åˆ›å»ºFlutterViewController</span></span><br><span class="line">  <span class="comment">// è¿™é‡Œçš„ engine å¯ä»¥ä¼  nilï¼ŒFlutterä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªå¼•æ“ï¼Œä½†æ˜¯æ€§èƒ½è¾ƒå·®</span></span><br><span class="line">  <span class="keyword">let</span> flutterVc = <span class="type">FlutterViewController</span>(engine: fetchFlutterEngine(), nibName: <span class="literal">nil</span>, bundle: <span class="literal">nil</span>)</span><br><span class="line">  <span class="keyword">self</span>.present(flutterVc, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fetchFlutterEngine</span><span class="params">()</span></span> -&gt; <span class="type">FlutterEngine</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="type">UIApplication</span>.shared.delegate <span class="keyword">as</span>! <span class="type">AppDelegate</span>).flutterEngine</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="/images/2020/07/Flutter-æ··åˆå¼€å‘/æ··åˆå¼€å‘iOS04.jpg" alt=""></p><p>å¦‚æœé‡åˆ°æŠ¥ <code>Command PhaseScriptExecution failed with a nonzero exit code</code> é”™è¯¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src= "/img/loading.gif" data-src="/images/2020/07/Flutter-æ··åˆå¼€å‘/æ··åˆå¼€å‘iOS03.png" alt=""></p><p>è¯·å…ˆç”¨ <code>Android Studio</code> æˆ– <code>VSCode</code> æ‰“å¼€ <code>Flutteræ¨¡å—</code> é¡¹ç›®å¹¶è¿è¡Œåˆ°iOSè®¾å¤‡ä¸Šï¼Œè®©å…¶å¸®æˆ‘ä»¬å¯¹iOSé¡¹ç›®è¿›è¡Œä¸€äº›åˆå§‹åŒ–é…ç½®ã€‚æˆåŠŸè¿è¡Œåå°±å¯ä»¥å…³é—­ <code>Flutteræ¨¡å—</code> é¡¹ç›®çš„è¿è¡Œäº†ï¼Œæ¥ç€å†ç”¨ <code>Xcode</code> æ‰“å¼€åŸç”Ÿé¡¹ç›®è¿è¡Œå³å¯ã€‚</p><h4 id="ä¿®æ”¹åˆå§‹è·¯ç”±"><a href="#ä¿®æ”¹åˆå§‹è·¯ç”±" class="headerlink" title="ä¿®æ”¹åˆå§‹è·¯ç”±"></a>ä¿®æ”¹åˆå§‹è·¯ç”±</h4><p>å®˜æ–¹æ–‡æ¡£é‡Œé¢æåˆ°ï¼Œä¿®æ”¹åˆå§‹è·¯ç”±ï¼Œéœ€è¦åœ¨ <code>Flutterå¼•æ“</code> åœ¨ <code>run</code> ä¹‹å‰ï¼Œé€šè¿‡ <code>invokeMethod</code> è°ƒç”¨ <code>setInitialRoute</code> æ–¹æ³•è¿›è¡Œè®¾ç½®ï¼Œä»£ç å¦‚ä¸‹</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¿®æ”¹åˆå§‹è·¯ç”±</span></span><br><span class="line">flutterEngine.navigationChannel.invokeMethod(<span class="string">"setInitialRoute"</span>, arguments: <span class="string">"/other"</span>)</span><br><span class="line"><span class="comment">// å¯åŠ¨ Flutterå¼•æ“</span></span><br><span class="line">flutterEngine.run()</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œæˆ‘å‘ç°è¿™æ ·å†™å¹¶æ²¡æœ‰èµ·ä»»ä½•ä½œç”¨ï¼Œåœ¨ <code>Flutter</code> çš„å®˜æ–¹ <code>issue</code> ä¸Šä¹Ÿæœ‰äººæåˆ°è¿™ä¸ªé—®é¢˜ï¼š <a href="https://github.com/flutter/flutter/issues/59895" target="_blank" rel="noopener">ã€setInitialRoute is broken for iOS add-to-app #59895ã€‘</a>ï¼Œç›®å‰åªèƒ½å®˜æ–¹è¿›è¡Œä¿®å¤å’Œè°ƒæ•´ <code>API</code></p><p>ä¸´æ—¶å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼å®ç°ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> flutterVc = <span class="type">FlutterViewController</span>(project: <span class="type">FlutterDartProject</span>(), nibName: <span class="literal">nil</span>, bundle: <span class="literal">nil</span>)</span><br><span class="line">flutterVc.setInitialRoute(<span class="string">"/other"</span>)</span><br><span class="line"><span class="keyword">self</span>.present(flutterVc, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure><p>è™½ç„¶è¿™ä¹ˆå†™å¯ä»¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œä½†æ˜¯ä¼šæœ‰æ˜æ˜¾çš„ç±»ä¼¼å¡é¡¿çš„ç°è±¡ï¼Œå› ä¸ºä½¿ç”¨è¿™ç§æ–¹å¼å»åˆ›å»º <code>FlutterViewController</code> ä¹‹å‰ï¼Œä¼šéšå¼åˆ›å»ºå’Œå¯åŠ¨ä¸€ä¸ª <code>FlutterEngine</code>ï¼Œè€Œæˆ‘ä»¬å¼¹å‡º <code>FlutterViewController</code> æ—¶ <code>FlutterEngine</code> è¿˜æ²¡åŠ è½½å®Œæ¯•ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šçœ‹åˆ°å…ˆå¼¹å‡ºäº†ä¸€ä¸ªé€æ˜çš„ç•Œé¢ï¼Œå†æ˜¾ç¤º <code>/other</code> è·¯ç”±å¯¹åº”çš„ç•Œé¢è§†å›¾ã€‚</p><h4 id="ä½¿ç”¨-FlutterAppDelegate"><a href="#ä½¿ç”¨-FlutterAppDelegate" class="headerlink" title="ä½¿ç”¨ FlutterAppDelegate"></a>ä½¿ç”¨ FlutterAppDelegate</h4><p>ä½¿ç”¨ <code>FlutterAppDelegate</code>è¿™ä¸ªä¸æ˜¯å¿…è¦çš„æ“ä½œï¼Œä½†æ˜¯å¦‚æœä½ æƒ³è®© <code>Flutteræ¨¡å—</code> ä¹Ÿèƒ½ä½¿ç”¨åŸç”Ÿçš„åŠŸèƒ½çš„è¯ï¼Œå»ºè®®ä½¿ç”¨</p><blockquote><p> åŸç”ŸåŠŸèƒ½</p><ul><li>å¤„ç† <code>openURL</code> çš„å›è°ƒ</li><li>åˆ—è¡¨è§†å›¾åœ¨ç‚¹å‡»çŠ¶æ€æ åæ»šåˆ°é¡¶éƒ¨</li></ul></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppDelegate</span>: <span class="title">FlutterAppDelegate</span></span></span><br></pre></td></tr></table></figure><p>æ›´å…·ä½“çš„ä½¿ç”¨ï¼Œè¯·é˜…è¯» <a href="https://flutter.dev/docs/development/add-to-app/ios/add-flutter-screen?tab=no-engine-vc-swift-tab#using-the-flutterappdelegate" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p><h2 id="ä¸‰ã€Android"><a href="#ä¸‰ã€Android" class="headerlink" title="ä¸‰ã€Android"></a>ä¸‰ã€Android</h2><p>ä¿®æ”¹å®‰å“é¡¹ç›® æ ¹ç›®å½•ä¸‹çš„ <code>settings.gradle</code> æ–‡ä»¶ </p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// settings.gradle</span></span><br><span class="line"></span><br><span class="line">include <span class="string">':app'</span>                                    <span class="comment">// assumed existing content</span></span><br><span class="line">setBinding(<span class="keyword">new</span> Binding([<span class="string">gradle:</span> <span class="keyword">this</span>]))                                <span class="comment">// new</span></span><br><span class="line">evaluate(<span class="keyword">new</span> File(                                                     <span class="comment">// new</span></span><br><span class="line">  settingsDir.parentFile,                                              <span class="comment">// new</span></span><br><span class="line">  <span class="comment">// è¿™é‡Œçš„ flutter_module_lxf è¯·ä¿®æ”¹ä¸ºä½ è‡ªå·±åˆ›å»ºçš„Flutteræ¨¡æ¿ç›®å½•åç§°</span></span><br><span class="line">  <span class="string">'flutter_module_lxf/.android/include_flutter.groovy'</span>                 <span class="comment">// new</span></span><br><span class="line">))</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="/images/2020/07/Flutter-æ··åˆå¼€å‘/æ··åˆå¼€å‘iOS09.png" alt=""></p><p>ä¿®æ”¹å®‰å“é¡¹ç›® <code>app</code> ç›®å½•ä¸‹çš„ <code>build.gradle</code> æ–‡ä»¶ </p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/build.gradle</span></span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">// é…ç½®flutterä¾èµ–</span></span><br><span class="line">  implementation project(<span class="string">':flutter'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœåœ¨ç¼–è¯‘çš„æ—¶å€™é‡åˆ°å¦‚ä¸‹é”™è¯¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Default interface methods are only supported starting with Android N (--min-api 24): void androidx.lifecycle.DefaultLifecycleObserver.onCreate(androidx.lifecycle.LifecycleOwner)</span><br></pre></td></tr></table></figure><p>è¯·ç¡®è®¤æ˜¯å¦æŒ‡å®šäº†ä½¿ç”¨ <code>Java 8</code> è¿›è¡Œç¼–è¯‘ <a href="https://flutter.dev/docs/development/add-to-app/android/project-setup#java-8-requirement" target="_blank" rel="noopener">ã€å®˜æ–¹æ–‡æ¡£ -  Java 8 requirementã€‘</a></p><p>ä¿®æ”¹å®‰å“é¡¹ç›®  <code>app</code> ç›®å½•ä¸‹çš„ <code>build.gradle</code> æ–‡ä»¶ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; app&#x2F;build.gradle</span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">...</span><br><span class="line">  compileOptions &#123;</span><br><span class="line">      sourceCompatibility 1.8</span><br><span class="line">      targetCompatibility 1.8</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="/images/2020/07/Flutter-æ··åˆå¼€å‘/æ··åˆå¼€å‘iOS08.png" alt=""></p><p>ä¿®æ”¹ <code>app/src/main/AndroidManifest.xml</code> æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// app/src/main/AndroidManifest.xml</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:name</span>=<span class="string">"io.flutter.embedding.android.FlutterActivity"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:theme</span>=<span class="string">"@style/AppTheme"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:configChanges</span>=<span class="string">"orientation|keyboardHidden|keyboard|screenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:hardwareAccelerated</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:windowSoftInputMode</span>=<span class="string">"adjustResize"</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="/images/2020/07/Flutter-æ··åˆå¼€å‘/æ··åˆå¼€å‘iOS10.png" alt=""></p><p>æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»å¼¹å‡º <code>Flutteræ¨¡å—</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--  activity_main.xml  --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/btn"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:textSize</span>=<span class="string">"20sp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">"å¼¹å‡ºFlutteræ¨¡å—"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">"#000000"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:textColor</span>=<span class="string">"#ffffff"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:gravity</span>=<span class="string">"center"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:onClick</span>=<span class="string">"btnClick"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MainActivity.java</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">btnClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">    startActivity(</span><br><span class="line">        FlutterActivity.createDefaultIntent(<span class="keyword">this</span>)</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å››ã€è°ƒè¯•ä¸çƒ­é‡è½½"><a href="#å››ã€è°ƒè¯•ä¸çƒ­é‡è½½" class="headerlink" title="å››ã€è°ƒè¯•ä¸çƒ­é‡è½½"></a>å››ã€è°ƒè¯•ä¸çƒ­é‡è½½</h2><blockquote><p>ç”±äºå½“å‰æˆ‘ä»¬æ˜¯ä½¿ç”¨åŸç”Ÿå¼€å‘å·¥å…·(å¦‚ï¼šXcode)æ¥è¿è¡Œé¡¹ç›®ï¼Œæ¯æ¬¡ä¿®æ”¹æˆ‘ä»¬çš„<br> <code>Flutteræ¨¡å—</code> çš„ä»£ç ï¼Œä¹Ÿå°±éœ€è¦é‡æ–°è¿è¡Œæ‰èƒ½çœ‹åˆ°æ•ˆæœï¼Œä¸åƒä¹‹å‰æŒ‰ä¸‹ <code>Cmd + s</code> å°±èƒ½è¿›è¡Œçƒ­é‡è½½ã€‚è¿™æ · <code>Flutteræ¨¡å—</code> çš„å¼€å‘æ•ˆç‡æå…¶ä½ä¸‹ï¼Œé‚£æœ‰æ²¡æœ‰åŠæ³•å¯ä»¥è®©æˆ‘ä»¬åƒä¹‹å‰å¼€å‘ <code>Flutter</code> é¡¹ç›®æ—¶é‚£æ ·è¿›è¡Œ <code>çƒ­é‡è½½</code> å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æœ‰çš„</p></blockquote><p><code>Flutter</code> å®˜æ–¹æä¾›äº† <code>flutter attach</code> ï¼Œä»¥è¾…åŠ©æˆ‘ä»¬å¼€å‘ï¼Œåˆ°ç»ˆç«¯ä¸‹æ‰§è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter attach</span><br></pre></td></tr></table></figure><p>å¦‚æœå½“å‰æœ‰å¤šä¸ªè®¾å¤‡ï¼Œä¼šæç¤ºæˆ‘ä»¬éœ€è¦æŒ‡å®š <code>attach</code> å“ªä¸ªè®¾å¤‡</p><p><img src= "/img/loading.gif" data-src="/images/2020/07/Flutter-æ··åˆå¼€å‘/æ··åˆå¼€å‘iOS05.png" alt=""></p><p>æŒ‰è¦æ±‚åŠ ä¸ŠæŒ‡å®šå‚æ•°å³å¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter attach -d FE305309-9E79-418D-BA3F-7EFECF2980BC</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="/images/2020/07/Flutter-æ··åˆå¼€å‘/æ··åˆå¼€å‘iOS06.png" alt=""></p><p>å¦‚å›¾ï¼Œè¿™æ ·å°±å…³è”ä¸Šäº†ï¼Œä½ åœ¨ <code>dart</code> æ–‡ä»¶é‡Œé¢å¯¹ç•Œé¢è¿›è¡Œä»»ä½•ä¿®æ”¹åï¼ŒæŒ‰ <code>r</code> è¿›è¡Œçƒ­é‡è½½ï¼ŒæŒ‰ <code>R</code> è¿›è¡Œçƒ­å¯åŠ¨ã€‚</p><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ <code>Android Studio</code>ï¼Œå¯ä»¥ç›´æ¥é€‰æ‹©å¯¹åº”çš„è®¾å¤‡åï¼Œç‚¹å‡»å³è¾¹çš„ <code>Flutter Attach</code> æŒ‰é’®ï¼Œæ‰§è¡ŒæˆåŠŸåå°±å¯ä»¥è·Ÿä¹‹å‰ä¸€æ ·æŒ‰ <code>Cmd + s</code> è¿›è¡Œçƒ­é‡è½½äº†ã€‚</p><p><img src= "/img/loading.gif" data-src="/images/2020/07/Flutter-æ··åˆå¼€å‘/æ··åˆå¼€å‘iOS07.png" alt=""></p><h2 id="äº”ã€èµ„æ–™"><a href="#äº”ã€èµ„æ–™" class="headerlink" title="äº”ã€èµ„æ–™"></a>äº”ã€èµ„æ–™</h2><ul><li><p>GitHub</p><p><a href="https://github.com/LinXunFeng/LXFFlutterHybridDemo" target="_blank" rel="noopener">LXFFlutterHybridDemo</a></p></li><li><p>å®˜æ–¹æ–‡æ¡£</p><p><a href="https://flutter.dev/docs/development/add-to-app" target="_blank" rel="noopener">add-to-app</a> | <a href="https://flutter.dev/docs/development/add-to-app/ios" target="_blank" rel="noopener">add-to-app/ios</a> | <a href="https://flutter.dev/docs/development/add-to-app/android" target="_blank" rel="noopener">add-to-app/android</a> |  <a href="https://flutter.dev/docs/development/add-to-app/debugging" target="_blank" rel="noopener">Debugging &amp; hot reload</a></p></li></ul>]]></content>
    
    
    <summary type="html">&lt;Excerpt in index | é¦–é¡µæ‘˜è¦&gt; 

&lt;p&gt;ç›®å‰å¤§å¤šæ•°å…¬å¸éƒ½æœ‰è‡ªå·±å¼€å‘å¤šå¹´çš„é¡¹ç›®ï¼Œä¸å¯èƒ½ç›´æ¥ç”¨ &lt;code&gt;Flutter&lt;/code&gt; ä»å¤´å¼€å‘ä¸€å¥—ï¼Œé‚£æ ·ä¸å®ç°ï¼Œé™¤éæ˜¯å°é¡¹ç›®ï¼Œå› æ­¤åªèƒ½æ˜¯åœ¨åŸæœ‰çš„åŸºç¡€ä¸Šç”¨ &lt;code&gt;Flutter&lt;/code&gt; æ¥å¼€å‘æ–°ä¸šåŠ¡æˆ–é‡æ„æ—§ä¸šåŠ¡ï¼Œè€Œè¿™é‡Œå°±éœ€è¦ç”¨åˆ° &lt;code&gt;Flutter&lt;/code&gt; çš„ &lt;code&gt;æ··åˆå¼€å‘&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;+</summary>
    
    
    
    <category term="Flutter" scheme="http://linxunfeng.top/categories/Flutter/"/>
    
    
    <category term="Dart" scheme="http://linxunfeng.top/tags/Dart/"/>
    
    <category term="Flutter" scheme="http://linxunfeng.top/tags/Flutter/"/>
    
  </entry>
  
  <entry>
    <title>Flutter - æ‰“å°å¥½ç”¨çš„Debugæ—¥å¿—</title>
    <link href="http://linxunfeng.top/2020/06/26/Flutter/Flutter%20-%20%E6%89%93%E5%8D%B0%E5%A5%BD%E7%94%A8%E7%9A%84Debug%E6%97%A5%E5%BF%97/"/>
    <id>http://linxunfeng.top/2020/06/26/Flutter/Flutter%20-%20%E6%89%93%E5%8D%B0%E5%A5%BD%E7%94%A8%E7%9A%84Debug%E6%97%A5%E5%BF%97/</id>
    <published>2020-06-26T00:35:00.000Z</published>
    <updated>2020-08-22T14:18:43.876Z</updated>
    
    <content type="html"><![CDATA[<Excerpt in index | é¦–é¡µæ‘˜è¦> <p>åš <code>iOS</code> å¼€å‘æ—¶è¿™ä¸ªåŠŸèƒ½å¾ˆå¸¸ç”¨ï¼Œ åœ¨ <code>OC</code> å’Œ <code>Swift</code> ä¸­éƒ½å¯ä»¥å¾ˆè½»æ¾å®ç°ï¼Œå› ä¸ºç³»ç»Ÿæœ¬æ¥å°±æä¾›äº†ç”¨äºæ—¥å¿—è¾“å‡ºçš„é¢„å¤„ç†å®ï¼Œåªè¦æˆ‘ä»¬æ‹¿æ¥æ‹¼æ¥å°±å¯ä»¥äº†ï¼Œä½†æ˜¯åœ¨ <code>Dart</code> ä¸­å¹¶ä¸æä¾›è¿™äº›ï¼Œé‚£æœ‰ä»€ä¹ˆåŠæ³•å®ç°å®ƒå‘¢ï¼Ÿ</p><p>+<a id="more"></a></p><The rest of contents | ä½™ä¸‹å…¨æ–‡><h2 id="ä¸€ã€æ€è€ƒ"><a href="#ä¸€ã€æ€è€ƒ" class="headerlink" title="ä¸€ã€æ€è€ƒ"></a>ä¸€ã€æ€è€ƒ</h2><p>åš <code>iOS</code> å¼€å‘æ—¶è¿™ä¸ªåŠŸèƒ½å¾ˆå¸¸ç”¨ï¼Œ åœ¨ <code>OC</code> å’Œ <code>Swift</code> ä¸­éƒ½å¯ä»¥å¾ˆè½»æ¾å®ç°ï¼Œå› ä¸ºç³»ç»Ÿæœ¬æ¥å°±æä¾›äº†ç”¨äºæ—¥å¿—è¾“å‡ºçš„é¢„å¤„ç†å®ï¼Œåªè¦æˆ‘ä»¬æ‹¿æ¥æ‹¼æ¥å°±å¯ä»¥äº†ï¼Œä½†æ˜¯åœ¨ <code>Dart</code> ä¸­å¹¶ä¸æä¾›è¿™äº›ï¼Œé‚£æœ‰ä»€ä¹ˆåŠæ³•å®ç°å®ƒå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å›æƒ³åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ˜¯ä¸æ˜¯å‘ç°åªè¦ä¸€ä¸å°å¿ƒæŠ›å¼‚å¸¸ï¼Œå°±å¯ä»¥çœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹çš„æ‰“å°å†…å®¹ï¼Œè€Œä¸”è¿˜èƒ½æ¸…æ¥šçš„çŸ¥é“å¼‚å¸¸æ˜¯åœ¨å“ªä¸ªæ–‡ä»¶å’Œå“ªä¸€è¡Œçš„ä»£ç é€ æˆçš„ã€‚</p><p><img src= "/img/loading.gif" data-src="/images/2020/06/Flutter-æ‰“å°å¥½ç”¨çš„Debugæ—¥å¿—/æŠ›å¼‚å¸¸.png" alt=""></p><blockquote><p>æ‰€ä»¥å¦‚æœæˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨å‡½æ•°æ—¶æ‹¿åˆ°å½“å‰è°ƒç”¨å †æ ˆï¼Œå°±å¯ä»¥å–åˆ°ä¸€ç³»åˆ—æƒ³è¦çš„æ•°æ®ã€‚</p></blockquote><h2 id="äºŒã€å®è·µ"><a href="#äºŒã€å®è·µ" class="headerlink" title="äºŒã€å®è·µ"></a>äºŒã€å®è·µ</h2><p>åœ¨ <code>dart:core</code> ä¸­æä¾›äº† <code>å †æ ˆè·Ÿè¸ª(StackTrace)</code>ï¼Œå¯ä»¥é€šè¿‡ <code>StackTrace.current</code> å–åˆ°å½“å‰çš„å †æ ˆä¿¡æ¯ï¼Œæ‰“å°å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¼šå‘ç°è¿™ä¸å¥½æ‹¿åˆ°æˆ‘ä»¬æƒ³è¦çš„ä¿¡æ¯ã€‚</p><p><img src= "/img/loading.gif" data-src="/images/2020/06/Flutter-æ‰“å°å¥½ç”¨çš„Debugæ—¥å¿—/StackTrace.png" alt=""></p><p>è¿™é‡Œæˆ‘ç”¨åˆ°äº†å®˜æ–¹å¼€å‘çš„ä¸€ä¸ªåŒ… <a href="https://pub.dev/packages/stack_trace" target="_blank" rel="noopener">stack_trace</a>ï¼Œå®ƒå¯ä»¥å°†å †æ ˆä¿¡æ¯å˜å¾—æ›´å¤šäººæ€§åŒ–ï¼Œå¹¶æ–¹ä¾¿æˆ‘ä»¬æŸ¥çœ‹å †æ ˆä¿¡æ¯å’Œè·å–æƒ³è¦çš„æ•°æ®ã€‚</p><p><strong>ps: <code>stack_trace</code> åœ¨ <code>Flutter</code> ç¯å¢ƒä¸‹ç›´æ¥å¯¼åŒ…å³å¯ä½¿ç”¨ï¼Œè€Œåœ¨çº¯ <code>Dart</code> ä¸‹éœ€è¦å°†å…¶æ·»åŠ ä¸ºä¾èµ–äº<code>pubspec.yaml</code>ä¸­ã€‚</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="attr">stack_trace:</span> <span class="string">^1.9.3</span></span><br></pre></td></tr></table></figure><p>é‚£ä¸‹é¢æˆ‘ä»¬æ¥è¯•è¯• <a href="https://pub.dev/packages/stack_trace" target="_blank" rel="noopener">stack_trace</a> çš„å¨åŠ›å§<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:stack_trace/stack_trace.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°† StackTrace å¯¹è±¡è½¬æ¢æˆ Chain å¯¹è±¡</span></span><br><span class="line"><span class="comment">// å½“ç„¶ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨ Chain.current();</span></span><br><span class="line"><span class="keyword">final</span> chain = Chain.forTrace(StackTrace.current);</span><br><span class="line"><span class="comment">// æ‹¿å‡ºå…¶ä¸­ä¸€æ¡ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">final</span> frames = chain.toTrace().frames;</span><br><span class="line"><span class="keyword">final</span> frame = frames[<span class="number">1</span>];</span><br><span class="line"><span class="comment">// æ‰“å°</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">"æ‰€åœ¨æ–‡ä»¶ï¼š<span class="subst">$&#123;frame.uri&#125;</span> æ‰€åœ¨è¡Œ <span class="subst">$&#123;frame.line&#125;</span> æ‰€åœ¨åˆ— <span class="subst">$&#123;frame.column&#125;</span>"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°ç»“æœ</span></span><br><span class="line"><span class="comment">// flutter: æ‰€åœ¨æ–‡ä»¶ï¼špackage:flutterlog/main.dart æ‰€åœ¨è¡Œ 55 æ‰€åœ¨åˆ— 23</span></span><br></pre></td></tr></table></figure></p><h2 id="ä¸‰ã€å‘ˆä¸Šä»£ç "><a href="#ä¸‰ã€å‘ˆä¸Šä»£ç " class="headerlink" title="ä¸‰ã€å‘ˆä¸Šä»£ç "></a>ä¸‰ã€å‘ˆä¸Šä»£ç </h2><p>ä¸‹é¢æˆ‘åšäº†ä¸€ç‚¹å°è£…ï¼Œç›´æ¥æ‹¿èµ°å³å¯ä½¿ç”¨ï¼Œæ‰“å°æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>å®Œæ•´çš„ä»£ç å’Œç¤ºä¾‹è¯·åˆ°GitHubä¸Š<a href="https://github.com/LinXunFeng/flutter_log" target="_blank" rel="noopener">ã€æŸ¥çœ‹ã€‘</a>ã€‚</p><p><img src= "/img/loading.gif" data-src="/images/2020/06/Flutter-æ‰“å°å¥½ç”¨çš„Debugæ—¥å¿—/æ‰“å°æ•ˆæœ.png" alt=""></p><p>ä»£ç ï¼š<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// log.dart</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> FLogMode &#123;</span><br><span class="line">  debug,    <span class="comment">// ğŸ’š DEBUG</span></span><br><span class="line">  warning,  <span class="comment">// ğŸ’› WARNING</span></span><br><span class="line">  info,     <span class="comment">// ğŸ’™ INFO</span></span><br><span class="line">  error,    <span class="comment">// â¤ï¸ ERROR</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> FLog(<span class="built_in">dynamic</span> msg, &#123; FLogMode mode = FLogMode.debug &#125;) &#123;</span><br><span class="line">  <span class="keyword">if</span> (kReleaseMode) &#123; <span class="comment">// releaseæ¨¡å¼ä¸æ‰“å°</span></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> chain = Chain.current(); <span class="comment">// Chain.forTrace(StackTrace.current);</span></span><br><span class="line">  <span class="comment">// å°† core å’Œ flutter åŒ…çš„å †æ ˆåˆèµ·æ¥ï¼ˆå³ç›¸å…³æ•°æ®åªå‰©å…¶ä¸­ä¸€æ¡ï¼‰</span></span><br><span class="line">  chain = chain.foldFrames((frame) =&gt; frame.isCore || frame.package == <span class="string">"flutter"</span>);</span><br><span class="line">  <span class="comment">// å–å‡ºæ‰€æœ‰ä¿¡æ¯å¸§</span></span><br><span class="line">  <span class="keyword">final</span> frames = chain.toTrace().frames;</span><br><span class="line">  <span class="comment">// æ‰¾åˆ°å½“å‰å‡½æ•°çš„ä¿¡æ¯å¸§</span></span><br><span class="line">  <span class="keyword">final</span> idx = frames.indexWhere((element) =&gt; element.member == <span class="string">"FLog"</span>);</span><br><span class="line">  <span class="keyword">if</span> (idx == <span class="number">-1</span> || idx+<span class="number">1</span> &gt;= frames.length) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è°ƒç”¨å½“å‰å‡½æ•°çš„å‡½æ•°ä¿¡æ¯å¸§</span></span><br><span class="line">  <span class="keyword">final</span> frame = frames[idx+<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> modeStr = <span class="string">""</span>;</span><br><span class="line">  <span class="keyword">switch</span>(mode) &#123;</span><br><span class="line">    <span class="keyword">case</span> FLogMode.debug:</span><br><span class="line">      modeStr = <span class="string">"ğŸ’š DEBUG"</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> FLogMode.warning:</span><br><span class="line">      modeStr = <span class="string">"ğŸ’› WARNING"</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> FLogMode.info:</span><br><span class="line">      modeStr = <span class="string">"ğŸ’™ INFO"</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> FLogMode.error:</span><br><span class="line">      modeStr = <span class="string">"â¤ï¸ ERROR"</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"<span class="subst">$modeStr</span> <span class="subst">$&#123;frame.uri.toString().split(<span class="string">"/"</span>).last&#125;</span>(<span class="subst">$&#123;frame.line&#125;</span>) - <span class="subst">$msg</span> "</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    
    <summary type="html">&lt;Excerpt in index | é¦–é¡µæ‘˜è¦&gt; 

&lt;p&gt;åš &lt;code&gt;iOS&lt;/code&gt; å¼€å‘æ—¶è¿™ä¸ªåŠŸèƒ½å¾ˆå¸¸ç”¨ï¼Œ åœ¨ &lt;code&gt;OC&lt;/code&gt; å’Œ &lt;code&gt;Swift&lt;/code&gt; ä¸­éƒ½å¯ä»¥å¾ˆè½»æ¾å®ç°ï¼Œå› ä¸ºç³»ç»Ÿæœ¬æ¥å°±æä¾›äº†ç”¨äºæ—¥å¿—è¾“å‡ºçš„é¢„å¤„ç†å®ï¼Œåªè¦æˆ‘ä»¬æ‹¿æ¥æ‹¼æ¥å°±å¯ä»¥äº†ï¼Œä½†æ˜¯åœ¨ &lt;code&gt;Dart&lt;/code&gt; ä¸­å¹¶ä¸æä¾›è¿™äº›ï¼Œé‚£æœ‰ä»€ä¹ˆåŠæ³•å®ç°å®ƒå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;+</summary>
    
    
    
    <category term="Flutter" scheme="http://linxunfeng.top/categories/Flutter/"/>
    
    
    <category term="Dart" scheme="http://linxunfeng.top/tags/Dart/"/>
    
    <category term="Flutter" scheme="http://linxunfeng.top/tags/Flutter/"/>
    
  </entry>
  
  <entry>
    <title>Dart - æŠ½è±¡ç±»çš„å®ä¾‹åŒ–</title>
    <link href="http://linxunfeng.top/2020/06/07/Flutter/Dart-%E6%8A%BD%E8%B1%A1%E7%B1%BB%E7%9A%84%E5%AE%9E%E4%BE%8B%E5%8C%96/"/>
    <id>http://linxunfeng.top/2020/06/07/Flutter/Dart-%E6%8A%BD%E8%B1%A1%E7%B1%BB%E7%9A%84%E5%AE%9E%E4%BE%8B%E5%8C%96/</id>
    <published>2020-06-07T11:27:00.000Z</published>
    <updated>2020-08-22T14:18:43.876Z</updated>
    
    <content type="html"><![CDATA[<Excerpt in index | é¦–é¡µæ‘˜è¦> <p>æŠ½è±¡ç±»ä¸èƒ½ç”¨äºåˆ›å»ºå®ä¾‹ï¼Œä½†æ˜¯æœ‰æ²¡æœ‰å‘ç°ï¼Œ<code>Dart</code> æä¾›çš„ <code>Map</code> å’Œ <code>List</code> å°±æ˜¯æŠ½è±¡ç±»ï¼Œå´å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒä»¬åˆ›å»ºå‡ºä¸€ä¸ªå®ä¾‹å¯¹è±¡</p><p>+<a id="more"></a></p><The rest of contents | ä½™ä¸‹å…¨æ–‡><h2 id="ä¸€ã€æŠ½è±¡ç±»çš„ä½¿ç”¨"><a href="#ä¸€ã€æŠ½è±¡ç±»çš„ä½¿ç”¨" class="headerlink" title="ä¸€ã€æŠ½è±¡ç±»çš„ä½¿ç”¨"></a>ä¸€ã€æŠ½è±¡ç±»çš„ä½¿ç”¨</h2><p><code>Dart</code> æŠ½è±¡ç±»å¯ä»¥åªå£°æ˜æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥æœ‰å…·ä½“çš„æ–¹æ³•å®ç°ï¼Œä½†æ˜¯ä¸èƒ½ç›´æ¥ç”¨æŠ½è±¡ç±»æ¥åˆ›å»ºå®ä¾‹ï¼Œåªèƒ½è¢«ç»§æ‰¿ä½¿ç”¨æˆ–è€…å……å½“æ¥å£ã€‚</p><p>å®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±» <code>Animal</code><br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ä»…å£°æ˜eatæ–¹æ³•</span></span><br><span class="line">  <span class="keyword">void</span> eat();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å£°æ˜æ–¹æ³•ï¼Œä¸”æœ‰å…·ä½“å®ç°</span></span><br><span class="line">  <span class="keyword">void</span> sleep() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"ç¡è§‰"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç»§æ‰¿ä½¿ç”¨</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> eat() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"å–µå–µåƒ"</span>);</span><br><span class="line">    sleep();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯ä»¥ä¸å®ç° sleep æ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å……å½“æ¥å£<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">implements</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> eat() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"åƒ"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¿…é¡»å®ç° sleep æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">void</span> sleep() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'ç¡'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>å®ä¾‹åŒ–<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> animal = Animal();</span><br><span class="line"><span class="comment">// æŠ½è±¡ç±»å®ä¾‹åŒ–ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="comment">// Error: The class 'Test' is abstract and can't be instantiated.</span></span><br></pre></td></tr></table></figure></p><blockquote><ul><li>æŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ–ã€‚</li><li>ç»§æ‰¿: å­ç±»æ¯”è¾ƒå®ç°æŠ½è±¡æ–¹æ³•ï¼Œå­ç±»å¯ä»¥ä¸é‡å†™æŠ½è±¡ç±»ä¸­å·²å®ç°çš„æ–¹æ³•ã€‚</li><li>æ¥å£: å¿…é¡»å®ç°æŠ½è±¡ç±»ä¸­å£°æ˜çš„æ‰€æœ‰æ–¹æ³•</li></ul></blockquote><h2 id="äºŒã€æŠ½è±¡ç±»çš„å®ä¾‹åŒ–"><a href="#äºŒã€æŠ½è±¡ç±»çš„å®ä¾‹åŒ–" class="headerlink" title="äºŒã€æŠ½è±¡ç±»çš„å®ä¾‹åŒ–"></a>äºŒã€æŠ½è±¡ç±»çš„å®ä¾‹åŒ–</h2><p>ä¸Šé¢æåˆ°äº†æŠ½è±¡ç±»ä¸èƒ½ç”¨äºåˆ›å»ºå®ä¾‹ï¼Œä½†æ˜¯æœ‰æ²¡æœ‰å‘ç°ï¼Œ<code>Dart</code> æä¾›çš„ <code>Map</code> å’Œ <code>List</code> å°±æ˜¯æŠ½è±¡ç±»ï¼Œå´å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒä»¬åˆ›å»ºå‡ºä¸€ä¸ªå®ä¾‹å¯¹è±¡<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> list = <span class="built_in">List</span>();</span><br><span class="line"><span class="keyword">final</span> dict = <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">dynamic</span>&gt;();</span><br></pre></td></tr></table></figure><br>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ <code>Map</code> çš„æºç ï¼š<br><img src= "/img/loading.gif" data-src="/images/2020/06/Dart-æŠ½è±¡ç±»çš„å®ä¾‹åŒ–/Mapæºç .png" alt="Mapæºç "></p><p><code>Map</code> çš„ç¡®æ˜¯æŠ½è±¡ç±»ï¼Œä¸è¿‡æ­¤æ—¶æˆ‘ä»¬ä¹Ÿæ³¨æ„åˆ°äº†ï¼Œåœ¨ <code>Map</code> è¿™ä¸ªæŠ½è±¡ç±»ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ªå·¥å‚æ„é€ æ–¹æ³•ï¼Œ<strong>è¿™å°±æ˜¯ä½¿æŠ½è±¡ç±»å¯å®ä¾‹åŒ–çš„å…³é”®æ‰€åœ¨ï¼Œå› ä¸ºå·¥å‚æ–¹æ³•å¯ä»¥è¿”å›ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œä½†è¿™ä¸ªå¯¹è±¡çš„ç±»å‹ä¸ä¸€å®šå°±æ˜¯å½“å‰ç±»!</strong></p><p>åœ¨è¿™ä¸ªåœ°æ–¹ï¼Œ<code>Map</code> çš„å·¥å‚æ–¹æ³•å¹¶æ²¡æœ‰å…·ä½“çš„å®ç°ï¼Œè€Œåªæ˜¯åœ¨å·¥å‚æ„é€ æ–¹æ³•å‰åŠ äº†ä¸€ä¸ªå…³é”®å­— <code>external</code>ã€‚<br><code>external</code> å…³é”®å­—å¯ä»¥è®©æ–¹æ³•çš„å£°æ˜ä¸å®ç°åˆ†ç¦»ï¼Œå³ å¯ä»¥ç”±å¤–éƒ¨æ¥å¸®æˆ‘ä»¬å®Œæˆå…·ä½“çš„æ–¹æ³•å®ç°ï¼Œé‚£å¤–éƒ¨å¦‚ä½•æ‰èƒ½å…³è”åˆ°è¯¥å£°æ˜çš„æ–¹æ³•å‘¢ï¼Ÿè¿™é‡Œå°±éœ€è¦ç”¨åˆ°æ³¨è§£ <code>@patch</code>ï¼Œä½¿å¤–éƒ¨çš„æ–¹æ³•å®ç°ä¸è¯¥å£°æ˜çš„æ–¹æ³•ç»‘å®š</p><blockquote><p><code>external</code> å¯ä»¥åˆ†ç¦»æ–¹æ³•çš„å£°æ˜ä¸å®ç°<br><code>@patch</code> å…³è”æŸä¸ªç±»ä¸­ç”¨ <code>external</code> ä¿®é¥°çš„æ–¹æ³•çš„å®ç°</p></blockquote><p>æ ¹æ®å¦‚ä¸‹è·¯å¾„å¯ä»¥æ‰¾åˆ° <code>Map</code> çš„å…·ä½“å®ç°æºç <br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// flutter/bin/cache/dart-sdk/lib/_internal/vm/lib/map_patch.dart</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@patch</span></span><br><span class="line"><span class="keyword">factory</span> <span class="built_in">Map</span>() =&gt; <span class="keyword">new</span> LinkedHashMap&lt;K, V&gt;();</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œä½¿ç”¨äº† <code>LinkedHashMap</code> æ¥å®ç° <code>Map</code> ã€‚</p><p>æˆ‘ä»¬å†å»çœ‹ä¸€ä¸‹ <code>LinkedHashMap</code> çš„å®ç°æºç ï¼Œè·¯å¾„å¦‚ä¸‹ï¼š<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// flutter/bin/cache/dart-sdk/lib/collection/linked_hash_map.dart</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">external</span> <span class="keyword">factory</span> LinkedHashMap(</span><br><span class="line">    &#123;<span class="built_in">bool</span> <span class="built_in">Function</span>(K, K)? equals,</span><br><span class="line">    <span class="built_in">int</span> <span class="built_in">Function</span>(K)? hashCode,</span><br><span class="line">    <span class="built_in">bool</span> <span class="built_in">Function</span>(<span class="built_in">dynamic</span>)? isValidKey&#125;);</span><br></pre></td></tr></table></figure><br>è¿™é‡Œæˆ‘ä»¬åˆå‘ç° <code>LinkedHashMap</code> ä¹Ÿä»…ä»…åªæ˜¯å£°æ˜ï¼Œæ‰¾åˆ°å…·ä½“å®ç°</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// flutter/bin/cache/dart-sdk/lib/_internal/vm/lib/collection_patch.dart</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@patch</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LinkedHashMap</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@patch</span></span><br><span class="line">  <span class="keyword">factory</span> LinkedHashMap(</span><br><span class="line">      &#123;<span class="built_in">bool</span> equals(K key1, K key2)?,</span><br><span class="line">      <span class="built_in">int</span> hashCode(K key)?,</span><br><span class="line">      <span class="built_in">bool</span> isValidKey(potentialKey)?&#125;) &#123;</span><br><span class="line">    <span class="keyword">if</span> (isValidKey == <span class="keyword">null</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (hashCode == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (equals == <span class="keyword">null</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> _InternalLinkedHashMap&lt;K, V&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        hashCode = _defaultHashCode;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (identical(identityHashCode, hashCode) &amp;&amp;</span><br><span class="line">            identical(identical, equals)) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> _CompactLinkedIdentityHashMap&lt;K, V&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">        equals ??= _defaultEquals;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      hashCode ??= _defaultHashCode;</span><br><span class="line">      equals ??= _defaultEquals;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> _CompactLinkedCustomHashMap&lt;K, V&gt;(equals, hashCode, isValidKey);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>LinkedHashMap</code>çš„å·¥å‚æ„é€ æ–¹æ³•è¿”å›çš„å®ä¾‹ç±»å‹æ˜¯ <code>_InternalLinkedHashMap</code> æˆ– <code>_CompactLinkedCustomHashMap</code> ï¼Œè¿™é‡Œæˆ‘ä»¬å†çœ‹ä¸€ä¸‹è¿™ä¸¤ä¸ªç±»çš„å®ç°æºç </p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// flutter/bin/cache/dart-sdk/lib/_internal/vm/lib/compact_hash.dart</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@pragma</span>(<span class="string">"vm:entry-point"</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_InternalLinkedHashMap</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">_HashVMBase</span></span></span><br><span class="line"><span class="class">    <span class="title">with</span></span></span><br><span class="line"><span class="class">        <span class="title">MapMixin</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt;,</span></span><br><span class="line"><span class="class">        <span class="title">_LinkedHashMapMixin</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt;,</span></span><br><span class="line"><span class="class">        <span class="title">_HashBase</span>,</span></span><br><span class="line"><span class="class">        <span class="title">_OperatorEqualsAndHashCode</span></span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">LinkedHashMap</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">  _InternalLinkedHashMap() &#123;</span><br><span class="line">    _index = <span class="keyword">new</span> Uint32List(_HashBase._INITIAL_INDEX_SIZE);</span><br><span class="line">    _hashMask = _HashBase._indexSizeToHashMask(_HashBase._INITIAL_INDEX_SIZE);</span><br><span class="line">    _data = <span class="keyword">new</span> <span class="built_in">List</span>.filled(_HashBase._INITIAL_INDEX_SIZE, <span class="keyword">null</span>);</span><br><span class="line">    _usedData = <span class="number">0</span>;</span><br><span class="line">    _deletedKeys = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_CompactLinkedIdentityHashMap</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">_HashFieldBase</span></span></span><br><span class="line"><span class="class">    <span class="title">with</span></span></span><br><span class="line"><span class="class">        <span class="title">MapMixin</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt;,</span></span><br><span class="line"><span class="class">        <span class="title">_LinkedHashMapMixin</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt;,</span></span><br><span class="line"><span class="class">        <span class="title">_HashBase</span>,</span></span><br><span class="line"><span class="class">        <span class="title">_IdenticalAndIdentityHashCode</span></span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">LinkedHashMap</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">  _CompactLinkedIdentityHashMap() : <span class="keyword">super</span>(_HashBase._INITIAL_INDEX_SIZE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_CompactLinkedCustomHashMap</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">_HashFieldBase</span></span></span><br><span class="line"><span class="class">    <span class="title">with</span> <span class="title">MapMixin</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt;, <span class="title">_LinkedHashMapMixin</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt;, <span class="title">_HashBase</span></span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">LinkedHashMap</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> _equality;</span><br><span class="line">  <span class="keyword">final</span> _hasher;</span><br><span class="line">  <span class="keyword">final</span> _validKey;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// TODO(koda): Ask gbracha why I cannot have fields _equals/_hashCode.</span></span><br><span class="line">  <span class="built_in">int</span> _hashCode(e) =&gt; _hasher(e);</span><br><span class="line">  <span class="built_in">bool</span> _equals(e1, e2) =&gt; _equality(e1, e2);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">bool</span> containsKey(<span class="built_in">Object</span>? o) =&gt; _validKey(o) ? <span class="keyword">super</span>.containsKey(o) : <span class="keyword">false</span>;</span><br><span class="line">  V? <span class="keyword">operator</span> [](<span class="built_in">Object</span>? o) =&gt; _validKey(o) ? <span class="keyword">super</span>[o] : <span class="keyword">null</span>;</span><br><span class="line">  V? remove(<span class="built_in">Object</span>? o) =&gt; _validKey(o) ? <span class="keyword">super</span>.remove(o) : <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">  _CompactLinkedCustomHashMap(<span class="keyword">this</span>._equality, <span class="keyword">this</span>._hasher, validKey)</span><br><span class="line">      : _validKey = (validKey != <span class="keyword">null</span>) ? validKey : <span class="keyword">new</span> _TypeTest&lt;K&gt;().test,</span><br><span class="line">        <span class="keyword">super</span>(_HashBase._INITIAL_INDEX_SIZE);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ƒä»¬éƒ½æ˜¯ä¸€ä¸ªæ™®é€šçš„ç±»ï¼Œæ²¡æœ‰å·¥å‚æ„é€ æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ <code>Map</code> ä¸­çš„ <code>external factory Map();</code> æœ€ç»ˆè¿”å›çš„æœ€ç»ˆå®ä¾‹ç±»å‹ä¸º <code>_InternalLinkedHashMap</code> æˆ– <code>_CompactLinkedCustomHashMap</code></p><p>æˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªç®€å•çš„éªŒè¯<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> map = <span class="built_in">Map</span>();</span><br><span class="line"><span class="built_in">print</span>(map.runtimeType);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°ç»“æœ</span></span><br><span class="line"><span class="comment">// _InternalLinkedHashMap&lt;dynamic, dynamic&gt;</span></span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬æ¥è¯•ç€æ¥å®ä¾‹åŒ–ä¸€ä¸ªæŠ½è±¡ç±»å§<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> eat();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> sleep() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"ç¡è§‰"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">factory</span> Animal() &#123;</span><br><span class="line">    <span class="keyword">return</span> Cat();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">implements</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">void</span> eat() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"åƒ"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> sleep() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'ç¡'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> animal = Animal();</span><br><span class="line"><span class="built_in">print</span>(animal.runtimeType); </span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°ç»“æœ: Cat</span></span><br></pre></td></tr></table></figure><p>å¯èƒ½ä¼šæœ‰åŒå­¦è¦é—®äº†ï¼Œè¿™é‡Œç”¨çš„æ˜¯æ¥å£çš„æ–¹å¼ï¼Œå¯ä»¥ç”¨ç»§æ‰¿çš„æ–¹å¼å—ï¼Ÿ<br><strong>å¾ˆé—æ†¾ä¸è¡Œï¼Œå› ä¸ºåœ¨æŠ½è±¡ç±»ä¸­å®šä¹‰äº†å·¥å‚æ„é€ æ–¹æ³•åï¼Œåœ¨å­ç±»ä¸­ä¸èƒ½å®šä¹‰é™¤å·¥å‚æ„é€ æ–¹æ³•å¤–çš„å…¶å®ƒæ„é€ æ–¹æ³•äº†ï¼Œä¼šæŠ¥é”™~</strong></p><p>æ€»ç»“ä¸€ä¸‹ï¼š</p><blockquote><p>æŠ½è±¡ç±»æ— æ³•ç›´æ¥åˆ›å»ºå®ä¾‹ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å®ç°å·¥å‚æ„é€ æ–¹æ³•æ¥é—´æ¥å®ç°æŠ½è±¡ç±»çš„å®ä¾‹åŒ–ï¼</p></blockquote><h2 id="ä¸‰ã€è¡¥å……"><a href="#ä¸‰ã€è¡¥å……" class="headerlink" title="ä¸‰ã€è¡¥å……"></a>ä¸‰ã€è¡¥å……</h2><p>é‚£é¥¶äº†è¿™ä¹ˆä¸€å¤§åœˆï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥åœ¨å£°æ˜çš„æ—¶å€™å°±ç»™å®ƒå®ç°äº†å‘¢ï¼ŸğŸ¤”<br>è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯ï¼š</p><blockquote><ul><li>å¤ç”¨åŒä¸€å¥—APIçš„å£°æ˜</li><li>å¯ä»¥é’ˆå¯¹ä¸åŒçš„å¹³å°åšä¸åŒçš„å®ç°</li></ul></blockquote><p>è€Œ <code>é’ˆå¯¹ä¸åŒçš„å¹³å°åšä¸åŒçš„å®ç°</code> è¿™ä¸€ç‚¹åœ¨ä¸‹æ–¹ç»™å‡ºçš„æºç ä¸­å¯ä»¥çœ‹å‡º</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// flutter/bin/cache/dart-sdk/lib/io/file_system_entity.dart</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">_FileSystemWatcher</span> </span>&#123;</span><br><span class="line">  <span class="keyword">external</span> <span class="keyword">static</span> Stream&lt;FileSystemEvent&gt; _watch(</span><br><span class="line">      <span class="built_in">String</span> path, <span class="built_in">int</span> events, <span class="built_in">bool</span> recursive);</span><br><span class="line">  <span class="keyword">external</span> <span class="keyword">static</span> <span class="built_in">bool</span> <span class="keyword">get</span> isSupported;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// flutter/bin/cache/dart-sdk/lib/_internal/vm/bin/file_patch.dart</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@patch</span></span><br><span class="line"><span class="keyword">static</span> Stream&lt;FileSystemEvent&gt; _watch(</span><br><span class="line">    <span class="built_in">String</span> path, <span class="built_in">int</span> events, <span class="built_in">bool</span> recursive) &#123;</span><br><span class="line">  <span class="keyword">if</span> (Platform.isLinux) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> _InotifyFileSystemWatcher(path, events, recursive)._stream;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (Platform.isWindows) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> _Win32FileSystemWatcher(path, events, recursive)._stream;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (Platform.isMacOS) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> _FSEventStreamFileSystemWatcher(path, events, recursive)</span><br><span class="line">        ._stream;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> FileSystemException(</span><br><span class="line">      <span class="string">"File system watching is not supported on this platform"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;Excerpt in index | é¦–é¡µæ‘˜è¦&gt; 

&lt;p&gt;æŠ½è±¡ç±»ä¸èƒ½ç”¨äºåˆ›å»ºå®ä¾‹ï¼Œä½†æ˜¯æœ‰æ²¡æœ‰å‘ç°ï¼Œ&lt;code&gt;Dart&lt;/code&gt; æä¾›çš„ &lt;code&gt;Map&lt;/code&gt; å’Œ &lt;code&gt;List&lt;/code&gt; å°±æ˜¯æŠ½è±¡ç±»ï¼Œå´å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒä»¬åˆ›å»ºå‡ºä¸€ä¸ªå®ä¾‹å¯¹è±¡&lt;/p&gt;
&lt;p&gt;+</summary>
    
    
    
    <category term="Flutter" scheme="http://linxunfeng.top/categories/Flutter/"/>
    
    
    <category term="Dart" scheme="http://linxunfeng.top/tags/Dart/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³SecurityEnvSDKä¸SGMainçš„å†²çªé—®é¢˜</title>
    <link href="http://linxunfeng.top/2020/03/14/%E8%A7%A3%E5%86%B3SecurityEnvSDK%E4%B8%8ESGMain%E7%9A%84%E5%86%B2%E7%AA%81%E9%97%AE%E9%A2%98/"/>
    <id>http://linxunfeng.top/2020/03/14/%E8%A7%A3%E5%86%B3SecurityEnvSDK%E4%B8%8ESGMain%E7%9A%84%E5%86%B2%E7%AA%81%E9%97%AE%E9%A2%98/</id>
    <published>2020-03-14T13:21:00.000Z</published>
    <updated>2020-08-22T14:18:43.876Z</updated>
    
    <content type="html"><![CDATA[<Excerpt in index | é¦–é¡µæ‘˜è¦> <p>æŠ¥é”™æ˜¯è¯´æœ‰é‡å¤ç±»ï¼Œè§£å†³çš„åŠæ³•æ¯”è¾ƒç®€å•ç²—æš´ï¼Œå°±æ˜¯æŠŠåœ¨Xcodeé‡Œå…¨æ–‡æœç´¢<br><code>-framework &quot;SecurityEnvSDK&quot;</code>ï¼Œæ¥ç€å…¨æ–‡æ›¿æ¢ä¸ºç©ºå­—ç¬¦ä¸²å°±å¯ä»¥äº†ã€‚</p><p>+<a id="more"></a></p><The rest of contents | ä½™ä¸‹å…¨æ–‡><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>åœ¨é›†æˆå‹ç›Ÿç»Ÿè®¡å’Œé˜¿é‡Œç™¾å·ä¹‹åé¡¹ç›®æŠ¥å¦‚ä¸‹é”™è¯¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">duplicate symbol '_OBJC_CLASS_$_tdvSFHFKeychainUtils' in:</span><br><span class="line">    /Users/.../Pods/UMCSecurityPlugins/thirdparties/SecurityEnvSDK.framework/SecurityEnvSDK(SecurityEnvSDK99999999.o)</span><br><span class="line">    /Users/.../é˜¿é‡Œç™¾å·/WXFrameworks/SGMain.framework/SGMain(SGMain99999999.o)</span><br><span class="line">duplicate symbol '_OBJC_METACLASS_$_tdvSFHFKeychainUtils' in:</span><br><span class="line">    /Users/.../Pods/UMCSecurityPlugins/thirdparties/SecurityEnvSDK.framework/SecurityEnvSDK(SecurityEnvSDK99999999.o)</span><br><span class="line">    /Users/.../é˜¿é‡Œç™¾å·/WXFrameworks/SGMain.framework/SGMain(SGMain99999999.o)</span><br><span class="line">duplicate symbol '_OBJC_CLASS_$_SGDataCollectionLock' in:</span><br><span class="line">    /Users/.../Pods/UMCSecurityPlugins/thirdparties/SecurityEnvSDK.framework/SecurityEnvSDK(SecurityEnvSDK99999999.o)</span><br><span class="line">    /Users/.../é˜¿é‡Œç™¾å·/WXFrameworks/SGMain.framework/SGMain(SGMain99999999.o)</span><br><span class="line">duplicate symbol '_OBJC_METACLASS_$_SGDataCollectionLock' in:</span><br><span class="line">    /Users/.../Pods/UMCSecurityPlugins/thirdparties/SecurityEnvSDK.framework/SecurityEnvSDK(SecurityEnvSDK99999999.o)</span><br><span class="line">    /Users/.../é˜¿é‡Œç™¾å·/WXFrameworks/SGMain.framework/SGMain(SGMain99999999.o)</span><br></pre></td></tr></table></figure><blockquote><p> æŠ¥é”™æ˜¯è¯´æœ‰é‡å¤ç±»ï¼Œè§£å†³çš„åŠæ³•æ¯”è¾ƒç®€å•ç²—æš´ï¼Œå°±æ˜¯æŠŠåœ¨Xcodeé‡Œå…¨æ–‡æœç´¢<br> <code>-framework &quot;SecurityEnvSDK&quot;</code>ï¼Œæ¥ç€å…¨æ–‡æ›¿æ¢ä¸ºç©ºå­—ç¬¦ä¸²å°±å¯ä»¥äº†ã€‚</p></blockquote><p>è™½ç„¶è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹å¼å¾ˆç®€å•ï¼Œä½†æ˜¯æ¯æ¬¡ <code>pod install</code> åéƒ½è¦åšä¸€éè¯¥æ“ä½œï¼Œè¿™å°±å¾ˆæ— è¯­äº† ã€‚</p><p>é‚£æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥è®©æˆ‘ä»¬ä¸ç”¨è‡ªå·±å»åšè¿™ä¸ªçƒ¦ççš„äº‹æƒ…å‘¢ï¼Ÿ</p><h2 id="æ”¹è¿›"><a href="#æ”¹è¿›" class="headerlink" title="æ”¹è¿›"></a>æ”¹è¿›</h2><ol><li><p>é¦–å…ˆè¦ææ¸…æ¥šï¼Œä¸Šé¢çš„æ“ä½œåŸç†æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿå…¶å®ƒå¾ˆç®€å•ï¼Œå°±æ˜¯å°†ä¸‹é¢è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸­ <code>OTHER_LDFLAGS</code> æ‰€åœ¨è¡Œçš„å†…å®¹é‡Œï¼ŒæŠŠ <code>-framework &quot;SecurityEnvSDK&quot;</code> ç½®ä¸ºç©ºå­—ç¬¦ä¸²ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Pods/Target Support Files/Pods-é¡¹ç›®å/Pods-é¡¹ç›®å.debug.xcconfig</span><br><span class="line">Pods/Target Support Files/Pods-é¡¹ç›®å/Pods-é¡¹ç›®å.release.xcconfig</span><br></pre></td></tr></table></figure></li><li><p>æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥è®©æˆ‘ä»¬åœ¨é€‚å½“çš„æ—¶å€™å»æ‰§è¡Œè¿™ä¸ªç½®ç©ºå­—ç¬¦ä¸²çš„æ“ä½œï¼Ÿ<br><code>Cocoapods</code> æä¾›äº†ä¸€ä¸ªå¾ˆå¥½ç”¨çš„ <code>Hook</code> å°±æ˜¯ <code>post_install</code>ï¼Œè¿™ä¸ªé’©å­çš„ä½œç”¨å°±æ˜¯æ–¹ä¾¿æˆ‘ä»¬åœ¨æ‰§è¡Œ <code>pod install</code> ä¹‹åå»åšä¸€äº›å…¶å®ƒé…ç½®ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ç”¨å®ƒæ¥æäº‹æƒ…ã€‚</p></li></ol><p><code>Podfile</code> æ–‡ä»¶ä¸­ä½¿ç”¨çš„æ˜¯ <code>ruby</code> è¯­è¨€ï¼Œ<code>ruby</code> æ‰§è¡Œç»ˆç«¯å‘½ä»¤çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">post_install do |installer|</span><br><span class="line"><span class="meta">  #</span><span class="bash"> <span class="built_in">command</span> = <span class="string">"echo 'hello world'"</span></span></span><br><span class="line">  command = "ç»ˆç«¯å‘½ä»¤"</span><br><span class="line">  system(command)</span><br><span class="line">end</span><br></pre></td></tr></table></figure><br>OKï¼Œç°åœ¨å¼€å§‹æäº‹ï¼</p><h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><ol><li>åœ¨é¡¹ç›®çš„ç›®å½•ï¼Œå³ä¸<code>Pods</code>å¹³çº§ç›®å½•ä¸­ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œåä¸º <code>fix.py</code></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ ...</span><br><span class="line">â”œâ”€â”€ Podfile</span><br><span class="line">â”œâ”€â”€ Podfile.lock</span><br><span class="line">â”œâ”€â”€ Pods</span><br><span class="line">â”‚   â”œâ”€â”€ ...</span><br><span class="line">â”‚   â””â”€â”€ ...</span><br><span class="line">â””â”€â”€ fix.py</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨ <code>fix.py</code> ä¸­ç²˜è´´å¦‚ä¸‹å†…å®¹<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> sys, os, getopt, codecs</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_current_file_name</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">"""è·å–å½“å‰æ–‡ä»¶åç§°"""</span></span><br><span class="line">    <span class="keyword">return</span> os.path.split(__file__)[<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">replace_all_str</span><span class="params">(file_path, for_str, to_str)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    å…¨æ–‡æœç´¢æ›¿æ¢æˆ–å•è¡Œæ›¿æ¢</span></span><br><span class="line"><span class="string">    :param file_path: æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="string">    :param for_str: è¦è¢«æ›¿æ¢çš„å†…å®¹</span></span><br><span class="line"><span class="string">    :param to_str: æ›¿æ¢ä¹‹åçš„å†…å®¹</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(file_path):</span><br><span class="line">        <span class="comment"># æ–‡ä»¶ä¸å­˜åœ¨</span></span><br><span class="line">        print(<span class="string">'æ–‡ä»¶ä¸å­˜åœ¨'</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    bak_file_path = file_path+<span class="string">".bak"</span></span><br><span class="line">    <span class="keyword">with</span> codecs.open(file_path, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f, codecs.open(bak_file_path, <span class="string">'w'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f_w:</span><br><span class="line">        lines = f.readlines()</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">            <span class="keyword">if</span> <span class="string">"OTHER_LDFLAGS"</span> <span class="keyword">in</span> line <span class="keyword">and</span> for_str <span class="keyword">in</span> line:</span><br><span class="line">                line = line.replace(for_str, to_str)</span><br><span class="line">            f_w.write(line)</span><br><span class="line"></span><br><span class="line">    os.remove(file_path)</span><br><span class="line">    os.rename(bak_file_path, file_path)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">throwParamError</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"è¯·æ­£ç¡®è¾“å…¥å‘½ä»¤ï¼š %s -p é¡¹ç›®åç§°"</span> % get_current_file_name())</span><br><span class="line">    sys.exit(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(argv)</span>:</span></span><br><span class="line">    project_name = <span class="string">""</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        opts, args = getopt.getopt(argv, <span class="string">"p:"</span>, [<span class="string">"project="</span>])</span><br><span class="line">    <span class="keyword">except</span> getopt.GetoptError:</span><br><span class="line">        throwParamError()</span><br><span class="line">    <span class="keyword">for</span> opt, arg <span class="keyword">in</span> opts:</span><br><span class="line">        <span class="comment"># print("opt -- ", opt)</span></span><br><span class="line">        <span class="comment"># print("arg -- ", arg)</span></span><br><span class="line">        <span class="keyword">if</span> opt <span class="keyword">in</span> (<span class="string">'-p'</span>, <span class="string">'--project'</span>):</span><br><span class="line">            project_name = arg</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> len(project_name):</span><br><span class="line">        throwParamError()</span><br><span class="line">    </span><br><span class="line">    path_str = <span class="string">"Pods/Target Support Files/Pods-%s/Pods-%s.%s.xcconfig"</span></span><br><span class="line">    xcconfig_debug_path = path_str % (project_name, project_name, <span class="string">"debug"</span>)</span><br><span class="line">    xcconfig_release_path = path_str % (project_name, project_name, <span class="string">"release"</span>)</span><br><span class="line">    <span class="comment"># print(xcconfig_debug_path)</span></span><br><span class="line">    <span class="comment"># print(xcconfig_release_path)</span></span><br><span class="line">    be_fixed_str = <span class="string">'-framework "SecurityEnvSDK"'</span></span><br><span class="line">    replace_all_str(xcconfig_debug_path,  be_fixed_str, <span class="string">''</span>)</span><br><span class="line">    replace_all_str(xcconfig_release_path,  be_fixed_str, <span class="string">''</span>)</span><br><span class="line">    print(<span class="string">"%s is fixed successfully"</span> %project_name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    main(sys.argv[<span class="number">1</span>:])</span><br></pre></td></tr></table></figure></li><li>æ‰“å¼€ <code>Podfile</code>ï¼Œåœ¨å†…å®¹æœ€åæ·»åŠ å¦‚ä¸‹å†…å®¹<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">post_install <span class="keyword">do</span> <span class="params">|installer|</span></span><br><span class="line">  <span class="comment"># è§£å†³SecurityEnvSDKä¸SGMainçš„å†²çªé—®é¢˜</span></span><br><span class="line">  command = <span class="string">"python fix.py -p é¡¹ç›®åç§°"</span></span><br><span class="line">  system(command)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></li><li>æ‰§è¡Œ<code>pod install</code></li></ol><p>å¥½äº†ï¼Œç°åœ¨å¼€å§‹å°±åˆå¯ä»¥ç»§ç»­æ„‰å¿«çš„æ¬ç –äº†~</p><h2 id="GitHub"><a href="#GitHub" class="headerlink" title="GitHub"></a>GitHub</h2><p>ç›¸å…³ä»£ç æ–‡ä»¶å¯ä»¥åˆ°è¿™é‡Œä¸‹è½½ï¼Œå¦‚æœè§‰å¾—ä¸é”™ï¼Œä¸å¦¨ç»™ä¸ª <code>Star</code> é¼“åŠ±ä¸€ä¸‹<br><a href="https://github.com/LinXunFeng/fix_confict_SecurityEnvSDK_SGMain" target="_blank" rel="noopener">https://github.com/LinXunFeng/fix_confict_SecurityEnvSDK_SGMain</a></p>]]></content>
    
    
    <summary type="html">&lt;Excerpt in index | é¦–é¡µæ‘˜è¦&gt; 

&lt;p&gt;æŠ¥é”™æ˜¯è¯´æœ‰é‡å¤ç±»ï¼Œè§£å†³çš„åŠæ³•æ¯”è¾ƒç®€å•ç²—æš´ï¼Œå°±æ˜¯æŠŠåœ¨Xcodeé‡Œå…¨æ–‡æœç´¢&lt;br&gt;&lt;code&gt;-framework &amp;quot;SecurityEnvSDK&amp;quot;&lt;/code&gt;ï¼Œæ¥ç€å…¨æ–‡æ›¿æ¢ä¸ºç©ºå­—ç¬¦ä¸²å°±å¯ä»¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;+</summary>
    
    
    
    <category term="iOS" scheme="http://linxunfeng.top/categories/iOS/"/>
    
    
    <category term="Cocoapods" scheme="http://linxunfeng.top/tags/Cocoapods/"/>
    
    <category term="iOS" scheme="http://linxunfeng.top/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³Transporterä¸€ç›´å¡æ­£åœ¨éªŒè¯çš„é—®é¢˜</title>
    <link href="http://linxunfeng.top/2020/03/12/%E8%A7%A3%E5%86%B3Transporter%E4%B8%80%E7%9B%B4%E5%8D%A1%E6%AD%A3%E5%9C%A8%E9%AA%8C%E8%AF%81%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <id>http://linxunfeng.top/2020/03/12/%E8%A7%A3%E5%86%B3Transporter%E4%B8%80%E7%9B%B4%E5%8D%A1%E6%AD%A3%E5%9C%A8%E9%AA%8C%E8%AF%81%E7%9A%84%E9%97%AE%E9%A2%98/</id>
    <published>2020-03-12T22:16:00.000Z</published>
    <updated>2020-08-22T14:18:43.876Z</updated>
    
    <content type="html"><![CDATA[<Excerpt in index | é¦–é¡µæ‘˜è¦> <p>è‹¹æœçš„ä¸Šä¼ åº”ç”¨å·¥å…· <code>Transporter</code> è™½ç„¶æŒºå¥½ç”¨ï¼Œä½†æ˜¯ä¼°è®¡ä¹Ÿä¸å°‘äººè·Ÿæˆ‘ä¸€æ ·é‡åˆ°è¿‡è¿™æ ·çš„é—®é¢˜ï¼Œå°±æ˜¯ä¸€ç›´å¡åœ¨ <code>æ­£åœ¨éªŒè¯</code>ï¼Œä¸é‡‡å–ç‚¹æªæ–½ä¼°è®¡èƒ½ä¸€ç›´å¡ä¸‹å»~</p><p>+<a id="more"></a></p><The rest of contents | ä½™ä¸‹å…¨æ–‡><blockquote><p>è‹¹æœçš„ä¸Šä¼ åº”ç”¨å·¥å…· <code>Transporter</code> è™½ç„¶æŒºå¥½ç”¨ï¼Œä½†æ˜¯ä¼°è®¡ä¹Ÿä¸å°‘äººè·Ÿæˆ‘ä¸€æ ·é‡åˆ°è¿‡è¿™æ ·çš„é—®é¢˜ï¼Œå°±æ˜¯ä¸€ç›´å¡åœ¨ <code>æ­£åœ¨éªŒè¯</code>ï¼Œä¸é‡‡å–ç‚¹æªæ–½ä¼°è®¡èƒ½ä¸€ç›´å¡ä¸‹å»~</p></blockquote><p><img src= "/img/loading.gif" data-src="/images/2020/03/è§£å†³Transporterä¸€ç›´å¡æ­£åœ¨éªŒè¯çš„é—®é¢˜/æ­£åœ¨éªŒè¯APP.jpg" alt="æ­£åœ¨éªŒè¯APP"></p><p>å…¶å®åŸå› å¾ˆç®€å•ï¼Œå°±æ˜¯ <code>/User/å½“å‰ç™»å½•ç”¨æˆ·/Library/Caches/com.apple.amp.itmstransporter</code> è¿™ä¸ªç›®å½•é‡Œçš„æ–‡ä»¶ä¸å…¨ï¼Œä¸€ç›´å¤„äºä¸‹è½½æ›´æ–°çš„çŠ¶æ€ã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><h3 id="æ–¹æ¡ˆä¸€"><a href="#æ–¹æ¡ˆä¸€" class="headerlink" title="æ–¹æ¡ˆä¸€"></a>æ–¹æ¡ˆä¸€</h3><p>ç§‘å­¦ä¸Šç½‘å‰æä¸‹ï¼Œåœ¨ç»ˆç«¯ä¸‹æ‰§è¡Œ  <code>Transporter</code> åŒ…å†…çš„ <code>iTMSTransporter</code>ï¼Œ<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Applications/Transporter.app/Contents/itms/bin/iTMSTransporter</span><br></pre></td></tr></table></figure><br>å› ä¸ºå›½å¤–æœåŠ¡å™¨ï¼ˆ<code>contentdelivery.itunes.apple.com:443</code>ï¼‰å¯¹æˆ‘ä»¬æ¥è¯´ä¼šå¾ˆæ…¢ï¼Œæ‰€ä»¥è¿™ä¸ªè¿‡ç¨‹æœ€å¥½å¼„ä¸‹ç§‘å­¦ç¯å¢ƒã€‚</p><p>ç›´åˆ°å‡ºç°è¿™ä¸ªå‘½ä»¤è¯´æ˜ç•Œé¢å°±å¯ä»¥äº†<br><img src= "/img/loading.gif" data-src="/images/2020/03/è§£å†³Transporterä¸€ç›´å¡æ­£åœ¨éªŒè¯çš„é—®é¢˜/iTMSTransporter.png" alt=""></p><h3 id="æ–¹æ¡ˆäºŒ"><a href="#æ–¹æ¡ˆäºŒ" class="headerlink" title="æ–¹æ¡ˆäºŒ"></a>æ–¹æ¡ˆäºŒ</h3><p>é€‚ç”¨äººç¾¤</p><ul><li>æ²¡æœ‰ç§‘å­¦ç¯å¢ƒ</li><li>é€Ÿåº¦è¦æ±‚é«˜çš„</li><li>æ¯”è¾ƒæ‡’çš„</li></ul><p>å¯ä»¥ä½¿ç”¨ <code>transporter_fix</code><br>GitHubåœ°å€ï¼š<a href="https://github.com/LinXunFeng/transporter_fix" target="_blank" rel="noopener">https://github.com/LinXunFeng/transporter_fix</a><br>æ‰§è¡Œæ–‡ä»¶ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/LinXunFeng/transporter_fix/releases" target="_blank" rel="noopener">ç‚¹æˆ‘ä¸‹è½½</a>ï¼Œä¸‹è½½ååŒå‡»è¿è¡Œå³å¯ã€‚</p><p><img src= "/img/loading.gif" data-src="/images/2020/03/è§£å†³Transporterä¸€ç›´å¡æ­£åœ¨éªŒè¯çš„é—®é¢˜/transporter_fix.png" alt=""></p><p>æ¯”è¾ƒæ‡’çš„æœ‹å‹çœ‹åˆ°è¿™å°±å¯ä»¥äº†ï¼Œè¦æ±‚é€Ÿåº¦å¿«çš„å°±ç»§ç»­å¾€ä¸‹çœ‹</p><p><strong>é‡ç‚¹</strong></p><ul><li><code>transporter_fix</code> é»˜è®¤æ˜¯ä» <code>github</code> ä¸Šä¸‹è½½ <code>com.apple.amp.itmstransporter.zip</code> åˆ°åŒç›®å½•çº§åˆ«çš„ <code>files</code> ç›®å½•ä¸‹ã€‚</li><li>å¦‚æœ <code>files</code> ç›®å½•ä¸‹å·²å­˜åœ¨ <code>com.apple.amp.itmstransporter.zip</code> ï¼Œåˆ™ä¸ä¼šé‡æ–°ä¸‹è½½ã€‚</li></ul><p>æ‰€ä»¥ï¼Œå¦‚æœå½“å‰æ­£å¸¸ç½‘ç»œå¯¹ <code>github</code> ä¸ç»™åŠ›ï¼Œå¯ä»¥åˆ°<a href="https://www.lanzous.com/b0aqkmhpg" target="_blank" rel="noopener">è¿™é‡Œ</a>ï¼Œæ‰¾ä¸ªç¦»å½“å‰æ—¥æœŸæœ€è¿‘çš„å‹ç¼©åŒ…ï¼Œä¸‹è½½ä¸‹æ¥åæ”¹åä¸º <code>com.apple.amp.itmstransporter.zip</code>ï¼Œå­˜æ”¾ <code>files</code> ç›®å½•ä¸‹å³å¯</p><p><img src= "/img/loading.gif" data-src="/images/2020/03/è§£å†³Transporterä¸€ç›´å¡æ­£åœ¨éªŒè¯çš„é—®é¢˜/itmstransporterå‹ç¼©åŒ…å­˜æ”¾ä½ç½®.png" alt=""></p>]]></content>
    
    
    <summary type="html">&lt;Excerpt in index | é¦–é¡µæ‘˜è¦&gt; 

&lt;p&gt;è‹¹æœçš„ä¸Šä¼ åº”ç”¨å·¥å…· &lt;code&gt;Transporter&lt;/code&gt; è™½ç„¶æŒºå¥½ç”¨ï¼Œä½†æ˜¯ä¼°è®¡ä¹Ÿä¸å°‘äººè·Ÿæˆ‘ä¸€æ ·é‡åˆ°è¿‡è¿™æ ·çš„é—®é¢˜ï¼Œå°±æ˜¯ä¸€ç›´å¡åœ¨ &lt;code&gt;æ­£åœ¨éªŒè¯&lt;/code&gt;ï¼Œä¸é‡‡å–ç‚¹æªæ–½ä¼°è®¡èƒ½ä¸€ç›´å¡ä¸‹å»~&lt;/p&gt;
&lt;p&gt;+</summary>
    
    
    
    <category term="iOS" scheme="http://linxunfeng.top/categories/iOS/"/>
    
    
    <category term="iOS" scheme="http://linxunfeng.top/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>FQ-Terminalä¸‹çš„ä»£ç†å·¥å…·ProxyChains-NG</title>
    <link href="http://linxunfeng.top/2019/01/01/Others/FQ-Terminal%E4%B8%8B%E7%9A%84%E4%BB%A3%E7%90%86%E5%B7%A5%E5%85%B7ProxyChains-NG/"/>
    <id>http://linxunfeng.top/2019/01/01/Others/FQ-Terminal%E4%B8%8B%E7%9A%84%E4%BB%A3%E7%90%86%E5%B7%A5%E5%85%B7ProxyChains-NG/</id>
    <published>2019-01-01T17:11:51.000Z</published>
    <updated>2020-08-22T14:18:43.876Z</updated>
    
    <content type="html"><![CDATA[<Excerpt in index | é¦–é¡µæ‘˜è¦> <p>æ˜¯ä¸æ˜¯ä½ ä¹Ÿé‡åˆ°è¿‡ï¼Œåœ¨ <code>Shadowsocks</code> ä½¿ç”¨ <code>å…¨å±€</code> æ¨¡å¼ä¸‹ï¼Œç»ˆç«¯ä¾æ—§æ— æ³• <code>ping</code> é€šè°·æ­Œï¼Ÿè¿™æ˜¯å› ä¸º <code>Shadowsocks</code> ä»…é’ˆå¯¹ä»£ç†åº”ç”¨è½¯ä»¶ï¼Œä½†æ˜¯ä¸€äº›ç»ˆç«¯ä¸‹æ‰§è¡Œçš„å‘½ä»¤æ˜¯æ— æ³•ä»£ç†çš„ã€‚æ‰€ä»¥æœ¬ç¯‡å°±æ¥ä»‹ç»ä¸€ä¸‹å¦‚ä½•ä½¿ä½ çš„ç»ˆç«¯ä¹Ÿèµ°ä»£ç†è¿›è¡Œè®¿é—®ã€‚  </p><a id="more"></a><The rest of contents | ä½™ä¸‹å…¨æ–‡><blockquote><p>æ˜¯ä¸æ˜¯ä½ ä¹Ÿé‡åˆ°è¿‡ï¼Œåœ¨ <code>Shadowsocks</code> ä½¿ç”¨ <code>å…¨å±€</code> æ¨¡å¼ä¸‹ï¼Œç»ˆç«¯ä¾æ—§æ— æ³• <code>ping</code> é€šè°·æ­Œï¼Ÿè¿™æ˜¯å› ä¸º <code>Shadowsocks</code> ä»…é’ˆå¯¹ä»£ç†åº”ç”¨è½¯ä»¶ï¼Œä½†æ˜¯ä¸€äº›ç»ˆç«¯ä¸‹æ‰§è¡Œçš„å‘½ä»¤æ˜¯æ— æ³•ä»£ç†çš„ã€‚æ‰€ä»¥æœ¬ç¯‡å°±æ¥ä»‹ç»ä¸€ä¸‹å¦‚ä½•ä½¿ä½ çš„ç»ˆç«¯ä¹Ÿèµ°ä»£ç†è¿›è¡Œè®¿é—®ã€‚</p></blockquote><h2 id="æ–¹æ¡ˆä¸€ï¼šç»ˆç«¯ä¸‹çš„all-proxy"><a href="#æ–¹æ¡ˆä¸€ï¼šç»ˆç«¯ä¸‹çš„all-proxy" class="headerlink" title="æ–¹æ¡ˆä¸€ï¼šç»ˆç«¯ä¸‹çš„all_proxy"></a>æ–¹æ¡ˆä¸€ï¼šç»ˆç«¯ä¸‹çš„all_proxy</h2><blockquote><p>è¿™é‡Œä»¥ <code>zshrc</code> + <code>Shadowsocks</code> ä¸ºä¾‹</p><ul><li><p>æ‰“å¼€ <code>Shadowsocks</code>ï¼Œæ¨¡å¼é€‰ä¸º <code>PACè‡ªåŠ¨æ¨¡å¼</code> æˆ– <code>å…¨å±€æ¨¡å¼</code> </p></li><li><p>å¦‚æœä¸æ˜¯ä½¿ç”¨ <code>.zshrc</code> å°± ç¼–è¾‘ <code>~/.bashrc</code>ï¼Œä¸‹é¢çš„åŒç†</p></li></ul></blockquote><h3 id="1ã€æ‰“å¼€-zshrc"><a href="#1ã€æ‰“å¼€-zshrc" class="headerlink" title="1ã€æ‰“å¼€ .zshrc"></a>1ã€æ‰“å¼€ <code>.zshrc</code></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.zshrc</span><br></pre></td></tr></table></figure><h3 id="2ã€æ·»åŠ å‘½ä»¤"><a href="#2ã€æ·»åŠ å‘½ä»¤" class="headerlink" title="2ã€æ·»åŠ å‘½ä»¤"></a>2ã€æ·»åŠ å‘½ä»¤</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alias proxy='export all_proxy=socks5://127.0.0.1:1086'</span><br><span class="line">alias unproxy='unset all_proxy'</span><br></pre></td></tr></table></figure><h3 id="3ã€ä½¿ç”¨"><a href="#3ã€ä½¿ç”¨" class="headerlink" title="3ã€ä½¿ç”¨"></a>3ã€ä½¿ç”¨</h3><p>å…ˆåº”ç”¨ä¸€ä¸‹é…ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.zshrc</span><br></pre></td></tr></table></figure><p>ç»ˆç«¯ä¸‹æ•²å…¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxy</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±åº”ç”¨ä¸Šä»£ç†äº†ï¼Œä½¿ç”¨ <code>curl</code> è·å–ä¸€ä¸‹ <code>cip.cc</code> æ¥æŸ¥çœ‹å½“å‰æ‰€ä½¿ç”¨çš„ <code>ip</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl cip.cc</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸æƒ³ä½¿ç”¨ä»£ç†äº†ï¼Œå°±ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unproxy</span><br></pre></td></tr></table></figure><h3 id="4ã€æ€»ç»“"><a href="#4ã€æ€»ç»“" class="headerlink" title="4ã€æ€»ç»“"></a>4ã€æ€»ç»“</h3><p>è¿™ç§æ–¹å¼æˆ‘ä¸ªäººæ˜¯äº²æµ‹æ— æ•ˆçš„ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘äººå“é—®é¢˜ï¼Œè¿˜æ˜¯æˆ‘çš„ MAC æœ‰é—®é¢˜ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è¯•è¯•ã€‚</p><h2 id="æ–¹æ¡ˆäºŒï¼šProxyChains-NG"><a href="#æ–¹æ¡ˆäºŒï¼šProxyChains-NG" class="headerlink" title="æ–¹æ¡ˆäºŒï¼šProxyChains-NG"></a>æ–¹æ¡ˆäºŒï¼šProxyChains-NG</h2><p>proxychains-ngæ˜¯proxychainsçš„åŠ å¼ºç‰ˆï¼Œä¸»è¦æœ‰ä»¥ä¸‹åŠŸèƒ½å’Œä¸è¶³ï¼š</p><ul><li>æ”¯æŒhttp/https/socks4/socks5</li><li>æ”¯æŒè®¤è¯</li><li>è¿œç«¯dnsæŸ¥è¯¢</li><li>å¤šç§ä»£ç†æ¨¡å¼</li><li>ä¸æ”¯æŒudp/icmpè½¬å‘</li><li>å°‘éƒ¨åˆ†ç¨‹åºå’Œåœ¨åå°è¿è¡Œçš„å¯èƒ½æ— æ³•ä»£ç†</li></ul><p>è¯¦æƒ…å¯è§ <a href="https://github.com/rofl0r/proxychains-ng" target="_blank" rel="noopener">GitHubåœ°å€</a></p><h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><p>è¿™é‡Œä»¥ <code>MAC</code> + <code>homebrew</code> ä¸ºä¾‹ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…çš„è¯å¯ä»¥å‚è€ƒä¸‹æ–¹å‘½ä»¤ï¼Œè¯¦ç»†å¯è§å®˜ç½‘ <a href="https://brew.sh/index_zh-cn.html" target="_blank" rel="noopener">Homebrew</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å°†å‘½ä»¤ç²˜è´´è‡³ç»ˆç«¯å¹¶å›è½¦è¿›è¡Œå®‰è£…</span></span><br><span class="line">/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</span><br></pre></td></tr></table></figure><h3 id="å…³é—­SIP"><a href="#å…³é—­SIP" class="headerlink" title="å…³é—­SIP"></a>å…³é—­SIP</h3><p>macOS 10.11 åä¸‹ç”±äºå¼€å¯äº† SIPï¼ˆSystem Integrity Protectionï¼‰ ä¼šå¯¼è‡´å‘½ä»¤è¡Œä¸‹ proxychains-ng ä»£ç†çš„æ¨¡å¼å¤±æ•ˆï¼Œå¦‚æœä½ è¦ä½¿ç”¨ proxychains-ng è¿™ç§ç®€å•çš„æ–¹æ³•ï¼Œå°±éœ€è¦å…ˆå…³é—­ SIPã€‚</p><p>å…·ä½“çš„å…³é—­æ–¹æ³•å¦‚ä¸‹ï¼š</p><ul><li>éƒ¨åˆ†å…³é—­ SIP</li></ul><blockquote><p>é‡å¯Macï¼ŒæŒ‰ä½Optioné”®è¿›å…¥å¯åŠ¨ç›˜é€‰æ‹©æ¨¡å¼ï¼Œå†æŒ‰âŒ˜ + Rè¿›å…¥Recoveryæ¨¡å¼ã€‚<br>å®ç”¨å·¥å…·ï¼ˆUtilitiesï¼‰-&gt; ç»ˆç«¯ï¼ˆTerminalï¼‰ã€‚<br>è¾“å…¥å‘½ä»¤<code>csrutil enable --without debug</code>è¿è¡Œã€‚<br>é‡å¯è¿›å…¥ç³»ç»Ÿåï¼Œç»ˆç«¯é‡Œè¾“å…¥ csrutil statusï¼Œç»“æœä¸­å¦‚æœæœ‰ Debugging Restrictions: disabled åˆ™è¯´æ˜å…³é—­æˆåŠŸã€‚</p></blockquote><ul><li>å®Œå…¨å…³é—­ SIP</li></ul><blockquote><p>é‡å¯Macï¼ŒæŒ‰ä½Optioné”®è¿›å…¥å¯åŠ¨ç›˜é€‰æ‹©æ¨¡å¼ï¼Œå†æŒ‰âŒ˜ + Rè¿›å…¥Recoveryæ¨¡å¼ã€‚<br>å®ç”¨å·¥å…·ï¼ˆUtilitiesï¼‰-&gt; ç»ˆç«¯ï¼ˆTerminalï¼‰ã€‚<br>è¾“å…¥å‘½ä»¤<code>csrutil disable</code>è¿è¡Œã€‚<br>é‡å¯è¿›å…¥ç³»ç»Ÿåï¼Œç»ˆç«¯é‡Œè¾“å…¥ csrutil statusï¼Œç»“æœä¸­å¦‚æœæœ‰ System Integrity Protection status:disabled. åˆ™è¯´æ˜å…³é—­æˆåŠŸã€‚</p></blockquote><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install proxychains-ng</span><br></pre></td></tr></table></figure><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>ä½¿ç”¨ Homebrew å®‰è£…å®Œæˆåçš„é…ç½®æ–‡ä»¶è·¯å¾„ä¸º <code>/usr/local/etc/proxychains.conf</code></p><p>æ‰“å¼€å®ƒï¼Œæ‰¾åˆ° <code>[ProxyList]</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[ProxyList]</span><br><span class="line">socks5  127.0.0.1 1086</span><br></pre></td></tr></table></figure><p>proxychains-ngæ”¯æŒå¤šç§ä»£ç†æ¨¡å¼,é»˜è®¤æ˜¯é€‰æ‹© strict_chainã€‚</p><ul><li>dynamic_chain ï¼šåŠ¨æ€æ¨¡å¼,æŒ‰ç…§ä»£ç†åˆ—è¡¨é¡ºåºè‡ªåŠ¨é€‰å–å¯ç”¨ä»£ç†</li><li>strict_chain ï¼šä¸¥æ ¼æ¨¡å¼,ä¸¥æ ¼æŒ‰ç…§ä»£ç†åˆ—è¡¨é¡ºåºä½¿ç”¨ä»£ç†ï¼Œæ‰€æœ‰ä»£ç†å¿…é¡»å¯ç”¨</li><li>round_robin_chain ï¼šè½®è¯¢æ¨¡å¼ï¼Œè‡ªåŠ¨è·³è¿‡ä¸å¯ç”¨ä»£ç†</li><li>random_chain ï¼šéšæœºæ¨¡å¼,éšæœºä½¿ç”¨ä»£ç†</li></ul><p>ç»™proxychains4å¢åŠ ä¸€ä¸ªåˆ«åï¼Œåœ¨ ~/.zshrcæˆ–~/.bashrcæœ«å°¾åŠ å…¥å¦‚ä¸‹è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alias pc='proxychains4'</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å¯ä»¥ä½¿ç”¨ <code>pc</code> æ¥ æŒ‡ä»£ <code>proxychains4</code>ï¼Œç®€åŒ–è¾“å…¥ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pc curl cip.cc</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ ä½¿ç”¨ <code>iTerm</code> çš„è¯å¯ä»¥é…ç½®å¿«æ·é”®æ¥å®ç°å‰ç¼€è¡¥å…¨åŠŸèƒ½</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ iTerm -&gt; Preferences -&gt; Profiles -&gt; Keys ä¸­ï¼Œæ–°å»ºä¸€ä¸ªå¿«æ·é”®ï¼Œä¾‹å¦‚ âŒ¥ + p ï¼ŒAction é€‰æ‹© Send Hex Codeï¼Œé”®å€¼ä¸º 0x1 0x70 0x63 0x20 0xdï¼Œä¿å­˜ç”Ÿæ•ˆã€‚</span><br></pre></td></tr></table></figure><p>æ›´å¤šçš„Hex Codeå¯ä»¥åˆ° <a href="https://manytricks.com/keycodes/" target="_blank" rel="noopener">manytricks</a> ä¸ŠæŸ¥æ‰¾ã€‚</p><p>ä½¿ç”¨åœºæ™¯ï¼šæ•²äº†ä¸€é•¿ä¸²çš„å‘½ä»¤åæƒ³ä½¿ç”¨ä»£ç†åŠŸèƒ½æ—¶ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨å¿«æ·é”® <code>âŒ¥ + p</code> ï¼Œè¿™æ ·å°±ä¼šè‡ªåŠ¨åœ¨å‘½ä»¤çš„æœ€å‰é¢åŠ ä¸Š <code>pc</code> </p><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">proxychains4 curl cip.cc</span><br><span class="line"></span><br><span class="line">// å¦‚æœä½ è®¾ç½®äº†åˆ«åçš„è¯å¯ä»¥ä½¿ç”¨ pc æŒ‡ä»£ proxychains4</span><br><span class="line">pc curl cip.cc</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°è¿™å°±ä»£ç†ä¸Šäº†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">IP: xxx.xxx.xxx.xxx</span><br><span class="line">åœ°å€: ç¾å›½  åŠ åˆ©ç¦å°¼äºšå·  æ´›æ‰çŸ¶</span><br><span class="line">è¿è¥å•†: it7.net</span><br><span class="line"></span><br><span class="line">æ•°æ®äºŒ: ç¾å›½</span><br><span class="line"></span><br><span class="line">æ•°æ®ä¸‰: ç¾å›½åŠ åˆ©ç¦å°¼äºšæ´›æ‰çŸ¶</span><br><span class="line"></span><br><span class="line">URL: http:&#x2F;&#x2F;www.cip.cc&#x2F;xxx.xxx.xxx.xxx</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;Excerpt in index | é¦–é¡µæ‘˜è¦&gt; 

&lt;p&gt;æ˜¯ä¸æ˜¯ä½ ä¹Ÿé‡åˆ°è¿‡ï¼Œåœ¨ &lt;code&gt;Shadowsocks&lt;/code&gt; ä½¿ç”¨ &lt;code&gt;å…¨å±€&lt;/code&gt; æ¨¡å¼ä¸‹ï¼Œç»ˆç«¯ä¾æ—§æ— æ³• &lt;code&gt;ping&lt;/code&gt; é€šè°·æ­Œï¼Ÿè¿™æ˜¯å› ä¸º &lt;code&gt;Shadowsocks&lt;/code&gt; ä»…é’ˆå¯¹ä»£ç†åº”ç”¨è½¯ä»¶ï¼Œä½†æ˜¯ä¸€äº›ç»ˆç«¯ä¸‹æ‰§è¡Œçš„å‘½ä»¤æ˜¯æ— æ³•ä»£ç†çš„ã€‚æ‰€ä»¥æœ¬ç¯‡å°±æ¥ä»‹ç»ä¸€ä¸‹å¦‚ä½•ä½¿ä½ çš„ç»ˆç«¯ä¹Ÿèµ°ä»£ç†è¿›è¡Œè®¿é—®ã€‚  &lt;/p&gt;</summary>
    
    
    
    <category term="Others" scheme="http://linxunfeng.top/categories/Others/"/>
    
    
    <category term="FQ" scheme="http://linxunfeng.top/tags/FQ/"/>
    
    <category term="Terminal" scheme="http://linxunfeng.top/tags/Terminal/"/>
    
  </entry>
  
  <entry>
    <title>Swift æŒæ§Moyaçš„ç½‘ç»œè¯·æ±‚ã€æ•°æ®è§£æä¸ç¼“å­˜</title>
    <link href="http://linxunfeng.top/2018/10/27/Swift-%E6%8E%8C%E6%8E%A7Moya%E7%9A%84%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E3%80%81%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90%E4%B8%8E%E7%BC%93%E5%AD%98/"/>
    <id>http://linxunfeng.top/2018/10/27/Swift-%E6%8E%8C%E6%8E%A7Moya%E7%9A%84%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E3%80%81%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90%E4%B8%8E%E7%BC%93%E5%AD%98/</id>
    <published>2018-10-27T23:41:37.000Z</published>
    <updated>2020-08-22T14:18:43.876Z</updated>
    
    <content type="html"><![CDATA[<Excerpt in index | é¦–é¡µæ‘˜è¦> <ul><li><code>Moya</code> åœ¨Swiftå¼€å‘ä¸­èµ·ç€é‡è¦çš„ç½‘ç»œäº¤äº’ä½œç”¨ï¼Œä½†æ˜¯è¿˜æœ‰ä¸å¦‚ä¹‹å¤„ï¼Œæ¯”å¦‚ç½‘ç»œä¸å¯ç”¨æ—¶ï¼Œè¿”å›çš„ <code>Response</code> ä¸º <code>nil</code>ï¼Œè¿™æ—¶è¿˜å¾—å»è§£æç›¸åº”çš„ <code>Error</code></li><li><code>Codable</code> å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿçš„è§£ææ•°æ®ï¼Œä½†æ˜¯ä¸€æ—¦å£°æ˜çš„å±æ€§ç±»å‹ä¸jsonä¸­çš„ä¸ä¸€è‡´ï¼Œå°†æ— æ³•æ­£å¸¸è§£æ; è€Œä¸”å¯¹äºæ¨¡å‹ä¸­è‡ªå®šä¹‰å±æ€§åçš„å¤„ç†ä¹Ÿååˆ†ç¹ç</li></ul><p>+<a id="more"></a></p><The rest of contents | ä½™ä¸‹å…¨æ–‡><ul><li><code>Moya</code> åœ¨Swiftå¼€å‘ä¸­èµ·ç€é‡è¦çš„ç½‘ç»œäº¤äº’ä½œç”¨ï¼Œä½†æ˜¯è¿˜æœ‰ä¸å¦‚ä¹‹å¤„ï¼Œæ¯”å¦‚ç½‘ç»œä¸å¯ç”¨æ—¶ï¼Œè¿”å›çš„ <code>Response</code> ä¸º <code>nil</code>ï¼Œè¿™æ—¶è¿˜å¾—å»è§£æç›¸åº”çš„ <code>Error</code></li><li><code>Codable</code> å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿçš„è§£ææ•°æ®ï¼Œä½†æ˜¯ä¸€æ—¦å£°æ˜çš„å±æ€§ç±»å‹ä¸jsonä¸­çš„ä¸ä¸€è‡´ï¼Œå°†æ— æ³•æ­£å¸¸è§£æ; è€Œä¸”å¯¹äºæ¨¡å‹ä¸­è‡ªå®šä¹‰å±æ€§åçš„å¤„ç†ä¹Ÿååˆ†ç¹ç</li></ul><p>è§£å†³çš„æ–¹æ¡ˆæœ‰å¾ˆå¤šï¼Œä¸è¿‡æˆ‘æ¯”è¾ƒä¹ æƒ¯ä½¿ç”¨ <code>MoyaMapper</code> ï¼Œä¸ä»…å¯ä»¥è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œè¿˜æä¾›äº†å¤šç§<code>æ¨¡å‹è½¬æ¢</code>ã€<code>æ•°æ®äº’è½¬</code>ã€<code>å¤šç§æ•°æ®ç±»å‹ä»»æ„å­˜å‚¨</code>çš„ä¾¿æ·æ–¹æ³•ã€‚æŒæ§Moyaçš„ç½‘ç»œè¯·æ±‚ã€æ•°æ®è§£æä¸ç¼“å­˜ç®€ç›´æ˜“å¦‚åæŒã€‚</p><blockquote><p><code>MoyaMapper</code>æ˜¯åŸºäºMoyaå’ŒSwiftyJSONå°è£…çš„å·¥å…·ï¼Œä»¥Moyaçš„pluginçš„æ–¹å¼æ¥å®ç°é—´æ¥è§£æï¼Œæ”¯æŒRxSwift</p><p> GitHub: <a href="https://github.com/MoyaMapper/MoyaMapper" target="_blank" rel="noopener">MoyaMapper</a></p><p>ğŸ“– è¯¦ç»†çš„ä½¿ç”¨è¯·æŸ¥çœ‹æ‰‹å†Œ <a href="https://moyamapper.github.io/" target="_blank" rel="noopener">https://MoyaMapper.github.io</a></p></blockquote><h2 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h2><ul><li>æ”¯æŒ<code>json</code> è½¬ <code>Model</code> è‡ªåŠ¨æ˜ å°„ ä¸ è‡ªå®šä¹‰æ˜ å°„</li><li>æ— è§† <code>json</code> ä¸­å€¼çš„ç±»å‹ï¼Œ<code>Model</code> ä¸­å±æ€§å£°æ˜çš„æ˜¯ä»€ä¹ˆç±»å‹ï¼Œå®ƒå°±æ˜¯ä»€ä¹ˆç±»å‹</li><li>æ”¯æŒ <code>Data</code> <code>å­—å…¸</code> <code>JSON</code> <code>jsonå­—ç¬¦ä¸²</code> <code>Model</code> äº’è½¬</li><li>æ’ä»¶æ–¹å¼ï¼Œå…¨æ–¹ä½ä¿éšœ<code>Moya.Response</code>ï¼Œæ‹’ç»å„ç§ç½‘ç»œé—®é¢˜å¯¼è‡´ <code>Response</code> ä¸º <code>nil</code>ï¼Œå°†å„å¼å„æ ·çš„åŸå› å¯¼è‡´çš„æ•°æ®åŠ è½½å¤±è´¥è¿›è¡Œç»Ÿä¸€å¤„ç†ï¼Œå¼€å‘è€…åªéœ€è¦å…³æ³¨ <code>Response</code></li><li>å¯é€‰ - æ”¯æŒæ•°æ®éšæ„ç¼“å­˜( <code>JSON</code> ã€ <code>Number</code> ã€<code>String</code>ã€ <code>Bool</code>ã€ <code>Moya.Response</code> )</li><li>å¯é€‰ - æ”¯æŒç½‘ç»œè¯·æ±‚ç¼“å­˜</li></ul><h2 id="æ•°æ®è§£æ"><a href="#æ•°æ®è§£æ" class="headerlink" title="æ•°æ®è§£æ"></a>æ•°æ®è§£æ</h2><h5 id="ä¸€ã€æ’ä»¶æ³¨å…¥"><a href="#ä¸€ã€æ’ä»¶æ³¨å…¥" class="headerlink" title="ä¸€ã€æ’ä»¶æ³¨å…¥"></a>ä¸€ã€æ’ä»¶æ³¨å…¥</h5><p>é™„ï¼š<a href="https://moyamapper.github.io/plugin/" target="_blank" rel="noopener">æ’ä»¶ MoyaMapperPlugin çš„è¯¦ç»†ä½¿ç”¨</a></p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/10/Swift-æŒæ§Moyaçš„ç½‘ç»œè¯·æ±‚ã€æ•°æ®è§£æä¸ç¼“å­˜/success-obj.png" alt=""></p><p>1ã€å®šä¹‰é€‚ç”¨äºé¡¹ç›®æ¥å£çš„ <code>ModelableParameterType</code></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// statusCodeKeyã€tipStrKeyã€ modelKey å¯ä»¥ä»»æ„æŒ‡å®šçº§åˆ«çš„è·¯å¾„ï¼Œå¦‚ï¼š "error&gt;used"</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">NetParameter</span> : <span class="title">ModelableParameterType</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> successValue = <span class="string">"000"</span></span><br><span class="line">    <span class="keyword">var</span> statusCodeKey = <span class="string">"retStatus"</span></span><br><span class="line">    <span class="keyword">var</span> tipStrKey = <span class="string">"retMsg"</span></span><br><span class="line">    <span class="keyword">var</span> modelKey = <span class="string">"retBody"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ã€åœ¨ <code>MoyaProvider</code> ä¸­ä½¿ç”¨ <code>MoyaMapperPlugin</code> æ’ä»¶ï¼Œå¹¶æŒ‡å®š <code>ModelableParameterType</code></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> lxfNetTool = <span class="type">MoyaProvider</span>&lt;<span class="type">LXFNetworkTool</span>&gt;(plugins: [<span class="type">MoyaMapperPlugin</span>(<span class="type">NetParameter</span>())])</span><br></pre></td></tr></table></figure><p>â— ä½¿ç”¨ <code>MoyaMapperPlugin</code> æ’ä»¶æ˜¯æ•´ä¸ª <code>MoyaMapper</code>  çš„æ ¸å¿ƒæ‰€åœ¨ï¼</p><h5 id="äºŒã€Modelå£°æ˜"><a href="#äºŒã€Modelå£°æ˜" class="headerlink" title="äºŒã€Modelå£°æ˜"></a>äºŒã€Modelå£°æ˜</h5><blockquote><p><code>Model</code> éœ€éµå®ˆ <code>Modelable</code> åè®®</p><ul><li><code>MoyaMapper</code> æ”¯æŒæ¨¡å‹è‡ªåŠ¨æ˜ å°„ å’Œ è‡ªå®šä¹‰æ˜ å°„</li><li>ä¸éœ€è¦è€ƒè™‘æºjsonæ•°æ®çš„çœŸå®ç±»å‹ï¼Œè¿™é‡Œç»Ÿä¸€æŒ‰ <code>Model</code> ä¸­å±æ€§å£°æ˜çš„ç±»å‹è¿›è¡Œè½¬æ¢</li></ul></blockquote><p>1ã€ä¸€èˆ¬æƒ…å†µä¸‹å¦‚ä¸‹å†™æ³•å³å¯</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CompanyModel</span>: <span class="title">Modelable</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> name : <span class="type">String</span> = <span class="string">""</span></span><br><span class="line">    <span class="keyword">var</span> catchPhrase : <span class="type">String</span> = <span class="string">""</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>() &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ã€å¦‚æœè‡ªå®šä¹‰æ˜ å°„ï¼Œåˆ™å¯ä»¥å®ç°æ–¹æ³• <code>mutating func mapping(_ json: JSON)</code></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CompanyModel</span>: <span class="title">Modelable</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> name : <span class="type">String</span> = <span class="string">""</span></span><br><span class="line">    <span class="keyword">var</span> catchPhrase : <span class="type">String</span> = <span class="string">""</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>() &#123; &#125;</span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">mapping</span><span class="params">(<span class="number">_</span> json: JSON)</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.name = json[<span class="string">"nickname"</span>].stringValue</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3ã€æ”¯æŒæ¨¡å‹åµŒå¥—</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">UserModel</span>: <span class="title">Modelable</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> id : <span class="type">String</span> = <span class="string">""</span></span><br><span class="line">    <span class="keyword">var</span> name : <span class="type">String</span> = <span class="string">""</span></span><br><span class="line">    <span class="keyword">var</span> company : <span class="type">CompanyModel</span> = <span class="type">CompanyModel</span>()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>() &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ä¸‰ã€Response-è§£æ"><a href="#ä¸‰ã€Response-è§£æ" class="headerlink" title="ä¸‰ã€Response è§£æ"></a>ä¸‰ã€Response è§£æ</h5><blockquote><p>1ã€ä»¥ä¸‹ç¤ºä¾‹çš†ä½¿ç”¨äº† <code>MoyaMapperPlugin</code> ï¼Œæ‰€ä»¥ä¸éœ€è¦æŒ‡å®š <code>è§£æè·¯å¾„</code></p><p>2ã€å¦‚æœæ²¡æœ‰ä½¿ç”¨ <code>MoyaMapperPlugin</code> åˆ™éœ€è¦æŒ‡å®š <code>è§£æè·¯å¾„</code>ï¼Œå¦åˆ™æ— æ³•æ­£å¸¸è§£æ</p><p>ps:  <code>è§£æè·¯å¾„</code> å¯ä»¥ä½¿ç”¨ <code>a&gt;b</code> è¿™ç§å½¢å¼æ¥è§£å†³å¤šçº§è·¯å¾„çš„é—®é¢˜</p></blockquote><p>è§£ææ–¹æ³•å¦‚ä¸‹åˆ—è¡¨æ‰€ç¤º</p><table><thead><tr><th style="text-align:center">æ–¹æ³•</th><th style="text-align:left">æè¿° (æ”¯æŒRxSwift)</th></tr></thead><tbody><tr><td style="text-align:center">toJSON</td><td style="text-align:left">Response è½¬ JSON ( <a href="https://moyamapper.github.io/core/toJSON/" target="_blank" rel="noopener">toJSON</a>   <a href="https://moyamapper.github.io/rx/toJSON/" target="_blank" rel="noopener">rx.toJSON</a>)</td></tr><tr><td style="text-align:center">fetchString</td><td style="text-align:left">è·å–æŒ‡å®šè·¯å¾„çš„å­—ç¬¦ä¸²( <a href="https://moyamapper.github.io/core/fetchString/" target="_blank" rel="noopener">fetchString</a>   <a href="https://moyamapper.github.io/rx/fetchString/" target="_blank" rel="noopener">rx.fetchString</a>)</td></tr><tr><td style="text-align:center">fetchJSONString</td><td style="text-align:left">è·å–æŒ‡å®šè·¯å¾„çš„åŸå§‹jsonå­—ç¬¦ä¸² ( <a href="https://moyamapper.github.io/core/fetchJSONString/" target="_blank" rel="noopener">fetchJSONString</a>   <a href="https://moyamapper.github.io/rx/fetchJSONString/" target="_blank" rel="noopener">rx.fetchJSONString</a> )</td></tr><tr><td style="text-align:center">mapResult</td><td style="text-align:left">Response -&gt; MoyaMapperResult   <code>(Bool, String)</code> ( <a href="https://moyamapper.github.io/core/mapResult/" target="_blank" rel="noopener">mapResult</a>   <a href="https://moyamapper.github.io/rx/mapResult/" target="_blank" rel="noopener">rx.mapResult</a> )</td></tr><tr><td style="text-align:center">mapObject</td><td style="text-align:left">Response -&gt; Model ( <a href="https://moyamapper.github.io/core/mapObject/" target="_blank" rel="noopener">mapObject</a>   <a href="https://moyamapper.github.io/rx/mapObject/" target="_blank" rel="noopener">rx.mapObject</a>)</td></tr><tr><td style="text-align:center">mapObjResult</td><td style="text-align:left">Response -&gt; (MoyaMapperResult, Model) ( <a href="https://moyamapper.github.io/core/mapObjResult/" target="_blank" rel="noopener">mapObjResult</a>   <a href="https://moyamapper.github.io/rx/mapObjResult/" target="_blank" rel="noopener">rx.mapObjResult</a>)</td></tr><tr><td style="text-align:center">mapArray</td><td style="text-align:left">Response -&gt; [Model] ( <a href="https://moyamapper.github.io/core/mapArray/" target="_blank" rel="noopener">mapArray</a>  <a href="https://moyamapper.github.io/rx/mapArray/" target="_blank" rel="noopener">rx.mapArray</a>)</td></tr><tr><td style="text-align:center">mapArrayResult</td><td style="text-align:left">Response -&gt; (MoyaMapperResult, [Model]) ( <a href="https://moyamapper.github.io/core/mapArrayResult/" target="_blank" rel="noopener">mapArrayResult</a>   <a href="https://moyamapper.github.io/rx/mapArrayResult/" target="_blank" rel="noopener">rx.mapArrayResult</a>)</td></tr></tbody></table><p>â—é™¤äº† <code>fetchJSONString</code> çš„é»˜è®¤è§£æè·¯å¾„æ˜¯<code>æ ¹è·¯å¾„</code>ä¹‹å¤–ï¼Œå…¶å®ƒæ–¹æ³•çš„é»˜è®¤è§£æè·¯å¾„ä¸ºæ’ä»¶å¯¹è±¡ä¸­çš„ <code>modelKey</code></p><p>å¦‚æœæ¥å£è¯·æ±‚å <code>json</code> çš„æ•°æ®ç»“æ„ä¸ä¸‹å›¾ç±»ä¼¼ï¼Œåˆ™ä½¿ç”¨ <code>MoyaMapper</code> æ˜¯æœ€åˆé€‚ä¸è¿‡äº†</p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/10/Swift-æŒæ§Moyaçš„ç½‘ç»œè¯·æ±‚ã€æ•°æ®è§£æä¸ç¼“å­˜/success-obj.png" alt=""></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Normal</span></span><br><span class="line"><span class="keyword">let</span> model = response.mapObject(<span class="type">MMModel</span>.<span class="keyword">self</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"name -- \(model.name)"</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"github -- \(model.github)"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°json</span></span><br><span class="line"><span class="built_in">print</span>(response.fetchJSONString())</span><br><span class="line"></span><br><span class="line"><span class="comment">// Rx</span></span><br><span class="line">rxRequest.mapObject(<span class="type">MMModel</span>.<span class="keyword">self</span>)</span><br><span class="line">    .subscribe(onSuccess: &#123; (model) <span class="keyword">in</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"name -- \(model.name)"</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"github -- \(model.github)"</span>)</span><br><span class="line">    &#125;).disposed(by: disposeBag)</span><br></pre></td></tr></table></figure><p>é™„ï¼š <a href="https://moyamapper.github.io/core/fetchJSONString/" target="_blank" rel="noopener">fetchJSONStringçš„è¯¦ç»†ä½¿ç”¨</a></p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/10/Swift-æŒæ§Moyaçš„ç½‘ç»œè¯·æ±‚ã€æ•°æ®è§£æä¸ç¼“å­˜/success-array.png" alt=""></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Normal</span></span><br><span class="line"><span class="keyword">let</span> models = response.mapArray(<span class="type">MMModel</span>.<span class="keyword">self</span>)</span><br><span class="line"><span class="keyword">let</span> name = models[<span class="number">0</span>].name</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"count -- \(models.count)"</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"name -- \(name)"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å° json æ¨¡å‹æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªçš„name</span></span><br><span class="line"><span class="built_in">print</span>(response.fetchString(keys: [<span class="number">0</span>, <span class="string">"name"</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment">// Rx</span></span><br><span class="line">rxRequest.mapArray(<span class="type">MMModel</span>.<span class="keyword">self</span>)</span><br><span class="line">    .subscribe(onSuccess: &#123; models <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">let</span> name = models[<span class="number">0</span>].name</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"count -- \(models.count)"</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"name -- \(name)"</span>)</span><br><span class="line">    &#125;).disposed(by: disposeBag)</span><br></pre></td></tr></table></figure><p>é™„ï¼š<a href="https://moyamapper.github.io/core/mapArray/" target="_blank" rel="noopener">mapArrayçš„è¯¦ç»†ä½¿ç”¨è¯´æ˜</a></p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/10/Swift-æŒæ§Moyaçš„ç½‘ç»œè¯·æ±‚ã€æ•°æ®è§£æä¸ç¼“å­˜/fail.png" alt=""></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Normal</span></span><br><span class="line"><span class="keyword">let</span> (isSuccess, tipStr) = response.mapResult()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"isSuccess -- \(isSuccess)"</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"tipStr -- \(tipStr)"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Rx</span></span><br><span class="line">rxRequest.mapResult()</span><br><span class="line">    .subscribe(onSuccess: &#123; (isSuccess, tipStr) <span class="keyword">in</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"isSuccess -- \(isSuccess)"</span>) <span class="comment">// æ˜¯å¦ä¸º "000"</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"retMsg -- \(retMsg)"</span>) <span class="comment">// "ç¼ºå°‘å¿…è¦å‚æ•°"</span></span><br><span class="line">    &#125;).disposed(by: disposeBag)</span><br></pre></td></tr></table></figure><p>é™„ï¼š<a href="https://moyamapper.github.io/core/mapResult/" target="_blank" rel="noopener">mapResultçš„è¯¦ç»†ä½¿ç”¨è¯´æ˜</a></p><h2 id="ç»Ÿä¸€å¤„ç†ç½‘ç»œè¯·æ±‚ç»“æœ"><a href="#ç»Ÿä¸€å¤„ç†ç½‘ç»œè¯·æ±‚ç»“æœ" class="headerlink" title="ç»Ÿä¸€å¤„ç†ç½‘ç»œè¯·æ±‚ç»“æœ"></a>ç»Ÿä¸€å¤„ç†ç½‘ç»œè¯·æ±‚ç»“æœ</h2><blockquote><p>åœ¨APPçš„å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œä¼šé‡åˆ°å„ç§å„æ ·çš„ç½‘ç»œè¯·æ±‚ç»“æœï¼Œå¦‚:æœåŠ¡å™¨æŒ‚äº†ã€æ‰‹æœºæ— ç½‘ç»œï¼Œæ­¤æ—¶ <code>Moya</code> è¿”å›çš„ <code>Response</code> ä¸º nilï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸å¾—ä¸å»åˆ¤æ–­ <code>Error</code>ã€‚ä½†æ˜¯ä½¿ç”¨ <code>MoyaMapperPlugin</code> å°±å¯ä»¥è®©æˆ‘ä»¬åªå…³æ³¨ <code>Response</code></p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MoyaMapperPlugin çš„åˆå§‹åŒ–æ–¹æ³•</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">init</span>&lt;<span class="type">T</span>: <span class="type">ModelableParameterType</span>&gt;(</span><br><span class="line">    <span class="number">_</span> type: <span class="type">T</span>,</span><br><span class="line">    transformError: <span class="type">Bool</span> = <span class="literal">true</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type : <span class="type">ModelableParameterType</span>  ç”¨äºå®šä¹‰å­—æ®µè·¯å¾„ï¼Œåšä¸ºå…¨å±€è§£ææ•°æ®çš„ä¾æ®</span><br><span class="line">transformError : <span class="type">Bool</span>  æ˜¯å¦å½“ç½‘ç»œè¯·æ±‚å¤±è´¥æ—¶ï¼Œè‡ªåŠ¨è½¬æ¢è¯·æ±‚ç»“æœï¼Œé»˜è®¤ä¸º <span class="literal">true</span></span><br></pre></td></tr></table></figure><ul><li>å½“è¯·æ±‚å¤±è´¥çš„æ—¶å€™ï¼Œæ­¤æ—¶çš„ <code>result.response</code> ä¸º <code>nil</code>ï¼Œæ ¹æ®<code>transformError</code>æ˜¯å¦ä¸º<code>true</code> åˆ¤æ–­æ˜¯å¦åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ <code>response</code> å¹¶è¿”å›å‡ºå»ã€‚</li></ul><p>â¡ æœ¬æ¥å¯ä»¥è¯·æ±‚åˆ°çš„æ•°æ®å†…å®¹</p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/10/Swift-æŒæ§Moyaçš„ç½‘ç»œè¯·æ±‚ã€æ•°æ®è§£æä¸ç¼“å­˜/success-obj.png" alt=""></p><p>â¡ ç°åœ¨å…³é—­ç½‘ç»œï¼Œå†è¯·æ±‚æ•°æ®</p><ul><li><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œå³ä¸åšä»»ä½•ä¸å¤„ç†çš„æ—¶å€™ï¼Œ <code>Response</code> ä¸º <code>nil</code> </p></li><li><p>ç»è¿‡ <code>MoyaMapperPlugin</code> å¤„ç†çš„åå¯å¾—åˆ°è½¬æ¢åçš„ <code>Response</code> ï¼Œå¦‚å›¾</p></li></ul><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/10/Swift-æŒæ§Moyaçš„ç½‘ç»œè¯·æ±‚ã€æ•°æ®è§£æä¸ç¼“å­˜/plugin.png" alt=""></p><p>è¿™é‡Œå°†è¯·æ±‚å¤±è´¥è¿›è¡Œäº†ç»Ÿä¸€å¤„ç†ï¼Œæ— è®ºæ˜¯æœåŠ¡å™¨è¿˜æ˜¯è‡ªèº«ç½‘ç»œçš„é—®é¢˜ï¼Œ<code>retStatus</code> éƒ½ä¸º MMStatusCode.loadFailï¼Œä½†æ˜¯ errorDescription ä¼šä¿æŒåŸæ¥çš„æ ·å­å¹¶èµ‹å€¼ç»™ <code>retMsg</code>ã€‚</p><blockquote><ul><li><code>retStatus</code> å€¼ä¼šä»æšä¸¾ <code>MMStatusCode</code> ä¸­å–  <code>loadFail.rawValue</code> ï¼Œå³ <code>700</code> </li><li>å– ç±»å‹ä¸º <code>ModelableParameterType</code>  çš„ <code>type</code> ä¸­ <code>statusCodeKey</code> æ‰€æŒ‡å®šçš„å€¼ ä¸ºé”®åï¼Œ<code>retMsg</code>ä¹ŸåŒç†</li></ul></blockquote><p>ps: è¿™ä¸ªæ—¶å€™å¯ä»¥é€šè¿‡åˆ¤æ–­ <code>retStatus</code> æˆ– <code>response.statusCode</code> æ˜¯å¦ä¸ <code>MMStatusCode.loadFail.rawValue</code> ç›¸åŒæ¥åˆ¤æ–­æ˜¯å¦æ˜¾ç¤ºåŠ è½½å¤±è´¥çš„ç©ºç™½é¡µå ä½å›¾</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">MMStatusCode</span>: <span class="title">Int</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> cache = <span class="number">230</span></span><br><span class="line">    <span class="keyword">case</span> loadFail = <span class="number">700</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æšä¸¾ <code>MMStatusCode</code> ä¸­é™¤äº† <code>loadFail</code> ï¼Œè¿˜æœ‰ <code>cache</code>ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ <code>loadFail</code> åœ¨æ•°æ®åŠ è½½å¤±è´¥çš„æ—¶å€™ä¼šå‡ºç°ï¼Œé‚£ <code>cache</code> æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™å‡ºæ¥å‘¢ï¼Ÿä¸æ€¥ï¼Œçœ‹ä¸‹ä¸€èŠ‚å°±çŸ¥é“äº†ã€‚</p><h2 id="æ•°æ®ç¼“å­˜"><a href="#æ•°æ®ç¼“å­˜" class="headerlink" title="æ•°æ®ç¼“å­˜"></a>æ•°æ®ç¼“å­˜</h2><h5 id="ä¸€ã€åŸºæœ¬ä½¿ç”¨"><a href="#ä¸€ã€åŸºæœ¬ä½¿ç”¨" class="headerlink" title="ä¸€ã€åŸºæœ¬ä½¿ç”¨"></a>ä¸€ã€åŸºæœ¬ä½¿ç”¨</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; ç¼“å­˜</span><br><span class="line">@discardableResult</span><br><span class="line">MMCache.shared.cache&#96;XXX&#96;(value : XXX, key: String, cacheContainer: MMCache.CacheContainer &#x3D; .RAM)  -&gt; Bool</span><br><span class="line">&#x2F;&#x2F; å–èˆ</span><br><span class="line">MMCache.shared.fetch&#96;XXX&#96;Cache(key: String, cacheContainer: MMCache.CacheContainer &#x3D; .RAM)</span><br></pre></td></tr></table></figure><p>ç¼“å­˜æˆåŠŸä¼šè¿”å›ä¸€ä¸ª <code>Bool</code> å€¼ï¼Œè¿™é‡Œå¯ä¸æ¥æ”¶</p><table><thead><tr><th>XXX æ‰€æ”¯æŒç±»å‹</th><th></th></tr></thead><tbody><tr><td>Bool</td><td>-</td></tr><tr><td>Float</td><td>-</td></tr><tr><td>Double</td><td>-</td></tr><tr><td>String</td><td>-</td></tr><tr><td>JSON</td><td>-</td></tr><tr><td>Modelable</td><td>[Modelable]</td></tr><tr><td>Moya.Response</td><td>-</td></tr><tr><td>Int</td><td>UInt</td></tr><tr><td>Int8</td><td>UInt8</td></tr><tr><td>Int16</td><td>UInt16</td></tr><tr><td>Int32</td><td>UInt32</td></tr><tr><td>Int64</td><td>UInt64</td></tr></tbody></table><blockquote><p>å…¶ä¸­ï¼Œé™¤äº† <code>Moya.Response</code> ä¹‹å¤–ï¼Œå…¶å®ƒç±»å‹çš†æ˜¯é€šè¿‡ <code>JSON</code> æ¥å®ç°ç¼“å­˜</p></blockquote><p>æ‰€ä»¥ï¼Œå¦‚æœä½ æƒ³æ¸…é™¤è¿™äº›ç±»å‹çš„ç¼“å­˜ï¼Œåªéœ€è¦è°ƒç”¨å¦‚ä¸‹æ–¹æ³•å³å¯</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@discardableResult</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">removeJSONCache</span><span class="params">(<span class="number">_</span> key: String, cacheContainer: MMCache.CacheContainer = .RAM)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@discardableResult</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">removeAllJSONCache</span><span class="params">(cacheContainer: MMCache.CacheContainer = .RAM)</span></span> -&gt; <span class="type">Bool</span></span><br></pre></td></tr></table></figure><p>æ¸…é™¤ <code>Moya.Response</code> åˆ™ä½¿ç”¨å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³•</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@discardableResult</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">removeResponseCache</span><span class="params">(<span class="number">_</span> key: String)</span></span> -&gt; <span class="type">Bool</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@discardableResult</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">removeAllResponseCache</span><span class="params">()</span></span> -&gt; <span class="type">Bool</span></span><br></pre></td></tr></table></figure><p>å†æ¥çœ‹çœ‹MMCache.CacheContainer</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">CacheContainer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">RAM</span> <span class="comment">// åªç¼“å­˜äºå†…å­˜çš„å®¹å™¨</span></span><br><span class="line">    <span class="keyword">case</span> hybrid <span class="comment">// ç¼“å­˜äºå†…å­˜ä¸ç£ç›˜çš„å®¹å™¨</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¿™ä¸¤ç§å®¹å™¨äº’ä¸ç›¸é€šï¼Œå³ å³ä½¿keyç›¸åŒï¼Œä½¿ç”¨ <code>hybrid</code> æ¥ç¼“å­˜åï¼Œå†é€šè¿‡ <code>RAM</code> å–å€¼æ˜¯å–ä¸åˆ°çš„ã€‚</p></blockquote><ul><li>RAM : ä»…ç¼“å­˜äºå†…å­˜ä¹‹ä¸­ï¼Œç¼“å­˜çš„æ•°æ®åœ¨APPä½¿ç”¨æœŸé—´ä¸€ç›´å­˜åœ¨</li><li>hybrid ï¼šç¼“å­˜äºå†…å­˜ä¸ç£ç›˜ä¸­ï¼ŒAPPé‡å¯åä¹Ÿå¯ä»¥è·å–åˆ°æ•°æ®</li></ul><h5 id="äºŒã€ç¼“å­˜ç½‘ç»œè¯·æ±‚"><a href="#äºŒã€ç¼“å­˜ç½‘ç»œè¯·æ±‚" class="headerlink" title="äºŒã€ç¼“å­˜ç½‘ç»œè¯·æ±‚"></a>äºŒã€ç¼“å­˜ç½‘ç»œè¯·æ±‚</h5><p>å†…éƒ¨ç¼“å­˜è¿‡ç¨‹ï¼š</p><ol><li>APPé¦–æ¬¡å¯åŠ¨å¹¶è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œç½‘ç»œæ•°æ®å°†ç¼“å­˜èµ·æ¥</li><li>APPå†æ¬¡å¯åŠ¨å¹¶è¿›è¡Œç½‘ç»œè¯·æ±‚æ—¶ï¼Œä¼šå…ˆè¿”å›ç¼“å­˜çš„æ•°æ®ï¼Œç­‰è¯·æ±‚æˆåŠŸåå†è¿”å›ç½‘ç»œæ•°æ®</li><li>å…¶å®ƒæƒ…å†µåªä¼šåŠ è½½ç½‘ç»œæ•°æ®</li><li>æ¯æ¬¡æˆåŠŸè¯·æ±‚åˆ°æ•°æ®åï¼Œéƒ½ä¼šå¯¹ç¼“å­˜çš„æ•°æ®è¿›è¡Œæ›´æ–°</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Normal</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">cacheRequest</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="number">_</span> target: Target, </span></span></span><br><span class="line"><span class="function"><span class="params">    cacheType: MMCache.CacheKeyType = .<span class="keyword">default</span>, </span></span></span><br><span class="line"><span class="function"><span class="params">    callbackQueue: DispatchQueue? = <span class="literal">nil</span>, </span></span></span><br><span class="line"><span class="function"><span class="params">    progress: Moya.ProgressBlock? = <span class="literal">nil</span>, </span></span></span><br><span class="line"><span class="function"><span class="params">    completion: @escaping Moya.Completion</span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span> -&gt; <span class="type">Cancellable</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Rx</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">cacheRequest</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="number">_</span> target: Base.Target, </span></span></span><br><span class="line"><span class="function"><span class="params">    callbackQueue: DispatchQueue? = <span class="literal">nil</span>, </span></span></span><br><span class="line"><span class="function"><span class="params">    cacheType: MMCache.CacheKeyType = .<span class="keyword">default</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span> -&gt; <span class="type">Observable</span>&lt;<span class="type">Response</span>&gt;</span><br></pre></td></tr></table></figure><blockquote><p>å®é™…ä¸Šæ˜¯å¯¹ <code>Moya</code> è¯·æ±‚åçš„ <code>Response</code> è¿›è¡Œç¼“å­˜ã€‚ å…¶å®ä¸ <code>Moya</code> è‡ªå¸¦çš„æ–¹æ³•ç›¸æ¯”è¾ƒåªå¤šäº†ä¸€ä¸ªå‚æ•° <code>cacheType: MMCache.CacheKeyType</code> ï¼Œå®šä¹‰ç€ç¼“å­˜ä¸­çš„ <code>key</code> ï¼Œé»˜è®¤ä¸º <code>default</code> </p></blockquote><p>ä¸‹é¢æ˜¯ <code>MMCache.CacheKeyType</code> çš„å®šä¹‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> let cacheKey &#x3D; [method]baseURL&#x2F;path</span><br><span class="line"> </span><br><span class="line"> - default : cacheKey + &quot;?&quot; + parameters</span><br><span class="line"> - base : cacheKey</span><br><span class="line"> - custom : cacheKey + &quot;?&quot; + customKey</span><br><span class="line"> *&#x2F;</span><br><span class="line">public enum CacheKeyType &#123;</span><br><span class="line">    case &#96;default&#96;</span><br><span class="line">    case base</span><br><span class="line">    case custom(String)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœä½ æƒ³ç¼“å­˜<code>å¤šé¡µ</code>åˆ—è¡¨æ•°æ®çš„<code>æœ€æ–°ä¸€é¡µ</code>æ•°æ®ï¼Œæ­¤æ—¶ä½¿ç”¨ <code>default</code> æ˜¯ä¸åˆé€‚çš„ï¼Œå› ä¸º <code>default</code> ä½¿ç”¨çš„ <code>key</code> åŒ…å«äº† <code>pageIndex</code>ï¼Œè¿™æ ·å°±è¾¾ä¸åˆ°åªç¼“å­˜ <code>æœ€æ–°ä¸€é¡µæ•°æ®</code> çš„ç›®çš„ï¼Œ æ‰€ä»¥è¿™é‡Œåº”è¯¥ä½¿ç”¨ <code>base</code> æˆ–è€… <code>custom(String)</code> </p></blockquote><p>æˆ‘ä»¬å¯ä»¥æ¥è¯•ä¸€ä¸‹å¸¦ç¼“å­˜çš„è¯·æ±‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * APPç¬¬ä¸€æ¬¡å¯åŠ¨å¹¶è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œç½‘ç»œæ•°æ®å°†ç¼“å­˜èµ·æ¥</span></span><br><span class="line"><span class="comment"> * APPå†æ¬¡å¯åŠ¨å¹¶è¿›è¡Œç½‘ç»œè¯·æ±‚æ—¶ï¼Œä¼šå…ˆåŠ è½½ç¼“å­˜ï¼Œå†åŠ è½½ç½‘ç»œæ•°æ®</span></span><br><span class="line"><span class="comment"> * å…¶å®ƒæƒ…å†µåªä¼šåŠ è½½ç½‘ç»œæ•°æ®</span></span><br><span class="line"><span class="comment"> * æ¯æ¬¡æˆåŠŸè¯·æ±‚åˆ°æ•°æ®éƒ½ä¼šè¿›è¡Œæ•°æ®æ›´æ–°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">lxfNetTool.rx.cacheRequest(.data(type: .all, size: <span class="number">10</span>, index: <span class="number">1</span>))</span><br><span class="line">    .subscribe(onNext: &#123; response <span class="keyword">in</span></span><br><span class="line">        log.debug(<span class="string">"statusCode -- \(response.statusCode)"</span>)</span><br><span class="line">    &#125;).disposed(by: disposeBag)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼ ç»Ÿæ–¹å¼</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">let _ = lxfNetTool.cacheRequest(.data(type: .all, size: 10, index: 1)) &#123; result in</span></span><br><span class="line"><span class="comment">    guard let resp = result.value else &#123; return &#125;</span></span><br><span class="line"><span class="comment">    log.debug("statusCode -- \(resp.statusCode)")</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p>æ‰“å°ç»“æœ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; é¦–æ¬¡ä½¿ç”¨APP</span><br><span class="line">statusCode -- 200</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; å…³é—­å¹¶é‡æ–°æ‰“å¼€APPï¼Œå†è¯·æ±‚ä¸€ä¸‹</span><br><span class="line">statusCode -- 230</span><br><span class="line">statusCode -- 200</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ç„¶åå†è¯·æ±‚ä¸€ä¸‹</span><br><span class="line">statusCode -- 200</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>230</code> å°±æ˜¯ <code>MMStatusCode.cache.rawValue</code></p><h2 id="CocoaPods"><a href="#CocoaPods" class="headerlink" title="CocoaPods"></a>CocoaPods</h2><ul><li>é»˜è®¤å®‰è£…</li></ul><p>MoyaMapperé»˜è®¤åªå®‰è£…Coreä¸‹çš„æ–‡ä»¶<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod <span class="string">'MoyaMapper'</span></span><br></pre></td></tr></table></figure></p><ul><li><p>RxSwiftæ‹“å±•</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod <span class="string">'MoyaMapper/Rx'</span></span><br></pre></td></tr></table></figure></li><li><p>ç¼“å­˜æ‹“å±•</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod <span class="string">'MoyaMapper/MMCache'</span></span><br></pre></td></tr></table></figure></li><li><p>Rxç¼“å­˜</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod <span class="string">'MoyaMapper/RxCache'</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <summary type="html">&lt;Excerpt in index | é¦–é¡µæ‘˜è¦&gt; 

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Moya&lt;/code&gt; åœ¨Swiftå¼€å‘ä¸­èµ·ç€é‡è¦çš„ç½‘ç»œäº¤äº’ä½œç”¨ï¼Œä½†æ˜¯è¿˜æœ‰ä¸å¦‚ä¹‹å¤„ï¼Œæ¯”å¦‚ç½‘ç»œä¸å¯ç”¨æ—¶ï¼Œè¿”å›çš„ &lt;code&gt;Response&lt;/code&gt; ä¸º &lt;code&gt;nil&lt;/code&gt;ï¼Œè¿™æ—¶è¿˜å¾—å»è§£æç›¸åº”çš„ &lt;code&gt;Error&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Codable&lt;/code&gt; å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿçš„è§£ææ•°æ®ï¼Œä½†æ˜¯ä¸€æ—¦å£°æ˜çš„å±æ€§ç±»å‹ä¸jsonä¸­çš„ä¸ä¸€è‡´ï¼Œå°†æ— æ³•æ­£å¸¸è§£æ; è€Œä¸”å¯¹äºæ¨¡å‹ä¸­è‡ªå®šä¹‰å±æ€§åçš„å¤„ç†ä¹Ÿååˆ†ç¹ç&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;+</summary>
    
    
    
    <category term="iOS" scheme="http://linxunfeng.top/categories/iOS/"/>
    
    
    <category term="iOS" scheme="http://linxunfeng.top/tags/iOS/"/>
    
    <category term="Swift" scheme="http://linxunfeng.top/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>Swift ä¼˜é›…çš„é€‚é…å¤§å°</title>
    <link href="http://linxunfeng.top/2018/10/24/Swift-%E4%BC%98%E9%9B%85%E7%9A%84%E9%80%82%E9%85%8D%E5%A4%A7%E5%B0%8F/"/>
    <id>http://linxunfeng.top/2018/10/24/Swift-%E4%BC%98%E9%9B%85%E7%9A%84%E9%80%82%E9%85%8D%E5%A4%A7%E5%B0%8F/</id>
    <published>2018-10-24T20:44:50.000Z</published>
    <updated>2020-08-22T14:18:43.876Z</updated>
    
    <content type="html"><![CDATA[<Excerpt in index | é¦–é¡µæ‘˜è¦> <blockquote><p>åœ¨æ—¥å¸¸å¼€å‘ä¸­å¸¸å¸¸ä¼šå¯¹è®¾å¤‡è¿›è¡Œä¸€å®šçš„é€‚é…ï¼Œä¸ºäº†æ–¹ä¾¿åœ¨å¤šä¸ªé¡¹ç›®é‡Œç»Ÿä¸€ç®¡ç†å’Œä½¿ç”¨ï¼Œæ‰€ä»¥å°è£…å¹¶å¼€æºäº†<code>SwiftyFitsize</code>è¿™ä¸ªåº“ï¼Œå¯ç”¨äºé€‚é…è§†å›¾åŠå­—ä½“å¤§å°ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒ xib å’Œ storyboard</p></blockquote><p>GitHub: <a href="https://github.com/LinXunFeng/SwiftyFitsize" target="_blank" rel="noopener">SwiftyFitsize</a></p><p>+<a id="more"></a></p><The rest of contents | ä½™ä¸‹å…¨æ–‡><blockquote><p>åœ¨æ—¥å¸¸å¼€å‘ä¸­å¸¸å¸¸ä¼šå¯¹è®¾å¤‡è¿›è¡Œä¸€å®šçš„é€‚é…ï¼Œä¸ºäº†æ–¹ä¾¿åœ¨å¤šä¸ªé¡¹ç›®é‡Œç»Ÿä¸€ç®¡ç†å’Œä½¿ç”¨ï¼Œæ‰€ä»¥å°è£…å¹¶å¼€æºäº†<code>SwiftyFitsize</code>è¿™ä¸ªåº“ï¼Œå¯ç”¨äºé€‚é…è§†å›¾åŠå­—ä½“å¤§å°ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒ xib å’Œ storyboard</p></blockquote><p>GitHub: <a href="https://github.com/LinXunFeng/SwiftyFitsize" target="_blank" rel="noopener">SwiftyFitsize</a></p><p>æœ€ç»ˆçš„æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/10/Swift-ä¼˜é›…çš„é€‚é…å¤§å°/exhibition.png" alt="æ•ˆæœå›¾"></p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>ä½¿ç”¨Cocoapodså®‰è£…ï¼Œæˆ–æ‰‹åŠ¨æ‹–å…¥é¡¹ç›®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod &#39;SwiftyFitsize&#39;</span><br></pre></td></tr></table></figure></p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p><code>SwiftyFitsize</code>åœ¨é»˜è®¤çŠ¶å†µä¸‹æ‰€ä½¿ç”¨çš„å‚ç…§å®½åº¦ä¸º<code>iphone6</code>çš„<code>375</code><br>å¦‚æœè®¾è®¡å›¾æ‰€é€‰ç”¨è®¾å¤‡çš„å®½åº¦ä¸é»˜è®¤å€¼ä¸åŒï¼Œå¯ä»¥åœ¨<code>AppDelegate</code>ä¸‹åˆå§‹åŒ–æ‰€å‚ç…§çš„å®½åº¦</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">SwiftyFitsize</span>.reference(width: <span class="number">414</span>)</span><br></pre></td></tr></table></figure><p>ä¸‹é¢åˆ—å‡ºä¸€äº›è®¾å¤‡å¯¹åº”çš„åˆ†è¾¨ç‡ï¼Œæ–¹ä¾¿æŸ¥æ‰¾</p><table><thead><tr><th>è®¾å¤‡</th><th>é€»è¾‘åˆ†è¾¨ç‡(point)</th><th>è®¾å¤‡åˆ†è¾¨ç‡(pixel)</th></tr></thead><tbody><tr><td>SE</td><td>320x568</td><td>640x1136</td></tr><tr><td>6(S)ï¼7ï¼8</td><td>375x667</td><td>750x1334</td></tr><tr><td>6(S)+ï¼7+ï¼8+</td><td>414x736</td><td>1080x1920</td></tr><tr><td>X(S)</td><td>375x812</td><td>1125x2436</td></tr><tr><td>XR</td><td>414x896</td><td>828x1792</td></tr><tr><td>XS Max</td><td>414x896</td><td>1242x2688</td></tr></tbody></table><p>ä½¿ç”¨ä¹Ÿæ˜¯éå¸¸æ–¹ä¾¿çš„ï¼Œåªéœ€è¦åœ¨<code>Number</code>ã€<code>UIFont</code>ã€<code>CGPoint</code>ã€<code>CGSize</code>ã€<code>UIEdgeInsetsMake</code>è¿™äº›ç±»å‹çš„å€¼åé¢åŠ ä¸Š<code>~</code>å³å¯<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">100</span>~</span><br><span class="line"><span class="type">UIFont</span>.systemFont(ofSize: <span class="number">14</span>)~</span><br><span class="line"><span class="type">CGPoint</span>(x: <span class="number">10</span>, y: <span class="number">10</span>)~</span><br><span class="line"><span class="type">CGSize</span>(width: <span class="number">100</span>, height: <span class="number">100</span>)~</span><br><span class="line"><span class="type">CGRect</span>(x: <span class="number">10</span>, y: <span class="number">10</span>, width: <span class="number">100</span>, height: <span class="number">100</span>)~</span><br><span class="line"><span class="type">UIEdgeInsetsMake</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>)~</span><br></pre></td></tr></table></figure></p><h5 id="xib-storyboard-å­—ä½“é€‚é…"><a href="#xib-storyboard-å­—ä½“é€‚é…" class="headerlink" title="xib / storyboard å­—ä½“é€‚é…"></a>xib / storyboard å­—ä½“é€‚é…</h5><p>æ”¯æŒæ§ä»¶ <code>UILabel</code> <code>UIButton</code> <code>UITextView</code> <code>UITextField</code></p><p><img src= "/img/loading.gif" data-src="https://github.com/LinXunFeng/SwiftyFitsize/raw/master/Screenshots/xib-font.png" alt="xib-font"></p><h5 id="xib-storyboard-çº¦æŸé€‚é…"><a href="#xib-storyboard-çº¦æŸé€‚é…" class="headerlink" title="xib / storyboard çº¦æŸé€‚é…"></a>xib / storyboard çº¦æŸé€‚é…</h5><p><img src= "/img/loading.gif" data-src="https://github.com/LinXunFeng/SwiftyFitsize/raw/master/Screenshots/xib-constraint.png" alt="xib-font"></p><p>##### </p><p>æ³¨ï¼š<code>~</code>è¯·ä¸è¦ç›¸äº’åµŒå¥—ä½¿ç”¨ï¼Œå¦‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">CGPoint</span>(x: <span class="number">10</span>~, y: <span class="number">10</span>~)~</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;Excerpt in index | é¦–é¡µæ‘˜è¦&gt; 

&lt;blockquote&gt;
&lt;p&gt;åœ¨æ—¥å¸¸å¼€å‘ä¸­å¸¸å¸¸ä¼šå¯¹è®¾å¤‡è¿›è¡Œä¸€å®šçš„é€‚é…ï¼Œä¸ºäº†æ–¹ä¾¿åœ¨å¤šä¸ªé¡¹ç›®é‡Œç»Ÿä¸€ç®¡ç†å’Œä½¿ç”¨ï¼Œæ‰€ä»¥å°è£…å¹¶å¼€æºäº†&lt;code&gt;SwiftyFitsize&lt;/code&gt;è¿™ä¸ªåº“ï¼Œå¯ç”¨äºé€‚é…è§†å›¾åŠå­—ä½“å¤§å°ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒ xib å’Œ storyboard&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;GitHub: &lt;a href=&quot;https://github.com/LinXunFeng/SwiftyFitsize&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;SwiftyFitsize&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;+</summary>
    
    
    
    <category term="iOS" scheme="http://linxunfeng.top/categories/iOS/"/>
    
    
    <category term="iOS" scheme="http://linxunfeng.top/tags/iOS/"/>
    
    <category term="Swift" scheme="http://linxunfeng.top/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>iOS-é¢å‘åè®®å°è£…å…¨å±æ—‹è½¬åŠŸèƒ½</title>
    <link href="http://linxunfeng.top/2018/09/15/iOS-%E9%9D%A2%E5%90%91%E5%8D%8F%E8%AE%AE%E5%B0%81%E8%A3%85%E5%85%A8%E5%B1%8F%E6%97%8B%E8%BD%AC%E5%8A%9F%E8%83%BD/"/>
    <id>http://linxunfeng.top/2018/09/15/iOS-%E9%9D%A2%E5%90%91%E5%8D%8F%E8%AE%AE%E5%B0%81%E8%A3%85%E5%85%A8%E5%B1%8F%E6%97%8B%E8%BD%AC%E5%8A%9F%E8%83%BD/</id>
    <published>2018-09-15T18:05:45.000Z</published>
    <updated>2020-08-22T14:18:43.876Z</updated>
    
    <content type="html"><![CDATA[<Excerpt in index | é¦–é¡µæ‘˜è¦> <blockquote><p>å…³äºä½¿ç”¨é¢å‘åè®®æ¥å°è£…åŠŸèƒ½çš„å®æˆ˜å¯ä»¥å‚è€ƒæˆ‘ä¸Šç¯‡æ–‡ç«  <a href="/2018/04/07/iOS-é¢å‘åè®®æ–¹å¼å°è£…ç©ºç™½é¡µåŠŸèƒ½/">ã€iOS-é¢å‘åè®®æ–¹å¼å°è£…ç©ºç™½é¡µåŠŸèƒ½ã€‘</a>ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œæˆ‘ä»¬ç›´æ¥è¿›å…¥ä½¿ç”¨é˜¶æ®µå§ã€‚<br>æœ¬ç¯‡æ–‡ç« åªæœ‰ä¸€ä¸ªç›®çš„ï¼Œé‚£å°±æ˜¯åªè¦éµå®ˆåè®®ï¼Œä¸€è¡Œä»£ç éšæ„åˆ‡æ¢å…¨å±ï½</p></blockquote><p>å¦‚æœå¯¹é¢å‘åè®®æœ‰ç–‘é—®çš„åŒå­¦å¯ä»¥çœ‹ä¸‹æˆ‘ä¹‹å‰çš„ä¸¤ç¯‡æ–‡ç« </p><p><a href="/2017/09/12/iOS-Swift-é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰/">iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰</a> </p><p><a href="/2017/09/12/iOS-Swift-é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰/">iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰</a></p><p>+<a id="more"></a></p><The rest of contents | ä½™ä¸‹å…¨æ–‡><blockquote><p>å…³äºä½¿ç”¨é¢å‘åè®®æ¥å°è£…åŠŸèƒ½çš„å®æˆ˜å¯ä»¥å‚è€ƒæˆ‘ä¸Šç¯‡æ–‡ç«  <a href="/2018/04/07/iOS-é¢å‘åè®®æ–¹å¼å°è£…ç©ºç™½é¡µåŠŸèƒ½/">ã€iOS-é¢å‘åè®®æ–¹å¼å°è£…ç©ºç™½é¡µåŠŸèƒ½ã€‘</a>ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œæˆ‘ä»¬ç›´æ¥è¿›å…¥ä½¿ç”¨é˜¶æ®µå§ã€‚<br>æœ¬ç¯‡æ–‡ç« åªæœ‰ä¸€ä¸ªç›®çš„ï¼Œé‚£å°±æ˜¯åªè¦éµå®ˆåè®®ï¼Œä¸€è¡Œä»£ç éšæ„åˆ‡æ¢å…¨å±ï½</p></blockquote><p>å¦‚æœå¯¹é¢å‘åè®®æœ‰ç–‘é—®çš„åŒå­¦å¯ä»¥çœ‹ä¸‹æˆ‘ä¹‹å‰çš„ä¸¤ç¯‡æ–‡ç« </p><p><a href="/2017/09/12/iOS-Swift-é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰/">iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰</a> </p><p><a href="/2017/09/12/iOS-Swift-é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰/">iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰</a></p><h2 id="å¼€æºåº“"><a href="#å¼€æºåº“" class="headerlink" title="å¼€æºåº“"></a>å¼€æºåº“</h2><table><thead><tr><th>Name</th><th>Link</th></tr></thead><tbody><tr><td>GitHub</td><td><a href="https://github.com/LinXunFeng/LXFProtocolTool" target="_blank" rel="noopener">LXFProtocolTool</a></td></tr><tr><td>Wiki</td><td><a href="https://github.com/LinXunFeng/LXFProtocolTool/wiki" target="_blank" rel="noopener">Wikié¦–é¡µ</a></td></tr><tr><td>æœ¬æ–‡ Demo</td><td><a href="https://github.com/LinXunFeng/LXFProtocolTool/tree/master/Example/LXFProtocolTool/Demo/LXFFullScreenable" target="_blank" rel="noopener">LXFFullScreenable</a></td></tr></tbody></table><p>ä½¿ç”¨Cocoapodsçš„æ–¹å¼æ¥å®‰è£…å³å¯</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod <span class="string">'LXFProtocolTool/FullScreenable'</span></span><br></pre></td></tr></table></figure><h2 id="ä¸€ã€é…ç½®"><a href="#ä¸€ã€é…ç½®" class="headerlink" title="ä¸€ã€é…ç½®"></a>ä¸€ã€é…ç½®</h2><p>åœ¨AppDelegateä¸­å®ç°å¦‚ä¸‹æ–¹æ³•</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">application</span><span class="params">(<span class="number">_</span> application: UIApplication, supportedInterfaceOrientationsFor window: UIWindow?)</span></span> -&gt; <span class="type">UIInterfaceOrientationMask</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">UIApplication</span>.shared.lxf.currentVcOrientationMask</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒã€ä½¿ç”¨æ¡ˆä¾‹"><a href="#äºŒã€ä½¿ç”¨æ¡ˆä¾‹" class="headerlink" title="äºŒã€ä½¿ç”¨æ¡ˆä¾‹"></a>äºŒã€ä½¿ç”¨æ¡ˆä¾‹</h2><blockquote><p>æ–¹æ³•ä¸å±æ€§çš„è°ƒç”¨éƒ½éœ€è¦å‘½åç©ºé—´åŠ ä¸Š <code>lxf</code>ï¼Œå¦‚<code>isFullScreen</code> -&gt; <code>lxf.isFullScreen</code></p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">isFullScreen : è·å–å½“å‰éµå®ˆåè®®è€…æ˜¯å¦ä¸ºå…¨å±çŠ¶æ€</span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">switchFullScreen</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    isEnter: Bool? = <span class="literal">nil</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    specifiedView: UIView? = <span class="literal">nil</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    superView: UIView? = <span class="literal">nil</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    config: FullScreenableConfig? = <span class="literal">nil</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    completed: <span class="params">(<span class="params">(<span class="number">_</span> isFullScreen: Bool)</span></span></span></span>-&gt;<span class="type">Void</span>)? = <span class="literal">nil</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><table><thead><tr><th>Name</th><th>Type</th><th>Desc</th></tr></thead><tbody><tr><td>isEnter</td><td><code>Bool?</code></td><td>æ˜¯å¦è¿›å…¥å…¨å±</td></tr><tr><td>specifiedView</td><td><code>UIView?</code></td><td>æŒ‡å®šå³å°†å…¨å±çš„è§†å›¾</td></tr><tr><td>superView</td><td><code>UIView?</code></td><td>ä½œä¸ºé€€å‡ºå…¨å±åspecifiedViewçš„çˆ¶è§†å›¾</td></tr><tr><td>config</td><td><code>FullScreenableConfig?</code></td><td>é…ç½®</td></tr><tr><td>completed</td><td><code>((_ isFullScreen: Bool)-&gt;Void)?</code></td><td>è¿›å…¥/é€€å‡º å…¨å±åçš„å›è°ƒ</td></tr></tbody></table><blockquote><p>å½“<code>switchFullScreen</code>çš„è°ƒç”¨è€…ä¸º<code>UIView</code>æ—¶ï¼Œå¦‚æœ<code>specifiedView</code>ä¸º<code>nil</code>ä¼šè‡ªåŠ¨å¡«å†™ï¼Œ<code>superView</code>ä¹Ÿæ˜¯å¦‚æ­¤</p></blockquote><blockquote><p><code>switchFullScreen</code>æ–¹æ³•ä¸æ¨èç›´æ¥ä½¿ç”¨ï¼Œä¸è¿‡å½“éµå®ˆåè®®è€…ä¸º<code>UIViewController</code>æ—¶ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨é»˜è®¤å‚æ•°æ¥åˆ‡æ¢å±å¹•æ–¹å‘<code>lxf.switchFullScreen()</code></p></blockquote><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/09/iOS-é¢å‘åè®®å°è£…å…¨å±æ—‹è½¬åŠŸèƒ½/lxf_FullScreenable_1.gif" alt="lxf_FullScreenable_1"></p><p>ä»¥ä¸‹åˆ†ä¸¤ç§æƒ…å†µè¯´æ˜</p><h3 id="UIViewController"><a href="#UIViewController" class="headerlink" title="UIViewController"></a>UIViewController</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">enterFullScreen</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    specifiedView: UIView,</span></span></span><br><span class="line"><span class="function"><span class="params">    config: FullScreenableConfig? = <span class="literal">nil</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    completed: FullScreenableCompleteType? = <span class="literal">nil</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span></span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exitFullScreen</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    superView: UIView,</span></span></span><br><span class="line"><span class="function"><span class="params">    config: FullScreenableConfig? = <span class="literal">nil</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    completed: FullScreenableCompleteType? = <span class="literal">nil</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span></span><br></pre></td></tr></table></figure><blockquote><p>ä»¥ä¸Šä¸¤ä¸ªæ–¹æ³•æ˜¯å¯¹<code>switchFullScreen</code>çš„æŠ½ç¦»ï¼Œä½¿è°ƒç”¨æ—¶å¯¹å‚æ•°çš„ä¼ é€’æ›´åŠ æ¸…æ™°</p></blockquote><p>1ã€éµå®ˆåè®® <code>FullScreenable</code></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LXFFullScreenableController</span>: <span class="title">UIViewController</span>, <span class="title">FullScreenable</span> </span>&#123; &#125;</span><br></pre></td></tr></table></figure><p>2ã€æŒ‡å®šè§†å›¾è¿›å…¥å…¨å±<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lxf.enterFullScreen(specifiedView: cyanView)</span><br></pre></td></tr></table></figure></p><p>3ã€æŒ‡å®šè§†å›¾é€€å‡ºå…¨å±ï¼Œå¹¶æ·»åŠ åˆ°å½“å‰æ§åˆ¶å™¨çš„<code>view</code>ä¸Š<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lxf.exitFullScreen(superView: <span class="keyword">self</span>.view)</span><br></pre></td></tr></table></figure></p><h4 id="ğŸ”¥è‡ªåŠ¨è¿›å…¥-é€€å‡ºå…¨å±"><a href="#ğŸ”¥è‡ªåŠ¨è¿›å…¥-é€€å‡ºå…¨å±" class="headerlink" title="ğŸ”¥è‡ªåŠ¨è¿›å…¥|é€€å‡ºå…¨å±"></a>ğŸ”¥è‡ªåŠ¨è¿›å…¥|é€€å‡ºå…¨å±</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">autoFullScreen</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    specifiedView: UIView,</span></span></span><br><span class="line"><span class="function"><span class="params">    superView: UIView,</span></span></span><br><span class="line"><span class="function"><span class="params">    config: FullScreenableConfig? = <span class="literal">nil</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span></span><br></pre></td></tr></table></figure><ul><li>æ§åˆ¶å™¨å¯ä»¥è°ƒç”¨è¯¥æ–¹æ³•æ¥æ³¨å†Œè‡ªåŠ¨è¿›å…¥æˆ–é€€å‡ºå…¨å±ï¼Œå„æ§åˆ¶å™¨ä¹‹é—´äº’ä¸å½±å“ã€‚</li><li><code>view</code>æ‰‹åŠ¨è¿›å…¥å…¨å±ä¼šå±è”½å½“å‰æ§åˆ¶å™¨çš„è‡ªåŠ¨å…¨å±åŠŸèƒ½ï¼Œé€€å‡ºæ–¹å¯æ¢å¤</li></ul><h3 id="UIView"><a href="#UIView" class="headerlink" title="UIView"></a>UIView</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">enterFullScreen</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    specifiedView: UIView? = <span class="literal">nil</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    config: FullScreenableConfig? = <span class="literal">nil</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    completed: FullScreenableCompleteType? = <span class="literal">nil</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span></span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exitFullScreen</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    superView: UIView? = <span class="literal">nil</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    config: FullScreenableConfig? = <span class="literal">nil</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    completed: FullScreenableCompleteType? = <span class="literal">nil</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span></span><br></pre></td></tr></table></figure><blockquote><p>ä»¥ä¸Šä¸¤ä¸ªæ–¹æ³•æ˜¯å¯¹<code>switchFullScreen</code>çš„æŠ½ç¦»ï¼Œä½¿è°ƒç”¨æ—¶å¯¹å‚æ•°çš„ä¼ é€’æ›´åŠ æ¸…æ™°</p></blockquote><p>1ã€éµå®ˆåè®® <code>FullScreenable</code></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LXFFullScreenView</span>: <span class="title">UIButton</span>, <span class="title">FullScreenable</span> </span>&#123; &#125;</span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> cyanView = <span class="type">LXFFullScreenView</span>()</span><br></pre></td></tr></table></figure><p>2ã€è¿›å…¥å…¨å±</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cyanView.lxf.enterFullScreen()</span><br></pre></td></tr></table></figure><p>3ã€é€€å‡ºå…¨å±<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cyanView.lxf.exitFullScreen()</span><br></pre></td></tr></table></figure></p><blockquote><p>è¿™é‡Œæ˜¯å¯¹éµå®ˆäº†<code>FullScreenable</code>åè®®çš„è§†å›¾è¿›å…¥å…¨å±åˆ‡æ¢ï¼Œç”±äºä»£ç å†…éƒ¨å·²ç»ç»è¿‡è‡ªåŠ¨è§†å›¾å¡«å†™ï¼Œæ‰€ä»¥ç›´æ¥è°ƒç”¨ç›¸åº”çš„æ–¹æ³•å³å¯ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è‡ªå·±æŒ‡å®š<code>specifiedView</code>å’Œ<code>superView</code></p></blockquote><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/09/iOS-é¢å‘åè®®å°è£…å…¨å±æ—‹è½¬åŠŸèƒ½/lxf_FullScreenable_2.gif" alt="lxf_FullScreenable_2"></p><h2 id="ä¸‰ã€FullScreenableConfigè¯´æ˜"><a href="#ä¸‰ã€FullScreenableConfigè¯´æ˜" class="headerlink" title="ä¸‰ã€FullScreenableConfigè¯´æ˜"></a>ä¸‰ã€FullScreenableConfigè¯´æ˜</h2><blockquote><p>ä¸Šè¿°çš„æ–¹æ³•éƒ½æœ‰ä¸€ä¸ª<code>config</code>å‚æ•°ï¼Œé»˜è®¤ä¸ºnilï¼Œå³ä¸ºé»˜è®¤é…ç½®</p></blockquote><p>ç›¸å…³å±æ€§è¯´æ˜<br>| Name                       | Type                     | Desc                           | Default        |<br>| â€”â€”â€”â€”â€”â€”â€”â€”â€“ | â€”â€”â€”â€”â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” | â€”â€”â€”â€”â€“ |<br>| animateDuration            | <code>Double</code>                 | è¿›å…¥/é€€å‡º å…¨å±æ—¶çš„æ—‹è½¬åŠ¨ç”»æ—¶é—´ | 0.25           |<br>| enterFullScreenOrientation | <code>UIInterfaceOrientation</code> | è¿›å…¥å…¨å±æ—¶çš„åˆå§‹æ–¹å‘           | landscapeRight |</p><p>è¿™é‡Œæˆ‘ä»¬æŠŠåŠ¨ç”»æ—¶é—´è®¾ç½®ä¸º<code>1s</code>ï¼Œåˆå§‹æ–¹å‘ä¸º<code>å·¦</code>åæ¥çœ‹çœ‹æ•ˆæœ<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">FullScreenableConfig</span>(</span><br><span class="line">    animateDuration: <span class="number">1</span>,</span><br><span class="line">    enterFullScreenOrientation : .landscapeLeft</span><br><span class="line">)</span><br></pre></td></tr></table></figure><br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cyanView.lxf.enterFullScreen(config: diyConfig)</span><br><span class="line">cyanView.lxf.exitFullScreen(config: diyConfig)</span><br></pre></td></tr></table></figure></p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/09/iOS-é¢å‘åè®®å°è£…å…¨å±æ—‹è½¬åŠŸèƒ½/lxf_FullScreenable_3.gif" alt="lxf_FullScreenable_3"></p><h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>åˆ°è¿™é‡Œç›¸å…³çš„è¯´æ˜å·²ç½—åˆ—å®Œæ¯•ï¼Œæœ‰ä»€ä¹ˆä¸æ¸…æ¥šçš„å¯ä»¥ä¸‹è½½<a href="https://github.com/LinXunFeng/LXFProtocolTool/tree/master/Example/LXFProtocolTool/Demo/LXFFullScreenable" target="_blank" rel="noopener">Demo</a>çœ‹çœ‹ï¼Œæˆ–è€…åœ¨æ–‡ç« ä¸‹æ–¹ç•™è¨€æé—®</p><p><a href="https://github.com/LinXunFeng/LXFProtocolTool" target="_blank" rel="noopener">LXFProtocolTool</a> ä¸»è¦æ˜¯é€šè¿‡åè®®çš„æ–¹å¼æ¥æ–¹ä¾¿å¿«æ·åœ°å®ç°ä¸€äº›çš„å®ç”¨åŠŸèƒ½ï¼Œé™¤äº†æœ¬æ–‡æåŠçš„å…¨å±æ—‹è½¬åŠŸèƒ½å¤–è¿˜æœ‰å…¶å®ƒå®ç”¨åŠŸèƒ½çš„å°è£…ï¼Œå…·ä½“å†…å®¹å¯ä»¥åˆ° <a href="https://github.com/LinXunFeng/LXFProtocolTool/wiki" target="_blank" rel="noopener">Wikié¦–é¡µ</a>  æŸ¥æ‰¾ã€‚å¦‚æœä½ æœ‰ä»€ä¹ˆæƒ³å®ç°çš„åŠŸèƒ½ä¹Ÿå¯ä»¥æå‡ºæ¥ï¼Œå–œæ¬¢çš„å°±ç»™ä¸ªStaré¼“åŠ±ä¸‹æˆ‘å§ ğŸš€ ğŸš€ ğŸš€ï¼Œæ„Ÿè°¢æ”¯æŒï¼</p>]]></content>
    
    
    <summary type="html">&lt;Excerpt in index | é¦–é¡µæ‘˜è¦&gt; 

&lt;blockquote&gt;
&lt;p&gt;å…³äºä½¿ç”¨é¢å‘åè®®æ¥å°è£…åŠŸèƒ½çš„å®æˆ˜å¯ä»¥å‚è€ƒæˆ‘ä¸Šç¯‡æ–‡ç«  &lt;a href=&quot;/2018/04/07/iOS-é¢å‘åè®®æ–¹å¼å°è£…ç©ºç™½é¡µåŠŸèƒ½/&quot;&gt;ã€iOS-é¢å‘åè®®æ–¹å¼å°è£…ç©ºç™½é¡µåŠŸèƒ½ã€‘&lt;/a&gt;ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œæˆ‘ä»¬ç›´æ¥è¿›å…¥ä½¿ç”¨é˜¶æ®µå§ã€‚&lt;br&gt;æœ¬ç¯‡æ–‡ç« åªæœ‰ä¸€ä¸ªç›®çš„ï¼Œé‚£å°±æ˜¯åªè¦éµå®ˆåè®®ï¼Œä¸€è¡Œä»£ç éšæ„åˆ‡æ¢å…¨å±ï½&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœå¯¹é¢å‘åè®®æœ‰ç–‘é—®çš„åŒå­¦å¯ä»¥çœ‹ä¸‹æˆ‘ä¹‹å‰çš„ä¸¤ç¯‡æ–‡ç« &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/2017/09/12/iOS-Swift-é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰/&quot;&gt;iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/2017/09/12/iOS-Swift-é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰/&quot;&gt;iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;+</summary>
    
    
    
    <category term="iOS" scheme="http://linxunfeng.top/categories/iOS/"/>
    
    
    <category term="iOS" scheme="http://linxunfeng.top/tags/iOS/"/>
    
    <category term="Swift" scheme="http://linxunfeng.top/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>AppRTCå®æˆ˜</title>
    <link href="http://linxunfeng.top/2018/06/07/AppRTC%E5%AE%9E%E6%88%98/"/>
    <id>http://linxunfeng.top/2018/06/07/AppRTC%E5%AE%9E%E6%88%98/</id>
    <published>2018-06-07T22:49:36.000Z</published>
    <updated>2020-08-22T14:18:43.876Z</updated>
    
    <content type="html"><![CDATA[<Excerpt in index | é¦–é¡µæ‘˜è¦> <p>è®°å½•AppRTCçš„æ­å»ºè¿‡ç¨‹ï¼Œå®ç°iOSã€Androidã€BrowseråŒå¼‚è®¾å¤‡çš„è§†é¢‘é€šä¿¡</p><a id="more"></a><The rest of contents | ä½™ä¸‹å…¨æ–‡><blockquote><p>1ã€è®°å½•AppRTCçš„æ­å»ºè¿‡ç¨‹ï¼Œå®ç°iOSã€å®‰å“ã€browseråŒå¼‚è®¾å¤‡çš„è§†é¢‘é€šä¿¡<br>2ã€ä»¥ä¸‹ç›´æ¥ä»¥rootèº«ä»½è¿›è¡Œæ“ä½œï¼Œæ‰€æœ‰çš„éœ€è¦ä¸‹è½½çš„æ–‡ä»¶å‡æ”¾ç½®äº<code>/root</code>ç›®å½•ä¸‹ï¼Œéœ€è¦çš„è¯ï¼Œå¯ä»¥è‡ªè¡Œå†³å®šå­˜æ”¾ä½ç½®ï¼Œä½†æ˜¯è¦æ³¨æ„ä¿®æ”¹ç›¸å…³çš„é…ç½®è·¯å¾„ï½</p></blockquote><h2 id="ä¸€ã€è®¾å¤‡é…ç½®"><a href="#ä¸€ã€è®¾å¤‡é…ç½®" class="headerlink" title="ä¸€ã€è®¾å¤‡é…ç½®"></a>ä¸€ã€è®¾å¤‡é…ç½®</h2><ul><li>é˜¿é‡Œäº‘ESCæœåŠ¡å™¨ Ubuntu 16.04 64ä½</li><li>è…¾è®¯äº‘åŸŸå</li></ul><h2 id="äºŒã€ç›¸å…³ç¯å¢ƒ"><a href="#äºŒã€ç›¸å…³ç¯å¢ƒ" class="headerlink" title="äºŒã€ç›¸å…³ç¯å¢ƒ"></a>äºŒã€ç›¸å…³ç¯å¢ƒ</h2><h3 id="1ã€JDK"><a href="#1ã€JDK" class="headerlink" title="1ã€JDK"></a>1ã€JDK</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">add-apt-repository ppa:openjdk-r/ppa </span><br><span class="line">apt-get update </span><br><span class="line">apt-get install openjdk-8-jdk</span><br></pre></td></tr></table></figure><h3 id="2ã€nodejs"><a href="#2ã€nodejs" class="headerlink" title="2ã€nodejs"></a>2ã€nodejs</h3><p><a href="https://nodejs.org/en/" target="_blank" rel="noopener">nodejså®˜ç½‘</a><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// è¿™é‡Œçš„ç‰ˆæœ¬8.xå¯ä»¥æŒ‰è‡ªå·±çš„éœ€æ±‚å»ä¿®æ”¹</span><br><span class="line">curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -</span><br><span class="line">apt-get install -y nodejs</span><br></pre></td></tr></table></figure><br>è‡³æ­¤å·²ç»å®‰è£…äº†æœ€æ–°ç‰ˆçš„nodejså’Œnpmäº†,å¯ä»¥ä½¿ç”¨<code>-v</code>æ¥æŸ¥çœ‹å½“å‰ç‰ˆæœ¬</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure><p>å®‰è£…<code>grunt-cli</code>ï¼Œåé¢éœ€è¦<code>grunt</code>æ¥æ„å»ºæˆ¿é—´æœåŠ¡å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm -g install grunt-cli</span><br></pre></td></tr></table></figure><h3 id="3ã€pythonä¸python-webtest"><a href="#3ã€pythonä¸python-webtest" class="headerlink" title="3ã€pythonä¸python-webtest"></a>3ã€pythonä¸python-webtest</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install python </span><br><span class="line">apt-get install python-webtest</span><br></pre></td></tr></table></figure><h3 id="libevent"><a href="#libevent" class="headerlink" title="libevent"></a>libevent</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-cache search libevent</span><br><span class="line">apt-get install libevent-dev</span><br></pre></td></tr></table></figure><hr><h2 id="ä¸‰ã€Room-Server-æˆ¿é—´æœåŠ¡å™¨"><a href="#ä¸‰ã€Room-Server-æˆ¿é—´æœåŠ¡å™¨" class="headerlink" title="ä¸‰ã€Room Server æˆ¿é—´æœåŠ¡å™¨"></a>ä¸‰ã€Room Server æˆ¿é—´æœåŠ¡å™¨</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone  https:&#x2F;&#x2F;github.com&#x2F;webrtc&#x2F;apprtc.git   </span><br><span class="line">cd apprtc</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><h3 id="1ã€é…ç½®-constants-py"><a href="#1ã€é…ç½®-constants-py" class="headerlink" title="1ã€é…ç½® constants.py"></a>1ã€é…ç½® constants.py</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å½“å‰ç›®å½• -- apprtc</span></span><br><span class="line">vim src/app_engine/constants.py</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿™éƒ¨åˆ†ä¸º æ·»åŠ </span></span><br><span class="line">TURN_BASE_URL = <span class="string">'https://linxunfeng.top'</span> <span class="comment"># ä¿®æ”¹ä¸ºä½ è‡ªå·±å½“å‰æœåŠ¡å™¨çš„åŸŸåï¼Œä¸‹é¢çš„äº¦æ˜¯å¦‚æ­¤</span></span><br><span class="line">TURN_URL_TEMPLATE = <span class="string">'%s/turn.php?username=%s&amp;key=%s'</span> <span class="comment">#å¦‚æœturn.phpæœªå®ç°ï¼Œå¯ä½¿ç”¨é»˜è®¤é…ç½®</span></span><br><span class="line">CEOD_KEY = <span class="string">'lxf'</span> <span class="comment"># è¿™ä¸ªå¾ˆé‡è¦ï¼Œåé¢é…ç½®turnæ—¶éœ€è¦ç”¨åˆ°</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™éƒ¨åˆ†ä¸º ä¿®æ”¹</span></span><br><span class="line">ICE_SERVER_BASE_URL = <span class="string">'https://linxunfeng.top'</span></span><br><span class="line">ICE_SERVER_URL_TEMPLATE = <span class="string">'%s/iceconfig.php?key=%s'</span> <span class="comment">#å¦‚æœiceconfig.phpæœªå®ç°ï¼Œå¯ç”¨é»˜è®¤é…ç½®ï¼Œä½†æ˜¯Android Apkä¼šæœ‰é—®é¢˜</span></span><br><span class="line">ICE_SERVER_API_KEY = os.environ.get(<span class="string">'ICE_SERVER_API_KEY'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Dictionary keys in the collider instance info constant.</span></span><br><span class="line">WSS_INSTANCE_HOST_KEY = <span class="string">'linxunfeng.top:8089'</span> <span class="comment">#ä¿¡ä»¤æœåŠ¡å™¨ç«¯å£å·8089  </span></span><br><span class="line">WSS_INSTANCE_NAME_KEY = <span class="string">'vm_name'</span></span><br><span class="line">WSS_INSTANCE_ZONE_KEY = <span class="string">'zone'</span></span><br><span class="line">WSS_INSTANCES = [&#123;</span><br><span class="line">    WSS_INSTANCE_HOST_KEY: <span class="string">'linxunfeng.top:8089'</span>,</span><br><span class="line">    WSS_INSTANCE_NAME_KEY: <span class="string">'wsserver-std'</span>,</span><br><span class="line">    WSS_INSTANCE_ZONE_KEY: <span class="string">'us-central1-a'</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">    WSS_INSTANCE_HOST_KEY: <span class="string">'linxunfeng.top:8089'</span>,</span><br><span class="line">    WSS_INSTANCE_NAME_KEY: <span class="string">'wsserver-std-2'</span>,</span><br><span class="line">    WSS_INSTANCE_ZONE_KEY: <span class="string">'us-central1-f'</span></span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure><h3 id="2ã€ç¼–è¯‘"><a href="#2ã€ç¼–è¯‘" class="headerlink" title="2ã€ç¼–è¯‘"></a>2ã€ç¼–è¯‘</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å½“å‰ç›®å½• -- apprtc</span></span><br><span class="line">grunt build</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘å¥½å<code>apprtc</code>ç›®å½•ä¸‹å°±ä¼šå¤šå‡ºä¸€ä¸ªåä¸º<code>out</code>çš„ç›®å½•ï¼Œé‡Œé¢å­˜æ”¾çš„å°±æ˜¯ç¼–è¯‘å¥½çš„<code>room server</code></p><h3 id="3ã€GoogleAppEngineçš„å®‰è£…ä¸é…ç½®"><a href="#3ã€GoogleAppEngineçš„å®‰è£…ä¸é…ç½®" class="headerlink" title="3ã€GoogleAppEngineçš„å®‰è£…ä¸é…ç½®"></a>3ã€GoogleAppEngineçš„å®‰è£…ä¸é…ç½®</h3><p>å®˜ç½‘ï¼š<a href="https://cloud.google.com/appengine/downloads#Google_App_Engine_SDK_for_Python" target="_blank" rel="noopener">GoogleAppEngine</a></p><p>å¯ä»¥åœ¨æ­¤è·¯å¾„æ‰¾æœ€æ–°ç‰ˆæœ¬</p><blockquote><p>GoogleAppEngine -&gt; Python -&gt; Download and install the original App Engine SDK for Python.</p></blockquote><p>ç›®å‰æœ€æ–°ç‰ˆæœ¬ä¸ºï¼š<a href="https://storage.googleapis.com/appengine-sdks/featured/google_appengine_1.9.70.zip" target="_blank" rel="noopener">google_appengine_1.9.70.zip</a></p><ul><li>ä¸‹è½½ GoogleAppEngine</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://storage.googleapis.com/appengine-sdks/featured/google_appengine_1.9.70.zip</span><br></pre></td></tr></table></figure><ul><li>è§£å‹</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip google_appengine_1.9.70.zip</span><br></pre></td></tr></table></figure><ul><li>è®¾ç½®ç¯å¢ƒå˜é‡</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH="$PATH:/root/google_appengine/"</span><br></pre></td></tr></table></figure><ul><li>åº”ç”¨ç¯å¢ƒå˜é‡</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><h3 id="4ã€å¼€å¯-Room-Server"><a href="#4ã€å¼€å¯-Room-Server" class="headerlink" title="4ã€å¼€å¯ Room Server"></a>4ã€å¼€å¯ Room Server</h3><ul><li>åŸºæœ¬å‘½ä»¤</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å½“å‰è·¯å¾„ -- /root/google_appengine</span></span><br><span class="line">./dev_appserver.py --host=linxunfeng.top ../apprtc/out/app_engine/</span><br></pre></td></tr></table></figure><p><strong>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œè¿™é‡Œå°±ä¸èƒ½ç”¨åŸŸå<code>linxunfeng.top</code>æ¥å¯åŠ¨<code>room server</code>ï¼Œè€Œæ˜¯ä½¿ç”¨æœ¬åœ°ç½‘å¡åœ°å€</strong>ï¼Œå¦åˆ™å°±ä¼šæç¤º</p><blockquote><p>raise BindError(â€˜Unable to bind %s:%sâ€™ % self.bind_addr)<br>google.appengine.tools.devappserver2.wsgi_server.BindError: Unable to bind linxunfeng.top:8080</p></blockquote><ul><li>æŸ¥çœ‹ç½‘å¡</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@xxx:~/google_appengine# ifconfig</span><br><span class="line">eth0      Link encap:Ethernet  HWaddr 00:16:3e:08:b4:02  </span><br><span class="line">          inet addr:172.18.141.108  Bcast:172.18.143.255  Mask:255.255.240.0</span><br><span class="line">          ...</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./dev_appserver.py --host=172.18.141.108 ../apprtc/out/app_engine/</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±å¥½äº†å—ï¼Ÿä¸ï¼Œè™½ç„¶æ²¡æœ‰æŠ¥é”™ï¼Œä½†æ˜¯ä½ ç”¨æµè§ˆå™¨æ‰“å¼€ä½ çš„åŸŸåçœ‹çœ‹â€¦<br>è¿™é‡Œç›´æ¥ç»™å‡ºæœ€ç»ˆå‘½ä»¤ï¼Œå…·ä½“åŸå› çœ‹ <a href="#1ã€Request-host-is-not-whitelist-enabled">ç–‘éš¾æ‚ç—‡ - 1</a></p><ul><li>æœ€ç»ˆå‘½ä»¤</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./dev_appserver.py --enable_host_checking=false --host=172.18.141.108 ../apprtc/out/app_engine/</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¦‚æœæƒ³ç›´æ¥åå°è¿è¡Œï¼Œåˆ™ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤</span></span><br><span class="line">nohup ./dev_appserver.py --enable_host_checking=false --host=172.18.141.108 ../apprtc/out/app_engine/ &amp;</span><br></pre></td></tr></table></figure><ul><li>è®¿é—® room server</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;åŸŸå:8080</span><br></pre></td></tr></table></figure><h2 id="å››ã€Collider-Server-ä¿¡ä»¤æœåŠ¡å™¨"><a href="#å››ã€Collider-Server-ä¿¡ä»¤æœåŠ¡å™¨" class="headerlink" title="å››ã€Collider Server ä¿¡ä»¤æœåŠ¡å™¨"></a>å››ã€Collider Server ä¿¡ä»¤æœåŠ¡å™¨</h2><h3 id="1ã€æ‹·è´collideræºç "><a href="#1ã€æ‹·è´collideræºç " class="headerlink" title="1ã€æ‹·è´collideræºç "></a>1ã€æ‹·è´collideræºç </h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å½“å‰è·¯å¾„ -- /root</span></span><br><span class="line">mkdir -p goWorkspace/src</span><br></pre></td></tr></table></figure><p>æŠŠ<code>apprtc/src/collider/</code>ç›®å½•ä¸‹çš„ä¸‰ä¸ªç›®å½•ï¼ˆcolliderã€collidermainã€collidertestï¼‰å¤åˆ¶åˆ°<code>goWorkspace/src/</code>ç›®å½•ä¸‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -rf apprtc/src/collider/* /goWorkspace/src</span><br></pre></td></tr></table></figure><h3 id="2ã€ä¿®æ”¹ä»£ç "><a href="#2ã€ä¿®æ”¹ä»£ç " class="headerlink" title="2ã€ä¿®æ”¹ä»£ç "></a>2ã€ä¿®æ”¹ä»£ç </h3><ul><li>ä¿®æ”¹æˆ¿é—´æœåŠ¡å™¨çš„åœ°å€</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> goWorkspace/src/collidermain/main.go</span></span><br><span class="line">var roomSrv = flag.String("room-server", "https://åŸŸå", "The origin of the room server")</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹ç½‘ç«™è¯ä¹¦è·¯å¾„</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> goWorkspace/src/collider/collider.go</span></span><br><span class="line"></span><br><span class="line">e = server.ListenAndServeTLS("/etc/letsencrypt/live/åŸŸå/fullchain.pem", "/etc/letsencrypt/live/åŸŸå/privkey.pem")</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¦‚ï¼š</span></span><br><span class="line">e = server.ListenAndServeTLS("/etc/letsencrypt/live/linxunfeng.top/fullchain.pem", "/etc/letsencrypt/live/linxunfeng.top/privkey.pem")</span><br></pre></td></tr></table></figure><p>ç›¸å…³çš„SSLè¯ä¹¦<code>fullchain.pem</code>å’Œ<code>privkey.pem</code>åœ¨åé¢çš„nginxé…ç½®ä¸­ä¼šæåˆ°ï¼Œè¿™é‡Œå…ˆå†™ä¸Š</p><h3 id="3ã€å®‰è£…ä¸é…ç½®ç¯å¢ƒ"><a href="#3ã€å®‰è£…ä¸é…ç½®ç¯å¢ƒ" class="headerlink" title="3ã€å®‰è£…ä¸é…ç½®ç¯å¢ƒ"></a>3ã€å®‰è£…ä¸é…ç½®ç¯å¢ƒ</h3><ul><li>ä¸‹è½½GOè¯­è¨€ç¯å¢ƒ</li></ul><p>FQ åˆ° <a href="https://golang.org/dl/" target="_blank" rel="noopener">GOå®˜ç½‘</a>ä¸Šä¸‹è½½æœ€æ–°ç‰ˆæœ¬</p><p>å½“å‰æœ€æ–°ç‰ˆæœ¬ï¼š<a href="https://dl.google.com/go/go1.10.2.linux-amd64.tar.gz" target="_blank" rel="noopener">go1.10.2.linux-amd64.tar.gz</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å½“å‰è·¯å¾„ -- /root</span></span><br><span class="line">wget https://dl.google.com/go/go1.10.2.linux-amd64.tar.gz</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹profile</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure><p>æ‰“å¼€<code>profile</code>åæ·»åŠ å¦‚ä¸‹å†…å®¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export GOROOT=/root/go</span><br><span class="line">export GOPATH=/root/goWorkspace</span><br><span class="line">export PATH=$PATH:$GOROOT/bin:$GOPATH/bin</span><br></pre></td></tr></table></figure><ul><li>åº”ç”¨ç¯å¢ƒå˜é‡</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><h3 id="4ã€ç¼–è¯‘"><a href="#4ã€ç¼–è¯‘" class="headerlink" title="4ã€ç¼–è¯‘"></a>4ã€ç¼–è¯‘</h3><p>è¿›å…¥ç›®å½• <code>goWorkspace/src/</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">go get collidermain</span><br><span class="line">go install collidermain</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„ç¼–è¯‘è¿‡ç¨‹éœ€è¦ç¿»å¢™ï¼Œå¦‚æœæ— æ³•ç¿»å¢™ï¼Œè¯·çœ‹ä»¥ä¸‹å†…å®¹ï¼Œå¦‚æœå¯ä»¥åˆ™ç›´æ¥è·³è‡³ç¬¬5å°ç‚¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å½“å‰è·¯å¾„ -- /root/goWorkspace/src</span></span><br><span class="line">mkdir -p golang.org/x </span><br><span class="line">cd golang.org/x/</span><br><span class="line">git clone https://github.com/golang/net</span><br></pre></td></tr></table></figure><p><code>git clone</code>æˆåŠŸåå†æ‰§è¡Œä¸Šé¢çš„ä¸¤è¡Œç¼–è¯‘å‘½ä»¤</p><h3 id="5ã€å¼€å¯-Collider-Server"><a href="#5ã€å¼€å¯-Collider-Server" class="headerlink" title="5ã€å¼€å¯ Collider Server"></a>5ã€å¼€å¯ Collider Server</h3><p>è¿›å…¥<code>goWorkspace</code>ä¸‹çš„<code>bin</code>ç›®å½•ï¼Œæ‰§è¡Œå‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å½“å‰è·¯å¾„ -- /root/goWorkspace/bin</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -tls=<span class="literal">true</span> : æŒ‡éœ€è¦æ•°å­—è¯ä¹¦</span></span><br><span class="line">./collidermain -port=8089 -tls=true</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¦‚æœæƒ³ç›´æ¥åå°è¿è¡Œï¼Œåˆ™ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤</span></span><br><span class="line">nohup ./collidermain -port=8089 -tls=true &amp;</span><br></pre></td></tr></table></figure><h2 id="äº”ã€STUN-TURNæœåŠ¡å™¨"><a href="#äº”ã€STUN-TURNæœåŠ¡å™¨" class="headerlink" title="äº”ã€STUN\TURNæœåŠ¡å™¨"></a>äº”ã€STUN\TURNæœåŠ¡å™¨</h2><h3 id="1ã€å®‰è£…coturn"><a href="#1ã€å®‰è£…coturn" class="headerlink" title="1ã€å®‰è£…coturn"></a>1ã€å®‰è£…<code>coturn</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install coturn</span><br></pre></td></tr></table></figure><h3 id="2ã€ä¿®æ”¹é…ç½®"><a href="#2ã€ä¿®æ”¹é…ç½®" class="headerlink" title="2ã€ä¿®æ”¹é…ç½®"></a>2ã€ä¿®æ”¹é…ç½®</h3><ul><li>coturn</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/default/coturn</span><br></pre></td></tr></table></figure><p>æŠŠTURNSERVER_ENABLED=1çš„æ³¨é‡Šå»æ‰</p><ul><li>turnserver.conf</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/turnserver.conf</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">listening-device=eth0 #æ­¤å¤„eth0æ˜¯ç”µè„‘ç½‘å¡åç§°</span><br><span class="line">listening-port=3478 #turnæœåŠ¡å™¨çš„ç«¯å£å·</span><br><span class="line">relay-device=eth0 #æ­¤å¤„eth0æ˜¯ç”µè„‘ç½‘å¡åç§°</span><br><span class="line">min-port=49152</span><br><span class="line">max-port=65535</span><br><span class="line">Verbose</span><br><span class="line">fingerprint</span><br><span class="line">lt-cred-mech</span><br><span class="line">use-auth-secret</span><br><span class="line">static-auth-secret=lxf #æ­¤å¤„è¦å’Œæˆ¿é—´æœåŠ¡å™¨é…ç½®æ—¶constants.pyæ–‡ä»¶ä¸­çš„CODE_KEYä¿æŒä¸€è‡´ã€‚</span><br><span class="line">user=lxf:0x8638170519dd1309044bca55319ff929</span><br><span class="line">user=lxf:lxf</span><br><span class="line">stale-nonce</span><br><span class="line">cert=/usr/local/etc/turn_server_cert.pem</span><br><span class="line">pkey=/usr/local/etc/turn_server_pkey.pem</span><br><span class="line">no-loopback-peers</span><br><span class="line">no-multicast-peers</span><br><span class="line">mobility</span><br><span class="line">no-cli</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°æ–‡ä»¶ä¸­ 0x8638170519dd1309044bca55319ff929ï¼š </p><p><code>turnadmin -k -u lxf -r north.gov -p lxf</code></p><blockquote><p>-k è¡¨ç¤ºç”Ÿæˆä¸€ä¸ªlong-term credential key<br>-u è¡¨ç¤ºç”¨æˆ·å<br>-p è¡¨ç¤ºå¯†ç <br>-r è¡¨ç¤ºRealmåŸŸ</p></blockquote><p>coturnçš„è¯ä¹¦ç”Ÿæˆï¼ˆå³é…ç½®æ–‡ä»¶ä¸­certå’Œpkey)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl req -x509 -newkey rsa:2048 -keyout /usr/local/etc/turn_server_pkey.pem -out /usr/local/etc/turn_server_cert.pem -days 99999 -nodes</span><br></pre></td></tr></table></figure><h3 id="3ã€å¯åŠ¨coturnæœåŠ¡å™¨"><a href="#3ã€å¯åŠ¨coturnæœåŠ¡å™¨" class="headerlink" title="3ã€å¯åŠ¨coturnæœåŠ¡å™¨"></a>3ã€å¯åŠ¨coturnæœåŠ¡å™¨</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service coturn start</span><br></pre></td></tr></table></figure><p>ç”¨æµè§ˆå™¨æ‰“å¼€<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;åŸŸå:3478</span><br></pre></td></tr></table></figure></p><p>æ˜¾ç¤ºå¦‚ä¸‹å†…å®¹åˆ™è¯´æ˜æˆåŠŸå¼€å¯æœåŠ¡</p><blockquote><p>TURN Server<br>use https connection for the admin session</p></blockquote><h2 id="å…­ã€é…ç½®nginxæœåŠ¡å™¨"><a href="#å…­ã€é…ç½®nginxæœåŠ¡å™¨" class="headerlink" title="å…­ã€é…ç½®nginxæœåŠ¡å™¨"></a>å…­ã€é…ç½®nginxæœåŠ¡å™¨</h2><h3 id="1ã€ç”ŸæˆSSLè¯ä¹¦"><a href="#1ã€ç”ŸæˆSSLè¯ä¹¦" class="headerlink" title="1ã€ç”ŸæˆSSLè¯ä¹¦"></a>1ã€ç”ŸæˆSSLè¯ä¹¦</h3><p>è¿™é‡Œä½¿ç”¨letâ€™s encrypté¢å‘çš„å…è´¹SSLè¯ä¹¦ <a href="https://certbot.eff.org" target="_blank" rel="noopener">certbot.eff.org</a></p><ul><li>å®‰è£…è½¯ä»¶</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update  </span><br><span class="line">apt-get install software-properties-common  </span><br><span class="line">add-apt-repository ppa:certbot/certbot  </span><br><span class="line">apt-get update </span><br><span class="line">apt-get install python-certbot-nginx</span><br></pre></td></tr></table></figure><ul><li>ç”Ÿæˆè¯ä¹¦</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certbot --nginx certonly</span><br></pre></td></tr></table></figure><p>SSLè¯ä¹¦ç”Ÿæˆçš„ç›®å½•ä¸ºï¼š<code>/etc/letsencrypt/live/åŸŸå/</code>ï¼Œé‡Œé¢å­˜æ”¾ç€å››ä¸ªæ–‡ä»¶<code>cert.pem,chain.pem,fullchain.pem,privkey.pem</code></p><h3 id="2ã€å®‰è£…phpå’Œphp-fpm"><a href="#2ã€å®‰è£…phpå’Œphp-fpm" class="headerlink" title="2ã€å®‰è£…phpå’Œphp-fpm"></a>2ã€å®‰è£…phpå’Œphp-fpm</h3><ul><li>å®‰è£…phpå’Œphp-fpm</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install php  </span><br><span class="line">apt-get install php7.0-fpm</span><br></pre></td></tr></table></figure><h3 id="3ã€å®‰è£…ä¸é…ç½®nginx"><a href="#3ã€å®‰è£…ä¸é…ç½®nginx" class="headerlink" title="3ã€å®‰è£…ä¸é…ç½®nginx"></a>3ã€å®‰è£…ä¸é…ç½®nginx</h3><ul><li>å®‰è£…nginx</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install nginx</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹nginxé…ç½®</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/sites-available/default</span><br></pre></td></tr></table></figure><p>å°†ä¸‹é¢çš„<code>linxunfeng.top</code>ä¿®æ”¹ä¸ºä½ è‡ªå·±çš„åŸŸå</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">upstream roomserver &#123;</span><br><span class="line">       server linxunfeng.top:8080;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">       listen 80 ;</span><br><span class="line">       server_name linxunfeng.top; </span><br><span class="line">       return  301 https://$server_name$request_uri;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">        #listen 80 default_server;</span><br><span class="line">        #listen [::]:80 default_server;</span><br><span class="line"></span><br><span class="line">        # SSL configuration</span><br><span class="line">        #</span><br><span class="line">        # listen 443 ssl default_server;</span><br><span class="line">        # listen [::]:443 ssl default_server;</span><br><span class="line">        listen 443;</span><br><span class="line">        #</span><br><span class="line">        # Note: You should disable gzip for SSL traffic.</span><br><span class="line">        # See: https://bugs.debian.org/773332</span><br><span class="line">        #</span><br><span class="line">        # Read up on ssl_ciphers to ensure a secure configuration.</span><br><span class="line">        # See: https://bugs.debian.org/765782</span><br><span class="line">        #</span><br><span class="line">        # Self signed certs generated by the ssl-cert package</span><br><span class="line">        # Don't use them in a production server!</span><br><span class="line">        #</span><br><span class="line">        # include snippets/snakeoil.conf;</span><br><span class="line"></span><br><span class="line">        root /var/www/html;</span><br><span class="line"></span><br><span class="line">        # Add index.php to the list if you are using PHP</span><br><span class="line">        index index.html index.htm index.nginx-debian.html;</span><br><span class="line"></span><br><span class="line">        server_name linxunfeng.top; # æ·»åŠ åŸŸåï¼Œå¦‚ä¸æ·»åŠ ï¼Œç”ŸæˆSSLè¯ä¹¦æ—¶å¯èƒ½ä¼šæœ‰é—®é¢˜</span><br><span class="line"></span><br><span class="line">        #location / &#123;</span><br><span class="line">                # First attempt to serve request as file, then</span><br><span class="line">                # as directory, then fall back to displaying a 404.</span><br><span class="line">        #       try_files $uri $uri/ =404;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span><br><span class="line">        #</span><br><span class="line">        location ~ \.php$ &#123;</span><br><span class="line">                include snippets/fastcgi-php.conf;</span><br><span class="line">        #</span><br><span class="line">        #       # With php7.0-cgi alone:</span><br><span class="line">        #       fastcgi_pass 127.0.0.1:9000;</span><br><span class="line">        #       # With php7.0-fpm:</span><br><span class="line">                fastcgi_pass unix:/run/php/php7.0-fpm.sock;</span><br><span class="line">        &#125;</span><br><span class="line">        location / &#123; </span><br><span class="line">                proxy_pass http://roomserver$request_uri;</span><br><span class="line">                proxy_set_header Host $host;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ssl on;</span><br><span class="line">        ssl_certificate /etc/letsencrypt/live/linxunfeng.top/fullchain.pem;</span><br><span class="line">        ssl_certificate_key /etc/letsencrypt/live/linxunfeng.top/privkey.pem;</span><br><span class="line">        </span><br><span class="line">        # deny access to .htaccess files, if Apache's document root</span><br><span class="line">        # concurs with nginx's one</span><br><span class="line">        #</span><br><span class="line">        #location ~ /\.ht &#123;</span><br><span class="line">        #       deny all;</span><br><span class="line">        #&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="turn-php-ä¸-iceconfig-php"><a href="#turn-php-ä¸-iceconfig-php" class="headerlink" title="turn.php ä¸ iceconfig.php"></a>turn.php ä¸ iceconfig.php</h3><p>åœ¨<code>/var/www/html/</code>ç›®å½•ä¸‹åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch turn.php iceconfig.php</span><br></pre></td></tr></table></figure><h4 id="turn-php"><a href="#turn-php" class="headerlink" title="turn.php"></a>turn.php</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    $request_username = $_GET[<span class="string">"username"</span>];</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>($request_username)) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"username == null"</span>;</span><br><span class="line">        <span class="keyword">exit</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    $request_key = $_GET[<span class="string">"key"</span>];</span><br><span class="line">    $time_to_live = <span class="number">600</span>;</span><br><span class="line">    $timestamp = time() + $time_to_live;<span class="comment">//å¤±æ•ˆæ—¶é—´</span></span><br><span class="line">    $response_username = $timestamp.<span class="string">":"</span>.$_GET[<span class="string">"username"</span>];</span><br><span class="line">    $response_key = $request_key;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>($response_key)) &#123;</span><br><span class="line">        $response_key = <span class="string">"code_key"</span>;</span><br><span class="line">    &#125; <span class="comment">//constants.pyä¸­CEOD_KEY</span></span><br><span class="line">    $response_password = getSignature($response_username, $response_key);</span><br><span class="line">    $jsonObj = <span class="keyword">new</span> Response();</span><br><span class="line">    $jsonObj-&gt;username = $response_username;</span><br><span class="line">    $jsonObj-&gt;password = $response_password;</span><br><span class="line">    $jsonObj-&gt;ttl = <span class="number">86400</span>;</span><br><span class="line">    <span class="comment">//æ­¤å¤„éœ€é…ç½®è‡ªå·±çš„æœåŠ¡å™¨</span></span><br><span class="line">    $jsonObj-&gt;uris= <span class="keyword">array</span>(<span class="string">"stun:linxunfeng.top:3478"</span>,<span class="string">"turn:linxunfeng.top:3478?transport=udp"</span>,<span class="string">"turn:linxunfeng.top?transport=tcp"</span>);</span><br><span class="line">    <span class="keyword">echo</span> json_encode($jsonObj);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨HMAC-SHA1ç®—æ³•ç”Ÿæˆç­¾åå€¼</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> $str æºä¸²</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> $key å¯†é’¥</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> ç­¾åå€¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getSignature</span><span class="params">($str, $key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $signature = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">if</span> (function_exists(<span class="string">'hash_hmac'</span>)) &#123;</span><br><span class="line">        $signature = base64_encode(hash_hmac(<span class="string">"sha1"</span>, $str, $key, <span class="keyword">true</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $blocksize = <span class="number">64</span>;</span><br><span class="line">        $hashfunc = <span class="string">'sha1'</span>;</span><br><span class="line">        <span class="keyword">if</span> (strlen($key) &gt; $blocksize) &#123;</span><br><span class="line">            $key = pack(<span class="string">'H*'</span>, $hashfunc($key));</span><br><span class="line">        &#125;</span><br><span class="line">        $key = str_pad($key, $blocksize, chr(<span class="number">0x00</span>));</span><br><span class="line">        $ipad = str_repeat(chr(<span class="number">0x36</span>), $blocksize);</span><br><span class="line">        $opad = str_repeat(chr(<span class="number">0x5c</span>), $blocksize);</span><br><span class="line">        $hmac = pack(</span><br><span class="line"><span class="string">'H*'</span>,</span><br><span class="line">    $hashfunc(</span><br><span class="line">($key ^ $opad) . pack(</span><br><span class="line"><span class="string">'H*'</span>,</span><br><span class="line">    $hashfunc(</span><br><span class="line">($key ^ $ipad) . $str</span><br><span class="line">)</span><br><span class="line">)</span><br><span class="line">)</span><br><span class="line">);</span><br><span class="line">        $signature = base64_encode($hmac);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $signature;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Response</span></span></span><br><span class="line"><span class="class">    </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> $username = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">public</span> $password = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">public</span> $ttl = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">public</span> $uris = <span class="keyword">array</span>(<span class="string">""</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><ul><li>iceconfig.php</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">    $request_username = <span class="string">"lxf"</span>;  <span class="comment">//é…ç½®æˆè‡ªå·±çš„turnæœåŠ¡å™¨ç”¨æˆ·å</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>($request_username)) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"username == null"</span>;</span><br><span class="line">        <span class="keyword">exit</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    $request_key = <span class="string">"lxf"</span>;  <span class="comment">//é…ç½®æˆè‡ªå·±çš„turnæœåŠ¡å™¨å¯†ç </span></span><br><span class="line">    $time_to_live = <span class="number">600</span>;</span><br><span class="line">    $timestamp = time() + $time_to_live;<span class="comment">//å¤±æ•ˆæ—¶é—´</span></span><br><span class="line">    $response_username = $timestamp.<span class="string">":"</span>.$_GET[<span class="string">"username"</span>];</span><br><span class="line">    $response_key = $request_key;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">empty</span>($response_key)) &#123;</span><br><span class="line">        $response_key = <span class="string">"CEOD_KEY"</span>;</span><br><span class="line">    &#125;<span class="comment">//constants.pyä¸­CEOD_KEY</span></span><br><span class="line">    $response_password = getSignature($response_username, $response_key);</span><br><span class="line">    $arrayObj = <span class="keyword">array</span>();</span><br><span class="line">    $arrayObj[<span class="number">0</span>][<span class="string">'username'</span>] = $response_username;</span><br><span class="line">    $arrayObj[<span class="number">0</span>][<span class="string">'credential'</span>] = $response_password;</span><br><span class="line">    <span class="comment">//é…ç½®æˆè‡ªå·±çš„stun/turnæœåŠ¡å™¨</span></span><br><span class="line">    $arrayObj[<span class="number">0</span>][<span class="string">'urls'</span>][<span class="number">0</span>] = <span class="string">"stun:linxunfeng.top:3478"</span>;</span><br><span class="line">    $arrayObj[<span class="number">0</span>][<span class="string">'urls'</span>][<span class="number">1</span>] = <span class="string">"turn:linxunfeng.top:3478?transport=tcp"</span>;</span><br><span class="line">    $arrayObj[<span class="number">0</span>][<span class="string">'uris'</span>][<span class="number">0</span>] = <span class="string">"stun:linxunfeng.top:3478"</span>;</span><br><span class="line">    $arrayObj[<span class="number">0</span>][<span class="string">'uris'</span>][<span class="number">1</span>] = <span class="string">"turn:linxunfeng.top:3478?transport=tcp"</span>;</span><br><span class="line">    $jsonObj = <span class="keyword">new</span> Response();</span><br><span class="line">    $jsonObj-&gt;lifetimeDuration = <span class="string">"300.000s"</span>;</span><br><span class="line">    $jsonObj-&gt;iceServers = $arrayObj;</span><br><span class="line">    <span class="keyword">echo</span> json_encode($jsonObj);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨HMAC-SHA1ç®—æ³•ç”Ÿæˆç­¾åå€¼</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> $str æºä¸²</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> $key å¯†é’¥</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> ç­¾åå€¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getSignature</span><span class="params">($str, $key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $signature = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">if</span> (function_exists(<span class="string">'hash_hmac'</span>)) &#123;</span><br><span class="line">        $signature = base64_encode(hash_hmac(<span class="string">"sha1"</span>, $str, $key, <span class="keyword">true</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $blocksize = <span class="number">64</span>;</span><br><span class="line">        $hashfunc = <span class="string">'sha1'</span>;</span><br><span class="line">        <span class="keyword">if</span> (strlen($key) &gt; $blocksize) &#123;</span><br><span class="line">            $key = pack(<span class="string">'H*'</span>, $hashfunc($key));</span><br><span class="line">        &#125;</span><br><span class="line">        $key = str_pad($key, $blocksize, chr(<span class="number">0x00</span>));</span><br><span class="line">        $ipad = str_repeat(chr(<span class="number">0x36</span>), $blocksize);</span><br><span class="line">        $opad = str_repeat(chr(<span class="number">0x5c</span>), $blocksize);</span><br><span class="line">        $hmac = pack(</span><br><span class="line"><span class="string">'H*'</span>,</span><br><span class="line">    $hashfunc(</span><br><span class="line">($key ^ $opad) . pack(</span><br><span class="line"><span class="string">'H*'</span>,</span><br><span class="line">    $hashfunc(</span><br><span class="line">($key ^ $ipad) . $str</span><br><span class="line">)</span><br><span class="line">)</span><br><span class="line">)</span><br><span class="line">);</span><br><span class="line">        $signature = base64_encode($hmac);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $signature;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Response</span></span></span><br><span class="line"><span class="class">    </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> $username = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">public</span> $password = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">public</span> $ttl = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">public</span> $uris = <span class="keyword">array</span>(<span class="string">""</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><ul><li>é‡å¯NginxæœåŠ¡å™¨å’Œphp7.0-fpm</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service nginx restart </span><br><span class="line">service php7.0-fpm restart</span><br></pre></td></tr></table></figure><h2 id="ä¸ƒã€å„ç«¯è¿è¡Œæµ‹è¯•"><a href="#ä¸ƒã€å„ç«¯è¿è¡Œæµ‹è¯•" class="headerlink" title="ä¸ƒã€å„ç«¯è¿è¡Œæµ‹è¯•"></a>ä¸ƒã€å„ç«¯è¿è¡Œæµ‹è¯•</h2><h3 id="1ã€Browser"><a href="#1ã€Browser" class="headerlink" title="1ã€Browser"></a>1ã€Browser</h3><p>æµè§ˆå™¨ç›´æ¥æ‰“å¼€å³å¯ï¼Œå¦‚æœä¸èƒ½è®¿é—®æ‘„åƒå¤´ä¹‹ç±»çš„ï¼Œè¯·æŸ¥çœ‹<a href="#2ã€æµè§ˆå™¨æ— æ³•è®¿é—®æ‘„åƒå¤´">ç–‘éš¾æ‚ç—‡ - 2</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;åŸŸå</span><br></pre></td></tr></table></figure><h3 id="2ã€Android"><a href="#2ã€Android" class="headerlink" title="2ã€Android"></a>2ã€Android</h3><p><a href="https://github.com/duqian291902259/webrtc-android-demo-apprtc" target="_blank" rel="noopener">webrtc-android-demo-apprtc</a></p><p>ç›´æ¥å®‰è£…æ‰‹æœºï¼Œæ‰“å¼€è½¯ä»¶ï¼Œç‚¹å‡»å³ä¸Šè§’çš„æ‰³æ‰‹è·³è½¬è‡³è®¾ç½®ç•Œé¢ï¼Œæ»šåˆ°ç•Œé¢æœ€ä¸‹æ–¹ï¼Œæ‰¾åˆ°<code>Room server URL.</code>ï¼Œå°†å…¶ä¿®æ”¹ä¸ºåˆšåˆšæ­å»ºå¥½çš„æœåŠ¡å™¨åŸŸåå³å¯ï¼Œå¦‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;linxunfeng.top</span><br></pre></td></tr></table></figure><h3 id="3ã€iOS"><a href="#3ã€iOS" class="headerlink" title="3ã€iOS"></a>3ã€iOS</h3><p><a href="https://github.com/ISBX/apprtc-ios" target="_blank" rel="noopener">GitHub - ISBX/apprtc-ios</a></p><p>æ‰“å¼€<code>AppRTC</code>é¡¹ç›®ï¼Œåˆ†åˆ«ä¿®æ”¹ä»¥ä¸‹ä¸¤ä¸ªæ–‡ä»¶</p><p><code>ARTCVideoChatViewController.m</code></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SERVER_HOST_URL @<span class="meta-string">"https://linxunfeng.top"</span></span></span><br></pre></td></tr></table></figure><p><code>Pods -&gt; Development Pods -&gt; AppRTC -&gt; Lib -&gt; ARDAppClient.m</code></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="built_in">NSString</span> *kARDRoomServerHostUrl =</span><br><span class="line">    <span class="string">@"https://linxunfeng.top"</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="built_in">NSString</span> *kARDDefaultSTUNServerUrl =</span><br><span class="line">    <span class="string">@"stun:linxunfeng.top:3478"</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="built_in">NSString</span> *kARDTurnRequestUrl =</span><br><span class="line">    <span class="string">@"https://linxunfeng.top"</span></span><br><span class="line">    <span class="string">@"/turn?username=lxf&amp;key=lxf"</span>;</span><br></pre></td></tr></table></figure><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æœç´¢ kARDDefaultSTUNServerUrl </span></span><br><span class="line">- (RTCICEServer *)defaultSTUNServer &#123;</span><br><span class="line">  <span class="built_in">NSURL</span> *defaultSTUNServerURL = [<span class="built_in">NSURL</span> URLWithString:kARDDefaultSTUNServerUrl];</span><br><span class="line">  <span class="keyword">return</span> [[RTCICEServer alloc] initWithURI:defaultSTUNServerURL</span><br><span class="line">                                  username:<span class="string">@"lxf"</span></span><br><span class="line">                                  password:<span class="string">@"lxf"</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç–‘éš¾æ‚ç—‡"><a href="#ç–‘éš¾æ‚ç—‡" class="headerlink" title="ç–‘éš¾æ‚ç—‡"></a>ç–‘éš¾æ‚ç—‡</h2><h3 id="1ã€Request-host-is-not-whitelist-enabled"><a href="#1ã€Request-host-is-not-whitelist-enabled" class="headerlink" title="1ã€Request host is not whitelist enabled"></a>1ã€Request host is not whitelist enabled</h3><blockquote><p>å…·ä½“æç¤º<br>Request host is not whitelist enabled for this server. Please use the â€“host command-line flag to whitelist a specific host (recommended) or use â€“enable_host_checking to disable host checking. See the command-line flags help text for more information. </p></blockquote><p><a href="https://stackoverflow.com/questions/47988810/use-ngrok-url-as-callback-url-for-facebook-webhook-but-is-recognized-not-white" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥</a></p><p>æ‰§è¡Œdev_appserver.pyæ—¶ï¼ŒåŠ ä¸Šå¦‚ä¸‹å‚æ•°<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--enable_host_checking=false</span><br></pre></td></tr></table></figure></p><p>å®Œæ•´æŒ‡ä»¤<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./dev_appserver.py --enable_host_checking=false --host=172.18.141.108 ../apprtc/out/app_engine/</span><br></pre></td></tr></table></figure></p><h3 id="2ã€æµè§ˆå™¨æ— æ³•è®¿é—®æ‘„åƒå¤´"><a href="#2ã€æµè§ˆå™¨æ— æ³•è®¿é—®æ‘„åƒå¤´" class="headerlink" title="2ã€æµè§ˆå™¨æ— æ³•è®¿é—®æ‘„åƒå¤´"></a>2ã€æµè§ˆå™¨æ— æ³•è®¿é—®æ‘„åƒå¤´</h3><p>æµè§ˆå™¨è®¿é—®è®¾å¤‡çš„æ‘„åƒå¤´æ˜¯éœ€è¦ä½¿ç”¨<code>https</code>é“¾æ¥æˆ–è€…<code>localhost</code>æ¥è®¿é—®</p><h3 id="3ã€ç«¯å£"><a href="#3ã€ç«¯å£" class="headerlink" title="3ã€ç«¯å£"></a>3ã€ç«¯å£</h3><p>é˜¿é‡Œäº‘ç­‰å›½å†…å¤§å‚æä¾›çš„æœåŠ¡å™¨åŸºæœ¬ä¸Šéƒ½æœ‰ä¸€ä¸ªå«å®‰å…¨ç»„çš„ç©æ„å„¿ï¼Œæˆ‘ä»¬æ­å»ºAppRTCæœåŠ¡å™¨çš„æ‰€æœ‰æœåŠ¡æ‰€éœ€çš„ç«¯å£å‡è¦æ·»åŠ è‡³å®‰å…¨ç»„</p><h3 id="4ã€Failed-to-execute-â€˜pushStateâ€™-on-â€˜Historyâ€™"><a href="#4ã€Failed-to-execute-â€˜pushStateâ€™-on-â€˜Historyâ€™" class="headerlink" title="4ã€Failed to execute â€˜pushStateâ€™ on â€˜Historyâ€™"></a>4ã€Failed to execute â€˜pushStateâ€™ on â€˜Historyâ€™</h3><blockquote><p>Failed to start signaling: Failed to execute â€˜pushStateâ€™ on â€˜Historyâ€™: A history state object with URL â€˜<a href="http://linxunfeng.top/r/598600855â€™">http://linxunfeng.top/r/598600855â€™</a> cannot be created in a document with origin â€˜<a href="https://linxunfeng.topâ€™" target="_blank" rel="noopener">https://linxunfeng.topâ€™</a> and URL â€˜<a href="https://linxunfeng.top/">https://linxunfeng.top/</a></p></blockquote><p>è§£å†³æ–¹æ³•æœ‰ä¸¤ç§</p><ul><li>è§£å†³æ–¹æ³•1ï¼š </li></ul><blockquote><p> æˆ¿é—´æœåŠ¡å™¨ç¼–è¯‘å®Œæˆåï¼Œåœ¨/root/apprtc/out/app_engine/js/apprtc.debug.jsæ–‡ä»¶ä¸­æ‰¾åˆ°window.history.pushState({â€˜roomIdâ€™: roomId, â€˜roomLinkâ€™: roomLink}, roomId, roomLink)ï¼ŒæŠŠè¿™å¥è¯æ³¨é‡Šæ‰ï¼Œé‡æ–°è¿è¡Œå³å¯ã€‚ï¼ˆå¦‚æœé‡æ–°ç¼–è¯‘ï¼Œéœ€è¦é‡æ–°ä¿®æ”¹ï¼‰</p></blockquote><ul><li>è§£å†³æ–¹æ³•2ï¼š </li></ul><blockquote><p> åœ¨/root/apprtc/src/web_app/js/appcontroller.jsæ–‡ä»¶ä¸­æ‰¾åˆ°window.history.pushState({â€˜roomIdâ€™: roomId, â€˜roomLinkâ€™: roomLink}, roomId, roomLink)ï¼ŒæŠŠè¿™å¥è¯æ³¨é‡Šæ‰ï¼Œç„¶åé‡æ–°ç¼–è¯‘ï¼Œé‡æ–°è¿è¡Œæˆ¿é—´æœåŠ¡å™¨å³å¯ã€‚</p></blockquote>]]></content>
    
    
    <summary type="html">&lt;Excerpt in index | é¦–é¡µæ‘˜è¦&gt; 

&lt;p&gt;è®°å½•AppRTCçš„æ­å»ºè¿‡ç¨‹ï¼Œå®ç°iOSã€Androidã€BrowseråŒå¼‚è®¾å¤‡çš„è§†é¢‘é€šä¿¡&lt;/p&gt;</summary>
    
    
    
    <category term="Linux" scheme="http://linxunfeng.top/categories/Linux/"/>
    
    
    <category term="iOS" scheme="http://linxunfeng.top/tags/iOS/"/>
    
    <category term="Ubuntu" scheme="http://linxunfeng.top/tags/Ubuntu/"/>
    
    <category term="Linux" scheme="http://linxunfeng.top/tags/Linux/"/>
    
    <category term="Android" scheme="http://linxunfeng.top/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>æ‰“é€ Moyaä¾¿æ·è§£æåº“ï¼Œæä¾›RxSwiftæ‹“å±•</title>
    <link href="http://linxunfeng.top/2018/05/24/%E6%89%93%E9%80%A0Moya%E4%BE%BF%E6%8D%B7%E8%A7%A3%E6%9E%90%E5%BA%93%EF%BC%8C%E6%8F%90%E4%BE%9BRxSwift%E6%8B%93%E5%B1%95/"/>
    <id>http://linxunfeng.top/2018/05/24/%E6%89%93%E9%80%A0Moya%E4%BE%BF%E6%8D%B7%E8%A7%A3%E6%9E%90%E5%BA%93%EF%BC%8C%E6%8F%90%E4%BE%9BRxSwift%E6%8B%93%E5%B1%95/</id>
    <published>2018-05-24T20:25:04.000Z</published>
    <updated>2020-08-22T14:18:43.876Z</updated>
    
    <content type="html"><![CDATA[<Excerpt in index | é¦–é¡µæ‘˜è¦> <p>MoyaMapperæ˜¯åŸºäºMoyaå’ŒSwiftyJSONå°è£…çš„å·¥å…·ï¼Œä»¥Moyaçš„pluginçš„æ–¹å¼æ¥å®ç°é—´æ¥è§£æï¼Œæ”¯æŒRxSwift</p><p>+<a id="more"></a></p><The rest of contents | ä½™ä¸‹å…¨æ–‡><h2 id="ä¸€ã€æ¦‚è¿°"><a href="#ä¸€ã€æ¦‚è¿°" class="headerlink" title="ä¸€ã€æ¦‚è¿°"></a>ä¸€ã€æ¦‚è¿°</h2><p>1ã€ç›¸ä¿¡å¤§å®¶åœ¨ä½¿ç”¨Swiftå¼€å‘æ—¶ï¼Œ<a href="https://github.com/Moya/Moya" target="_blank" rel="noopener">Moya</a>æ˜¯é¦–é€‰çš„ç½‘ç»œå·¥å…·ï¼Œåœ¨æ¨¡å‹è§£æè¿™ä¸€å—ï¼ŒSwiftç‰ˆæ¨¡å‹è§£æçš„ç›¸å…³ç¬¬ä¸‰æ–¹åº“æœ‰å¾ˆå¤šï¼Œæœ¬äººæœ€ä¹ æƒ¯ç”¨çš„å°±æ˜¯<a href="https://github.com/SwiftyJSON/SwiftyJSON" target="_blank" rel="noopener">SwiftyJSON</a>ã€‚</p><p>2ã€ä¸‹é¢ä¼šå¼€å§‹è®²è§£æ•´ä¸ªä¸»è¦çš„å¼€å‘åŠŸèƒ½ä¸æ€æƒ³ã€‚</p><p>3ã€ä»¥ä¸‹å†…å®¹æ˜¯åŸºäºå¤§å®¶ä¼šä½¿ç”¨Moyaå’ŒSwiftJSONçš„å‰æä¸‹æ‰€è‘—ï¼Œè¿˜ä¸ä¼šçš„åŒå­¦å¯ä»¥å…ˆç®€å•äº†è§£åå†æ¥é˜…è¯»æœ¬ç¯‡æ–‡ç« å“¦ï½</p><h2 id="äºŒã€åŠŸèƒ½å¼€å‘ä¸æ€æƒ³è®²è§£"><a href="#äºŒã€åŠŸèƒ½å¼€å‘ä¸æ€æƒ³è®²è§£" class="headerlink" title="äºŒã€åŠŸèƒ½å¼€å‘ä¸æ€æƒ³è®²è§£"></a>äºŒã€åŠŸèƒ½å¼€å‘ä¸æ€æƒ³è®²è§£</h2><h3 id="1ã€å°è¯•æ¨¡å‹è§£æ"><a href="#1ã€å°è¯•æ¨¡å‹è§£æ" class="headerlink" title="1ã€å°è¯•æ¨¡å‹è§£æ"></a>1ã€å°è¯•æ¨¡å‹è§£æ</h3><p>Moyaè¯·æ±‚æœåŠ¡å™¨è¿”å›çš„æ•°æ®ä»¥Responseç±»è¿”å›ç»™æˆ‘ä»¬ï¼Œé‚£æˆ‘ä»¬å°±ç»™Responseç±»åšä¸€ä¸ªæ‰©å±•ï¼Œè¿™é‡Œä»¥è§£ææ¨¡å‹ä¸ºä¾‹<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éœ€è¦ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œå‘ŠçŸ¥æˆ‘ä»¬è¦è½¬æ¢å‡ºä»€ä¹ˆæ¨¡å‹</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">mapObject</span>&lt;T: Modelable&gt;<span class="params">(<span class="number">_</span> type: T.<span class="keyword">Type</span>)</span></span> -&gt; <span class="type">T</span> &#123;</span><br><span class="line">    <span class="comment">// æ¨¡å‹è§£æè¿‡ç¨‹</span></span><br><span class="line">    ã€‚ã€‚ã€‚</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> <span class="type">T</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Q: é‚£ä¸­é—´çš„è§£æè¿‡ç¨‹è¯¥æ€ä¹ˆå†™å‘¢ï¼Ÿ</p><p>A: <strong>å¯ä»¥è®©å¼€å‘è€…éµå®ˆæŸä¸ªåè®®ï¼Œå®ç°æŒ‡å®šçš„è½¬æ¢æ–¹æ³•å¹¶æè¿°è½¬æ¢å…³ç³»ã€‚å…¶è½¬æ¢è¿‡ç¨‹æˆ‘ä»¬ä¸éœ€è¦çŸ¥é“ï¼Œäº¤ç»™å¼€å‘è€…å³å¯ã€‚</strong></p><p>é‚£æ¥ç€æˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ªåè®®Modelableï¼Œå¹¶å£°æ˜è½¬æ¢æ–¹æ³•<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">protocol</span> <span class="title">Modelable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">mapping</span><span class="params">(<span class="number">_</span> json: JSON)</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¼€å‘è€…åˆ›å»ºä¸€ä¸ª<code>MyMoel</code>çš„ç»“æ„ä½“ï¼Œéµå®ˆåè®®<code>Modelable</code>,å¹¶å®ç°<code>mapping</code>ï¼Œä¹¦å†™è½¬æ¢å…³ç³»<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MyModel</span>: <span class="title">Modelable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _id = <span class="string">""</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">mapping</span><span class="params">(<span class="number">_</span> json: JSON)</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>._id = json[<span class="string">"_id"</span>].stringValue</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä»¥ç›®å‰çš„ç°çŠ¶æ¥åˆ†æä¸€ä¸‹ï¼š<code>mapObject</code>å¯ä»¥è®©å¼€å‘è€…ä¼ å…¥<code>æ¨¡å‹ç±»å‹</code>ï¼Œè€Œæˆ‘ä»¬çš„åè®®æ–¹æ³•å´å¹¶éæ˜¯ä¸ªç±»æ–¹æ³•ã€‚é‚£æˆ‘ä»¬éœ€è¦å…ˆå¾—åˆ°è¿™ä¸ª<code>æ¨¡å‹ç±»å‹</code>çš„å¯¹è±¡ï¼Œå†æ¥è°ƒç”¨<code>mapping</code>æ–¹æ³•</p><h3 id="2ã€æ¨¡å‹è§£æçš„é©±åŠ¨å¼€å‘"><a href="#2ã€æ¨¡å‹è§£æçš„é©±åŠ¨å¼€å‘" class="headerlink" title="2ã€æ¨¡å‹è§£æçš„é©±åŠ¨å¼€å‘"></a>2ã€æ¨¡å‹è§£æçš„é©±åŠ¨å¼€å‘</h3><p>Q: æ€ä¹ˆå¾—åˆ°è¿™ä¸ªå¯¹è±¡ï¼Ÿ</p><p>A: <strong>å¯ä»¥åœ¨åè®®ä¸­å£°æ˜ä¸€ä¸ªåˆå§‹åŒ–æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ã€‚æ˜¯çš„ï¼Œæˆ‘ä»¬åœ¨mapObjectä¸­åˆ›å»ºå¯¹åº”æ¨¡å‹ç±»å‹çš„å¯¹è±¡ï¼Œè°ƒç”¨mappingæ–¹æ³•æ¥è½¬æ¢æ•°æ®ï¼Œå†æŠŠæ¨¡å‹å¯¹è±¡ä¼ å‡ºå»å³å¯ã€‚</strong></p><p>é‚£æˆ‘ä»¬åœ¨<code>Modelable</code>ä¸­å£°æ˜ä¸€ä¸ªinitæ–¹æ³•ï¼Œå¹¶ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼ŒåŒºåˆ«äºå…¶å®ƒåˆå§‹åŒ–æ–¹æ³•<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">protocol</span> <span class="title">Modelable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">mapping</span><span class="params">(<span class="number">_</span> json: JSON)</span></span></span><br><span class="line">    <span class="keyword">init</span>(<span class="number">_</span> json: <span class="type">JSON</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>OKï¼Œç°åœ¨æŠŠ<code>mapObject</code>æ–¹æ³•è¡¥é½æ¨¡å‹è§£æè¿‡ç¨‹</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">mapObject</span>&lt;T: Modelable&gt;<span class="params">(<span class="number">_</span> type: T.<span class="keyword">Type</span>)</span></span> -&gt; <span class="type">T</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> modelJson = <span class="type">JSON</span>(data)[<span class="string">"modelKey"</span>]</span><br><span class="line">    <span class="comment">// æ¨¡å‹è§£æè¿‡ç¨‹</span></span><br><span class="line">    <span class="keyword">var</span> obj = <span class="type">T</span>.<span class="keyword">init</span>(modelJson)</span><br><span class="line">    obj.mapping(modelJson)</span><br><span class="line">    <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3ã€è‡ªå®šä¹‰è§£æé”®å"><a href="#3ã€è‡ªå®šä¹‰è§£æé”®å" class="headerlink" title="3ã€è‡ªå®šä¹‰è§£æé”®å"></a>3ã€è‡ªå®šä¹‰è§£æé”®å</h3><p>Q: è¿™æ ·æ˜¯æå®šè§£æäº†ï¼Œä½†æ˜¯ç½‘ç»œè¯·æ±‚å›æ¥çš„jsonæ ¼å¼é”™ç»¼å¤æ‚ï¼Œæœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥è®©å¼€å‘è€…æ¥è‡ªè¡ŒæŒ‡å®šmodelå¯¹åº”çš„é”®åå‘¢ï¼Ÿ</p><p>A: <strong>å—¯å—¯ï¼Œæ—¢ç„¶è§£æè¿‡ç¨‹æ˜¯åœ¨ Response æ‰©å±•é‡Œæ“ä½œçš„ï¼Œé‚£æˆ‘ä»¬å¯ä»¥é€šè¿‡åè®®å®šä¹‰é”®åå±æ€§ï¼Œå¹¶ä¸”ä½¿ç”¨ Runtime ç»™ResponseåŠ¨æ€æ·»åŠ ä¸€ä¸ªå±æ€§ï¼Œæ¥è®°å½•éµå®ˆåè®®åçš„ç›¸åº”ç±»å</strong></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">protocol</span> <span class="title">ModelableParameterType</span> </span>&#123;</span><br><span class="line">    <span class="comment">/// è¯·æ±‚æˆåŠŸæ—¶çŠ¶æ€ç å¯¹åº”çš„å€¼</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> successValue: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    <span class="comment">/// çŠ¶æ€ç å¯¹åº”çš„é”®</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> statusCodeKey: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    <span class="comment">/// è¯·æ±‚åçš„æç¤ºè¯­å¯¹åº”çš„é”®</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> tipStrKey: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    <span class="comment">/// è¯·æ±‚åçš„ä¸»è¦æ¨¡å‹æ•°æ®çš„é”®</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> modelKey: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MARK:- runtime</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Response</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">struct</span> <span class="title">AssociatedKeys</span> </span>&#123;</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">var</span> lxf_modelableParameterKey = <span class="string">"lxf_modelableParameterKey"</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> lxf_modelableParameter: <span class="type">ModelableParameterType</span>.<span class="type">Type</span> &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> value = objc_getAssociatedObject(<span class="keyword">self</span>, &amp;<span class="type">AssociatedKeys</span>.lxf_modelableParameterKey) <span class="keyword">as</span> <span class="type">AnyObject</span></span><br><span class="line">            <span class="keyword">guard</span> <span class="keyword">let</span> type = value <span class="keyword">as</span>? <span class="type">ModelableParameterType</span>.<span class="type">Type</span> <span class="keyword">else</span> &#123; <span class="keyword">return</span> <span class="type">NullParameter</span>.<span class="keyword">self</span> &#125;</span><br><span class="line">            <span class="keyword">return</span> type</span><br><span class="line">        &#125; <span class="keyword">set</span> &#123;</span><br><span class="line">            objc_setAssociatedObject(<span class="keyword">self</span>, &amp;<span class="type">AssociatedKeys</span>.lxf_modelableParameterKey, newValue, .<span class="type">OBJC_ASSOCIATION_RETAIN_NONATOMIC</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>è¿™é‡Œæœ‰ä¸ªå‘ï¼š_SwiftValueé—®é¢˜</strong> (çŒ®ä¸Š <a href="https://stackoverflow.com/questions/42033735/failing-cast-in-swift-from-any-to-protocol/42034523#42034523" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥</a>)<br>å¦‚æœæˆ‘ä»¬å­˜å‚¨çš„ä¸æ˜¯OCå¯¹è±¡ï¼Œé‚£ä¹ˆ<code>objc_getAssociatedObject</code>å–å‡ºæ¥çš„å€¼çš„ç±»å‹ç»Ÿç»Ÿä¸º<code>_SwiftValue</code>ï¼Œç›´æ¥<code>as? ModelableParameterType.Type</code>ç»å¯¹æ˜¯nilï¼Œéœ€è¦åœ¨å–å‡ºæ¥å<code>as AnyObject</code>å†è½¬æ¢ä¸ºå…¶å®ƒç±»å‹æ‰ä¼šæˆåŠŸï½ï½ </p></blockquote><p>ç°åœ¨å¼€å‘è€…å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªç±»æ¥éµå®ˆ<code>ModelableParameterType</code>åè®®ï¼Œå¹¶è‡ªå®šä¹‰è§£æé”®å<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">NetParameter</span> : <span class="title">ModelableParameterType</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> successValue: <span class="type">String</span> &#123; <span class="keyword">return</span> <span class="string">"false"</span> &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> statusCodeKey: <span class="type">String</span> &#123; <span class="keyword">return</span> <span class="string">"error"</span> &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> tipStrKey: <span class="type">String</span> &#123; <span class="keyword">return</span> <span class="string">"errMsg"</span> &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> modelKey: <span class="type">String</span> &#123; <span class="keyword">return</span> <span class="string">"results"</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="4ã€æ’ä»¶æ³¨å…¥"><a href="#4ã€æ’ä»¶æ³¨å…¥" class="headerlink" title="4ã€æ’ä»¶æ³¨å…¥"></a>4ã€æ’ä»¶æ³¨å…¥</h3><p>Q: å‰å®³äº†ï¼Œä¸è¿‡è¦åœ¨ä»€ä¹ˆæ—¶æœºä¸‹å­˜å‚¨è¿™ä¸ªè‡ªå®šä¹‰é”®åçš„<code>NetParameter</code>ï¼Ÿ</p><p>A: é¢ï¼Œè¿™ä¸ªï½ï½ï½ å“¦ï¼Œå¯¹äº†ï¼Œå¯ä»¥é€šè¿‡Moyaæä¾›çš„æ’ä»¶æœºåˆ¶ï¼</p><p>ç¿»å‡ºMoyaä¸­çš„Plugin.Swiftï¼Œæ‰¾åˆ°è¿™ä¸ª<code>process</code>æ–¹æ³•ï¼Œçœ‹çœ‹æ–¹æ³•è¯´æ˜ã€‚<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// åœ¨ç»“æŸä¹‹å‰ï¼Œå¯ä»¥è¢«ç”¨æ¥ä¿®æ”¹è¯·æ±‚ç»“æœ</span></span><br><span class="line"><span class="comment">/// Called to modify a result before completion.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">process</span><span class="params">(<span class="number">_</span> result: Result&lt;Moya.Response, MoyaError&gt;, target: TargetType)</span></span> -&gt; <span class="type">Result</span>&lt;<span class="type">Moya</span>.<span class="type">Response</span>, <span class="type">MoyaError</span>&gt;</span><br></pre></td></tr></table></figure></p><p>é‚£å¥½ï¼Œæˆ‘ä»¬ä¹Ÿåšä¸€ä¸ªæ’ä»¶<code>MoyaMapperPlugin</code>ç»™å¼€å‘è€…ä½¿ç”¨ï¼Œåœ¨åˆ›å»º<code>MoyaMapperPlugin</code>æ—¶æŠŠè‡ªå®šä¹‰è§£æé”®åçš„ç±»å‹ä¼ è¿›æ¥<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">struct</span> <span class="title">MoyaMapperPlugin</span>: <span class="title">PluginType</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> parameter: <span class="type">ModelableParameterType</span>.<span class="type">Type</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">init</span>&lt;<span class="type">T</span>: <span class="type">ModelableParameterType</span>&gt;(<span class="number">_</span> type: <span class="type">T</span>.<span class="type">Type</span>) &#123;</span><br><span class="line">        parameter = type</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// modify response</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">process</span><span class="params">(<span class="number">_</span> result: Result&lt;Response, MoyaError&gt;, target: TargetType)</span></span> -&gt; <span class="type">Result</span>&lt;<span class="type">Response</span>, <span class="type">MoyaError</span>&gt; &#123;</span><br><span class="line">        <span class="number">_</span> = result.<span class="built_in">map</span> &#123; (response) -&gt; <span class="type">Response</span> <span class="keyword">in</span></span><br><span class="line">            <span class="comment">// è¶æœºæ·»åŠ ç›¸å…³æ•°æ® </span></span><br><span class="line">            response.lxf_modelableParameter = parameter</span><br><span class="line">            <span class="keyword">return</span> response</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨ï¼šå¼€å‘è€…åœ¨åˆ›å»º<code>MoyaProvider</code>å¯¹è±¡æ—¶ï¼Œé¡ºä¾¿æ³¨å…¥æ’ä»¶ã€‚(OS: è¿™ä¸€æ­¥å ªç§°â€œæ³¨å…¥çµé­‚â€)<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">MoyaProvider</span>&lt;<span class="type">LXFNetworkTool</span>&gt;(plugins: [<span class="type">MoyaMapperPlugin</span>(<span class="type">NetParameter</span>.<span class="keyword">self</span>)])</span><br></pre></td></tr></table></figure></p><h3 id="5ã€æ€»ç»“"><a href="#5ã€æ€»ç»“" class="headerlink" title="5ã€æ€»ç»“"></a>5ã€æ€»ç»“</h3><blockquote><p>ä»¥ä¸Šå°±æ˜¯ä¸»è¦çš„è¸©å‘è¿‡ç¨‹äº†ã€‚æ¨¡å‹æ•°ç»„è§£æå’ŒæŒ‡å®šè§£æä¹Ÿè·Ÿè¿™äº›å·®ä¸å¤šçš„ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚æœ¬äººå·²ç»å°†å…¶å°è£…æˆä¸€ä¸ªå¼€æºåº“ <a href="https://github.com/LinXunFeng/MoyaMapper" target="_blank" rel="noopener">MoyaMapper</a>ï¼ŒåŒ…å«äº†ä¸Šè¿°å·²ç»å’Œæœªæ›¾è¯´æ˜çš„åŠŸèƒ½ï¼Œä¸‹é¢ä¼šè®²è§£å¦‚ä½•å»ä½¿ç”¨ã€‚ä»¥ä¸Šéƒ¨åˆ†å¯ä»¥ç§°ä¸ºå¼€èƒƒèœï¼Œç›®çš„å°±æ˜¯å¹³æ»‘è¿‡æ¸¡åˆ°ä¸‹é¢MoyaMapperçš„å…·ä½“ä½¿ç”¨ã€‚</p></blockquote><p>å¯èƒ½å•å•ä½¿ç”¨<code>MoyaMapper</code>çš„é»˜è®¤å­åº“<code>Core</code>ï¼Œä½œç”¨ä½“ä¼šä¸Šå¹¶ä¸ä¼šå¾ˆæ·±ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ ä¹Ÿæ˜¯ä½¿ç”¨RxSwiftæ¥å¼€å‘é¡¹ç›®çš„è¯ï¼Œè¯·å®‰è£…<code>&#39;MoyaMapper/Rx&#39;</code>å§ï¼Œç»å¯¹ä¸€ä¸ªå­—ï¼šã€Œçˆ½ã€</p><h2 id="äºŒã€MoyaMapperçš„ä½¿ç”¨"><a href="#äºŒã€MoyaMapperçš„ä½¿ç”¨" class="headerlink" title="äºŒã€MoyaMapperçš„ä½¿ç”¨"></a>äºŒã€MoyaMapperçš„ä½¿ç”¨</h2><p><img src= "/img/loading.gif" data-src="/images/2018/05/æ‰“é€ Moyaä¾¿æ·è§£æåº“ï¼Œæä¾›RxSwiftæ‹“å±•/MoyaMapper.png" alt="MoyaMapper"></p><p>MoyaMapperæ˜¯åŸºäºMoyaå’ŒSwiftyJSONå°è£…çš„å·¥å…·ï¼Œä»¥Moyaçš„pluginçš„æ–¹å¼æ¥å®ç°é—´æ¥è§£æï¼Œæ”¯æŒRxSwift</p><p><img src= "/img/loading.gif" data-src="/images/2018/05/æ‰“é€ Moyaä¾¿æ·è§£æåº“ï¼Œæä¾›RxSwiftæ‹“å±•/JSONæ•°æ®å¯¹ç…§.png" alt="JSONæ•°æ®å¯¹ç…§"></p><h3 id="1ã€å®šä¹‰å¹¶æ³¨å…¥è‡ªå®šä¹‰é”®åç±»"><a href="#1ã€å®šä¹‰å¹¶æ³¨å…¥è‡ªå®šä¹‰é”®åç±»" class="headerlink" title="1ã€å®šä¹‰å¹¶æ³¨å…¥è‡ªå®šä¹‰é”®åç±»"></a>1ã€å®šä¹‰å¹¶æ³¨å…¥è‡ªå®šä¹‰é”®åç±»</h3><ol><li>å®šä¹‰ä¸€ä¸ªéµå®ˆModelableParameterTypeåè®®çš„ç»“æ„ä½“</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å„å‚æ•°è¿”å›çš„å†…å®¹è¯·å‚è€ƒä¸Šé¢JSONæ•°æ®å¯¹ç…§å›¾</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">NetParameter</span> : <span class="title">ModelableParameterType</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> successValue: <span class="type">String</span> &#123; <span class="keyword">return</span> <span class="string">"false"</span> &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> statusCodeKey: <span class="type">String</span> &#123; <span class="keyword">return</span> <span class="string">"error"</span> &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> tipStrKey: <span class="type">String</span> &#123; <span class="keyword">return</span> <span class="string">""</span> &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> modelKey: <span class="type">String</span> &#123; <span class="keyword">return</span> <span class="string">"results"</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ­¤å¤–ï¼Œè¿™é‡Œè¿˜å¯ä»¥åšç®€å•çš„è·¯å¾„å¤„ç†ï¼Œä»¥åº”ä»˜å„ç§æƒ…å†µï¼Œä»¥â€™&gt;â€™éš”å¼€</strong></p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡è®¾è¿”å›çš„jsonæ•°æ®å…³äºè¯·æ±‚çŠ¶æ€çš„ç›¸å…³æ•°æ®å¦‚ä¸‹æ‰€ç¤ºï¼Œ</span></span><br><span class="line">error: &#123;</span><br><span class="line">    'errorStatus':false</span><br><span class="line">    'errMsg':'error Argument type'</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æˆ‘ä»¬æŒ‡æ˜è§£æè·¯å¾„ï¼šerrorå¯¹è±¡ä¸‹çš„errMsgå­—æ®µï¼Œä¸€å±‚å±‚è¡¨ç¤ºä¸‹å»å³å¯</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">var</span> tipStrKey: <span class="type">String</span> &#123; <span class="keyword">return</span> <span class="string">"error&gt;errMsg"</span> &#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>ä»¥pluginçš„æ–¹å¼ä¼ é€’ç»™MoyaProvider</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MoyaMapperPluginè¿™é‡Œåªéœ€è¦ä¼ å…¥ç±»å‹</span></span><br><span class="line"><span class="type">MoyaProvider</span>&lt;<span class="type">LXFNetworkTool</span>&gt;(plugins: [<span class="type">MoyaMapperPlugin</span>(<span class="type">NetParameter</span>.<span class="keyword">self</span>)])</span><br></pre></td></tr></table></figure><h3 id="2ã€å®šä¹‰è§£ææ¨¡å‹"><a href="#2ã€å®šä¹‰è§£ææ¨¡å‹" class="headerlink" title="2ã€å®šä¹‰è§£ææ¨¡å‹"></a>2ã€å®šä¹‰è§£ææ¨¡å‹</h3><p>åˆ›å»ºä¸€ä¸ªéµå®ˆModelableåè®®çš„ç»“æ„ä½“</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MyModel</span>: <span class="title">Modelable</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> _id = <span class="string">""</span></span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="number">_</span> json: <span class="type">JSON</span>) &#123; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">mapping</span><span class="params">(<span class="number">_</span> json: JSON)</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>._id = json[<span class="string">"_id"</span>].stringValue</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">éµå®ˆ<span class="type">Modelable</span>åè®®ï¼Œå®ç°åè®®çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œåœ¨`mapping`æ–¹æ³•ä¸­æè¿°æ¨¡å‹å­—æ®µçš„å…·ä½“è§£æ</span><br></pre></td></tr></table></figure><h3 id="3ã€è§£ææ•°æ®"><a href="#3ã€è§£ææ•°æ®" class="headerlink" title="3ã€è§£ææ•°æ®"></a>3ã€è§£ææ•°æ®</h3><h4 id="0x00-è¯·æ±‚ç»“æœä¸æ¨¡å‹è§£æ"><a href="#0x00-è¯·æ±‚ç»“æœä¸æ¨¡å‹è§£æ" class="headerlink" title="0x00 è¯·æ±‚ç»“æœä¸æ¨¡å‹è§£æ"></a>0x00 è¯·æ±‚ç»“æœä¸æ¨¡å‹è§£æ</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Result</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">mapResult</span><span class="params">(params: ModelableParamsBlock? = <span class="literal">nil</span>)</span></span> -&gt; <span class="type">MoyaMapperResult</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Model</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">mapObject</span>&lt;T: Modelable&gt;<span class="params">(<span class="number">_</span> type: T.<span class="keyword">Type</span>, modelKey: String? = <span class="literal">nil</span>)</span></span> -&gt; <span class="type">T</span></span><br><span class="line"><span class="comment">// Result+Model</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">mapObjResult</span>&lt;T: Modelable&gt;<span class="params">(<span class="number">_</span> type: T.<span class="keyword">Type</span>, params: ModelableParamsBlock? = <span class="literal">nil</span>)</span></span> -&gt; (<span class="type">MoyaMapperResult</span>, <span class="type">T</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Models</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">mapArray</span>&lt;T: Modelable&gt;<span class="params">(<span class="number">_</span> type: T.<span class="keyword">Type</span>, modelKey: String? = <span class="literal">nil</span>)</span></span> -&gt; [<span class="type">T</span>]</span><br><span class="line"><span class="comment">// Result+Models</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">mapArrayResult</span>&lt;T: Modelable&gt;<span class="params">(<span class="number">_</span> type: T.<span class="keyword">Type</span>, params: ModelableParamsBlock? = <span class="literal">nil</span>)</span></span> -&gt; (<span class="type">MoyaMapperResult</span>, [<span class="type">T</span>])</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„äº”ä¸ªæ–¹æ³•ï¼Œè§‚å…¶åï¼ŒçŸ¥å…¶æ„ï¼Œè¿™é‡Œå°±ä¸è¿‡å¤šè§£é‡Šäº†ï¼Œä¸»è¦æ³¨æ„ä¸¤ç‚¹ï¼š</p><ul><li><p>result</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…ƒç¥–ç±»å‹</span></span><br><span class="line"><span class="comment">// å‚æ•°1ï¼šæ ¹æ®statusCodeKeyå–å‡ºçš„å€¼ä¸successValueæ˜¯å¦ç›¸ç­‰</span></span><br><span class="line"><span class="comment">// å‚æ•°2ï¼šæ ¹æ®tipStrKeyå–å‡ºçš„å€¼</span></span><br><span class="line">resultï¼š(<span class="type">Bool</span>, <span class="type">String</span>)</span><br></pre></td></tr></table></figure></li><li><p>params</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// params: ModelableParamsBlock? = nil</span></span><br><span class="line"><span class="comment">// è¿™é‡Œåªæœ‰åœ¨ç‰¹æ®Šåœºæ™¯ä¸‹æ‰éœ€è¦ä½¿ç”¨åˆ°ã€‚å¦‚ï¼šé¡¹ç›®ä¸­éœ€è¦åœ¨æŸå¤„ä½¿ç”¨ç‰¹å®šæ¥å£ï¼Œä½†æ˜¯è¿”å›çš„jsonæ ¼å¼è·Ÿè‡ªå·±é¡¹ç›®çš„ä¸ä¸€æ ·ï¼Œå¹¶ä¸”åªæœ‰è¿™ä¹ˆä¸€ä¸¤å¤„ç”¨å¾—ç€è¯¥é¢å¤–æ¥å£ï¼Œé‚£å°±éœ€è¦æˆ‘ä»¬è¿™ä¸ªå‚æ•°äº†ï¼Œä»¥Blockçš„æ–¹å¼è¿”å›è§£æå‚æ•°ç±»å‹ã€‚</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="0x01ã€ç‰¹å®šè§£æ"><a href="#0x01ã€ç‰¹å®šè§£æ" class="headerlink" title="0x01ã€ç‰¹å®šè§£æ"></a>0x01ã€ç‰¹å®šè§£æ</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Model</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">toJSON</span><span class="params">(modelKey: String? = <span class="literal">nil</span>)</span></span> -&gt; <span class="type">JSON</span></span><br><span class="line"><span class="comment">// è·å–æŒ‡å®šè·¯å¾„çš„å€¼</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">fetchJSONString</span><span class="params">(path: String? = <span class="literal">nil</span>, keys: [JSONSubscriptType])</span></span> -&gt; <span class="type">String</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šè·¯å¾„ï¼Œé»˜è®¤éƒ½æ˜¯é’ˆå¯¹modelKeyçš„<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fetchJSONString(keys: &lt;[JSONSubscriptType]&gt;)</span></span><br><span class="line"><span class="number">1</span>ã€é€šè¿‡ keys ä¼ é€’æ•°ç»„, è¯¥æ•°ç»„å¯ä¼ å…¥çš„ç±»å‹ä¸º <span class="type">Int</span> å’Œ <span class="type">String</span></span><br><span class="line"><span class="number">2</span>ã€é»˜è®¤æ˜¯ä»¥ modelKey æ‰€ç¤ºè·¯å¾„ï¼Œæ¥è·å–ç›¸åº”çš„æ•°å€¼ã€‚å¦‚æœmodelKeyå¹¶éæ˜¯ä½ æ‰€æƒ³è¦ä½¿ç”¨çš„è§£æè·¯å¾„ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹æ–¹çš„é‡è½½æ–¹æ³•é‡æ–°æŒ‡å®šè·¯å¾„å³å¯</span><br><span class="line"></span><br><span class="line"><span class="comment">// response.fetchJSONString(path: &lt;String?&gt;, keys: &lt;[JSONSubscriptType]&gt;)</span></span><br></pre></td></tr></table></figure></p><p><strong>MoyaMapperä¹Ÿæä¾›äº†Rxå­åº“ï¼Œä¸ºæ–¹ä¾¿RxSwiftçš„æµå¼ç¼–ç¨‹ä¸‹ä¾¿æ·è§£ææ•°æ®</strong></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MoyaMapperé»˜è®¤åªå®‰è£…Coreä¸‹çš„æ–‡ä»¶</span><br><span class="line">pod <span class="string">'MoyaMapper'</span></span><br><span class="line"></span><br><span class="line">RxSwiftæ‹“å±•</span><br><span class="line">pod <span class="string">'MoyaMapper/Rx'</span></span><br></pre></td></tr></table></figure><p>å…·ä½“ä½¿ç”¨è¿˜ä¸æ˜¯å¾ˆæ˜ç™½çš„åŒå­¦å¯ä»¥ä¸‹è½½å¹¶è¿è¡Œ<code>Example</code>çœ‹çœ‹</p><p><strong>å¦‚æœ<a href="https://github.com/LinXunFeng/MoyaMapper" target="_blank" rel="noopener">MoyaMapper</a>æœ‰ä»€ä¹ˆä¸è¶³çš„åœ°æ–¹ï¼Œæ¬¢è¿æå‡ºissuesï¼Œæ„Ÿè°¢å¤§å®¶çš„æ”¯æŒ</strong></p>]]></content>
    
    
    <summary type="html">&lt;Excerpt in index | é¦–é¡µæ‘˜è¦&gt; 

&lt;p&gt;MoyaMapperæ˜¯åŸºäºMoyaå’ŒSwiftyJSONå°è£…çš„å·¥å…·ï¼Œä»¥Moyaçš„pluginçš„æ–¹å¼æ¥å®ç°é—´æ¥è§£æï¼Œæ”¯æŒRxSwift&lt;/p&gt;
&lt;p&gt;+</summary>
    
    
    
    <category term="iOS" scheme="http://linxunfeng.top/categories/iOS/"/>
    
    
    <category term="iOS" scheme="http://linxunfeng.top/tags/iOS/"/>
    
    <category term="Swift" scheme="http://linxunfeng.top/tags/Swift/"/>
    
    <category term="RxSwift" scheme="http://linxunfeng.top/tags/RxSwift/"/>
    
  </entry>
  
  <entry>
    <title>iOS-é¢å‘åè®®æ–¹å¼å°è£…ç©ºç™½é¡µåŠŸèƒ½</title>
    <link href="http://linxunfeng.top/2018/04/07/iOS-%E9%9D%A2%E5%90%91%E5%8D%8F%E8%AE%AE%E6%96%B9%E5%BC%8F%E5%B0%81%E8%A3%85%E7%A9%BA%E7%99%BD%E9%A1%B5%E5%8A%9F%E8%83%BD/"/>
    <id>http://linxunfeng.top/2018/04/07/iOS-%E9%9D%A2%E5%90%91%E5%8D%8F%E8%AE%AE%E6%96%B9%E5%BC%8F%E5%B0%81%E8%A3%85%E7%A9%BA%E7%99%BD%E9%A1%B5%E5%8A%9F%E8%83%BD/</id>
    <published>2018-04-07T22:21:46.000Z</published>
    <updated>2020-08-22T14:18:43.876Z</updated>
    
    <content type="html"><![CDATA[<Excerpt in index | é¦–é¡µæ‘˜è¦> <p>ä¸ºäº†è‰¯å¥½çš„äº¤äº’ä½“éªŒï¼Œç›¸ä¿¡å¤§å®¶åœ¨å¯¹å¾…<code>scrollView</code>æ— æ•°æ®æ—¶çš„æç¤ºé¡µéƒ½ä¼šä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹æ¥å®šåˆ¶ï¼Œæœ€å…¸å‹çš„å°±æ˜¯ä½¿ç”¨<a href="https://github.com/dzenbot/DZNEmptyDataSet" target="_blank" rel="noopener">DZNEmptyDataSet</a>ã€‚ä½†æ˜¯æ¯ä¸ªç•Œé¢éƒ½å†™ä¸€å †ä¸<code>DZNEmptyDataSetDelegate</code>ï¼Œ<code>DZNEmptyDataSetSource</code>ç›¸å…³çš„ä»£ç å°±ä¸å¤ªå¥½ï¼Œé‚£ä¸€èˆ¬æƒ…å†µä¸‹è‡ªç„¶çš„å°±ä¼šé‡‡ç”¨ç»§æ‰¿çš„æ–¹å¼æ¥é¿å…ã€‚è€ŒSwifté™¤äº†å¯ä»¥é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå®ƒè¿˜å¯ä»¥é¢å‘åè®®ç¼–ç¨‹ã€‚é‚£å¯ä¸å¯ä»¥ä¹Ÿç”¨åè®®æ¥è§£å†³æƒ…å†µå‘¢ï¼Ÿå˜¿å˜¿ï¼Œè¿™ä¸ªå¯ä»¥æœ‰ï¼Œé‚£æˆ‘ä»¬æ¥ä¸‹æ¥å°±æ¥è¯•è¯•æ€ä¹ˆé€šè¿‡åè®®çš„æ–¹å¼æ¥é¿å…ä¸Šè¿°æƒ…å†µï¼Œå¹¶ä¸”å®ç°ä¸€è¡Œä»£ç æ·»åŠ ç©ºç™½é¡µåŠŸèƒ½</p><p>+<a id="more"></a></p><The rest of contents | ä½™ä¸‹å…¨æ–‡><blockquote><p>ä¸ºäº†è‰¯å¥½çš„äº¤äº’ä½“éªŒï¼Œç›¸ä¿¡å¤§å®¶åœ¨å¯¹å¾…<code>scrollView</code>æ— æ•°æ®æ—¶çš„æç¤ºé¡µéƒ½ä¼šä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹æ¥å®šåˆ¶ï¼Œæœ€å…¸å‹çš„å°±æ˜¯ä½¿ç”¨<a href="https://github.com/dzenbot/DZNEmptyDataSet" target="_blank" rel="noopener">DZNEmptyDataSet</a>ã€‚ä½†æ˜¯æ¯ä¸ªç•Œé¢éƒ½å†™ä¸€å †ä¸<code>DZNEmptyDataSetDelegate</code>ï¼Œ<code>DZNEmptyDataSetSource</code>ç›¸å…³çš„ä»£ç å°±ä¸å¤ªå¥½ï¼Œé‚£ä¸€èˆ¬æƒ…å†µä¸‹è‡ªç„¶çš„å°±ä¼šé‡‡ç”¨ç»§æ‰¿çš„æ–¹å¼æ¥é¿å…ã€‚è€ŒSwifté™¤äº†å¯ä»¥é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå®ƒè¿˜å¯ä»¥é¢å‘åè®®ç¼–ç¨‹ã€‚é‚£å¯ä¸å¯ä»¥ä¹Ÿç”¨åè®®æ¥è§£å†³æƒ…å†µå‘¢ï¼Ÿå˜¿å˜¿ï¼Œè¿™ä¸ªå¯ä»¥æœ‰ï¼Œé‚£æˆ‘ä»¬æ¥ä¸‹æ¥å°±æ¥è¯•è¯•æ€ä¹ˆé€šè¿‡åè®®çš„æ–¹å¼æ¥é¿å…ä¸Šè¿°æƒ…å†µï¼Œå¹¶ä¸”å®ç°ä¸€è¡Œä»£ç æ·»åŠ ç©ºç™½é¡µåŠŸèƒ½</p></blockquote><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¦‚æœå¯¹é¢å‘åè®®æœ‰ç–‘é—®çš„åŒå­¦å¯ä»¥çœ‹ä¸‹æˆ‘ä¹‹å‰çš„ä¸¤ç¯‡æ–‡ç« </p><p><a href="/2017/09/12/iOS-Swift-é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰/">iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆä¸€ï¼‰</a> </p><p><a href="/2017/09/12/iOS-Swift-é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰/">iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰</a></p><p>ä¹‹å‰çš„æ–‡ç« ä¸­æåˆ°äº†ï¼Œåè®®é™¤äº†èµ·è§„èŒƒä½œç”¨ï¼Œè¿˜æœ‰åˆ«ä¸€ä¸ªç”¨å¤„ï¼Œå°±æ˜¯èµ‹äºˆèƒ½åŠ›ã€‚æˆ‘ä»¬ç°åœ¨çš„ç›®çš„å°±æ˜¯è®©ç›®æ ‡æ§åˆ¶å™¨æˆ–è€…ç›®æ ‡è§†å›¾åœ¨éµå®ˆæˆ‘ä»¬çš„åè®®åï¼Œå°±å¯ä»¥æœ‰å®ç°ç©ºç™½é¡µçš„åŠŸèƒ½ã€‚</p><h2 id="ä¸€ã€åŸºæœ¬å®ç°"><a href="#ä¸€ã€åŸºæœ¬å®ç°" class="headerlink" title="ä¸€ã€åŸºæœ¬å®ç°"></a>ä¸€ã€åŸºæœ¬å®ç°</h2><h3 id="1ã€åˆ›å»ºåè®®"><a href="#1ã€åˆ›å»ºåè®®" class="headerlink" title="1ã€åˆ›å»ºåè®®"></a>1ã€åˆ›å»ºåè®®</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MARK:- ç©ºè§†å›¾å ä½åè®®</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">protocol</span> <span class="title">LXFEmptyDataSetable</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2ã€ç¡®å®šé¢å‘ç±»"><a href="#2ã€ç¡®å®šé¢å‘ç±»" class="headerlink" title="2ã€ç¡®å®šé¢å‘ç±»"></a>2ã€ç¡®å®šé¢å‘ç±»</h3><p>ç¡®å®šæˆ‘ä»¬é¢å‘çš„ç±»ï¼Œä¸€èˆ¬<code>tableView</code>æˆ–è€…<code>collectionView</code>éƒ½æ˜¯å†™åœ¨æ§åˆ¶å™¨é‡Œï¼Œé‚£æˆ‘ä»¬é¢å‘çš„ç±»å°±è§„å®šä¸º<code>UIViewController</code>ï¼Œæˆ–è®¸ä¹Ÿæœ‰äººå†™åœ¨<code>UIView</code>é‡Œï¼Œä¸è¿‡è¿™é‡Œå…ˆæŒ‰<code>UIViewController</code>æ¥å†™å§<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MARK:- UIViewController - ç©ºè§†å›¾å ä½åè®®</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">extension</span> <span class="title">LXFEmptyDataSetable</span> <span class="title">where</span> <span class="title">Self</span> : <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 3ã€çš„å®ç°çš„æ–¹æ³•å†™åœ¨è¿™é‡Œ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="3ã€å®šä¹‰åŠŸèƒ½æ–¹æ³•"><a href="#3ã€å®šä¹‰åŠŸèƒ½æ–¹æ³•" class="headerlink" title="3ã€å®šä¹‰åŠŸèƒ½æ–¹æ³•"></a>3ã€å®šä¹‰åŠŸèƒ½æ–¹æ³•</h3><p>å°†<code>scrollView</code>ä¼ é€’è¿›æ¥ï¼Œè®©æˆ‘ä»¬å®šä¹‰çš„æ–¹æ³•æ¥æš—åœ°é‡Œåšäº›æ“ä½œ<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">lxf_EmptyDataSet</span><span class="params">(<span class="number">_</span> scrollView: UIScrollView)</span></span> &#123;</span><br><span class="line">    scrollView.emptyDataSetDelegate = <span class="keyword">self</span></span><br><span class="line">    scrollView.emptyDataSetSource = <span class="keyword">self</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="4ã€è®¾ç½®æ•°æ®æºå’Œä»£ç†"><a href="#4ã€è®¾ç½®æ•°æ®æºå’Œä»£ç†" class="headerlink" title="4ã€è®¾ç½®æ•°æ®æºå’Œä»£ç†"></a>4ã€è®¾ç½®æ•°æ®æºå’Œä»£ç†</h3><p>åœ¨<code>3ã€å®šä¹‰åŠŸèƒ½æ–¹æ³•</code>ä¸­å°†<code>delegate</code>å’Œ<code>source</code>è®¾ç½®ä¸ºäº†<code>self</code> ï¼Œè€Œåè®®æ˜¯æ— æ³•éµå®ˆå†æ¬¡éµå®ˆå…¶å®ƒåè®®çš„ï¼Œé‚£è®©ä»€ä¹ˆæ¥éµå®ˆå¯¹åº”çš„åè®®å‘¢ï¼Ÿè¦æ˜ç™½è¿™é‡Œçš„<code>self</code>æŒ‡çš„æ˜¯<code>UIViewController</code>,è€ƒè™‘åˆ°<code>UIView</code>çš„å¯èƒ½ï¼Œè¿™é‡Œæˆ‘å°±è®©ä¸‡ç‰©å¯¹è±¡ä¹‹çˆ¶<code>NSObject</code>æ¥éµå®ˆï¼Œå¹¶å®ç°å¯¹åº”çš„æ•°æ®æºæ–¹æ³•å’Œä»£ç†æ–¹æ³•<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">NSObject</span> : <span class="title">DZNEmptyDataSetDelegate</span>, <span class="title">DZNEmptyDataSetSource</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">image</span><span class="params">(forEmptyDataSet scrollView: UIScrollView!)</span></span> -&gt; <span class="type">UIImage!</span> &#123;</span><br><span class="line">        <span class="comment">// è¿”å›æç¤ºå›¾ç‰‡</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">title</span><span class="params">(forEmptyDataSet scrollView: UIScrollView!)</span></span> -&gt; <span class="type">NSAttributedString!</span> &#123;</span><br><span class="line">        <span class="comment">// è®¾ç½®å¯Œæ–‡æœ¬æ ‡é¢˜</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">verticalOffset</span><span class="params">(forEmptyDataSet scrollView: UIScrollView!)</span></span> -&gt; <span class="type">CGFloat</span> &#123;</span><br><span class="line">        <span class="comment">// è®¾ç½®çºµå‘åç§»</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="äºŒã€å®šåˆ¶ç©ºç™½é¡µ"><a href="#äºŒã€å®šåˆ¶ç©ºç™½é¡µ" class="headerlink" title="äºŒã€å®šåˆ¶ç©ºç™½é¡µ"></a>äºŒã€å®šåˆ¶ç©ºç™½é¡µ</h2><p>é€šè¿‡ä¸Šè¿°æ­¥éª¤åï¼Œåªè¦è®©<code>UIViewController</code>éµå®ˆæˆ‘ä»¬çš„åè®®ï¼Œå†è°ƒç”¨ä¸€ä¸‹<code>lxf_EmptyDataSet</code>æ–¹æ³•å°±å¯ä»¥å®ç°æ•°æ®ç©ºç™½é¡µäº†ã€‚ä½†æ˜¯ï¼Œè¿™æ ·ç›´æ¥å†™æ­»çš„æ–¹å¼å¾ˆä¸å¥½ï¼Œæœ‰æ—¶å€™ä¸€äº›åœºæ™¯æ˜¯éœ€è¦æˆ‘ä»¬åšå‡ºå®šåˆ¶çš„ï¼Œé‚£æ€ä¹ˆå®ç°å®šåˆ¶å‘¢ï¼Ÿåè®®åˆä¸èƒ½æœ‰è‡ªå·±çš„å˜é‡æ¥å­˜æ”¾æˆ‘ä»¬çš„å®šåˆ¶ã€‚</p><font color='red'><em>è¿™é‡Œå…ˆåšå‡ºä¸€ä¸ªé™å®šï¼Œæˆ‘ä»¬è¦ä½¿ç”¨é‡è½½æ–¹æ³•æ¥å®Œæˆè¯¥åŠŸèƒ½ï¼Œå®ç°å³å¯é«˜å®šåˆ¶ï¼Œåˆå¯ä½¿ç”¨é»˜è®¤å®šåˆ¶ã€‚</em></font><p>å›åˆ°åˆšåˆšçš„è¯é¢˜ï¼Œä½¿ç”¨UserDefaultsæ¥å®ç°å¯ä»¥å—ï¼Ÿå¯ä»¥ï¼Œä½†æ˜¯æ¯”è¾ƒéº»çƒ¦ï¼Œå› ä¸ºUserDefaultsæ˜¯å•ä¾‹ï¼Œæ•´ä¸ªè¿›ç¨‹å…±ç”¨è¿™ä¸€ä»½èµ„æºï¼Œå¦‚æœä½ å½“å‰<code>controller</code>éµå®ˆäº†æˆ‘ä»¬çš„åè®®<code>LXFEmptyDataSetable</code>å¹¶åšå‡ºäº†å®šåˆ¶ï¼Œé‚£ä¹ˆå½“ä¸‹ä¸€ä¸ª<code>controller</code>åœ¨éµå®ˆåè®®åä½¿ç”¨äº†<code>é»˜è®¤å®šåˆ¶</code>æ—¶ï¼Œé‚£ä½ è¦æ€ä¹ˆåŠï¼Ÿè¿˜è¦åŒºåˆ†<code>scrollView</code>ï¼Œé‚£å°±å¾—ä¿å­˜å½“å‰<code>scrollView</code>ï¼Œåœ¨é€€å‡ºå½“å‰<code>controller</code>åè¿˜è¦æŠŠå¯¹åº”çš„ä¸œè¥¿ç½®ç©ºã€‚å¥½å’¯å¥½å’¯ï¼Œé‚£ä½ è¯´åˆ°åº•è¦æ€ä¹ˆææ‰æœ€åˆé€‚ï¼Ÿ</p><blockquote><p>è§£å†³æ–¹æ¡ˆï¼šæ‹“å±•<code>UIScrollView</code>ï¼ï¼ï¼æœ‰æ²¡æœ‰å‘ç°ï¼Ÿï¼Œéå¸¸åœ°æ°å·§ï¼Œæˆ‘ä»¬å®šä¹‰çš„æ–¹æ³•<code>lxf_EmptyDataSet</code>éœ€è¦å¤–ç•Œå°†<code>UIScrollView</code>ä¼ é€’è¿›æ¥ï¼Œåœ¨<code>DZNEmptyDataSet</code>çš„æ•°æ®æºæ–¹æ³•å’Œä»£ç†æ–¹æ³•ä¹Ÿæœ‰<code>scrollView</code>ã€‚é‚£è®©<code>UIScrollView</code>æ¥æºå¸¦æˆ‘ä»¬çš„å®šåˆ¶å°±å¥½å•¦ã€‚</p></blockquote><h3 id="1ã€å®šä¹‰å®šåˆ¶ç›¸å…³çš„æšä¸¾"><a href="#1ã€å®šä¹‰å®šåˆ¶ç›¸å…³çš„æšä¸¾" class="headerlink" title="1ã€å®šä¹‰å®šåˆ¶ç›¸å…³çš„æšä¸¾"></a>1ã€å®šä¹‰å®šåˆ¶ç›¸å…³çš„æšä¸¾</h3><p>è¿™é‡Œæˆ‘å®šä¹‰äº†å¸¸ç”¨çš„å®šåˆ¶ç›¸å…³çš„æšä¸¾<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">LXFEmptyDataSetAttributeKeyType</span> </span>&#123;</span><br><span class="line">    <span class="comment">/// çºµå‘åç§»(-50)  CGFloat</span></span><br><span class="line">    <span class="keyword">case</span> verticalOffset</span><br><span class="line">    <span class="comment">/// æç¤ºè¯­(æš‚æ— æ•°æ®)  String</span></span><br><span class="line">    <span class="keyword">case</span> tipStr</span><br><span class="line">    <span class="comment">/// æç¤ºè¯­çš„font(system15)  UIFont</span></span><br><span class="line">    <span class="keyword">case</span> tipFont</span><br><span class="line">    <span class="comment">/// æç¤ºè¯­é¢œè‰²(D2D2D2)  UIColor</span></span><br><span class="line">    <span class="keyword">case</span> tipColor</span><br><span class="line">    <span class="comment">/// æç¤ºå›¾(LXFEmptyDataPic) UIImage</span></span><br><span class="line">    <span class="keyword">case</span> tipImage</span><br><span class="line">    <span class="comment">/// å…è®¸æ»šåŠ¨(true) Bool</span></span><br><span class="line">    <span class="keyword">case</span> allowScroll</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="2ã€æ‹“å±•UIScrollView"><a href="#2ã€æ‹“å±•UIScrollView" class="headerlink" title="2ã€æ‹“å±•UIScrollView"></a>2ã€æ‹“å±•UIScrollView</h3><p>ä¸º<code>UIScrollView</code>å®šä¹‰ä¸€ä¸ªå®šåˆ¶ç›¸å…³çš„å±æ€§å­—å…¸<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIScrollView</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">struct</span> <span class="title">AssociatedKeys</span> </span>&#123;</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">var</span> lxf_emptyAttributeDict:[<span class="type">LXFEmptyDataSetAttributeKeyType</span> : <span class="type">Any</span>]?</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/// å±æ€§å­—å…¸</span></span><br><span class="line">    <span class="keyword">var</span> lxf_emptyAttributeDict: [<span class="type">LXFEmptyDataSetAttributeKeyType</span> : <span class="type">Any</span>]? &#123;</span><br><span class="line">        <span class="keyword">get</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> objc_getAssociatedObject(<span class="keyword">self</span>, &amp;<span class="type">AssociatedKeys</span>.lxf_emptyAttributeDict) <span class="keyword">as</span>? [<span class="type">LXFEmptyDataSetAttributeKeyType</span> : <span class="type">Any</span>]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">set</span> &#123;</span><br><span class="line">            objc_setAssociatedObject(<span class="keyword">self</span>, &amp;<span class="type">AssociatedKeys</span>.lxf_emptyAttributeDict, newValue <span class="keyword">as</span> [<span class="type">LXFEmptyDataSetAttributeKeyType</span> : <span class="type">Any</span>]?, objc_AssociationPolicy.<span class="type">OBJC_ASSOCIATION_RETAIN_NONATOMIC</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="3ã€å®Œå–„lxf-EmptyDataSetæ–¹æ³•"><a href="#3ã€å®Œå–„lxf-EmptyDataSetæ–¹æ³•" class="headerlink" title="3ã€å®Œå–„lxf_EmptyDataSetæ–¹æ³•"></a>3ã€å®Œå–„lxf_EmptyDataSetæ–¹æ³•</h3><p>è¿™é‡Œæˆ‘ä»¬è®©å¤–ç•Œé€šè¿‡é—­åŒ…çš„æ–¹å¼æ¥å®šåˆ¶è‡ªå·±çš„ç©ºç™½é¡µ<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MARK:- UIViewController - ç©ºè§†å›¾å ä½åè®®</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">extension</span> <span class="title">LXFEmptyDataSetable</span> <span class="title">where</span> <span class="title">Self</span> : <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">lxf_EmptyDataSet</span><span class="params">(<span class="number">_</span> scrollView: UIScrollView, attributeBlock: <span class="params">(<span class="params">()</span></span></span></span>-&gt;([<span class="type">LXFEmptyDataSetAttributeKeyType</span> : <span class="type">Any</span>]))? = <span class="literal">nil</span>) &#123;</span><br><span class="line">        scrollView.lxf_emptyAttributeDict = attributeBlock != <span class="literal">nil</span> ? attributeBlock!() : <span class="literal">nil</span></span><br><span class="line">        scrollView.emptyDataSetDelegate = <span class="keyword">self</span></span><br><span class="line">        scrollView.emptyDataSetSource = <span class="keyword">self</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="4ã€ä½¿ç”¨å®šåˆ¶å±æ€§å­—å…¸"><a href="#4ã€ä½¿ç”¨å®šåˆ¶å±æ€§å­—å…¸" class="headerlink" title="4ã€ä½¿ç”¨å®šåˆ¶å±æ€§å­—å…¸"></a>4ã€ä½¿ç”¨å®šåˆ¶å±æ€§å­—å…¸</h3><p>è¿™é‡Œä»¥è¿”å›æç¤ºå›¾ç‰‡çš„æ–¹æ³•ä¸ºä¾‹å§<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public func image(forEmptyDataSet scrollView: UIScrollView!) -&gt; UIImage! &#123;</span><br><span class="line">    guard let tipImg &#x3D; scrollView.lxf_emptyAttributeDict?[.tipImage] as? UIImage else &#123;</span><br><span class="line">        return UIImage(named: &quot;LXFEmptyDataPic&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">    return tipImg</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="5ã€å¤–ç•Œçš„ä½¿ç”¨å§¿åŠ¿"><a href="#5ã€å¤–ç•Œçš„ä½¿ç”¨å§¿åŠ¿" class="headerlink" title="5ã€å¤–ç•Œçš„ä½¿ç”¨å§¿åŠ¿"></a>5ã€å¤–ç•Œçš„ä½¿ç”¨å§¿åŠ¿</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LXFEmptyDemoController</span>: <span class="title">UIViewController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line"></span><br><span class="line">        initUI()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">LXFEmptyDemoController</span>: <span class="title">LXFEmptyDataSetable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">fileprivate</span> <span class="function"><span class="keyword">func</span> <span class="title">initUI</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> tableView = <span class="type">UITableView</span>()</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// é«˜å®šåˆ¶</span></span><br><span class="line">        <span class="keyword">self</span>.lxf_EmptyDataSet(tableView) &#123; () -&gt; ([<span class="type">LXFEmptyDataSetAttributeKeyType</span> : <span class="type">Any</span>]) <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">return</span> [</span><br><span class="line">                .tipStr:<span class="string">"å“Ÿå“Ÿå“Ÿ"</span>,</span><br><span class="line">                .verticalOffset:-<span class="number">150</span>,</span><br><span class="line">                .allowScroll: <span class="literal">false</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// é»˜è®¤å®šåˆ¶</span></span><br><span class="line">        <span class="comment">// self.lxf_EmptyDataSet(tableView)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="/images/2018/04/iOS-é¢å‘åè®®æ–¹å¼å°è£…ç©ºç™½é¡µåŠŸèƒ½/lxf_EmptyDataSet.png" alt="å¤§åŠŸå‘Šæˆ"></p><h2 id="ä¸‰ã€å¼€æºåº“"><a href="#ä¸‰ã€å¼€æºåº“" class="headerlink" title="ä¸‰ã€å¼€æºåº“"></a>ä¸‰ã€å¼€æºåº“</h2><p>æˆ‘å¯¹è¿™ä¸ªè¿‡ç¨‹è¿›è¡Œä¸€æ¬¡æ•´ç†ï¼Œå¹¶åšæˆä¸€ä¸ªåä¸º <a href="https://github.com/LinXunFeng/LXFProtocolTool" target="_blank" rel="noopener">LXFProtocolTool</a> çš„åº“å¹¶ä¸Šä¼ è‡³gitHubã€‚å¯ä»¥ä½¿ç”¨<code>Cocoapods</code>çš„æ–¹å¼æ¥å®‰è£…ä½¿ç”¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod &#39;LXFProtocolTool&#39;</span><br></pre></td></tr></table></figure><p>æˆ‘ä¹Ÿå°† <a href="http://linxunfeng.top/2017/09/12/iOS-Swift-é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰/">iOS - Swift é¢å‘åè®®ç¼–ç¨‹ï¼ˆäºŒï¼‰</a> ä¸­æåŠçš„é€šè¿‡åè®®ä¾¿æ·åŠ è½½xibçš„åŠŸèƒ½ä¹Ÿé›†æˆäº†è¿›æ¥ã€‚å¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦åœ¨Podfileå†™æ˜è¦å®‰è£…çš„åŠŸèƒ½</p><ul><li>XibåŠ è½½</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod &#39;LXFProtocolTool&#x2F;LXFNibloadable&#39;</span><br></pre></td></tr></table></figure><ul><li>ç©ºç™½è§†å›¾</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod &#39;LXFProtocolTool&#x2F;LXFEmptyDataSetable&#39;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºè¿™ä¸ªåº“çš„ç›®çš„æ˜¯ä¸ºäº†é€šè¿‡åè®®çš„æ–¹å¼æ¥æ–¹ä¾¿å¿«æ·åœ°å®ç°ä¸€äº›çš„å®ç”¨åŠŸèƒ½ï¼Œç›®å‰åŠŸèƒ½ä¸å¤šï¼Œä¸è¿‡å¾€åä¼šé€æ¸å¢åŠ ï¼Œæˆ–è®¸ä½ æœ‰ä»€ä¹ˆæƒ³å®ç°çš„åŠŸèƒ½ä¹Ÿå¯ä»¥æå‡ºæ¥ï¼Œå–œæ¬¢çš„å°±ç»™ä¸ªStaré¼“åŠ±ä¸‹æˆ‘å§ ğŸš€ ğŸš€ ğŸš€ </p>]]></content>
    
    
    <summary type="html">&lt;Excerpt in index | é¦–é¡µæ‘˜è¦&gt; 

&lt;p&gt;ä¸ºäº†è‰¯å¥½çš„äº¤äº’ä½“éªŒï¼Œç›¸ä¿¡å¤§å®¶åœ¨å¯¹å¾…&lt;code&gt;scrollView&lt;/code&gt;æ— æ•°æ®æ—¶çš„æç¤ºé¡µéƒ½ä¼šä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹æ¥å®šåˆ¶ï¼Œæœ€å…¸å‹çš„å°±æ˜¯ä½¿ç”¨&lt;a href=&quot;https://github.com/dzenbot/DZNEmptyDataSet&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;DZNEmptyDataSet&lt;/a&gt;ã€‚ä½†æ˜¯æ¯ä¸ªç•Œé¢éƒ½å†™ä¸€å †ä¸&lt;code&gt;DZNEmptyDataSetDelegate&lt;/code&gt;ï¼Œ&lt;code&gt;DZNEmptyDataSetSource&lt;/code&gt;ç›¸å…³çš„ä»£ç å°±ä¸å¤ªå¥½ï¼Œé‚£ä¸€èˆ¬æƒ…å†µä¸‹è‡ªç„¶çš„å°±ä¼šé‡‡ç”¨ç»§æ‰¿çš„æ–¹å¼æ¥é¿å…ã€‚è€ŒSwifté™¤äº†å¯ä»¥é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå®ƒè¿˜å¯ä»¥é¢å‘åè®®ç¼–ç¨‹ã€‚é‚£å¯ä¸å¯ä»¥ä¹Ÿç”¨åè®®æ¥è§£å†³æƒ…å†µå‘¢ï¼Ÿå˜¿å˜¿ï¼Œè¿™ä¸ªå¯ä»¥æœ‰ï¼Œé‚£æˆ‘ä»¬æ¥ä¸‹æ¥å°±æ¥è¯•è¯•æ€ä¹ˆé€šè¿‡åè®®çš„æ–¹å¼æ¥é¿å…ä¸Šè¿°æƒ…å†µï¼Œå¹¶ä¸”å®ç°ä¸€è¡Œä»£ç æ·»åŠ ç©ºç™½é¡µåŠŸèƒ½&lt;/p&gt;
&lt;p&gt;+</summary>
    
    
    
    <category term="iOS" scheme="http://linxunfeng.top/categories/iOS/"/>
    
    
    <category term="iOS" scheme="http://linxunfeng.top/tags/iOS/"/>
    
    <category term="Swift" scheme="http://linxunfeng.top/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆå››ï¼‰ï¼šfastlaneå®ç°podè‡ªåŠ¨åŒ–</title>
    <link href="http://linxunfeng.top/2018/04/06/iOS-%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9Afastlane%E5%AE%9E%E7%8E%B0pod%E8%87%AA%E5%8A%A8%E5%8C%96/"/>
    <id>http://linxunfeng.top/2018/04/06/iOS-%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9Afastlane%E5%AE%9E%E7%8E%B0pod%E8%87%AA%E5%8A%A8%E5%8C%96/</id>
    <published>2018-04-06T19:53:20.000Z</published>
    <updated>2020-08-22T14:18:43.876Z</updated>
    
    <content type="html"><![CDATA[<Excerpt in index | é¦–é¡µæ‘˜è¦> <p>åœ¨ç¬¬ä¸€æ¬¡ç»„ä»¶åŒ–çš„æ—¶å€™ï¼Œéœ€è¦æ‰§è¡Œå¾ˆå¤šæ“ä½œï¼Œè¿™äº›æ“ä½œå¯ä»¥åœ¨ã€<a href="http://linxunfeng.top/2018/04/06/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/">iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨</a>ã€‘ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œåœ¨ç»„ä»¶åŒ–åçš„é‡å¤æ€§æ“ä½œå°±æ˜¯å‡çº§ï¼Œè€Œå‡çº§è¿™ä¸ªè¿‡ç¨‹æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥å¾ˆæ–¹ä¾¿çš„æå®šè¿™ä¸€è¿‡ç¨‹æ¥èŠ‚çº¦æˆ‘ä»¬å¤§é‡çš„æ—¶é—´å‘¢ï¼Ÿ</p><p>+<a id="more"></a></p><The rest of contents | ä½™ä¸‹å…¨æ–‡><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆå››ï¼‰ï¼šfastlaneå®ç°podè‡ªåŠ¨åŒ–/fastlane.png" alt=""></p><blockquote><p>åœ¨ç¬¬ä¸€æ¬¡ç»„ä»¶åŒ–çš„æ—¶å€™ï¼Œéœ€è¦æ‰§è¡Œå¾ˆå¤šæ“ä½œï¼Œè¿™äº›æ“ä½œå¯ä»¥åœ¨ã€<a href="http://linxunfeng.top/2018/04/06/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/">iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨</a>ã€‘ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œåœ¨ç»„ä»¶åŒ–åçš„é‡å¤æ€§æ“ä½œå°±æ˜¯å‡çº§ï¼Œè€Œå‡çº§è¿™ä¸ªè¿‡ç¨‹æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥å¾ˆæ–¹ä¾¿çš„æå®šè¿™ä¸€è¿‡ç¨‹æ¥èŠ‚çº¦æˆ‘ä»¬å¤§é‡çš„æ—¶é—´å‘¢ï¼Ÿ</p></blockquote><h2 id="ä¸€ã€å‡çº§å¿…å¤‡æ“ä½œ"><a href="#ä¸€ã€å‡çº§å¿…å¤‡æ“ä½œ" class="headerlink" title="ä¸€ã€å‡çº§å¿…å¤‡æ“ä½œ"></a>ä¸€ã€å‡çº§å¿…å¤‡æ“ä½œ</h2><p>ä¿®æ”¹å®Œæ ¸å¿ƒä»£ç åï¼Œä¸€å…±è¿˜éœ€è¦åšä»¥ä¸‹å‡ æ­¥ï¼š<br><br>1ã€ä¿®æ”¹specæ–‡ä»¶ï¼ˆä¿®æ”¹s.versionï¼Œs.descriptionç­‰ï¼‰<br><br>2ã€<code>pod install</code> ï¼ˆä½¿Exampleä¸podä¸‹æ¥çš„åº“äº§ç”Ÿå…³è”ï¼‰<br><br>3ã€æäº¤æœ¬åœ°ä»“åº“ä»£ç è‡³è¿œç¨‹ä»“åº“<br><br>4ã€æ‰“æ ‡ç­¾ï¼Œå¹¶æäº¤è‡³è¿œç¨‹<br><br>5ã€éªŒè¯specï¼Œå¹¶æè‡³ç§æœ‰ç´¢å¼•åº“</p><h2 id="äºŒã€Fastlane"><a href="#äºŒã€Fastlane" class="headerlink" title="äºŒã€Fastlane"></a>äºŒã€Fastlane</h2><h3 id="1ã€ç®€ä»‹"><a href="#1ã€ç®€ä»‹" class="headerlink" title="1ã€ç®€ä»‹"></a>1ã€ç®€ä»‹</h3><p><a href="https://docs.fastlane.tools/" target="_blank" rel="noopener">Fastlaneæ–‡æ¡£è¯´æ˜ </a><br>Fastlaneæ˜¯ä¸€ä¸ªrubyè„šæœ¬é›†åˆï¼Œå®ƒå¯ä»¥æŒ‰ç…§æˆ‘ä»¬æŒ‡å®šçš„è·¯çº¿ï¼Œåœ¨æŒ‡å®šä½ç½®æ‰§è¡Œæˆ‘ä»¬æ‰€è¦æ‰§è¡Œçš„æ“ä½œã€‚è¿™é‡Œæˆ‘ä»¬ç§°è¿™æ ·çš„è·¯çº¿ä¸ºã€Œèˆªé“(lane)ã€ï¼Œè¿™æ ·çš„æ“ä½œç§°ä¸ºã€ŒActionã€</p><p>Actionæ˜¯Fastlaneè‡ªåŠ¨åŒ–æµç¨‹ä¸­çš„æœ€å°æ‰§è¡Œå•å…ƒï¼Œç”¨æ¥æ‰§è¡ŒFastlaneè„šæœ¬ä¸­çš„å‘½ä»¤ï¼Œå…³äºæ›´å¤šçš„æè¿°å¯ä»¥åˆ°<a href="https://docs.fastlane.tools/actions/Actions/" target="_blank" rel="noopener">Actions - fastlane docs</a>æŸ¥çœ‹ï¼Œé‡Œé¢ä¹Ÿä»‹ç»äº†å¸¸ç”¨çš„actionæœ‰å“ªäº›ï¼Œé¡ºå¸¦é™„ä¸Š<a href="https://github.com/fastlane/fastlane/tree/master/fastlane/lib/fastlane/actions" target="_blank" rel="noopener">actionçš„æºç åœ°å€</a>ï¼Œè¿™ä¸ªæºç åœ¨åé¢è‡ªå®šä¹‰èµ·å‚è€ƒä½œç”¨</p><h3 id="2ã€-å®‰è£…"><a href="#2ã€-å®‰è£…" class="headerlink" title="2ã€ å®‰è£…"></a>2ã€ å®‰è£…</h3><ul><li><p>ç¡®ä¿rubyä¸ºæœ€æ–°ç‰ˆæœ¬</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew update</span><br><span class="line">brew install ruby</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…fastlane</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gem install -n &#x2F;usr&#x2F;local&#x2F;bin fastlane</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹å½“å‰fastlaneç‰ˆæœ¬</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastlane --version</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹æ‰€æœ‰action</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastlane actions</span><br></pre></td></tr></table></figure></li></ul><h3 id="ä¸‰ã€fastlaneåˆå§‹åŒ–"><a href="#ä¸‰ã€fastlaneåˆå§‹åŒ–" class="headerlink" title="ä¸‰ã€fastlaneåˆå§‹åŒ–"></a>ä¸‰ã€fastlaneåˆå§‹åŒ–</h3><p>cdåˆ°ä½ çš„æœ¬åœ°ç»„ä»¶ä»“åº“çš„æ ¹ç›®å½•</p><ul><li><del>åˆå§‹åŒ–fastlane</del><br><del><code>fastlane init</code></del><br><del>ä¸è¿‡è¿™ä¸ªæ­¥éª¤å¯¹æˆ‘ä»¬æ¥è¯´å¯ä»¥è·³è¿‡ï¼Œåœ¨initåæç¤ºä½ è¾“å…¥ä¸€äº›ä¸œè¥¿ï¼ŒåŒ…æ‹¬ä¸Šä¼ éœ€è¦ç”¨åˆ°çš„APPLE IDä»€ä¹ˆçš„ä¸€å †ä¸œè¥¿ï¼Œç”±äºæˆ‘ä»¬å¹¶ä¸æ¶‰åŠè¿™äº›ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨æ›´æ–¹ä¾¿çš„æ–¹å¼</del></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># åˆ›å»ºä¸€ä¸ªfastlaneæ–‡ä»¶å¤¹</span><br><span class="line"># è¿›å…¥fastlaneç›®å½•</span><br><span class="line"># åˆ›å»ºä¸€ä¸ªFastfileæ–‡ä»¶</span><br><span class="line">mkdir fastlane</span><br><span class="line">cd fastlane</span><br><span class="line">touch Fastfile</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆå››ï¼‰ï¼šfastlaneå®ç°podè‡ªåŠ¨åŒ–/ç›®å½•ç»“æ„.png" alt="ç›®å½•ç»“æ„"></p><h3 id="1ã€ä¿®æ”¹Fastfile"><a href="#1ã€ä¿®æ”¹Fastfile" class="headerlink" title="1ã€ä¿®æ”¹Fastfile"></a>1ã€ä¿®æ”¹Fastfile</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">desc &#39;æè¿°èˆªé“ä½œç”¨&#39;</span><br><span class="line">lane :èˆªé“åç§° do |options|</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; options å¯ä»¥ç”¨æ¥ä¼ é€’å‚æ•°</span><br><span class="line">&#x2F;&#x2F; ç¤ºä¾‹ï¼švarName &#x3D; options[:name]</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; èˆªé“ä¸Šéœ€è¦æ‰§è¡Œçš„æ“ä½œ</span><br><span class="line"></span><br><span class="line">end</span><br></pre></td></tr></table></figure><p>èˆªé“ä¸Šè¦æ‰«æçš„æ“ä½œå¯ä»¥åˆ°<a href="https://docs.fastlane.tools/actions" target="_blank" rel="noopener">Actions</a>ä¸ŠæŸ¥æ‰¾ï¼Œå¯ä»¥é€šè¿‡å…³é”®å­—æœç´¢ï¼Œå¦‚ä¸‹å›¾<br><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆå››ï¼‰ï¼šfastlaneå®ç°podè‡ªåŠ¨åŒ–/cocoapods.png" alt="cocoapods"><br>ç‚¹è¿›å»å¯ä»¥çœ‹åˆ°å…·ä½“çš„ä½¿ç”¨åŠå‚æ•°è¯´æ˜</p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆå››ï¼‰ï¼šfastlaneå®ç°podè‡ªåŠ¨åŒ–/ä½¿ç”¨è¯´æ˜.png" alt="ä½¿ç”¨è¯´æ˜"></p><p>è¿™é‡Œé™„ä¸Šæœ¬äººçš„Fastfileå†…å®¹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">desc &#39;LXFUpdatePodTool èˆªé“ç”¨æ¥è‡ªåŠ¨åŒ–å‡çº§ç»´æŠ¤ç§æœ‰åº“&#39;</span><br><span class="line">lane : LXFUpdatePodTool do |options|</span><br><span class="line"></span><br><span class="line">tagNum &#x3D; options[:tag]</span><br><span class="line">podspecName &#x3D; options[:specName]</span><br><span class="line"></span><br><span class="line"># èˆªé“ä¸Šéœ€è¦æ‰§è¡Œçš„æ“ä½œ</span><br><span class="line"># å…·ä½“actionåˆ° https:&#x2F;&#x2F;docs.fastlane.tools&#x2F;actions ä¸Šé¢æŸ¥æ‰¾</span><br><span class="line"># è¿™é‡Œçš„è·¯å¾„ä»¥ä»“åº“æ ¹ç›®å½•ä¸ºå‡†</span><br><span class="line"></span><br><span class="line"># 1ã€ä¿®æ”¹specæ–‡ä»¶ï¼ˆä¿®æ”¹s.versionï¼Œs.descriptionç­‰ï¼‰</span><br><span class="line"># 2ã€pod install ï¼ˆä½¿Exampleä¸podä¸‹æ¥çš„åº“äº§ç”Ÿå…³è”ï¼‰</span><br><span class="line">cocoapods(</span><br><span class="line">  clean: true,</span><br><span class="line">  podfile: &quot;.&#x2F;Example&#x2F;Podfile&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 3ã€æäº¤æœ¬åœ°ä»“åº“ä»£ç è‡³è¿œç¨‹ä»“åº“</span><br><span class="line">git_add(path: &quot;.&quot;)</span><br><span class="line">git_commit(path: &quot;.&quot;, message: &quot;upgrade repo&quot;)</span><br><span class="line">push_to_git_remote</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 4ã€æ‰“æ ‡ç­¾ï¼Œå¹¶æäº¤è‡³è¿œç¨‹</span><br><span class="line">add_git_tag(</span><br><span class="line">  tag: tagNum</span><br><span class="line">)</span><br><span class="line">push_git_tags</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 5ã€éªŒè¯specï¼Œå¹¶æè‡³ç§æœ‰ç´¢å¼•åº“</span><br><span class="line">pod_lib_lint(allow_warnings: true)</span><br><span class="line"># å› ä¸ºæœ¬åœ°ç´¢å¼•åº“repoçš„åå­—æ˜¯åŸºæœ¬ä¸Šä¸ä¼šå»æ”¹å˜çš„ï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥å†™æ­» LXFSpecs</span><br><span class="line"># podspecçš„åå­—éœ€è¦ç”±å¤–ç•Œä¼ å…¥</span><br><span class="line">pod_push(path: &quot;#&#123;podspecName&#125;.podspec&quot;, repo: &quot;LXFSpecs&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">end</span><br></pre></td></tr></table></figure></p><h3 id="2ã€éªŒè¯Fastfile"><a href="#2ã€éªŒè¯Fastfile" class="headerlink" title="2ã€éªŒè¯Fastfile"></a>2ã€éªŒè¯Fastfile</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastlane lanes</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆå››ï¼‰ï¼šfastlaneå®ç°podè‡ªåŠ¨åŒ–/FastfileéªŒè¯æˆåŠŸ.png" alt="FastfileéªŒè¯æˆåŠŸ"></p><h3 id="3ã€æ‰§è¡Œfastlane"><a href="#3ã€æ‰§è¡Œfastlane" class="headerlink" title="3ã€æ‰§è¡Œfastlane"></a>3ã€æ‰§è¡Œfastlane</h3><p><strong>éœ€è¦åœ¨ç»„ä»¶ä»“åº“çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œ</strong><br><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆå››ï¼‰ï¼šfastlaneå®ç°podè‡ªåŠ¨åŒ–/æ ¹ç›®å½•.png" alt="æ ¹ç›®å½•"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastlane LXFUpdatePodTool tag:0.1.1 specName:LXFMain</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆå››ï¼‰ï¼šfastlaneå®ç°podè‡ªåŠ¨åŒ–/å¼€å§‹æ‰§è¡Œ.png" alt="å¼€å§‹æ‰§è¡Œ"></p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆå››ï¼‰ï¼šfastlaneå®ç°podè‡ªåŠ¨åŒ–/ä¸Šä¼ å®Œæˆ.png" alt="ä¸Šä¼ å®Œæˆ"></p><p>æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ä¸è¶…è¿‡30ç§’ï½</p><h2 id="å››ã€è‡ªå®šä¹‰Action"><a href="#å››ã€è‡ªå®šä¹‰Action" class="headerlink" title="å››ã€è‡ªå®šä¹‰Action"></a>å››ã€è‡ªå®šä¹‰Action</h2><p>ä»¥ä¸Šçš„è¿‡ç¨‹å·²ç»å¯ä»¥å®Œæˆä¸€æ•´ä¸ªè‡ªåŠ¨åŒ–æ›´æ–°äº†ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªè¾“å…¥çš„tagå¯èƒ½ä¼šé¢ä¸´ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯æœ¬åœ°å’Œè¿œç¨‹éƒ½å¯èƒ½å·²ç»å­˜åœ¨ï¼Œå³å‘ç”Ÿå†²çªï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥é€‰æ‹©è‡ªåŠ¨åˆ é™¤æœ¬åœ°å’Œè¿œç¨‹å†²çªçš„é‚£ä¸ªtagï¼Œå†é‡æ–°ä¸Šä¼ å½“å‰tag</p><h3 id="1ã€åˆ›å»ºä¸€ä¸ªæ–°çš„action"><a href="#1ã€åˆ›å»ºä¸€ä¸ªæ–°çš„action" class="headerlink" title="1ã€åˆ›å»ºä¸€ä¸ªæ–°çš„action"></a>1ã€åˆ›å»ºä¸€ä¸ªæ–°çš„action</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastlane new_action</span><br></pre></td></tr></table></figure><p>æŒ‰è¦æ±‚è¾“å…¥Actionåç§°<br><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆå››ï¼‰ï¼šfastlaneå®ç°podè‡ªåŠ¨åŒ–/è¾“å…¥actionåç§°.png" alt="è¾“å…¥actionåç§°"></p><p>å®Œæˆåfastlaneç›®å½•ä¸‹å°±ä¼šå¤šå‡ºä¸€ä¸ªåä¸ºactionsçš„æ–‡ä»¶å¤¹ï¼Œé‡Œé¢å­˜æ”¾çš„å°±æ˜¯ä½ è‡ªå®šä¹‰action<br><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆå››ï¼‰ï¼šfastlaneå®ç°podè‡ªåŠ¨åŒ–/actionsæ–‡ä»¶å¤¹.png" alt=""></p><h3 id="2ã€ç¼–è¾‘è‡ªå®šä¹‰action"><a href="#2ã€ç¼–è¾‘è‡ªå®šä¹‰action" class="headerlink" title="2ã€ç¼–è¾‘è‡ªå®šä¹‰action"></a>2ã€ç¼–è¾‘è‡ªå®šä¹‰action</h3><p>æ‰“å¼€remove_git_tag.rbï¼Œå¼€å§‹è‡ªå®šä¹‰æˆ‘ä»¬çš„actionå§ï¼Œä»€ä¹ˆï¼Ÿä¸ä¼šè¯­æ³•æ€ä¹ˆåŠï¼Ÿå¯ä»¥å‚è€ƒåˆ«äººçš„å˜›ï¼Œä¸Šé¢ç»™å‡ºçš„<a href="https://github.com/fastlane/fastlane/tree/master/fastlane/lib/fastlane/actions" target="_blank" rel="noopener">actionçš„æºç åœ°å€</a>å°±æœ‰ç”¨æ­¦ä¹‹åœ°äº†ï¼Œæ¯”å¦‚<a href="https://github.com/fastlane/fastlane/blob/master/fastlane/lib/fastlane/actions/pod_push.rb" target="_blank" rel="noopener">pod_push</a>ã€‚è¿™é‡Œæˆ‘ç›´æ¥è´´å‡ºæˆ‘å·²ç»å®Œæˆçš„ä¸»è¦ä»£ç </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"># å¯ä»¥ä½¿ç”¨ fastlane action remove_git_tag æ¥å‚çœ‹è¯¦ç»†æè¿°</span><br><span class="line"></span><br><span class="line">def self.run(params)</span><br><span class="line">  # è¿™é‡Œå†™è¦æ‰§è¡Œçš„æ“ä½œ </span><br><span class="line">  # params[:å‚æ•°åç§°] å‚æ•°åç§°ä¸ä¸‹é¢self.available_optionsä¸­çš„ä¿æŒä¸€è‡´</span><br><span class="line">  tagNum &#x3D; params[:tagNum]</span><br><span class="line">  rmLocalTag &#x3D; params[:rmLocalTag]</span><br><span class="line">  rmRemoteTag &#x3D; params[:rmRemoteTag]</span><br><span class="line"></span><br><span class="line">  command &#x3D; []</span><br><span class="line">  if rmLocalTag</span><br><span class="line">    # åˆ é™¤æœ¬åœ°æ ‡ç­¾</span><br><span class="line">    # git tag -d æ ‡ç­¾åç§°</span><br><span class="line">    command &lt;&lt; &quot;git tag -d #&#123;tagNum&#125;&quot;</span><br><span class="line">  end</span><br><span class="line">  if rmRemoteTag</span><br><span class="line">    # åˆ é™¤è¿œç¨‹æ ‡ç­¾</span><br><span class="line">    # git push origin :æ ‡ç­¾åç§°</span><br><span class="line">    command &lt;&lt; &quot;git push origin :#&#123;tagNum&#125;&quot;</span><br><span class="line">  end</span><br><span class="line"></span><br><span class="line">  result &#x3D; Actions.sh(command.join(&#39;&amp;&#39;))</span><br><span class="line">  UI.success(&quot;Successfully remove tag ğŸš€ &quot;)</span><br><span class="line">  return result</span><br><span class="line"></span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">def self.description</span><br><span class="line">  # å¯¹å½“å‰è„šæœ¬çš„ç®€å•æè¿°</span><br><span class="line">  &quot;åˆ é™¤tag&quot;</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">def self.details</span><br><span class="line">  # å¯¹å½“å‰è„šæœ¬çš„å…·ä½“æè¿°</span><br><span class="line">  &quot;ä½¿ç”¨å½“å‰actionæ¥åˆ é™¤æœ¬åœ°å’Œè¿œç¨‹å†²çªçš„tag&quot;</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">def self.available_options</span><br><span class="line">  # ç”¨æ¥ä¼ é€’å‚æ•°</span><br><span class="line">  [ </span><br><span class="line">    FastlaneCore::ConfigItem.new(key: :tagNum,</span><br><span class="line">                                  description: &quot;è¾“å…¥å³å°†åˆ é™¤çš„tag&quot;,</span><br><span class="line">                                  is_string: true),</span><br><span class="line">    FastlaneCore::ConfigItem.new(key: :rmLocalTag,</span><br><span class="line">                                  description: &quot;æ˜¯å¦åˆ é™¤æœ¬åœ°tag&quot;,</span><br><span class="line">                                  optional:true,</span><br><span class="line">                                  is_string: false,</span><br><span class="line">                                  default_value: true),</span><br><span class="line">    FastlaneCore::ConfigItem.new(key: :rmRemoteTag,</span><br><span class="line">                                  description: &quot;æ˜¯å¦åˆ é™¤è¿œç¨‹tag&quot;,</span><br><span class="line">                                  optional:true,</span><br><span class="line">                                  is_string: false,</span><br><span class="line">                                  default_value: true)</span><br><span class="line">  ]</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">def self.authors</span><br><span class="line">  # ä½œè€…å§“å</span><br><span class="line">  [&quot;LinXunFeng&quot;]</span><br><span class="line">end</span><br></pre></td></tr></table></figure><h3 id="3ã€æŸ¥çœ‹actionæè¿°"><a href="#3ã€æŸ¥çœ‹actionæè¿°" class="headerlink" title="3ã€æŸ¥çœ‹actionæè¿°"></a>3ã€æŸ¥çœ‹actionæè¿°</h3><p>åŒæ ·ï¼Œè¿™é‡Œå…ˆcdåˆ°ç»„ä»¶åº“çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼ŒåŸå› æ˜¯è¿™ä¸ªè‡ªå®šä¹‰actionåªå­˜åœ¨å½“å‰æ ¹ç›®å½•ä¸‹çš„fastlaneä¸­ï¼Œå…¶å®ƒfastlaneçš„éè‡ªå®šä¹‰çš„actionå°±ä¸ç”¨åœ¨å½“å‰æ ¹ç›®å½•ä¸‹æ“ä½œï½<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastlane action remove_git_tag</span><br></pre></td></tr></table></figure><br><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆå››ï¼‰ï¼šfastlaneå®ç°podè‡ªåŠ¨åŒ–/æŸ¥çœ‹å…·ä½“æè¿°.png" alt="æŸ¥çœ‹å…·ä½“æè¿°"></p><h3 id="4ã€æµ‹è¯•æ‰§è¡Œ"><a href="#4ã€æµ‹è¯•æ‰§è¡Œ" class="headerlink" title="4ã€æµ‹è¯•æ‰§è¡Œ"></a>4ã€æµ‹è¯•æ‰§è¡Œ</h3><p>å…ˆæ¥çœ‹çœ‹å½“å‰ç»„ä»¶åº“å·²å­˜åœ¨çš„tag<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag</span><br></pre></td></tr></table></figure><br><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆå››ï¼‰ï¼šfastlaneå®ç°podè‡ªåŠ¨åŒ–/å·²å­˜åœ¨çš„tag.png" alt="å·²å­˜åœ¨çš„tag"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘æ˜¯å·²ç»æœ‰ä¸€ä¸ª<code>0.1.1</code>ç‰ˆæœ¬çš„äº†ã€‚è¿™æ—¶æˆ‘ä»¬å†æ¥æ‰§è¡Œä¸€æ¬¡LXFUpdatePodToolèˆªé“<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastlane LXFUpdatePodTool tag:0.1.1 specName:LXFMain</span><br></pre></td></tr></table></figure><br><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆå››ï¼‰ï¼šfastlaneå®ç°podè‡ªåŠ¨åŒ–/è‡ªåŠ¨æ¸…é™¤.png" alt="è‡ªåŠ¨æ¸…é™¤"></p><h2 id="äº”ã€å·¥å…·æ‹¿èµ°"><a href="#äº”ã€å·¥å…·æ‹¿èµ°" class="headerlink" title="äº”ã€å·¥å…·æ‹¿èµ°"></a>äº”ã€å·¥å…·æ‹¿èµ°</h2><p><a href="https://github.com/LinXunFeng/LXFUpdatePodTool" target="_blank" rel="noopener">LXFUpdatePodTool</a> å·²ç»ä¼ åˆ°æˆ‘çš„GitHubä¸Šï¼Œéœ€è¦çš„åŒå­¦å°±æ‹¿èµ°å§ï¼Œé¡ºæ‰‹ç»™ä¸ªStarå’¯ Orz</p>]]></content>
    
    
    <summary type="html">&lt;Excerpt in index | é¦–é¡µæ‘˜è¦&gt; 

&lt;p&gt;åœ¨ç¬¬ä¸€æ¬¡ç»„ä»¶åŒ–çš„æ—¶å€™ï¼Œéœ€è¦æ‰§è¡Œå¾ˆå¤šæ“ä½œï¼Œè¿™äº›æ“ä½œå¯ä»¥åœ¨ã€&lt;a href=&quot;http://linxunfeng.top/2018/04/06/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/&quot;&gt;iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨&lt;/a&gt;ã€‘ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œåœ¨ç»„ä»¶åŒ–åçš„é‡å¤æ€§æ“ä½œå°±æ˜¯å‡çº§ï¼Œè€Œå‡çº§è¿™ä¸ªè¿‡ç¨‹æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥å¾ˆæ–¹ä¾¿çš„æå®šè¿™ä¸€è¿‡ç¨‹æ¥èŠ‚çº¦æˆ‘ä»¬å¤§é‡çš„æ—¶é—´å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;+</summary>
    
    
    
    <category term="iOS" scheme="http://linxunfeng.top/categories/iOS/"/>
    
    
    <category term="Git" scheme="http://linxunfeng.top/tags/Git/"/>
    
    <category term="GitHub" scheme="http://linxunfeng.top/tags/GitHub/"/>
    
    <category term="Cocoapods" scheme="http://linxunfeng.top/tags/Cocoapods/"/>
    
    <category term="iOS" scheme="http://linxunfeng.top/tags/iOS/"/>
    
    <category term="ç»„ä»¶åŒ–" scheme="http://linxunfeng.top/tags/%E7%BB%84%E4%BB%B6%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸‰ï¼‰ï¼šåŠ è½½èµ„æºæ–‡ä»¶</title>
    <link href="http://linxunfeng.top/2018/04/06/iOS-%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%8A%A0%E8%BD%BD%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6/"/>
    <id>http://linxunfeng.top/2018/04/06/iOS-%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9A%E5%8A%A0%E8%BD%BD%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6/</id>
    <published>2018-04-06T19:52:11.000Z</published>
    <updated>2020-08-22T14:18:43.876Z</updated>
    
    <content type="html"><![CDATA[<Excerpt in index | é¦–é¡µæ‘˜è¦> <p>ç»è¿‡å‰ä¸¤ç¯‡æ–‡ç« çš„å­¦ä¹ ï¼Œç›¸ä¿¡å¯¹ç»„ä»¶åŒ–å¼€å‘æœ‰äº†å¤§è‡´çš„äº†è§£ï¼Œé‚£æˆ‘ä»¬è¿™ç¯‡æ–‡ç« å°±æ¥è®²è®²èµ„æºæ–‡ä»¶çš„åŠ è½½å§</p><p>+<a id="more"></a></p><The rest of contents | ä½™ä¸‹å…¨æ–‡><blockquote><p>ç»è¿‡å‰ä¸¤ç¯‡æ–‡ç« çš„å­¦ä¹ ï¼Œç›¸ä¿¡å¯¹ç»„ä»¶åŒ–å¼€å‘æœ‰äº†å¤§è‡´çš„äº†è§£ï¼Œé‚£æˆ‘ä»¬è¿™ç¯‡æ–‡ç« å°±æ¥è®²è®²èµ„æºæ–‡ä»¶çš„åŠ è½½å§</p></blockquote><p>è¿™é‡Œæˆ‘æ–°å»ºäº†ä¸€ä¸ªLXFMainç»„ä»¶åº“ï¼Œä¸»è¦æ˜¯ç”¨æ¥æ˜¾ç¤ºTabBarçš„ç©æ„ï¼Œç„¶åå†è¿›è¡Œç»„ä»¶åŒ–æŠ½ç¦»å‡ºæ¥ï¼Œå…¶ä¸­çš„è¿‡ç¨‹è¿™é‡Œä¸å†èµ˜è¿°ï¼Œè¿˜æ²¡äº†è§£è¿‡çš„åŒå­¦å»ºè®®å…ˆé˜…è¯»ä¸‹è¿™ä¸¤ç¯‡æ–‡ç« å§</p><p><a href="http://linxunfeng.top/2018/04/06/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/">iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨</a></p><p><a href="http://linxunfeng.top/2018/04/06/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆäºŒï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„æ›´æ–°ä¸å­åº“/">iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆäºŒï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„æ›´æ–°ä¸å­åº“</a></p><p>è¿™é‡Œè·Ÿä¹‹å‰ä¸ä¸€æ ·çš„åœ°æ–¹åœ¨äºå¤šäº†å›¾ç‰‡èµ„æºï¼Œç»„ä»¶çš„æ ¸å¿ƒä»£ç æ”¾åœ¨Classesæ–‡ä»¶å¤¹ä¸­ï¼Œè€Œå›¾ç‰‡æˆ‘ä»¬åˆ™å­˜æ”¾äºAssetsç›®å½•ä¸‹ï¼Œå¦‚å›¾æ‰€ç¤º </p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸‰ï¼‰ï¼šåŠ è½½èµ„æºæ–‡ä»¶/å­˜æ”¾ä½ç½®.png" alt="å­˜æ”¾ä½ç½®"></p><h3 id="ä¸€ã€ä¿®æ”¹Spec"><a href="#ä¸€ã€ä¿®æ”¹Spec" class="headerlink" title="ä¸€ã€ä¿®æ”¹Spec"></a>ä¸€ã€ä¿®æ”¹Spec</h3><p>å°†å…³äºèµ„æºåŠ è½½çš„æ³¨é‡Šå»æ‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s.resource_bundles &#x3D; &#123;</span><br><span class="line"> # &#39;LXFMain&#39; &#x3D;&gt; [&#39;LXFMain&#x2F;Assets&#x2F;*.png&#39;]</span><br><span class="line"> &#39;LXFMain&#39; &#x3D;&gt; [&#39;LXFMain&#x2F;Assets&#x2F;*&#39;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å›åˆ°LXFMainçš„æ¨¡æ¿åº“ï¼Œæˆ‘ä»¬è¿›è¡Œä¸€æ¬¡æœ¬åœ°çš„å®‰è£…å’Œæµ‹è¯•(<code>pod install</code>)</p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸‰ï¼‰ï¼šåŠ è½½èµ„æºæ–‡ä»¶/ä¿®æ”¹Spec-podInstall.png" alt=""></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå›¾ç‰‡èµ„æºä¹Ÿå®‰è£…è¿›æ¥äº†ï¼Œä½†æ˜¯è¿è¡Œçš„æ•ˆæœå¦‚ä¸‹å›¾ï¼Œå›¾ç‰‡å¹¶ä¸èƒ½æˆåŠŸåŠ è½½å‡ºæ¥</p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸‰ï¼‰ï¼šåŠ è½½èµ„æºæ–‡ä»¶/æ²¡æœ‰å›¾æ ‡.png" alt="æ²¡æœ‰å›¾æ ‡"></p><h2 id="äºŒã€ä¿®æ”¹åŠ è½½èµ„æºä»£ç "><a href="#äºŒã€ä¿®æ”¹åŠ è½½èµ„æºä»£ç " class="headerlink" title="äºŒã€ä¿®æ”¹åŠ è½½èµ„æºä»£ç "></a>äºŒã€ä¿®æ”¹åŠ è½½èµ„æºä»£ç </h2><p>è¿™æ˜¯å½“å‰åŠ è½½å›¾ç‰‡çš„ç›¸å…³ä»£ç <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[UIImage imageNamed:@&quot;å›¾ç‰‡åç§°&quot;];</span><br></pre></td></tr></table></figure></p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸‰ï¼‰ï¼šåŠ è½½èµ„æºæ–‡ä»¶/showInFinder.png" alt="show in finder"></p><p>å³å‡»æ˜¾ç¤ºåŒ…å†…å®¹<br><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸‰ï¼‰ï¼šåŠ è½½èµ„æºæ–‡ä»¶/LXFMain.framework.png" alt="LXFMain.framework"></p><p>å›¾ç‰‡å°±åœ¨è¿™ä¸ª<code>LXFMain.bundle</code>é‡Œé¢(è¿™é‡Œå°±ä¸æˆªå›¾çœ‹äº†)ï¼Œè¿™é‡Œä¸»è¦æ˜¯è®©å¤§å®¶å¯¹è¿™ä¸ªç›®å½•ç»“æ„æœ‰ä¸ªäº†è§£</p><p>æˆ‘ä»¬å¯¹<code>imageNamed</code>è¿›è¡Œè·³è½¬åˆ°å®šä¹‰æ“ä½œ<br><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸‰ï¼‰ï¼šåŠ è½½èµ„æºæ–‡ä»¶/imageNamed.png" alt="imageNamed"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; load from main bundle</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå®˜æ–¹æ³¨é‡Šç€<code>imageNamed</code>åŠ è½½çš„æ˜¯main bundleä¸­çš„èµ„æº,mainBundleçš„ä½ç½®å¦‚ä¸‹å›¾<br><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸‰ï¼‰ï¼šåŠ è½½èµ„æºæ–‡ä»¶/mainBundle.png" alt="mainBundle"></p><p>è¿™æ ·å½“ç„¶å°±æ— æ³•åŠ è½½åˆ°å›¾ç‰‡å•¦ï¼Œæˆ‘ä»¬éœ€è¦è®©å®ƒåŠ è½½è‡ªå·±å½“å‰æ‰€åœ¨bundleé‡Œçš„å›¾ç‰‡ ï¼Œæ‰€ä»¥åŠ è½½å›¾ç‰‡çš„ä»£ç éœ€è¦è¿›è¡Œä¿®æ”¹<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSString</span> *normalImgName = <span class="string">@"ä¸ªäºº@2x.png"</span>;</span><br><span class="line"><span class="built_in">NSBundle</span> *curBundle = [<span class="built_in">NSBundle</span> bundleForClass:<span class="keyword">self</span>.class]; <span class="comment">// è·å–å½“å‰bundle</span></span><br><span class="line"><span class="built_in">NSString</span> *normalImgPath = [curBundle pathForResource:normalImgName ofType:<span class="literal">nil</span> inDirectory:<span class="string">@"LXFMain.bundle"</span>];</span><br><span class="line"><span class="built_in">UIImage</span> *normalImage = [<span class="built_in">UIImage</span> imageWithContentsOfFile:normalImgPath];</span><br></pre></td></tr></table></figure></p><p>ä½†æ˜¯ç›´æ¥å†™<code>LXFMain.bundle</code>å¹¶ä¸å¥½ï¼Œä¸å¯æ§ï¼Œæ‰€ä»¥è¿˜éœ€è¦æ”¹è¿›ä¸€ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">NSString *normalImgName &#x3D; [NSString stringWithFormat:@&quot;%@@2x.png&quot;, normalImg];</span><br><span class="line">NSBundle *curBundle &#x3D; [NSBundle bundleForClass:self.class];</span><br><span class="line">&#x2F;&#x2F;  *********** é‡ç‚¹ ***********   &#x2F;&#x2F;</span><br><span class="line">NSString *curBundleName &#x3D; curBundle.infoDictionary[@&quot;CFBundleName&quot;];</span><br><span class="line">NSString *curBundleDirectory &#x3D; [NSString stringWithFormat:@&quot;%@.bundle&quot;, curBundleName];</span><br><span class="line">NSString *normalImgPath &#x3D; [curBundle pathForResource:normalImgName ofType:nil inDirectory:curBundleDirectory];</span><br><span class="line">&#x2F;&#x2F;  ***************************   &#x2F;&#x2F;</span><br><span class="line">UIImage *normalImage &#x3D; [UIImage imageWithContentsOfFile:normalImgPath];</span><br></pre></td></tr></table></figure></p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸‰ï¼‰ï¼šåŠ è½½èµ„æºæ–‡ä»¶/æˆåŠŸåŠ è½½.png" alt="æˆåŠŸåŠ è½½"></p><h2 id="ä¸‰ã€èŠèŠxib"><a href="#ä¸‰ã€èŠèŠxib" class="headerlink" title="ä¸‰ã€èŠèŠxib"></a>ä¸‰ã€èŠèŠxib</h2><p>Xibçš„åŠ è½½ä¹Ÿæ˜¯å¦‚æ­¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NSBundle *curBundle &#x3D; [NSBundle bundleForClass:self.class];</span><br><span class="line">LXFCenterView *centerView &#x3D; (LXFCenterView *)[curBundle loadNibNamed:@&quot;LXFCenterView&quot; owner:nil options:nil].firstObject;</span><br><span class="line">centerView.frame &#x3D; CGRectMake(30, 140, 200, 100);</span><br><span class="line">[self.view addSubview:centerView];</span><br></pre></td></tr></table></figure><br>ä¸è¿‡xibä¸­å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¦‚æœæ˜¯ç›´æ¥åœ¨xibä¸­æ‹–å…¥ä¸€ä¸ªimageViewæ§ä»¶æ¥è®¾ç½®å›¾ç‰‡çš„åŠ è½½ï¼Œæˆ‘ä»¬åˆ™éœ€è¦åœ¨å›¾ç‰‡åå­—å‰åŠ ä¸Šå½“å‰bundleåç§°<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LXFMain.bundle&#x2F;ä¸ªäºº</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œé™¤äº†å½“å‰xibè¦åŠ è½½çš„å›¾ç‰‡ä¸å±äºmainBundleè¿™ä¸ªåŸå› ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç‚¹å°±æ˜¯xibæ–‡ä»¶ä¸bundleå­˜æ”¾ä½ç½®å±äºåŒä¸€çº§åˆ«ï¼Œæ•…ç›´æ¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„çš„æ–¹å¼ï¼Œåœ¨å›¾ç‰‡åå­—å‰åŠ ä¸Šbundleåç§°å³å¯ã€‚</p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸‰ï¼‰ï¼šåŠ è½½èµ„æºæ–‡ä»¶/åŒä¸€ç›®å½•çº§åˆ«.png" alt="åŒä¸€ç›®å½•çº§åˆ«"></p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸‰ï¼‰ï¼šåŠ è½½èµ„æºæ–‡ä»¶/xibä¸Šçš„æ“ä½œ.png" alt="xibä¸Šçš„æ“ä½œ"></p><p>è™½ç„¶æ— æ³•åœ¨xibä¸Šç›´æ¥çœ‹åˆ°æ•ˆæœï¼Œä¸è¿‡ç¡®å®æ˜¯æœ‰æ•ˆçš„<br><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸‰ï¼‰ï¼šåŠ è½½èµ„æºæ–‡ä»¶/xibæˆåŠŸæ˜¾ç¤ºå›¾ç‰‡.png" alt="xibæˆåŠŸæ˜¾ç¤ºå›¾ç‰‡"></p><h2 id="å››ã€é‡åˆ°çš„å°é—®é¢˜"><a href="#å››ã€é‡åˆ°çš„å°é—®é¢˜" class="headerlink" title="å››ã€é‡åˆ°çš„å°é—®é¢˜"></a>å››ã€é‡åˆ°çš„å°é—®é¢˜</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[!] Unable to find a pod with name, author, summary, or description matching &#96;lxfmain&#96;</span><br></pre></td></tr></table></figure><p>æˆ‘åšå®Œä¸€åˆ‡æ“ä½œåå‘ç°æœç´¢æŠ¥ä¸Šé¢é‚£ä¸ªé”™ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åˆ é™¤æœ¬åœ°ç´¢å¼•æ–‡ä»¶ï¼Œç„¶åå†æœç´¢ä¸€éï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¸®ä½ å†ç”Ÿæˆä¸€åˆ‡æœ¬åœ°ç´¢å¼•æ–‡ä»¶ï¼Œç„¶åå°±æå®šäº†ï½<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm -rf ~&#x2F;Library&#x2F;Caches&#x2F;CocoaPods&#x2F;search_index.json </span><br><span class="line">pod search lxfmain</span><br></pre></td></tr></table></figure></p>]]></content>
    
    
    <summary type="html">&lt;Excerpt in index | é¦–é¡µæ‘˜è¦&gt; 

&lt;p&gt;ç»è¿‡å‰ä¸¤ç¯‡æ–‡ç« çš„å­¦ä¹ ï¼Œç›¸ä¿¡å¯¹ç»„ä»¶åŒ–å¼€å‘æœ‰äº†å¤§è‡´çš„äº†è§£ï¼Œé‚£æˆ‘ä»¬è¿™ç¯‡æ–‡ç« å°±æ¥è®²è®²èµ„æºæ–‡ä»¶çš„åŠ è½½å§&lt;/p&gt;
&lt;p&gt;+</summary>
    
    
    
    <category term="iOS" scheme="http://linxunfeng.top/categories/iOS/"/>
    
    
    <category term="Git" scheme="http://linxunfeng.top/tags/Git/"/>
    
    <category term="GitHub" scheme="http://linxunfeng.top/tags/GitHub/"/>
    
    <category term="Cocoapods" scheme="http://linxunfeng.top/tags/Cocoapods/"/>
    
    <category term="iOS" scheme="http://linxunfeng.top/tags/iOS/"/>
    
    <category term="ç»„ä»¶åŒ–" scheme="http://linxunfeng.top/tags/%E7%BB%84%E4%BB%B6%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆäºŒï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„æ›´æ–°ä¸å­åº“</title>
    <link href="http://linxunfeng.top/2018/04/06/iOS-%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E8%BF%9C%E7%A8%8B%E7%A7%81%E6%9C%89%E5%BA%93%E7%9A%84%E6%9B%B4%E6%96%B0%E4%B8%8E%E5%AD%90%E5%BA%93/"/>
    <id>http://linxunfeng.top/2018/04/06/iOS-%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9A%E8%BF%9C%E7%A8%8B%E7%A7%81%E6%9C%89%E5%BA%93%E7%9A%84%E6%9B%B4%E6%96%B0%E4%B8%8E%E5%AD%90%E5%BA%93/</id>
    <published>2018-04-06T19:50:41.000Z</published>
    <updated>2020-08-22T14:18:43.876Z</updated>
    
    <content type="html"><![CDATA[<Excerpt in index | é¦–é¡µæ‘˜è¦> <p>åœ¨ä¸Šä¸€ç¯‡ã€<a href="http://linxunfeng.top/2018/04/06/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/">iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨</a>ã€‘ä¸­æˆ‘ä»¬å·²ç»å®æˆ˜äº†è¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬æ“ä½œï¼Œä½†æ˜¯ç»„ä»¶ä¸å¯èƒ½ä¸Šä¼ ä¸€æ¬¡å°±å®Œäº‹äº†ï¼Œéšç€ä¸šåŠ¡çš„å¢åŠ ï¼Œæˆ‘ä»¬çš„ç»„ä»¶å¯èƒ½è¿˜éœ€è¦æ·»åŠ æ›´å¤šçš„ä¸œè¥¿ï¼Œæˆ–è€…ä¿®å¤ä¸€äº›é—®é¢˜ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬å¯¹ç§æœ‰åº“ä»£ç è¿›è¡Œå‡çº§ä¸ç»´æŠ¤</p><p>+<a id="more"></a></p><The rest of contents | ä½™ä¸‹å…¨æ–‡><blockquote><p>åœ¨ä¸Šä¸€ç¯‡ã€<a href="http://linxunfeng.top/2018/04/06/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/">iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨</a>ã€‘ä¸­æˆ‘ä»¬å·²ç»å®æˆ˜äº†è¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬æ“ä½œï¼Œä½†æ˜¯ç»„ä»¶ä¸å¯èƒ½ä¸Šä¼ ä¸€æ¬¡å°±å®Œäº‹äº†ï¼Œéšç€ä¸šåŠ¡çš„å¢åŠ ï¼Œæˆ‘ä»¬çš„ç»„ä»¶å¯èƒ½è¿˜éœ€è¦æ·»åŠ æ›´å¤šçš„ä¸œè¥¿ï¼Œæˆ–è€…ä¿®å¤ä¸€äº›é—®é¢˜ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬å¯¹ç§æœ‰åº“ä»£ç è¿›è¡Œå‡çº§ä¸ç»´æŠ¤</p></blockquote><p>è¿™é‡Œä»¥å¯¹åŸºç¡€ç»„ä»¶é‡Œæ·»åŠ äº†ä¸€ä¸ªCacheå·¥å…·ä¸ºä¾‹</p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆäºŒï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„æ›´æ–°ä¸å­åº“/æ·»åŠ Cacheå·¥å…·.png" alt="æ·»åŠ Cacheå·¥å…·"></p><p>æ·»åŠ å®Œæˆåæˆ‘ä»¬éœ€è¦æ›´æ–°åˆ°è¿œç¨‹ä»“åº“</p><h2 id="ä¸€ã€æ›´æ–°è¿œç¨‹ä»“åº“"><a href="#ä¸€ã€æ›´æ–°è¿œç¨‹ä»“åº“" class="headerlink" title="ä¸€ã€æ›´æ–°è¿œç¨‹ä»“åº“"></a>ä¸€ã€æ›´æ–°è¿œç¨‹ä»“åº“</h2><p>cd åˆ°æœ¬åœ°ä»“åº“çš„ä½ç½®ï¼Œæ‰§è¡Œä»¥ä¸‹æ“ä½œ</p><h3 id="1ã€ä»£ç æ›´æ–°"><a href="#1ã€ä»£ç æ›´æ–°" class="headerlink" title="1ã€ä»£ç æ›´æ–°"></a>1ã€ä»£ç æ›´æ–°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m &#39;æ›´æ–°æè¿°&#39;</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆäºŒï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„æ›´æ–°ä¸å­åº“/ä»£ç å‡çº§.png" alt="ä»£ç å‡çº§"></p><h3 id="2ã€ç‰ˆæœ¬æ›´æ–°"><a href="#2ã€ç‰ˆæœ¬æ›´æ–°" class="headerlink" title="2ã€ç‰ˆæœ¬æ›´æ–°"></a>2ã€ç‰ˆæœ¬æ›´æ–°</h3><p><strong>ç‰ˆæœ¬æ›´æ–° è¿™ä¸€æ­¥éå¸¸é‡è¦ï¼Œä¸ºæ›´æ–°ç´¢å¼•åº“åšå‡†å¤‡</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git tag -a &#39;æ–°ç‰ˆæœ¬å·&#39; -m &#39;æ³¨é‡Š&#39;</span><br><span class="line">git push --tags</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆäºŒï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„æ›´æ–°ä¸å­åº“/ç‰ˆæœ¬å‡çº§.png" alt="ç‰ˆæœ¬å‡çº§"></p><p>æŸ¥çœ‹è¿œç¨‹ä»“åº“ï¼Œæ ‡ç­¾æ•°å·²ç»æœ‰2ä¸ªäº†ï¼Œç‚¹è¿›å»å°±å¯ä»¥çœ‹åˆ°0.2.0ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä¸å»çœ‹äº†<br><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆäºŒï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„æ›´æ–°ä¸å­åº“/2ä¸ªæ ‡ç­¾.png" alt=""></p><h2 id="äºŒã€ä¿®æ”¹æè¿°æ–‡ä»¶å¹¶æ›´æ–°ç´¢å¼•åº“"><a href="#äºŒã€ä¿®æ”¹æè¿°æ–‡ä»¶å¹¶æ›´æ–°ç´¢å¼•åº“" class="headerlink" title="äºŒã€ä¿®æ”¹æè¿°æ–‡ä»¶å¹¶æ›´æ–°ç´¢å¼•åº“"></a>äºŒã€ä¿®æ”¹æè¿°æ–‡ä»¶å¹¶æ›´æ–°ç´¢å¼•åº“</h2><h3 id="1ã€ä¿®æ”¹Sepc"><a href="#1ã€ä¿®æ”¹Sepc" class="headerlink" title="1ã€ä¿®æ”¹Sepc"></a>1ã€ä¿®æ”¹Sepc</h3><p>æ‰“å¼€ä½ çš„<code>xx.podspec</code>æ–‡ä»¶ï¼Œå°†åŸæœ¬çš„ç‰ˆæœ¬å·æ”¹ä¸º<code>0.2.0</code>ï¼Œä¸åˆšåˆšçš„tagä¿æŒä¸€è‡´<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.version &#x3D; &#39;0.2.0&#39;</span><br></pre></td></tr></table></figure></p><h3 id="2ã€éªŒè¯è¿œç¨‹Spec"><a href="#2ã€éªŒè¯è¿œç¨‹Spec" class="headerlink" title="2ã€éªŒè¯è¿œç¨‹Spec"></a>2ã€éªŒè¯è¿œç¨‹Spec</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod spec lint --private</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆäºŒï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„æ›´æ–°ä¸å­åº“/éªŒè¯è¿œç¨‹Spec.png" alt="éªŒè¯è¿œç¨‹Spec"></p><h3 id="3ã€æ›´æ–°ç´¢å¼•åº“"><a href="#3ã€æ›´æ–°ç´¢å¼•åº“" class="headerlink" title="3ã€æ›´æ–°ç´¢å¼•åº“"></a>3ã€æ›´æ–°ç´¢å¼•åº“</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod repo push ç´¢å¼•åº“åç§° xxx.podspec</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆäºŒï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„æ›´æ–°ä¸å­åº“/æ›´æ–°ç´¢å¼•åº“.png" alt="æ›´æ–°ç´¢å¼•åº“"></p><h2 id="ä¸‰ã€æ›´æ–°ä½¿ç”¨"><a href="#ä¸‰ã€æ›´æ–°ä½¿ç”¨" class="headerlink" title="ä¸‰ã€æ›´æ–°ä½¿ç”¨"></a>ä¸‰ã€æ›´æ–°ä½¿ç”¨</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; --no-repo-update ä¸æ›´æ–°æœ¬åœ°ç´¢å¼•åº“</span><br><span class="line">&#x2F;&#x2F; å› ä¸ºåˆšåˆšå·²ç»è‡ªå·±æ‰‹åŠ¨æ›´æ–°è¿‡äº†ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬é€‰æ‹©è·³è¿‡æ›´æ–°</span><br><span class="line">pod update --no-repo-update</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆäºŒï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„æ›´æ–°ä¸å­åº“/æ›´æ–°æ¡†æ¶.png" alt="æ›´æ–°æ¡†æ¶"></p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆäºŒï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„æ›´æ–°ä¸å­åº“/æ›´æ–°æˆåŠŸ.png" alt="æ›´æ–°æˆåŠŸ"></p><hr><h2 id="å››ã€ç¬¬ä¸‰æ–¹ä¾èµ–"><a href="#å››ã€ç¬¬ä¸‰æ–¹ä¾èµ–" class="headerlink" title="å››ã€ç¬¬ä¸‰æ–¹ä¾èµ–"></a>å››ã€ç¬¬ä¸‰æ–¹ä¾èµ–</h2><p>å½“æˆ‘ä»¬çš„ç§æœ‰åº“éœ€è¦ä¾èµ–å…¶å®ƒç¬¬ä¸‰æ–¹æ‰å¯ä»¥æ­£å¸¸ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨specæ–‡ä»¶ä¸­å¼€å¯ä¾èµ–ï¼Œä¾‹å¦‚ä¸‹é¢æ‰€ç¤ºä»£ç ï¼Œè¡¨æ˜å½“å‰ä»“åº“éœ€è¦ä¾èµ–AFNå’ŒSDWebImage<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s.dependency &#39;AFNetworking&#39;, &#39;~&gt; 3.2.0&#39;</span><br><span class="line">s.dependency &#39;SDWebImage&#39;, &#39;~&gt; 4.3.3&#39;</span><br></pre></td></tr></table></figure><br>ä¿®æ”¹åæ›´æ–°æ“ä½œåŒä¸Šæ‰€è¿°ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚</p><p>ä½†æ˜¯è¿™é‡Œå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæ¥äº†ä¸€ä½æ–°çš„å°ä¼™ä¼´ï¼Œä»–æ‰€è´Ÿè´£çš„éƒ¨åˆ†åªéœ€è¦LXFBaseä¸‹çš„Categoryï¼Œè€ŒLXFBaseä¸‹çš„Cacheæ‰éœ€è¦ä¾èµ–SDWebImageï¼Œæ­¤æ—¶ä»–è‹¥æ˜¯podä¸€æ•´ä¸ªLXFBaseå²‚ä¸æ˜¯å¹³ç™½æ— æ•…å®‰è£…äº†ç¬¬ä¸‰æ–¹ä¾èµ–åº“ï¼Œé‚£åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p><blockquote><p>æ–¹æ¡ˆå°±æ˜¯å¯ä»¥é€šè¿‡å­åº“Subspecsæ¥è§£å†³å› éœ€è¦ä¸€ä¸ªå°å°çš„å·¥å…·è€Œä¾èµ–æ•´ä¸ªåŸºç¡€ç»„ä»¶çš„é—®é¢˜</p></blockquote><h2 id="äº”ã€å­åº“Subspecs"><a href="#äº”ã€å­åº“Subspecs" class="headerlink" title="äº”ã€å­åº“Subspecs"></a>äº”ã€å­åº“Subspecs</h2><p>ä»€ä¹ˆæ˜¯Subspecsï¼Ÿè¿™é‡Œæˆ‘ä»¬å¯ä»¥æœç´¢ä¸€ä¸‹SDWebImage</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod search &#39;SDWebImage&#39;</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆäºŒï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„æ›´æ–°ä¸å­åº“/Subspecs.png" alt="Subspecs"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœæˆ‘ä»¬åªéœ€è¦ç”¨åˆ°SDWebImageä¸­çš„GIFåŠŸèƒ½ï¼Œé‚£ä¹ˆå¹¶ä¸éœ€è¦å°†æ•´ä¸ªSDWebImageéƒ½ä¸‹è½½ä¸‹æ¥ï¼Œåœ¨Podfileä¸­å°†<del><code>pod &#39;SDWebImage&#39;</code></del> æ”¹ä¸º <code>pod SDWebImage/GIF</code>å³å¯å•ç‹¬ä½¿ç”¨è¿™ä¸€åŠŸèƒ½</p><p>é‚£æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥çœ‹çœ‹æ€ä¹ˆæè¿°ä¸€ä¸ªå­åº“å§</p><h3 id="å­åº“æ ¼å¼"><a href="#å­åº“æ ¼å¼" class="headerlink" title="å­åº“æ ¼å¼"></a>å­åº“æ ¼å¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s.subspec &#39;å­åº“åç§°&#39; do |åˆ«å|</span><br><span class="line"></span><br><span class="line">end</span><br></pre></td></tr></table></figure><p>å› ä¸ºè¿™é‡Œå·²ç»åˆ†ç¦»å‡ºå­åº“äº†ï¼Œæ‰€ä»¥<code>s.source_files</code>å’Œ<code>s.dependency</code>å°±ä¸èƒ½è¿™ä¹ˆä½¿ç”¨äº†ï¼Œéœ€è¦æˆ‘ä»¬åœ¨å­åº“é‡Œåˆ†åˆ«æŒ‡å®šï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥æŠŠåŸæ¥çš„<code>s.source_files</code>å’Œ<code>s.dependency</code>éƒ½æ³¨é‡Šæ‰ã€‚å†™æ³•å‚è€ƒå¦‚ä¸‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># s.source_files &#x3D; &#39;LXFBase&#x2F;Classes&#x2F;**&#x2F;*&#39;</span><br><span class="line"># s.dependency &#39;SDWebImage&#39;, &#39;~&gt; 4.3.3&#39;</span><br><span class="line"></span><br><span class="line">s.subspec &#39;Cache&#39; do |c|</span><br><span class="line">  c.source_files &#x3D; &#39;LXFBase&#x2F;Classes&#x2F;Cache&#x2F;**&#x2F;*&#39;</span><br><span class="line">  c.dependency &#39;SDWebImage&#39;, &#39;~&gt; 4.3.3&#39;</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">s.subspec &#39;Category&#39; do |c|</span><br><span class="line">  c.source_files &#x3D; &#39;LXFBase&#x2F;Classes&#x2F;Category&#x2F;**&#x2F;*&#39;</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">s.subspec &#39;Tool&#39; do |t|</span><br><span class="line">  t.source_files &#x3D; &#39;LXFBase&#x2F;Classes&#x2F;Tool&#x2F;**&#x2F;*&#39;</span><br><span class="line">end</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹åå†æŒ‰ä¹‹å‰çš„æ­¥éª¤æ›´æ–°ç´¢å¼•åº“å’Œç»„ä»¶åº“å°±å¯ä»¥äº†</p><p><strong>ps: åœ¨æ·»åŠ ç¬¬ä¸‰æ–¹ä¾èµ–æè¿°ååšéªŒè¯æˆ–è€…ä¸Šä¼ æ“ä½œå¯èƒ½ä¼šå¾ˆæ…¢ï¼Œå› ä¸ºå®ƒåœ¨å…‹éš†ç¬¬ä¸‰æ–¹åº“å¦‚SDWebImageï¼Œæœ‰å…´è¶£çš„å¯ä»¥åœ¨å‘½ä»¤åé¢åŠ å…¥<code>--verbose</code>æ¥æŸ¥çœ‹è¯¦æƒ…æƒ…å†µ</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod spec lint --private --verbose</span><br></pre></td></tr></table></figure></p><p>åœ¨æˆåŠŸæ›´æ–°ç»„ä»¶åº“å’Œç´¢å¼•åº“åæˆ‘ä»¬å†æ¥æœç´¢ä¸€ä¸‹è¯•è¯•<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod search &#39;LXFBase&#39;</span><br></pre></td></tr></table></figure></p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆäºŒï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„æ›´æ–°ä¸å­åº“/subspecæ·»åŠ æˆåŠŸ.png" alt="subspecæ·»åŠ æˆåŠŸ"></p><p>ç°åœ¨å°±å¯ä»¥çˆ±è£…å“ªä¸ªå°±è£…å“ªä¸ªäº†ï¼Œåœ¨Podfileä¸­æŒ‡å®šè¦å®‰è£…çš„å­åº“å°±è¡Œäº†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod &#39;LXFBase&#x2F;Cache&#39;</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod install</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆäºŒï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„æ›´æ–°ä¸å­åº“/å®‰è£…æŒ‡å®šå­åº“ä¸ä¾èµ–åº“.png" alt="å®‰è£…æŒ‡å®šå­åº“ä¸ä¾èµ–åº“"></p>]]></content>
    
    
    <summary type="html">&lt;Excerpt in index | é¦–é¡µæ‘˜è¦&gt; 

&lt;p&gt;åœ¨ä¸Šä¸€ç¯‡ã€&lt;a href=&quot;http://linxunfeng.top/2018/04/06/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/&quot;&gt;iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨&lt;/a&gt;ã€‘ä¸­æˆ‘ä»¬å·²ç»å®æˆ˜äº†è¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬æ“ä½œï¼Œä½†æ˜¯ç»„ä»¶ä¸å¯èƒ½ä¸Šä¼ ä¸€æ¬¡å°±å®Œäº‹äº†ï¼Œéšç€ä¸šåŠ¡çš„å¢åŠ ï¼Œæˆ‘ä»¬çš„ç»„ä»¶å¯èƒ½è¿˜éœ€è¦æ·»åŠ æ›´å¤šçš„ä¸œè¥¿ï¼Œæˆ–è€…ä¿®å¤ä¸€äº›é—®é¢˜ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬å¯¹ç§æœ‰åº“ä»£ç è¿›è¡Œå‡çº§ä¸ç»´æŠ¤&lt;/p&gt;
&lt;p&gt;+</summary>
    
    
    
    <category term="iOS" scheme="http://linxunfeng.top/categories/iOS/"/>
    
    
    <category term="Git" scheme="http://linxunfeng.top/tags/Git/"/>
    
    <category term="GitHub" scheme="http://linxunfeng.top/tags/GitHub/"/>
    
    <category term="Cocoapods" scheme="http://linxunfeng.top/tags/Cocoapods/"/>
    
    <category term="iOS" scheme="http://linxunfeng.top/tags/iOS/"/>
    
    <category term="ç»„ä»¶åŒ–" scheme="http://linxunfeng.top/tags/%E7%BB%84%E4%BB%B6%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨</title>
    <link href="http://linxunfeng.top/2018/04/06/iOS-%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E8%BF%9C%E7%A8%8B%E7%A7%81%E6%9C%89%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
    <id>http://linxunfeng.top/2018/04/06/iOS-%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E8%BF%9C%E7%A8%8B%E7%A7%81%E6%9C%89%E5%BA%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</id>
    <published>2018-04-06T19:23:15.000Z</published>
    <updated>2020-08-22T14:18:43.876Z</updated>
    
    <content type="html"><![CDATA[<Excerpt in index | é¦–é¡µæ‘˜è¦> <p>éšç€é¡¹ç›®åŠŸèƒ½çš„ä¸æ–­å¢åŠ ï¼Œè¶Šæ¥è¶Šå¤šçš„å¼€å‘äººå‘˜åŠ å…¥ï¼Œä¸šåŠ¡ä¸»çº¿ä¹Ÿéšä¹‹è¶Šæ¥è¶Šå¤šï¼Œé€ æˆè€¦åˆè¶Šæ¥è¶Šä¸¥é‡ï¼Œç¼–è¯‘è¶Šæ¥è¶Šæ…¢ï¼Œæµ‹è¯•ä¸ç‹¬ç«‹ç­‰ä¸€ç³»åˆ—é—®é¢˜ã€‚ä¸ºäº†è§£å†³æ­¤ç±»æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘åˆ°ä½¿ç”¨ç»„ä»¶åŒ–å¼€å‘</p><p>+<a id="more"></a></p><The rest of contents | ä½™ä¸‹å…¨æ–‡><blockquote><p>éšç€é¡¹ç›®åŠŸèƒ½çš„ä¸æ–­å¢åŠ ï¼Œè¶Šæ¥è¶Šå¤šçš„å¼€å‘äººå‘˜åŠ å…¥ï¼Œä¸šåŠ¡ä¸»çº¿ä¹Ÿéšä¹‹è¶Šæ¥è¶Šå¤šï¼Œé€ æˆè€¦åˆè¶Šæ¥è¶Šä¸¥é‡ï¼Œç¼–è¯‘è¶Šæ¥è¶Šæ…¢ï¼Œæµ‹è¯•ä¸ç‹¬ç«‹ç­‰ä¸€ç³»åˆ—é—®é¢˜ã€‚ä¸ºäº†è§£å†³æ­¤ç±»æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘åˆ°ä½¿ç”¨ç»„ä»¶åŒ–å¼€å‘</p></blockquote><p>1.æ¦‚å¿µ<br>ç»„ä»¶åŒ–å°±æ˜¯å°†ä¸€ä¸ªå•ä¸€å·¥ç¨‹çš„é¡¹ç›®, åˆ†è§£æˆä¸ºå„ä¸ªç‹¬ç«‹çš„ç»„ä»¶ï¼Œ ç„¶åæŒ‰ç…§æŸç§æ–¹å¼, ä»»æ„ç»„ç»‡æˆä¸€ä¸ªæ‹¥æœ‰å®Œæ•´ä¸šåŠ¡é€»è¾‘çš„å·¥ç¨‹ã€‚</p><p>2.ä¼˜åŠ¿</p><ul><li>ç‹¬ç«‹ï¼šç‹¬ç«‹ç¼–å†™ã€ç¼–è¯‘ã€è¿è¡Œã€æµ‹è¯•</li><li>é‡ç”¨ï¼šåŠŸèƒ½ä»£ç çš„é‡å¤ä½¿ç”¨ã€‚æ¯”å¦‚ä¸åŒé¡¹ç›®ä½¿ç”¨åŒä¸€åŠŸèƒ½æ¨¡å—</li><li>é«˜æ•ˆï¼šä»»æ„å¢åˆ æ¨¡å—ï¼Œå®ç°é«˜æ•ˆè¿­ä»£</li><li>ç»„ä»¶åŒ–è¿˜å¯ä»¥é…åˆäºŒè¿›åˆ¶åŒ–, æé«˜é¡¹ç›®ç¼–è¯‘é€Ÿåº¦</li></ul><p>3.ç»„ä»¶åˆ†ç±»<br>å¤§ä½“ä¸Šåˆ†ä¸‰ç±»ï¼šåŸºç¡€ç»„ä»¶ã€åŠŸèƒ½ç»„ä»¶å’Œä¸šåŠ¡ç»„ä»¶<br></p><ul><li>åŸºç¡€ç»„ä»¶ï¼šä¹Ÿç§°ä¸ºå…¬å…±ç»„ä»¶ï¼Œå­˜æ”¾å¹³æ—¶å®šä¹‰çš„å®ã€å¸¸é‡ã€åè®®ã€åˆ†ç±»ã€å¯¹å¿…è¦çš„ç¬¬ä¸‰æ–¹çš„å°è£…ç±»ï¼Œä»¥åŠå„ç§å¤„ç†å·¥å…·ç±»ï¼Œå¦‚ï¼šæ—¶é—´ã€æ—¥æœŸã€è®¾å¤‡ä¿¡æ¯ã€æ–‡ä»¶å¤„ç†ã€æ²™ç›’ç®¡ç†ç­‰</li><li>åŠŸèƒ½ç»„ä»¶ï¼š è‡ªå®šä¹‰è§†å›¾æ§ä»¶ã€ä¸€äº›ç‰¹å®šåŠŸèƒ½çš„å°è£…ï¼ˆå¦‚å½•éŸ³ã€æ’­æ”¾éŸ³é¢‘å°è£…ï¼‰</li><li>ä¸šåŠ¡ç»„ä»¶ï¼šå„ç§ä¸šåŠ¡çº¿</li></ul><hr><blockquote><p>æœ¬ç¯‡å…ˆæ¥ä»‹ç»ä¸‹è¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨ï¼Œå»ºè®®æŒ‰é¡ºåºçœ‹å®Œä¹‹åï¼Œå›æ¥å†çœ‹ä¸€éæ­¥éª¤å½’çº³ï¼ŒåŠ æ·±äº†è§£ï¼Œå¦‚æœ‰ä¸è¶³ä¹‹å¤„ï¼Œæ¬¢è¿æŒ‡å‡ºï¼Œæ„Ÿè°¢ : )</p></blockquote><h2 id="æ­¥éª¤å½’çº³"><a href="#æ­¥éª¤å½’çº³" class="headerlink" title="æ­¥éª¤å½’çº³"></a>æ­¥éª¤å½’çº³</h2><ol><li><p>åˆ›å»ºè¿œç¨‹ç´¢å¼•åº“å’Œç§æœ‰åº“</p></li><li><p>å°†è¿œç¨‹ç´¢å¼•åº“æ·»åŠ åˆ°æœ¬åœ° <code>pod repo add ç´¢å¼•åº“åç§° ç´¢å¼•åº“åœ°å€</code></p></li><li><p>åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªpodæ¨¡æ¿åº“ <code>pod lib create ç»„ä»¶åç§°</code><br>å°†æ¡†æ¶çš„æ ¸å¿ƒä»£ç æ·»åŠ åˆ°Classesç›®å½•ä¸‹<br>æœ¬åœ°å®‰è£…æµ‹è¯•æ ¸å¿ƒä»£ç æ˜¯å¦å¯ç”¨ <code>pod install</code><br>ä¿®æ”¹Specæè¿°æ–‡ä»¶<br>å°†ä¿®æ”¹å¥½çš„æ¨¡æ¿åº“ä¸Šä¼ è‡³è¿œç¨‹ç§æœ‰åº“</p></li><li><p>ä¸Šä¼ ä»£ç å’Œæ‰“æ ‡ç­¾<br><br><code>git init</code><br><br><code>git add .</code><br><br><code>git commit -m &quot;æäº¤æè¿°&quot;</code><br><br><code>git remote add origin è¿œç¨‹ç§æœ‰åº“åœ°å€</code><br><br><code>git push origin master</code><br><br><code>git tag &#39;0.1.0&#39;</code><br><br><code>git push --tags</code></p></li><li><p>æäº¤specè‡³ç§æœ‰ç´¢å¼•åº“<br><br><code>pod lib lint --private</code><br><br><code>pod spec lint --private</code><br><br><code>pod repo push ç´¢å¼•åº“çš„æœ¬åœ°åç§° xx.podspec</code></p></li><li><p>ä½¿ç”¨<br><br><code>source å®˜æ–¹ç´¢å¼•åº“url</code><br><br><code>source ç§æœ‰ç´¢å¼•åº“url</code><br><br><code>pod &#39;ç»„ä»¶åç§°&#39;</code><br><br><code>pod install</code></p></li></ol><p><strong>æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥å®æˆ˜å¦‚ä½•åˆ›å»ºå’Œä½¿ç”¨ç§æœ‰åº“</strong></p><h2 id="ä¸€ã€åˆ›å»ºç§æœ‰ç´¢å¼•åº“"><a href="#ä¸€ã€åˆ›å»ºç§æœ‰ç´¢å¼•åº“" class="headerlink" title="ä¸€ã€åˆ›å»ºç§æœ‰ç´¢å¼•åº“"></a>ä¸€ã€åˆ›å»ºç§æœ‰ç´¢å¼•åº“</h2><p>è¿™é‡Œä»¥ç äº‘ä¸ºä¾‹ï¼Œåˆ›å»ºä¸€ä¸ªLXFSpecsçš„ç§æœ‰ç´¢å¼•åº“ï¼Œè¿™ç©æ„çš„ä½œç”¨å¦‚å…¶åï¼Œå°±æ˜¯ç”¨æ¥ç´¢å¼•çš„</p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/ç§æœ‰ç´¢å¼•åº“.png" alt="ç§æœ‰ç´¢å¼•åº“"></p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/LXFSpecs.png" alt="LXFSpecs"></p><h2 id="äºŒã€æœ¬åœ°æ·»åŠ ç§æœ‰ç´¢å¼•åº“"><a href="#äºŒã€æœ¬åœ°æ·»åŠ ç§æœ‰ç´¢å¼•åº“" class="headerlink" title="äºŒã€æœ¬åœ°æ·»åŠ ç§æœ‰ç´¢å¼•åº“"></a>äºŒã€æœ¬åœ°æ·»åŠ ç§æœ‰ç´¢å¼•åº“</h2><h3 id="1ã€æŸ¥çœ‹æœ¬åœ°ç´¢å¼•åº“"><a href="#1ã€æŸ¥çœ‹æœ¬åœ°ç´¢å¼•åº“" class="headerlink" title="1ã€æŸ¥çœ‹æœ¬åœ°ç´¢å¼•åº“"></a>1ã€æŸ¥çœ‹æœ¬åœ°ç´¢å¼•åº“</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod repo</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/æŸ¥çœ‹æœ¬åœ°ç´¢å¼•åº“.png" alt="æŸ¥çœ‹æœ¬åœ°ç´¢å¼•åº“"></p><p>å¦‚å›¾ï¼Œç›®å‰æœ¬åœ°ä»…æœ‰githubä¸Šçš„é‚£ä¸ªå…¬æœ‰ç´¢å¼•åº“</p><h3 id="2ã€æ·»åŠ ç§æœ‰ç´¢å¼•åº“"><a href="#2ã€æ·»åŠ ç§æœ‰ç´¢å¼•åº“" class="headerlink" title="2ã€æ·»åŠ ç§æœ‰ç´¢å¼•åº“"></a>2ã€æ·»åŠ ç§æœ‰ç´¢å¼•åº“</h3><p>å°†æˆ‘ä»¬åˆšåˆšæ–°å»ºçš„ç§æœ‰ç´¢å¼•åº“LXFSpecsæ·»åŠ åˆ°æœ¬åœ°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; pod repo add ç´¢å¼•åº“åç§° ç´¢å¼•åº“åœ°å€</span><br><span class="line">pod repo add LXFSpecs https:&#x2F;&#x2F;gitee.com&#x2F;LinXunFeng&#x2F;LXFSpecs.git</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/æ·»åŠ ç§æœ‰ç´¢å¼•åº“.png" alt=""></p><p>ç°åœ¨æœ¬åœ°å°±æœ‰ä¸¤ä¸ªç´¢å¼•åº“ï¼Œå¥½ï¼Œç´¢å¼•åº“çš„äº‹æƒ…å°±å…ˆæ”¾ä¸€è¾¹å»äº†ï½</p><h2 id="ä¸‰ã€åˆ›å»ºç»„ä»¶åº“"><a href="#ä¸‰ã€åˆ›å»ºç»„ä»¶åº“" class="headerlink" title="ä¸‰ã€åˆ›å»ºç»„ä»¶åº“"></a>ä¸‰ã€åˆ›å»ºç»„ä»¶åº“</h2><p>ç äº‘ä¸Šçš„åˆ›å»ºæ“ä½œåŒä¸Šï¼Œè¿™é‡Œä»¥LXFBaseä¸ºä¾‹ï¼Œåˆ›å»ºåŸºç¡€ç»„ä»¶åº“<br><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/LXFBase.png" alt="LXFBase"></p><h3 id="1ã€å¿«é€Ÿåˆ›å»ºæ¨¡ç‰ˆåº“"><a href="#1ã€å¿«é€Ÿåˆ›å»ºæ¨¡ç‰ˆåº“" class="headerlink" title="1ã€å¿«é€Ÿåˆ›å»ºæ¨¡ç‰ˆåº“"></a>1ã€å¿«é€Ÿåˆ›å»ºæ¨¡ç‰ˆåº“</h3><p>åˆ°åˆé€‚çš„ä½ç½®åˆ›å»ºä¸€ä¸ªä¸ç»„ä»¶åç›¸åŒçš„æ–‡ä»¶å¤¹ï¼Œcdè¿›å»åï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; pod lib create ç»„ä»¶å</span><br><span class="line">pod lib create LXFBase</span><br></pre></td></tr></table></figure><br><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/å¿«é€Ÿåˆ›å»ºæ¨¡ç‰ˆåº“.png" alt=""></p><p>è¿™é‡Œä¼šè®©ä½ é…ç½®ä¸€äº›ä¿¡æ¯ï¼Œæ ¹æ®è‡ªå·±çš„æƒ…å†µè‡ªè¡Œé…ç½®å³å¯ã€‚</p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/å¿«é€Ÿåˆ›å»ºæ¨¡ç‰ˆåº“-é…ç½®.png" alt="é…ç½®"></p><h3 id="2ã€æ·»åŠ ç»„ä»¶å†…å®¹"><a href="#2ã€æ·»åŠ ç»„ä»¶å†…å®¹" class="headerlink" title="2ã€æ·»åŠ ç»„ä»¶å†…å®¹"></a>2ã€æ·»åŠ ç»„ä»¶å†…å®¹</h3><p>åˆ›å»ºå®Œæˆåä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æ‰“å¼€ç›¸åº”çš„Exampleé¡¹ç›®ï¼ŒLXFBaseç›®å½•ä¸­ä¼šå‡ºç°å¦‚å›¾è¿™äº›æ–‡ä»¶ï¼Œæˆ‘ä»¬æŠŠåŸºç¡€ç»„ä»¶ç›¸å…³çš„ä¸œè¥¿ä¸¢åˆ°Classesæ–‡ä»¶å¤¹ä¸­ï¼Œå¹¶ä¸”æŠŠ<code>ReplaceMe.m</code>æ–‡ä»¶åˆ é™¤</p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/ç›®å½•ç»“æ„.png" alt="ç›®å½•ç»“æ„"></p><p>é»˜è®¤Classesæ–‡ä»¶å¤¹ä¸­å­˜æ”¾çš„æ–‡ä»¶å°±æ˜¯pod installæ—¶è¦ä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶ï¼Œå½“ç„¶å¯ä»¥é€šè¿‡ä¿®æ”¹specæ–‡ä»¶çš„é…ç½®æ¥æ›´æ”¹ä½ç½®</p><h3 id="3ã€å®‰è£…ä¸æµ‹è¯•æœ¬åœ°åº“"><a href="#3ã€å®‰è£…ä¸æµ‹è¯•æœ¬åœ°åº“" class="headerlink" title="3ã€å®‰è£…ä¸æµ‹è¯•æœ¬åœ°åº“"></a>3ã€å®‰è£…ä¸æµ‹è¯•æœ¬åœ°åº“</h3><p>åœ¨Exampleé¡¹ç›®çš„Podfileæ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ°<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod &#39;LXFBase&#39;, :path &#x3D;&gt; &#39;..&#x2F;&#39;</span><br></pre></td></tr></table></figure><br>æ¨¡æ¿åº“å·²ç»é»˜è®¤å¸®æˆ‘ä»¬åœ¨Podfileä¸­æŒ‡å®šäº†LXFBase.podspecçš„ä½ç½®ï¼Œä½¿ç»„ä»¶LXFBaseå¯ä»¥æ­£å¸¸å®‰è£…ä½¿ç”¨å’Œæ–¹ä¾¿æµ‹è¯•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod install</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/å®‰è£…ä¸æµ‹è¯•æœ¬åœ°åº“-podinstall.png" alt="pod install"></p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/å®‰è£…ä¸æµ‹è¯•æœ¬åœ°åº“-pod.png" alt="pod"></p><p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å·²ç»å°†æœ¬åœ°çš„ç»„ä»¶æ·»åŠ è¿›Exampleä¸­äº†ï¼Œç°åœ¨å¯ä»¥å°½æƒ…åœ°åšä½ æƒ³åšçš„æµ‹è¯•ï¼Œç¡®ä¿ç»„ä»¶çš„å¯ç”¨ã€‚</p><p>æµ‹è¯•ç»„ä»¶æ²¡æœ‰é—®é¢˜åï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å°±è¦å°†podspecæ–‡ä»¶ä¸Šä¼ è‡³ç§æœ‰ç´¢å¼•åº“ï¼Œä¸è¿‡åœ¨æ­¤ä¹‹å‰ï¼Œéœ€è¦å¯¹specè¿›è¡Œä¿®æ”¹ã€‚</p><h3 id="4ã€-ä¿®æ”¹Spec"><a href="#4ã€-ä¿®æ”¹Spec" class="headerlink" title="4ã€ ä¿®æ”¹Spec"></a>4ã€ ä¿®æ”¹Spec</h3><p>å…·ä½“çš„é…ç½®è¯´æ˜å¯ä»¥å‚è€ƒ<a href="https://juejin.im/post/5ac446b8f265da238d50ecfa" target="_blank" rel="noopener">Cocoapods-åˆ›å»ºç¬¬ä¸‰æ–¹æ¡†æ¶</a></p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/ä¿®æ”¹Spec-podspec.png" alt="podspec"></p><p>ä¸»è¦çš„ä¿®æ”¹å†…å®¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  s.name             &#x3D; &#39;LXFBase&#39;</span><br><span class="line">  s.version          &#x3D; &#39;0.1.0&#39;</span><br><span class="line">  s.summary          &#x3D; &#39;LXFBase.&#39;</span><br><span class="line">  s.description      &#x3D; &lt;&lt;-DESC</span><br><span class="line">LXFBaseæ˜¯åŸºç¡€ç»„ä»¶åº“ï¼ŒåŒ…æ‹¬åˆ†ç±»å’Œå¸¸ç”¨å·¥å…·</span><br><span class="line">                       DESC</span><br><span class="line">  s.homepage         &#x3D; &#39;https:&#x2F;&#x2F;gitee.com&#x2F;LinXunFeng&#x2F;LXFBase&#39;</span><br><span class="line">  s.source           &#x3D; &#123; :git &#x3D;&gt; &#39;https:&#x2F;&#x2F;gitee.com&#x2F;LinXunFeng&#x2F;LXFBase.git&#39;, :tag &#x3D;&gt; s.version.to_s &#125;</span><br><span class="line">  s.source_files &#x3D; &#39;LXFBase&#x2F;Classes&#x2F;**&#x2F;*&#39;</span><br></pre></td></tr></table></figure><h2 id="å››ã€ä¸Šä¼ ç»„ä»¶ä»£ç "><a href="#å››ã€ä¸Šä¼ ç»„ä»¶ä»£ç " class="headerlink" title="å››ã€ä¸Šä¼ ç»„ä»¶ä»£ç "></a>å››ã€ä¸Šä¼ ç»„ä»¶ä»£ç </h2><h3 id="1ã€å°†ä»£ç æäº¤åˆ°ç»„ä»¶ä»“åº“"><a href="#1ã€å°†ä»£ç æäº¤åˆ°ç»„ä»¶ä»“åº“" class="headerlink" title="1ã€å°†ä»£ç æäº¤åˆ°ç»„ä»¶ä»“åº“"></a>1ã€å°†ä»£ç æäº¤åˆ°ç»„ä»¶ä»“åº“</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m &#39;firstCommit&#39;</span><br><span class="line">git remote add origin https:&#x2F;&#x2F;gitee.com&#x2F;LinXunFeng&#x2F;LXFBase.git</span><br><span class="line">&#x2F;&#x2F; ç¬¬ä¸€æ¬¡pushå¦‚æœæŠ¥é”™çš„è¯å¯ä»¥åŠ ä¸Š-f</span><br><span class="line">&#x2F;&#x2F; git push -f origin master</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure><h3 id="2ã€æ‰“æ ‡ç­¾"><a href="#2ã€æ‰“æ ‡ç­¾" class="headerlink" title="2ã€æ‰“æ ‡ç­¾"></a>2ã€æ‰“æ ‡ç­¾</h3><p>æ ‡ç­¾<code>0.1.0</code>ä¸specä¸­çš„<code>s.version</code>ä¿æŒä¸€è‡´<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git tag &#39;0.1.0&#39;</span><br><span class="line">git push --tags</span><br></pre></td></tr></table></figure></p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/ä¸Šä¼ ç»„ä»¶ä»£ç -tag.png" alt="tag"></p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/ä¸Šä¼ ç»„ä»¶ä»£ç -æ ‡ç­¾ä¸Šä¼ æˆåŠŸ.png" alt="æ ‡ç­¾ä¸Šä¼ æˆåŠŸ"></p><h2 id="äº”ã€æäº¤podspecåˆ°ç§æœ‰ç´¢å¼•åº“"><a href="#äº”ã€æäº¤podspecåˆ°ç§æœ‰ç´¢å¼•åº“" class="headerlink" title="äº”ã€æäº¤podspecåˆ°ç§æœ‰ç´¢å¼•åº“"></a>äº”ã€æäº¤podspecåˆ°ç§æœ‰ç´¢å¼•åº“</h2><p>åœ¨ä¸Šä¼ specæ–‡ä»¶å‰æˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªéªŒè¯æ¥èŠ‚çœæ—¶é—´ï¼Œä¸ç„¶æ¯æ¬¡éƒ½æ¨é€å¾ˆä¹…ç»“æœè¿˜æ˜¯éªŒè¯å¤±è´¥ï¼Œä¼šæ°”æ­»äººçš„ï½</p><h3 id="1ã€æœ¬åœ°éªŒè¯Specçš„å¿…å¡«å­—æ®µ"><a href="#1ã€æœ¬åœ°éªŒè¯Specçš„å¿…å¡«å­—æ®µ" class="headerlink" title="1ã€æœ¬åœ°éªŒè¯Specçš„å¿…å¡«å­—æ®µ"></a>1ã€æœ¬åœ°éªŒè¯Specçš„å¿…å¡«å­—æ®µ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; æœ¬åœ°éªŒè¯ä¸ä¼šéªŒè¯ s.source ä¸­çš„tag</span><br><span class="line">pod lib lint</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/æäº¤podspecåˆ°ç§æœ‰ç´¢å¼•åº“-podLibLint.png" alt="pod lib lint"></p><h3 id="2ã€è¿œç¨‹éªŒè¯"><a href="#2ã€è¿œç¨‹éªŒè¯" class="headerlink" title="2ã€è¿œç¨‹éªŒè¯"></a>2ã€è¿œç¨‹éªŒè¯</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; è¿œç¨‹éªŒè¯ä¼šéªŒè¯ s.source ä¸­çš„tagï¼Œå¦‚æœæ­¤æ—¶æ²¡æœ‰æ‰“ä¸Šç›¸åº”çš„æ ‡ç­¾åˆ™ä¼šæŠ¥é”™</span><br><span class="line">pod spec lint</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ åˆšæ‰æ²¡æœ‰æ‰“æ ‡ç­¾å¹¶ä¸Šä¼ è‡³è¿œç¨‹ç§æœ‰åº“å°±æ¥è¿›è¡Œè¿œç¨‹éªŒè¯ï¼Œè‚¯å®šæ˜¯ä¼šæŠ¥é”™çš„</p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/æäº¤podspecåˆ°ç§æœ‰ç´¢å¼•åº“-tagError.png" alt="tag Error"></p><p>åœ¨æ‰“å®Œå¹¶ä¸Šä¼ tagåå†è¿›è¡Œè¿œç¨‹éªŒè¯ï¼Œå°±ä¼šéªŒè¯æˆåŠŸäº†ï¼ŒéªŒè¯æˆåŠŸåæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œï¼šæäº¤podspecæ–‡ä»¶åˆ°ç´¢å¼•åº“</p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/æäº¤podspecåˆ°ç§æœ‰ç´¢å¼•åº“-podSpecLint.png" alt="pod spec lint"></p><ul><li>éªŒè¯ç§æœ‰åº“æç¤º<br>å¦‚æœéªŒè¯çš„æ˜¯ç§æœ‰åº“ï¼Œåˆ™åœ¨åé¢åŠ ä¸Š<code>--private</code>,å¦åˆ™ä¼šæœ‰è­¦å‘Šï¼Œä½ å¯ä»¥é€‰æ‹©<code>--allow-warnings</code>æ¥å¿½ç•¥è¯¥è­¦å‘Š<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pod lib lint --private</span><br><span class="line">pod spec lint --private</span><br></pre></td></tr></table></figure></li></ul><h3 id="3ã€æäº¤podspec"><a href="#3ã€æäº¤podspec" class="headerlink" title="3ã€æäº¤podspec"></a>3ã€æäº¤podspec</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; pod repo push ç§æœ‰ç´¢å¼•åº“åç§° specåç§°.podspec </span><br><span class="line">pod repo push LXFSpecs LXFBase.podspec</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„æ“ä½œè¿‡ç¨‹ï¼šå…ˆå°†æˆ‘ä»¬çš„ä»£ç ç›´æ¥pushåˆ°æœ¬åœ°ç´¢å¼•åº“LXFSpecsï¼Œæ¨é€åä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åŒæ­¥åˆ°è¿œç¨‹ç´¢å¼•åº“</p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/æäº¤podspecåˆ°ç§æœ‰ç´¢å¼•åº“-æäº¤æˆåŠŸ.png" alt="æäº¤æˆåŠŸ"></p><p>å†æ¥çœ‹çœ‹ç äº‘ä¸Šçš„ç§æœ‰ç´¢å¼•åº“LXFSpecs</p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/æäº¤podspecåˆ°ç§æœ‰ç´¢å¼•åº“-LXFBase.podspec.png" alt="LXFBase.podspec"></p><p>æ¥æµ‹è¯•ä¸‹æœç´¢æˆ‘ä»¬çš„ç»„ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod search &#39;LXFBase&#39;</span><br></pre></td></tr></table></figure><br><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/æäº¤podspecåˆ°ç§æœ‰ç´¢å¼•åº“-æœç´¢æˆåŠŸ.png" alt="æœç´¢æˆåŠŸ"></p><h2 id="å…­ã€ä½¿ç”¨ç§æœ‰åº“"><a href="#å…­ã€ä½¿ç”¨ç§æœ‰åº“" class="headerlink" title="å…­ã€ä½¿ç”¨ç§æœ‰åº“"></a>å…­ã€ä½¿ç”¨ç§æœ‰åº“</h2><p>è¿™æ—¶æˆ‘ä»¬å¯ä»¥æ¥è¯•è¯•é€šè¿‡podå½¢å¼æ¥æ·»åŠ ç»„ä»¶LXFBaseï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®</p><h3 id="1ã€æ·»åŠ Podfileæ–‡ä»¶"><a href="#1ã€æ·»åŠ Podfileæ–‡ä»¶" class="headerlink" title="1ã€æ·»åŠ Podfileæ–‡ä»¶"></a>1ã€æ·»åŠ Podfileæ–‡ä»¶</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod init</span><br></pre></td></tr></table></figure><h3 id="2ã€åœ¨Podfileçš„æœ€é¡¶éƒ¨æ·»åŠ å¦‚ä¸‹æè¿°"><a href="#2ã€åœ¨Podfileçš„æœ€é¡¶éƒ¨æ·»åŠ å¦‚ä¸‹æè¿°" class="headerlink" title="2ã€åœ¨Podfileçš„æœ€é¡¶éƒ¨æ·»åŠ å¦‚ä¸‹æè¿°"></a>2ã€åœ¨Podfileçš„æœ€é¡¶éƒ¨æ·»åŠ å¦‚ä¸‹æè¿°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; ç¬¬äºŒè¡Œæ˜¯ä¸ºäº†ä¿è¯å…¬æœ‰åº“çš„æ­£å¸¸ä½¿ç”¨</span><br><span class="line">source &#39;https:&#x2F;&#x2F;gitee.com&#x2F;LinXunFeng&#x2F;LXFSpecs.git&#39;</span><br><span class="line">source &#39;https:&#x2F;&#x2F;github.com&#x2F;CocoaPods&#x2F;Specs.git&#39;</span><br></pre></td></tr></table></figure><h3 id="3ã€æ·»åŠ ä½¿ç”¨ç»„ä»¶LXFBase"><a href="#3ã€æ·»åŠ ä½¿ç”¨ç»„ä»¶LXFBase" class="headerlink" title="3ã€æ·»åŠ ä½¿ç”¨ç»„ä»¶LXFBase"></a>3ã€æ·»åŠ ä½¿ç”¨ç»„ä»¶LXFBase</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod &#39;LXFBase&#39;</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/ä½¿ç”¨ç§æœ‰åº“-LXFBase.png" alt=""></p><h3 id="4ã€å®‰è£…ç»„ä»¶"><a href="#4ã€å®‰è£…ç»„ä»¶" class="headerlink" title="4ã€å®‰è£…ç»„ä»¶"></a>4ã€å®‰è£…ç»„ä»¶</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod install</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/ä½¿ç”¨ç§æœ‰åº“-å®‰è£…æˆåŠŸ.png" alt="å®‰è£…æˆåŠŸ"><br><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/iOS-ç»„ä»¶åŒ–å¼€å‘ï¼ˆä¸€ï¼‰ï¼šè¿œç¨‹ç§æœ‰åº“çš„åŸºæœ¬ä½¿ç”¨/ä½¿ç”¨ç§æœ‰åº“-æˆåŠŸæ·»åŠ ç»„ä»¶å†…å®¹.png" alt="æˆåŠŸæ·»åŠ ç»„ä»¶å†…å®¹"></p>]]></content>
    
    
    <summary type="html">&lt;Excerpt in index | é¦–é¡µæ‘˜è¦&gt; 

&lt;p&gt;éšç€é¡¹ç›®åŠŸèƒ½çš„ä¸æ–­å¢åŠ ï¼Œè¶Šæ¥è¶Šå¤šçš„å¼€å‘äººå‘˜åŠ å…¥ï¼Œä¸šåŠ¡ä¸»çº¿ä¹Ÿéšä¹‹è¶Šæ¥è¶Šå¤šï¼Œé€ æˆè€¦åˆè¶Šæ¥è¶Šä¸¥é‡ï¼Œç¼–è¯‘è¶Šæ¥è¶Šæ…¢ï¼Œæµ‹è¯•ä¸ç‹¬ç«‹ç­‰ä¸€ç³»åˆ—é—®é¢˜ã€‚ä¸ºäº†è§£å†³æ­¤ç±»æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘åˆ°ä½¿ç”¨ç»„ä»¶åŒ–å¼€å‘&lt;/p&gt;
&lt;p&gt;+</summary>
    
    
    
    <category term="iOS" scheme="http://linxunfeng.top/categories/iOS/"/>
    
    
    <category term="Git" scheme="http://linxunfeng.top/tags/Git/"/>
    
    <category term="GitHub" scheme="http://linxunfeng.top/tags/GitHub/"/>
    
    <category term="Cocoapods" scheme="http://linxunfeng.top/tags/Cocoapods/"/>
    
    <category term="iOS" scheme="http://linxunfeng.top/tags/iOS/"/>
    
    <category term="ç»„ä»¶åŒ–" scheme="http://linxunfeng.top/tags/%E7%BB%84%E4%BB%B6%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>Cocoapods-åˆ›å»ºç¬¬ä¸‰æ–¹æ¡†æ¶</title>
    <link href="http://linxunfeng.top/2018/04/06/Cocoapods-%E5%88%9B%E5%BB%BA%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A1%86%E6%9E%B6/"/>
    <id>http://linxunfeng.top/2018/04/06/Cocoapods-%E5%88%9B%E5%BB%BA%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A1%86%E6%9E%B6/</id>
    <published>2018-04-06T19:10:01.000Z</published>
    <updated>2020-08-22T14:18:43.876Z</updated>
    
    <content type="html"><![CDATA[<p><Excerpt in index | é¦–é¡µæ‘˜è¦><br>å°†æ¡†æ¶ä¸­çš„ä¸»è¦æ–‡ä»¶æ”¾å…¥åˆ°ä¸€ä¸ªæŒ‡å®šæ–‡ä»¶å¤¹ä¸­ï¼Œæ¯”å¦‚å«Classesæˆ–è€…Libéƒ½å¯ä»¥</p><p>+<a id="more"></a></p><The rest of contents | ä½™ä¸‹å…¨æ–‡><h2 id="ä¸€ã€ä¸Šä¼ é¡¹ç›®åˆ°github"><a href="#ä¸€ã€ä¸Šä¼ é¡¹ç›®åˆ°github" class="headerlink" title="ä¸€ã€ä¸Šä¼ é¡¹ç›®åˆ°github"></a>ä¸€ã€ä¸Šä¼ é¡¹ç›®åˆ°github</h2><p>å°†æ¡†æ¶ä¸­çš„ä¸»è¦æ–‡ä»¶æ”¾å…¥åˆ°ä¸€ä¸ªæŒ‡å®šæ–‡ä»¶å¤¹ä¸­ï¼Œæ¯”å¦‚å«Classesæˆ–è€…Libéƒ½å¯ä»¥<br><img src= "/img/loading.gif" data-src="/images/2018/04/Cocoapods-åˆ›å»ºç¬¬ä¸‰æ–¹æ¡†æ¶/ç›®å½•ç»“æ„.png" alt="ç›®å½•ç»“æ„"></p><ul><li>æ‰“å¼€ç»ˆç«¯ï¼Œcdåˆ°æ¡†æ¶ç›®å½• </li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;Users&#x2F;lxf&#x2F;xxxx&#x2F;LXFPhotoHelper</span><br></pre></td></tr></table></figure><ul><li>åˆå§‹åŒ–ä»“åº“</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure><ul><li>å°†å½“å‰ç›®å½•æ·»åŠ åˆ°ç¼“å­˜åŒº</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br></pre></td></tr></table></figure><ul><li>æäº¤åˆ°æœ¬åœ°ä»“åº“</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m &#39;æè¿°&#39;</span><br></pre></td></tr></table></figure><ul><li>æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin https:&#x2F;&#x2F;github.com&#x2F;LinXunFeng&#x2F;xxx.git</span><br></pre></td></tr></table></figure><ul><li>æäº¤åˆ°è¿œç¨‹ä»“åº“</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin master</span><br></pre></td></tr></table></figure><p>å¦‚æœå‡ºç°å¦‚ä¸‹æç¤º<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fatal: unable to access &#39;https:&#x2F;&#x2F;github.com&#x2F;xxx&#x2F;xxx.git&#x2F;&#39;: The requested URL returned error: 403</span><br></pre></td></tr></table></figure><br>åŸå› æ˜¯æœ¬åœ°ç¼“å­˜äº†ç”¨æˆ·åå’Œå¯†ç <br>ç¼–è¾‘.gitç›®å½•ä¸‹çš„configæ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi .git&#x2F;config</span><br></pre></td></tr></table></figure><br>æ‰¾åˆ°urlé‚£ä¸€è¡Œï¼Œåœ¨github.comå‰åŠ ä¸Šç”¨æˆ·ååä¿å­˜ï¼Œå†é‡æ–°æ‰§è¡Œæ¨é€æ“ä½œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url &#x3D; https:&#x2F;&#x2F;LinXunFeng@github.com&#x2F;LinXunFeng&#x2F;xxx.git</span><br></pre></td></tr></table></figure></p><ul><li>æ‰“æ ‡ç­¾</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; å…·ä½“è¯´æ˜å¯ä»¥æ‰§è¡Œ&#96;git tag --help&#96;åæŸ¥çœ‹</span><br><span class="line">&#x2F;&#x2F; git tag -a &#39;ç‰ˆæœ¬å·&#39; -m &#39;tagæè¿°&#39;</span><br><span class="line">&#x2F;&#x2F; æ³¨æ„ä¸€ä¸‹ï¼Œè¿™é‡Œæ‰“çš„æ ‡ç­¾åªæ˜¯åœ¨æœ¬åœ°</span><br><span class="line">git tag &#39;0.0.1&#39;</span><br></pre></td></tr></table></figure><ul><li>æ¨ç€æ‰€æœ‰æ ‡ç­¾è‡³è¿œç¨‹ä»“åº“</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; åªæ¨ç€æŒ‡å®šç‰ˆæœ¬</span><br><span class="line">&#x2F;&#x2F; git push origin ç‰ˆæœ¬å· </span><br><span class="line">git push --tags</span><br></pre></td></tr></table></figure><h2 id="äºŒã€åˆ›å»ºå¹¶ä¿®æ”¹podspecæ–‡ä»¶"><a href="#äºŒã€åˆ›å»ºå¹¶ä¿®æ”¹podspecæ–‡ä»¶" class="headerlink" title="äºŒã€åˆ›å»ºå¹¶ä¿®æ”¹podspecæ–‡ä»¶"></a>äºŒã€åˆ›å»ºå¹¶ä¿®æ”¹podspecæ–‡ä»¶</h2><ul><li>åˆ›å»ºSpecæ–‡ä»¶<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; åç§°ä¸€èˆ¬ä¸å·¥ç¨‹åç§°ä¿æŒä¸€è‡´</span><br><span class="line">pod spec create æ¡†æ¶åç§°</span><br></pre></td></tr></table></figure></li></ul><p><img src= "/img/loading.gif" data-src="/images/2018/04/Cocoapods-åˆ›å»ºç¬¬ä¸‰æ–¹æ¡†æ¶/podspecæ–‡ä»¶.png" alt="podspecæ–‡ä»¶"></p><ul><li>ä¿®æ”¹Specæ–‡ä»¶<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">s.name         &#x3D; &quot;LXFPhotoHelperï¼ˆä»“åº“åç§°ï¼‰&quot;</span><br><span class="line">s.version      &#x3D; &quot;0.0.1ï¼ˆç‰ˆæœ¬å·ï¼Œè¿™é‡Œè·Ÿä¸‹é¢s.sourceä¸­çš„tagæœ‰å…³ï¼‰&quot;</span><br><span class="line">s.summary      &#x3D; &quot;å¯¹ä½ è‡ªå·±ä»“åº“çš„ç®€å•æè¿°ï¼Œä¸è¦å†™å¤ªå¤šå­—&quot;</span><br><span class="line">s.description  &#x3D; &quot;è¿™ä¸ªæ˜¯è¯¦ç»†æè¿°ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œæ–‡å­—çš„é•¿åº¦éœ€è¦æ¯”  </span><br><span class="line">s.summaryçš„è¦é•¿ï¼Œä¸ç„¶ä¼šå‡ºç°è­¦å‘Š&quot;</span><br><span class="line">s.homepage     &#x3D; &quot;ä»“åº“é¦–é¡µåœ°å€ï¼Œå¦‚https:&#x2F;&#x2F;github.com&#x2F;LinXunFeng&#x2F;LXFPhotoHelper&quot;</span><br><span class="line">s.license      &#x3D; &quot;MIT&quot;</span><br><span class="line">s.author       &#x3D; &#123; &quot;LinXunFeng&quot; &#x3D;&gt; &quot;598600855@qq.com&quot; &#125;</span><br><span class="line"># sourceå­˜æ”¾çš„åœ°å€æ˜¯ä»£ç çš„çœŸæ­£åœ°å€</span><br><span class="line">s.source       &#x3D; &#123; :git &#x3D;&gt; &quot;ä»“åº“å¯¹åº”çš„gitåœ°å€ï¼Œå¦‚https:&#x2F;&#x2F;github.com&#x2F;LinXunFeng&#x2F;LXFPhotoHelper.git&quot;, :tag &#x3D;&gt; &quot;#&#123;s.version&#125;&quot; &#125;</span><br><span class="line"># pod installæ—¶çœŸæ­£ä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶è·¯å¾„ï¼Œè¿™é‡ŒæŒ‡å®šçš„æ˜¯ä½ ä»“åº“ä¸‹çš„Classesç›®å½•ä¸­çš„æ‰€æœ‰.hå’Œ.mæ–‡ä»¶ï¼ˆå¡«å†™çš„æ˜¯ç›¸å¯¹åœ°å€ï¼‰</span><br><span class="line"># ** é€šé…ç›®å½•</span><br><span class="line">s.source_files  &#x3D; &quot;Classes&quot;, &quot;Classes&#x2F;**&#x2F;*.&#123;h,m&#125;&quot;</span><br><span class="line"></span><br><span class="line"># s.library &#x3D; &quot;sqlite3&quot; # æ¡†æ¶ä¾èµ–ç³»ç»Ÿçš„sqlite3</span><br></pre></td></tr></table></figure>ä¹Ÿå¯ä»¥ä¸Šå®˜ç½‘çš„æ‰‹å†Œã€<a href="https://guides.cocoapods.org/syntax/podspec.html" target="_blank" rel="noopener">Podspec Syntax Reference</a>ã€‘ä¸ŠæŸ¥çœ‹</li></ul><p>è¿™é‡Œéœ€è¦æˆ‘ä»¬æ³¨æ„çš„æ˜¯<code>s.version= &quot;0.0.1&quot;</code>ï¼Œè¿™é‡Œçš„ç‰ˆæœ¬å·è¦ä¸åˆšåˆšæ‰“çš„tagä¸€è‡´</p><h2 id="ä¸‰ã€æ³¨å†Œtrunk"><a href="#ä¸‰ã€æ³¨å†Œtrunk" class="headerlink" title="ä¸‰ã€æ³¨å†Œtrunk"></a>ä¸‰ã€æ³¨å†Œtrunk</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; --verbose æ‰“å°è¯¦æƒ…ä¿¡æ¯</span><br><span class="line">&#x2F;&#x2F; pod trunk register é‚®ç®± &#39;ä½ çš„åç§°&#39; --verbose</span><br><span class="line">pod trunk register 598600855@qq.com &#39;LinXunFeng&#39; --verbose</span><br></pre></td></tr></table></figure><p>ç„¶åå»éªŒè¯é‚®ç®±<br><img src= "/img/loading.gif" data-src="/images/2018/04/Cocoapods-åˆ›å»ºç¬¬ä¸‰æ–¹æ¡†æ¶/éªŒè¯æˆåŠŸ.png" alt="éªŒè¯æˆåŠŸ"><br>éªŒè¯æˆåŠŸåä¼šæç¤ºæˆ‘ä»¬å›åˆ°ç»ˆç«¯ï¼Œå¹¶æ•²å…¥<code>pod trunk push åç§°.podspec</code></p><h2 id="å››ã€ä¸Šä¼ Spec"><a href="#å››ã€ä¸Šä¼ Spec" class="headerlink" title="å››ã€ä¸Šä¼ Spec"></a>å››ã€ä¸Šä¼ Spec</h2><p>æ‰§è¡Œ<code>pod trunk push</code>åä¼šæœ‰ä¸€ä¸ªå®¡æ ¸çš„è¿‡ç¨‹ï¼Œå¦‚æœæç¤ºæ²¡æœ‰é€šè¿‡ï¼Œæœ‰ERRORå°±ä¿®æ”¹å¥½åé‡æ–°pushï¼Œå¦‚æœåªæ˜¯WARNå¯ä»¥é€‰æ‹©åœ¨<code>pod trunk push</code>åé¢åŠ ä¸Š<code>--allow-warnings</code>æ¥å¿½ç•¥å®ƒä»¬<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod trunk push LXFPhotoHelper.podspec --allow-warnings</span><br></pre></td></tr></table></figure></p><p>å¦‚æœå‡ºç°å¦‚ä¸‹ä¿¡æ¯ï¼Œåˆ™è¯´æ˜ä½ çš„æ¡†æ¶åå­—å·²è¢«å ç”¨ï¼Œå¾—é‡æ–°æ”¹ä¸ªåå­—ï½<br>æ‰€ä»¥ï¼Œåœ¨åˆ›å»ºä½ è‡ªå·±çš„cocoapodsä»“åº“æ—¶æœ€å¥½æ˜¯åˆ°<a href="https://cocoapods.org/" target="_blank" rel="noopener">cocoapods.org</a>ä¸Šå…ˆæŸ¥ä¸€ä¸‹æœ‰æ²¡æœ‰ç›¸åŒåå­—çš„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[!] You (xxx@qq.com) are not allowed to push new versions for this pod. The owners of this pod are yyy@qq.com.</span><br></pre></td></tr></table></figure></p><p>ä¸Šä¼ æˆåŠŸåä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æ›´æ–°æœ¬åœ°ä»“åº“ï¼Œå¦‚æœæ— æ³•æœç´¢åˆ°è‡ªå·±çš„æ¡†æ¶ï¼Œå¯ä»¥å…ˆåˆ æ‰æœ¬åœ°çš„ç´¢å¼•æ–‡ä»¶åå†æœç´¢ä¸€æ¬¡<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm ~&#x2F;Library&#x2F;Caches&#x2F;CocoaPods&#x2F;search_index.json</span><br></pre></td></tr></table></figure></p><p>å½“ä½¿ç”¨pod search å‘½ä»¤å¯ä»¥æœç´¢è‡ªå·±çš„æ¡†æ¶æ—¶, é‚£ä¹ˆå°±æ„å‘³ç€å®¡æ ¸é€šè¿‡äº†</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;Excerpt in index | é¦–é¡µæ‘˜è¦&gt;&lt;br&gt;å°†æ¡†æ¶ä¸­çš„ä¸»è¦æ–‡ä»¶æ”¾å…¥åˆ°ä¸€ä¸ªæŒ‡å®šæ–‡ä»¶å¤¹ä¸­ï¼Œæ¯”å¦‚å«Classesæˆ–è€…Libéƒ½å¯ä»¥&lt;/p&gt;
&lt;p&gt;+</summary>
    
    
    
    <category term="iOS" scheme="http://linxunfeng.top/categories/iOS/"/>
    
    
    <category term="Git" scheme="http://linxunfeng.top/tags/Git/"/>
    
    <category term="GitHub" scheme="http://linxunfeng.top/tags/GitHub/"/>
    
    <category term="Cocoapods" scheme="http://linxunfeng.top/tags/Cocoapods/"/>
    
  </entry>
  
  <entry>
    <title>Python-è™šæ‹Ÿç¯å¢ƒ</title>
    <link href="http://linxunfeng.top/2018/04/02/Python-%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/"/>
    <id>http://linxunfeng.top/2018/04/02/Python-%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/</id>
    <published>2018-04-02T16:26:22.000Z</published>
    <updated>2020-08-22T14:18:43.876Z</updated>
    
    <content type="html"><![CDATA[<Excerpt in index | é¦–é¡µæ‘˜è¦> <p>å¹³æ—¶åœ¨å¼€å‘æ—¶æˆ‘ä»¬éƒ½ä¼šå…ˆå®‰è£…ä¸€äº›pythonéœ€è¦çš„åŒ…ï¼Œæ¯æ¬¡å®‰è£…éƒ½ä¼šæœ‰ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¦‚æœä¸åŒé¡¹ç›®éœ€è¦ä¸åŒç‰ˆæœ¬çš„åŒ…æ—¶å°±ä¼šå‡ºç°ä¸å…¼å®¹çš„æƒ…å†µã€‚åº”å¯¹è¿™ç§æƒ…å†µæˆ‘ä»¬å°±å¯ä»¥æ­å»ºå¤šä¸ªè™šæ‹Ÿç¯å¢ƒæ¥åº”å¯¹ä¸åŒçš„ç¯å¢ƒéœ€æ±‚ï¼Œåœ¨è™šæ‹Ÿç¯å¢ƒä¸­æ­å»ºä¸€ä¸ªPythoné¡¹ç›®è¿è¡Œæ‰€éœ€è¦çš„é‚£äº›åŒ…ï¼Œå°†æ¥æ ¹æ®è¿è¡Œçš„é¡¹ç›®æ¥åˆ‡æ¢ä¸åŒç¯å¢ƒå³å¯</p><p>+<a id="more"></a></p><The rest of contents | ä½™ä¸‹å…¨æ–‡><blockquote><p>å¹³æ—¶åœ¨å¼€å‘æ—¶æˆ‘ä»¬éƒ½ä¼šå…ˆå®‰è£…ä¸€äº›pythonéœ€è¦çš„åŒ…ï¼Œæ¯æ¬¡å®‰è£…éƒ½ä¼šæœ‰ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¦‚æœä¸åŒé¡¹ç›®éœ€è¦ä¸åŒç‰ˆæœ¬çš„åŒ…æ—¶å°±ä¼šå‡ºç°ä¸å…¼å®¹çš„æƒ…å†µã€‚åº”å¯¹è¿™ç§æƒ…å†µæˆ‘ä»¬å°±å¯ä»¥æ­å»ºå¤šä¸ªè™šæ‹Ÿç¯å¢ƒæ¥åº”å¯¹ä¸åŒçš„ç¯å¢ƒéœ€æ±‚ï¼Œåœ¨è™šæ‹Ÿç¯å¢ƒä¸­æ­å»ºä¸€ä¸ªPythoné¡¹ç›®è¿è¡Œæ‰€éœ€è¦çš„é‚£äº›åŒ…ï¼Œå°†æ¥æ ¹æ®è¿è¡Œçš„é¡¹ç›®æ¥åˆ‡æ¢ä¸åŒç¯å¢ƒå³å¯</p></blockquote><p>æˆ‘ä»¬å¯ä»¥åœ¨å½“å‰ç”¨æˆ·çš„å®¶ç›®å½•ä¸­æ‰¾åˆ°ã€.virtualenvsã€‘æ–‡ä»¶å¤¹ï¼ŒæŸ¥çœ‹å½“å‰æ‰€æœ‰çš„è™šæ‹Ÿç¯å¢ƒ</p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/Python-è™šæ‹Ÿç¯å¢ƒ/virtualenvs.png" alt="virtualenvs"></p><h2 id="åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"><a href="#åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"></a>åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</h2><ul><li>åˆ›å»ºï¼šmkvirtualenv [è™šæ‹Ÿç¯å¢ƒåç§°]</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkvirtualenv lxfenv1</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/Python-è™šæ‹Ÿç¯å¢ƒ/mkvirtualenv.png" alt="å®‰è£…æˆåŠŸ"></p><p>æ³¨ï¼šåˆ›å»ºçš„è¿‡ç¨‹éœ€è¦è”ç½‘</p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/Python-è™šæ‹Ÿç¯å¢ƒ/ç›®å½•ç»“æ„.png" alt="ç›®å½•ç»“æ„"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Installing setuptools, pkg_resources, pip, wheel...done.</span><br></pre></td></tr></table></figure><p>åˆšåˆšå®‰è£…æ—¶æç¤ºå®‰è£…çš„è¿™äº›ä¸œè¥¿å°±å­˜æ”¾åœ¨ä½ åˆ›å»ºå¥½çš„è™šæ‹Ÿç¯å¢ƒä¸‹çš„ã€lib/python2.7/site-packages/ã€‘ç›®å½•ä¸­</p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/Python-è™šæ‹Ÿç¯å¢ƒ/libç›®å½•.png" alt="libç›®å½•"></p><ul><li>é€€å‡ºï¼šdeactivate<br>å½“æˆ‘ä»¬å®‰è£…å¥½è™šæ‹Ÿç¯å¢ƒåé»˜è®¤å°±ä½¿ç”¨äº†è¯¥è™šæ‹Ÿç¯å¢ƒï¼Œå¦‚å›¾æ ‡è¯†å¤„å¯ä»¥çœ‹å‡º</li></ul><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/Python-è™šæ‹Ÿç¯å¢ƒ/å½“å‰ç¯å¢ƒ.png" alt="å½“å‰ç¯å¢ƒ"></p><p>å¦‚æœä½ æƒ³é€€å‡ºå½“å‰çš„è™šæ‹Ÿç¯å¢ƒï¼Œæˆ–ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deactivate</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/Python-è™šæ‹Ÿç¯å¢ƒ/é€€å‡ºç¯å¢ƒ.png" alt="é€€å‡ºç¯å¢ƒ"></p><ul><li>è¿›å…¥ï¼šworkon [è™šæ‹Ÿç¯å¢ƒåç§°]</li></ul><p>ä½¿ç”¨æŒ‡å®šçš„è™šæ‹Ÿç¯å¢ƒåˆ™ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">workon lxfenv1</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/Python-è™šæ‹Ÿç¯å¢ƒ/workon.png" alt="workon"></p><ul><li>åˆ é™¤ï¼šrmvirtualenv [è™šæ‹Ÿç¯å¢ƒåç§°]</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rmvirtualenv lxfenv1</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…æ‹“å±•åŒ…"><a href="#å®‰è£…æ‹“å±•åŒ…" class="headerlink" title="å®‰è£…æ‹“å±•åŒ…"></a>å®‰è£…æ‹“å±•åŒ…</h2><ul><li>æŸ¥çœ‹å½“å‰å®‰è£…å¥½çš„åŒ…</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip list</span><br><span class="line">æˆ–è€…</span><br><span class="line">pip freeze</span><br></pre></td></tr></table></figure><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/Python-è™šæ‹Ÿç¯å¢ƒ/æŸ¥çœ‹å½“å‰å®‰è£…å¥½çš„åŒ….png" alt="æŸ¥çœ‹å½“å‰å®‰è£…å¥½çš„åŒ…"></p><p>ps: ä¸Šå›¾<code>pip list</code>ä¸­åˆ—å‡ºçš„å››ä¸ªåŒ…æ˜¯å®‰è£…è™šæ‹Ÿç¯å¢ƒå¿…å®šä¼šå®‰è£…çš„åŒ…<br>å¦‚å›¾ï¼Œ<code>pip list</code>ä¼šåˆ—å‡ºæ‰€æœ‰çš„åŒ…ï¼Œè€Œ<code>pip freeze</code>åªä¼šåˆ—å‡ºæ‰©å±•çš„åŒ…</p><ul><li>å®‰è£…æŒ‡å®šåŒ…<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install django&#x3D;&#x3D;1.8.2</span><br><span class="line"># &#x3D;&#x3D;1.8.2 ä¸ºæŒ‡å®šç‰ˆæœ¬å·ï¼Œä¸å†™åˆ™ç›´æ¥å®‰è£…æœ€æ–°çš„åŒ…</span><br></pre></td></tr></table></figure><strong>æ³¨ï¼š pip install xxx ä¼šè‡ªåŠ¨åˆ é™¤æ—§ç‰ˆæœ¬ï¼Œå†å®‰è£…æ–°ç‰ˆæœ¬</strong></li></ul><p>å¦‚æœä¸çŸ¥é“åŒ…åå¯ä»¥åˆ°<a href="https://pypi.python.org" target="_blank" rel="noopener">pypi</a>ä¸Šæœç´¢</p><p><img src= "/img/loading.gif" data-src="https://linxunfeng.github.io/images/2018/04/Python-è™šæ‹Ÿç¯å¢ƒ/å®‰è£…æŒ‡å®šçš„åŒ….png" alt="å®‰è£…æŒ‡å®šçš„åŒ…"></p>]]></content>
    
    
    <summary type="html">&lt;Excerpt in index | é¦–é¡µæ‘˜è¦&gt; 

&lt;p&gt;å¹³æ—¶åœ¨å¼€å‘æ—¶æˆ‘ä»¬éƒ½ä¼šå…ˆå®‰è£…ä¸€äº›pythonéœ€è¦çš„åŒ…ï¼Œæ¯æ¬¡å®‰è£…éƒ½ä¼šæœ‰ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¦‚æœä¸åŒé¡¹ç›®éœ€è¦ä¸åŒç‰ˆæœ¬çš„åŒ…æ—¶å°±ä¼šå‡ºç°ä¸å…¼å®¹çš„æƒ…å†µã€‚åº”å¯¹è¿™ç§æƒ…å†µæˆ‘ä»¬å°±å¯ä»¥æ­å»ºå¤šä¸ªè™šæ‹Ÿç¯å¢ƒæ¥åº”å¯¹ä¸åŒçš„ç¯å¢ƒéœ€æ±‚ï¼Œåœ¨è™šæ‹Ÿç¯å¢ƒä¸­æ­å»ºä¸€ä¸ªPythoné¡¹ç›®è¿è¡Œæ‰€éœ€è¦çš„é‚£äº›åŒ…ï¼Œå°†æ¥æ ¹æ®è¿è¡Œçš„é¡¹ç›®æ¥åˆ‡æ¢ä¸åŒç¯å¢ƒå³å¯&lt;/p&gt;
&lt;p&gt;+</summary>
    
    
    
    <category term="Python" scheme="http://linxunfeng.top/categories/Python/"/>
    
    
    <category term="python" scheme="http://linxunfeng.top/tags/python/"/>
    
  </entry>
  
</feed>
